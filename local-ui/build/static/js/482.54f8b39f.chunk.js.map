{"version":3,"file":"static/js/482.54f8b39f.chunk.js","mappings":"6JAOe,SAASA,EAAcC,GAAgC,IAA/B,MAAEC,EAAK,WAAEC,EAAU,MAAEC,GAAOH,EAC/D,MAAMI,GAAWC,EAAAA,EAAAA,QAAO,MAClBC,GAASD,EAAAA,EAAAA,QAAO,OACfE,EAAQC,IAAaC,EAAAA,EAAAA,UAAS,OAC9BC,EAAOC,IAAYF,EAAAA,EAAAA,UAAS,OAC5BG,EAASC,IAAcJ,EAAAA,EAAAA,WAAS,GAuFvC,OApFAK,EAAAA,EAAAA,WAAU,KACND,GAAW,GACXF,EAAS,MACT,MAAMI,EAAsB,OAAfb,EAAsB,OAAS,MAE5Cc,EAAAA,GAAIC,IAAI,sBAADC,OAAuBjB,EAAK,KAAAiB,OAAIH,IAClCI,KAAKC,IAEF,IAAIC,EAAMD,EAAIE,KAAKD,IACfA,EAAIE,WAAW,OAAMF,EAAML,EAAAA,GAAIQ,SAASC,QAAUJ,GACtDb,EAAUa,KAEbK,MAAMC,IACHhB,EAAS,6BACTE,GAAW,MAEpB,CAACZ,EAAOC,KAGXY,EAAAA,EAAAA,WAAU,KACN,IAAKP,EAAQ,OAEb,MAAMqB,EAAQxB,EAASyB,QAEjBC,EAAUA,KACZ,GAAIC,OAAOC,KAAOD,OAAOC,IAAIC,cAAe,CACpC3B,EAAOuB,SAASvB,EAAOuB,QAAQK,UAEnC,MAAMC,EAAM,IAAIJ,OAAOC,IAAI,CACvBI,cAAc,EACdC,gBAAgB,EAChBC,iBAAkB,KAGtBH,EAAII,WAAWhC,GACf4B,EAAIK,YAAYZ,GAEhBO,EAAIM,GAAGV,OAAOC,IAAIU,OAAOC,gBAAiB,KACtCf,EAAMgB,OAAOlB,MAAMC,GAAKkB,QAAQC,KAAK,iBAAkBnB,IACvDd,GAAW,KAGfsB,EAAIM,GAAGV,OAAOC,IAAIU,OAAOK,MAAO,CAACC,EAAO1B,KACpC,GAAIA,EAAK2B,MACL,OAAQ3B,EAAK4B,MACT,KAAKnB,OAAOC,IAAImB,WAAWC,cACvBjB,EAAIkB,YACJ,MACJ,KAAKtB,OAAOC,IAAImB,WAAWG,YACvBnB,EAAIoB,oBACJ,MACJ,QACIpB,EAAID,aAMpB5B,EAAOuB,QAAUM,CACrB,MAAWP,EAAM4B,YAAY,mCAEzB5B,EAAM6B,IAAMlD,EACZqB,EAAM8B,iBAAiB,iBAAkB,KACrC9B,EAAMgB,OACN/B,GAAW,OAMvB,GAAKkB,OAAOC,KAAsB,qBAARA,IAMtBF,QAN2C,CAC3C,MAAM6B,EAASC,SAASC,cAAc,UACtCF,EAAOF,IAAM,4DACbE,EAAOG,OAAShC,EAChB8B,SAASG,KAAKC,YAAYL,EAC9B,CAIA,MAAO,KACCrD,EAAOuB,SAASvB,EAAOuB,QAAQK,YAExC,CAAC3B,KAGA0D,EAAAA,EAAAA,MAAA,OAAK9D,OAAK+D,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAO/D,GAAK,IAAEgE,SAAU,WAAYC,WAAY,OAAQC,SAAU,WAAWC,SAAA,EACnFC,EAAAA,EAAAA,KAAA,SACIC,IAAKpE,EACLD,MAAO,CAAEsE,MAAO,OAAQC,OAAQ,OAAQC,UAAW,WACnDC,UAAQ,EACRC,OAAK,EACLC,aAAW,KAEblE,IAAYL,KAAYG,IACtB6D,EAAAA,EAAAA,KAAA,OAAKpE,MAAO,CAAEgE,SAAU,WAAYY,IAAK,EAAGC,KAAM,EAAGC,MAAO,EAAGC,OAAQ,EAAGC,QAAS,OAAQC,WAAY,SAAUC,eAAgB,SAAUC,MAAO,OAAQlB,WAAY,mBAAoBE,UACtLC,EAAAA,EAAAA,KAAA,OAAKgB,UAAU,UAASjB,SAAC,qBAGhC5D,IACG6D,EAAAA,EAAAA,KAAA,OAAKpE,MAAO,CAAEgE,SAAU,WAAYY,IAAK,EAAGC,KAAM,EAAGC,MAAO,EAAGC,OAAQ,EAAGC,QAAS,OAAQC,WAAY,SAAUC,eAAgB,SAAUC,MAAO,WAAYhB,SACzJ5D,MAKrB,C,+HChHA,MAAM8E,EAAiB,CACnBrB,SAAU,WACVM,MAAO,OACPC,OAAQ,OACRN,WAAY,OACZe,QAAS,OACTM,cAAe,SACfpB,SAAU,SACVqB,OAAQ,iBACRC,aAAc,GAGZC,EAAe,CACjBxB,WAAY,kBACZsB,OAAQ,kCACRJ,MAAO,wBACPK,aAAc,EACdlB,MAAO,GACPC,OAAQ,GACRS,QAAS,OACTC,WAAY,SACZC,eAAgB,SAChBQ,OAAQ,UACRC,YAAa,GAKjB,SAASC,EAAW/F,GAAW,IAAV,IAAEgG,GAAKhG,EACxB,MAAMiG,EAAeC,EAAAA,OAAa,MAC5BC,EAAYD,EAAAA,OAAa,OACxBE,EAAMC,IAAW5F,EAAAA,EAAAA,UAAS,CAAE6F,EAAG,EAAGC,EAAG,IA0D5C,OAvDAL,EAAAA,UAAgB,KACZ,MAAMM,EAAM,IAAIC,eAAeC,IAC3B,IAAK,MAAMC,KAASD,EAAS,CACzB,MAAM,MAAEjC,EAAK,OAAEC,GAAWiC,EAAMC,YAChCP,EAAQ,CAAEC,EAAGO,KAAKC,MAAMrC,GAAQ8B,EAAGM,KAAKC,MAAMpC,IAClD,IAGJ,OADIuB,EAAapE,SAAS2E,EAAIO,QAAQd,EAAapE,SAC5C,IAAM2E,EAAIQ,cAClB,IAGHd,EAAAA,UAAgB,KAAO,IAADe,EAAAC,EAClB,MAAMC,EAAShB,EAAUtE,QACzB,IAAKsF,GAAqB,IAAXf,EAAKE,EAAS,OAC7B,MAAMc,EAAMD,EAAOE,WAAW,MAE9BD,EAAIE,UAAU,EAAG,EAAGlB,EAAKE,EAAGF,EAAKG,GAGjC,MAAMgB,GAAqB,QAAbN,EAAAjB,EAAIwB,iBAAS,IAAAP,OAAA,EAAbA,EAAeM,QAAS,GAEjB,IAAjBA,EAAME,QAA6B,QAAjBP,EAAIlB,EAAIwB,iBAAS,IAAAN,GAAbA,EAAeQ,KACrCH,EAAMI,KAAK,CAAEC,OAAQ5B,EAAIwB,UAAUE,MA0BvCH,EAAMM,QAAQC,IACNA,EAAEF,QAxBQG,KACd,IAAKA,GAAsB,IAAfA,EAAIN,OAAc,OAC9BL,EAAIY,YAEJ,MAAMC,EAAKF,EAAI,GAAG,GAAK,EAAIA,EAAI,GAAG,GAAKA,EAAI,GAAG,GAAK3B,EAAKE,EAClD4B,EAAKH,EAAI,GAAG,GAAK,EAAIA,EAAI,GAAG,GAAKA,EAAI,GAAG,GAAK3B,EAAKG,EAExDa,EAAIe,OAAOF,EAAIC,GAEf,IAAK,IAAIE,EAAI,EAAGA,EAAIL,EAAIN,OAAQW,IAAK,CACjC,MAAMC,EAAIN,EAAIK,GAAG,GAAK,EAAIL,EAAIK,GAAG,GAAKL,EAAIK,GAAG,GAAKhC,EAAKE,EACjDgC,EAAIP,EAAIK,GAAG,GAAK,EAAIL,EAAIK,GAAG,GAAKL,EAAIK,GAAG,GAAKhC,EAAKG,EACvDa,EAAImB,OAAOF,EAAGC,EAClB,CAEAlB,EAAIoB,YACJpB,EAAIqB,UAAY,wBAChBrB,EAAIsB,YAAc,UAClBtB,EAAIuB,UAAY,EAChBvB,EAAIwB,OACJxB,EAAIyB,UAIUC,CAAShB,EAAEF,WAG9B,CAAC5B,EAAKI,KAGL7B,EAAAA,EAAAA,KAAA,OAAKC,IAAKyB,EAAc9F,MAAO,CAAEgE,SAAU,WAAYY,IAAK,EAAGC,KAAM,EAAGP,MAAO,OAAQC,OAAQ,OAAQqE,cAAe,OAAQC,OAAQ,GAAI1E,UACtIC,EAAAA,EAAAA,KAAA,UACIC,IAAK2B,EACL1B,MAAO2B,EAAKE,EACZ5B,OAAQ0B,EAAKG,EACbpG,MAAO,CAAEsE,MAAO,OAAQC,OAAQ,OAAQS,QAAS,YAIjE,CAGe,SAAS8D,EAAUC,GAAyE,IAAxE,IAAElD,EAAG,YAAEmD,EAAW,SAAEC,EAAQ,SAAEC,EAAQ,WAAEC,EAAU,QAAEC,EAAO,OAAEC,GAAQN,EACpG,MAAMO,GAAWC,EAAAA,EAAAA,OACVC,EAAOC,IAAYnJ,EAAAA,EAAAA,WAAS,IAC5BoJ,EAASC,IAAcrJ,EAAAA,EAAAA,UAAS,OAChCsJ,EAAaC,IAAkBvJ,EAAAA,EAAAA,UAAS,MAM/CyF,EAAAA,UAAgB,KACZ,MAAMK,EAAIA,IAAMyD,EAAe,MAE/B,OADAjI,OAAO2B,iBAAiB,QAAS6C,GAC1B,IAAMxE,OAAOkI,oBAAoB,QAAS1D,IAClD,IAEH,MA0BM2D,GAA6B,IAAflE,EAAImE,OAClBC,IAAWZ,GAASA,EAAOa,UAEjC,OACIpG,EAAAA,EAAAA,MAAA,OAAK9D,MAAOqF,EACR8E,aAAcA,IAAMV,GAAS,GAC7BW,aAAcA,IAAMX,GAAS,GAC7BY,cAjCmB7I,IACvBA,EAAE8I,iBACFT,EAAe,CAAE3B,EAAG1G,EAAE+I,MAAOpC,EAAG3G,EAAEgJ,SA+BGrG,SAAA,CAGhCyF,IACG9F,EAAAA,EAAAA,MAAA,OAAK9D,MAAO,CACRgE,SAAU,QAASY,IAAKgF,EAAYzB,EAAGtD,KAAM+E,EAAY1B,EACzDjE,WAAY,OAAQsB,OAAQ,iBAAkBC,aAAc,EAC5DiF,QAAS,QAAS5B,OAAQ,IAAM6B,SAAU,IAC1CC,UAAW,8BACbxG,SAAA,EACEL,EAAAA,EAAAA,MAAA,OACI9D,MAAO,CAAEyK,QAAS,WAAY/E,OAAQ,UAAWV,QAAS,OAAQC,WAAY,SAAU2F,IAAK,EAAGC,SAAU,GAAI1F,MAAO,QACrHgF,aAAe3I,GAAMA,EAAEsJ,OAAO9K,MAAMiE,WAAa,OACjDmG,aAAe5I,GAAMA,EAAEsJ,OAAO9K,MAAMiE,WAAa,cACjD8G,QAASA,IAAMzB,EAAS,gCAADvI,OAAiC8E,EAAImF,KAAM7G,SAAA,EAElEC,EAAAA,EAAAA,KAAC6G,EAAAA,GAAQ,CAACC,KAAM,GAAI/F,MAAM,SAAS,oCAEvCrB,EAAAA,EAAAA,MAAA,OACI9D,MAAO,CAAEyK,QAAS,WAAY/E,OAAQ,UAAWV,QAAS,OAAQC,WAAY,SAAU2F,IAAK,EAAGC,SAAU,GAAI1F,MAAO,QACrHgF,aAAe3I,GAAMA,EAAEsJ,OAAO9K,MAAMiE,WAAa,OACjDmG,aAAe5I,GAAMA,EAAEsJ,OAAO9K,MAAMiE,WAAa,cACjD8G,QAASA,IAAMzB,EAAS,gCAADvI,OAAiC8E,EAAImF,KAAM7G,SAAA,EAElEC,EAAAA,EAAAA,KAAC+G,EAAAA,GAAK,CAACD,KAAM,GAAI/F,MAAM,SAAS,iCAM5CrB,EAAAA,EAAAA,MAAA,OAAK9D,MAAO,CAAEoL,KAAM,EAAGpH,SAAU,WAAYC,WAAY,OAAQyB,OAAQ,UAAWpB,MAAO,QACvFyG,QAASA,KAAO/B,GAAeG,EAAWtD,GAAK1B,SAAA,CAE9C6E,GACG5E,EAAAA,EAAAA,KAACxE,EAAAA,EAAc,CACXE,MAAO+F,EAAImF,GACXjL,WAAW,KACXkJ,SAAUA,EACVjJ,MAAO,CAAEsE,MAAO,OAAQC,OAAQ,WAGpCH,EAAAA,EAAAA,KAACiH,EAAAA,EAAY,CACTvL,MAAO+F,EAAImF,GACXjL,WAAW,MACXkJ,SAAUA,EACVjJ,MAAO,CAAEsE,MAAO,OAAQC,OAAQ,QAChC+G,cAAeA,IAAMnC,EAAWtD,KAKvCuD,IAAWhF,EAAAA,EAAAA,KAACwB,EAAW,CAACC,IAAKA,KAG9B/B,EAAAA,EAAAA,MAAA,OAAK9D,MAAO,CACRgE,SAAU,WAAYe,OAAQ,EAAGF,KAAM,EAAGC,MAAO,EACjD2F,QAAS,EACTzF,QAAS,OAAQE,eAAgB,gBAAiBD,WAAY,WAC9DsG,QAAU/B,GAASR,EAAe,EAAI,EACtCwC,WAAY,eACZ5C,cAAgBY,GAASR,EAAe,OAAS,OACjDH,OAAQ,IACV1E,SAAA,EACEC,EAAAA,EAAAA,KAAA,OAAKpE,MAAO,CAAEgF,QAAS,OAAQ4F,IAAK,GAAIzG,UACpCC,EAAAA,EAAAA,KAAA,UAAQpE,MAAOyF,EAAcgG,MAAM,0BAA0BV,QAjFzDvJ,IACpBA,EAAEkK,kBACFpC,EAAS,mBAADvI,OAAoB8E,EAAImF,MA+EqE7G,UACjFC,EAAAA,EAAAA,KAACuH,EAAAA,GAAO,CAACT,KAAM,UAIvB9G,EAAAA,EAAAA,KAAA,OAAKpE,MAAO,CAAEgF,QAAS,OAAQ4F,IAAK,GAAIzG,UACpCC,EAAAA,EAAAA,KAAA,UAAQpE,MAAOyF,EAAcgG,MAAOzC,EAAc,WAAa,WAAY+B,QAlGvEvJ,IACnB,OAADA,QAAC,IAADA,GAAAA,EAAGkK,kBACHvC,EAAWtD,IAgGwG1B,SAC9F6E,GAAc5E,EAAAA,EAAAA,KAACwH,EAAAA,GAAQ,CAACV,KAAM,MAAS9G,EAAAA,EAAAA,KAACyH,EAAAA,GAAQ,CAACX,KAAM,gBAOxEpH,EAAAA,EAAAA,MAAA,OAAK9D,MAAO,CACRuE,OAAQ,GAAIN,WAAYmF,EAAU,yBAA2B,OAC7D0C,UAAW,iBACX9G,QAAS,OAAQC,WAAY,SAAUC,eAAgB,gBAAiBuF,QAAS,SACnFtG,SAAA,EACEL,EAAAA,EAAAA,MAAA,OAAK9D,MAAO,CAAEgF,QAAS,OAAQC,WAAY,SAAU2F,IAAK,EAAGQ,KAAM,EAAGlH,SAAU,UAAWC,SAAA,EACvFC,EAAAA,EAAAA,KAAA,OAAKpE,MAAO,CACRsE,MAAO,GAAIC,OAAQ,GAAIiB,aAAc,MACrCvB,WAAYgG,EAAW,UAAY,UACnCU,UAAWV,EAAW,kBAAoB,WAI9C7F,EAAAA,EAAAA,KAAA,OAAKqH,MAAOrC,EAAU,gBAAkB,oBAAoBjF,UACxDC,EAAAA,EAAAA,KAAC2H,EAAAA,GAAM,CAACb,KAAM,GAAI/F,MAAOiE,EAAU,UAAY,OAAQX,KAAMW,EAAU,sBAAwB,YAGnGhF,EAAAA,EAAAA,KAAA,QAAMpE,MAAO,CACT6K,SAAU,GAAImB,WAAY,MAC1B7G,MAAOiE,EAAU,OAAS,OAC1B6C,WAAY,SAAU/H,SAAU,SAAUgI,aAAc,YAC1D/H,SACG0B,EAAIsG,MAAQtG,EAAIuG,KAGpBrC,IAAe3F,EAAAA,EAAAA,KAAA,OAAKpE,MAAO,CACxBsE,MAAO,EAAGC,OAAQ,EAAGiB,aAAc,MAAOvB,WAAY,UACtDoI,UAAU,uBACXZ,MAAM,kBAGbrH,EAAAA,EAAAA,KAAA,OAAKpE,MAAO,CAAE6K,SAAU,EAAG1F,MAAO,OAAQ6G,WAAY,OAAQM,cAAe,IAAMnI,SAC9E6E,EAAc,aAAe,mBAItC5E,EAAAA,EAAAA,KAAA,SAAAD,SAAA,0QASZ,CCrRA,MAAMoI,EAEI,UAIK,SAASC,IACpB,MAAOC,EAAMC,IAAWpM,EAAAA,EAAAA,UAAS,KAC1BqM,EAAQC,IAAatM,EAAAA,EAAAA,UAAS,gBAC9BuM,EAAaC,IAAkBxM,EAAAA,EAAAA,UAAS,OACxCyM,EAAUC,IAAe1M,EAAAA,EAAAA,UAAS,IAClC2M,EAAcC,IAAmB5M,EAAAA,EAAAA,UAAS,CAAC,IAC3C6M,EAAWC,IAAgB9M,EAAAA,EAAAA,UAAS,CAAC,IAG5CK,EAAAA,EAAAA,WAAU,KACN,MAAM0M,EAAcA,KAChBxM,EAAAA,GAAIC,IAAI,gBAAgBE,KAAKC,IACzB,MAAMqM,EAAY,CAAC,EACfrM,EAAIE,MAAQF,EAAIE,KAAKoM,SACrBtM,EAAIE,KAAKoM,QAAQ7F,QAAQ8F,GAAKF,EAAUE,EAAExC,IAAMwC,EAAEpE,SAEtD8D,EAAgBI,KACjB/L,MAAM,SAEb8L,IACA,MAAMI,EAAWC,YAAYL,EAAa,KAC1C,MAAO,IAAMM,cAAcF,IAC5B,KAGH9M,EAAAA,EAAAA,WAAU,KACN,MAAMiN,EAAYA,IAAM/M,EAAAA,GAAIC,IAAI,kBAAkBE,KAAKC,GAAOyL,EAAQzL,EAAIE,OAAOI,MAAMmB,QAAQnC,OAC/FqN,IAEA,MAAMC,EAAcA,KAChBhN,EAAAA,GAAIC,IAAI,UAAUE,KAAKC,IAAQ,IAAD6M,EAC1B,MAAM7D,GAA+B,IAApBhJ,EAAIE,KAAK4M,QAAuC,cAApB9M,EAAIE,KAAKwL,SAAyC,QAAfmB,EAAA7M,EAAIE,KAAK6M,cAAM,IAAAF,OAAA,EAAfA,EAAiBG,QAAS,EAE1G,GADArB,EAAU3C,EAAW,YAAc,gBAC/BhJ,EAAIE,KAAKoM,QAAS,CAClB,MAAMW,EAAM,CAAC,EACbjN,EAAIE,KAAKoM,QAAQ7F,QAAQ8F,GAAKU,EAAIV,EAAExC,KAAGjH,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQyJ,GAAC,IAAEtD,UAAwB,WAAbsD,EAAEb,UAC/DS,EAAac,EACjB,IACD3M,MAAM,IAAMqL,EAAU,kBAE7BiB,IAEA,MAAMM,EAAKT,YAAYE,EAAW,KAC5BQ,EAAKV,YAAYG,EAAa,KACpC,MAAO,KAAQF,cAAcQ,GAAKR,cAAcS,KACjD,IAEH,MAAMC,EAAkBC,MAAOxO,EAAOyO,KAClC,MAAMC,EAAU/B,EAAKyB,IAAIV,GAAKA,EAAExC,KAAOlL,GAAKiE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQyJ,GAAMe,GAAYf,GACtEd,EAAQ8B,GACR,UAAY3N,EAAAA,GAAI4N,KAAK,iBAAkBD,EAAU,CAAE,MAAOhN,GAAKkB,QAAQnC,MAAMiB,EAAI,GAuB/EkN,EAnBgBC,MAClB,GAAI9B,EAAa,MAAO,CAAE+B,KAAM,MAAOC,KAAM,OAC7C,OAAQ9B,GACJ,KAAK,EAAG,MAAO,CAAE6B,KAAM,MAAOC,KAAM,OACpC,KAAK,EAAG,MAAO,CAAED,KAAM,iBAAkBC,KAAM,kBAC/C,KAAK,EAAG,MAAO,CAAED,KAAM,iBAAkBC,KAAM,kBAC/C,KAAK,EAAG,MAAO,CAAED,KAAM,iBAAkBC,KAAM,kBAC/C,KAAK,EAAG,MAAO,CAAED,KAAM,iBAAkBC,KAAM,kBAC/C,KAAK,GAAI,MAAO,CAAED,KAAM,iBAAkBC,KAAM,kBAChD,KAAK,GAAI,MAAO,CAAED,KAAM,iBAAkBC,KAAM,kBAChD,KAAK,GAAI,MAAO,CAAED,KAAM,iBAAkBC,KAAM,kBAChD,KAAK,GAAI,MAAO,CAAED,KAAM,iBAAkBC,KAAM,kBAChD,QACI,MAAMD,EAAOlI,KAAKoI,KAAKpI,KAAKqI,KAAKhC,IAC3B8B,EAAOnI,KAAKoI,KAAK/B,EAAW6B,GAClC,MAAO,CAAEA,KAAK,UAAD7N,OAAY6N,EAAI,UAAUC,KAAK,UAAD9N,OAAY8N,EAAI,aAI1DF,GACPK,EAAWnC,EAAc,EAAIE,EAEnC,OACIjJ,EAAAA,EAAAA,MAAA,OAAKsB,UAAU,YAAYpF,MAAO,CAC9BsE,MAAO,OAAQC,OAAQ,OAAQN,WAAY,UAAWkB,MAAOoH,EAC7DrI,SAAU,SAAUc,QAAS,OAAQM,cAAe,UACtDnB,SAAA,EAGI0I,IACE/I,EAAAA,EAAAA,MAAA,OAAK9D,MAAO,CAAEgF,QAAS,OAAQE,eAAgB,gBAAiBD,WAAY,SAAUwF,QAAS,UAAWxG,WAAY,UAAWgL,aAAc,iBAAkB1K,OAAQ,QAASJ,SAAA,EAC9KL,EAAAA,EAAAA,MAAA,OAAK9D,MAAO,CAAEgF,QAAS,OAAQC,WAAY,SAAU2F,IAAK,IAAKzG,SAAA,EAC3DL,EAAAA,EAAAA,MAAA,OAAK9D,MAAO,CAAEgM,WAAY,OAAQnB,SAAU,GAAI1F,MAAO,OAAQH,QAAS,OAAQC,WAAY,SAAU2F,IAAK,GAAIzG,SAAA,EAC3GC,EAAAA,EAAAA,KAAA,OAAKpE,MAAO,CAAEsE,MAAO,EAAGC,OAAQ,EAAGiB,aAAc,MAAOvB,WAAuB,cAAX0I,EAAyB,UAAY,aAAmB,gBAGhIvI,EAAAA,EAAAA,KAAA,OAAKpE,MAAO,CAAEgF,QAAS,OAAQ4F,IAAK,GAAIzG,SACnC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,IAAI+J,IAAIgB,IACjC9K,EAAAA,EAAAA,KAAA,UAAkB2G,QAASA,IAAMiC,EAAYkC,GACzClP,MAAO,CACHuF,OAAQ,OAAQtB,WAAY8I,IAAamC,EAAM,UAAY,OAC3D/J,MAAO,OAAQb,MAAO,GAAIC,OAAQ,GAAImB,OAAQ,UAAWmF,SAAU,GACnEmB,WAAYe,IAAamC,EAAM,OAAS,SAAUvJ,YAAa,GACjExB,SAED+K,GAPQA,UAYzB9K,EAAAA,EAAAA,KAAA,OAAKpE,MAAO,CAAE6K,SAAU,GAAI1F,MAAO,QAAShB,UAAE,IAAIgL,MAAOC,2BAKjEtL,EAAAA,EAAAA,MAAA,OAAK9D,MAAO,CACRgF,QAAS,OACTqK,oBAAqBX,EAAKE,KAC1BU,iBAAkBZ,EAAKG,KACvBjE,IAAKiC,EAAc,EAAI,EACvBzB,KAAM,EACNnH,WAAY,OACZwG,QAASoC,EAAc,EAAI,EAC3B3I,SAAU,UACZC,SAAA,CACGsI,EAAKyB,IAAI,CAACrI,EAAK0J,KAEZ,MAAMC,EAAY3C,EAAehH,EAAImF,KAAO6B,EAAY7B,GAAOuE,EAAMP,EAErE,OACI5K,EAAAA,EAAAA,KAAA,OAAkBpE,MAAO,CACrBgF,QAASwK,EAAY,OAAS,OAC9BlK,cAAe,SACftB,SAAU,WACVM,MAAO,OACPC,OAAQ,OACRN,WAAY,OACZC,SAAU,SACVqB,OAAQsH,EAAc,OAAS,kBAE/BvB,cAAeA,IAAMwB,EAAeD,EAAc,KAAOhH,GAAK1B,UAE9DC,EAAAA,EAAAA,KAAC0E,EAAU,CACPjD,IAAKA,EACLmD,YAAa6D,GAAeA,EAAY7B,KAAOnF,EAAImF,GACnD/B,UAAWuG,EACXtG,SAAUmF,EACVlF,WAAYA,IAAM2D,EAAejH,GACjCuD,QAAS6D,EAAapH,EAAImF,IAC1B3B,OAAQ8D,EAAUtH,EAAImF,OAnBpBnF,EAAImF,OA0BpB6B,GAAe4C,MAAMC,KAAK,CAAEpI,OAAQZ,KAAKiJ,IAAI,EAAGX,EAAWvC,EAAKnF,UAAW4G,IAAI,CAAC0B,EAAG3H,KACjF7D,EAAAA,EAAAA,KAAA,OAAwBpE,MAAO,CAAEiE,WAAY,OAAQsB,OAAQ,kBAAmBP,QAAS,OAAQC,WAAY,SAAUC,eAAgB,UAAWf,UAC9IC,EAAAA,EAAAA,KAAA,QAAMpE,MAAO,CAAEmF,MAAO,OAAQ0F,SAAU,IAAK1G,SAAC,eAAgB,SAAApD,OAD/CkH,SAO3B7D,EAAAA,EAAAA,KAAA,SAAAD,SAAA,0uBAqBZ,C,qNC3LM0L,EAAWhQ,IAAA,IAAC,KAAEqL,EAAO,GAAE,MAAE/F,EAAQ,eAAc,SAAEhB,EAAQ,MAAEnE,GAAiBH,EAAPiQ,GAAKC,EAAAA,EAAAA,GAAAlQ,EAAAmQ,GAAA,OAC5E5L,EAAAA,EAAAA,KAAA,OAAAL,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACIO,MAAO4G,EACP3G,OAAQ2G,EACR+E,QAAQ,YACRxH,KAAK,OACLC,OAAQvD,EACR+K,YAAY,IACZC,cAAc,QACdC,eAAe,QACfpQ,OAAK+D,EAAAA,EAAAA,GAAA,CAAIiB,QAAS,eAAgBqL,cAAe,UAAarQ,IAC1D8P,GAAK,IAAA3L,SAERA,MAIImM,EAASR,IAClBhM,EAAAA,EAAAA,MAAC+L,GAAQ9L,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAK+L,GAAK,IAAA3L,SAAA,EACfC,EAAAA,EAAAA,KAAA,YAAUqD,OAAO,kBACjBrD,EAAAA,EAAAA,KAAA,QAAMmM,EAAE,uFAIHC,EAAQV,IACjBhM,EAAAA,EAAAA,MAAC+L,GAAQ9L,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAK+L,GAAK,IAAA3L,SAAA,EACfC,EAAAA,EAAAA,KAAA,QAAMmM,EAAE,gEACRnM,EAAAA,EAAAA,KAAA,QAAMmM,EAAE,gEAIHE,EAAgBX,IACzBhM,EAAAA,EAAAA,MAAC+L,GAAQ9L,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAK+L,GAAK,IAAA3L,SAAA,EACfC,EAAAA,EAAAA,KAAA,UAAQsM,GAAG,KAAKC,GAAG,KAAKC,EAAE,OAC1BxM,EAAAA,EAAAA,KAAA,QAAMmM,EAAE,uuBAKHM,EAAQf,IACjBhM,EAAAA,EAAAA,MAAC+L,GAAQ9L,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAK+L,GAAK,IAAA3L,SAAA,EACfC,EAAAA,EAAAA,KAAA,QAAM8D,EAAE,IAAIC,EAAE,KAAK7D,MAAM,KAAKC,OAAO,KAAKuM,GAAG,IAAIC,GAAG,OACpD3M,EAAAA,EAAAA,KAAA,QAAMmM,EAAE,iCAIHS,EAAiBlB,IAC1BhM,EAAAA,EAAAA,MAAC+L,GAAQ9L,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAK+L,GAAK,IAAA3L,SAAA,EACfC,EAAAA,EAAAA,KAAA,QAAMmM,EAAE,8FACRnM,EAAAA,EAAAA,KAAA,QAAM6M,GAAG,KAAKC,GAAG,IAAIC,GAAG,KAAKC,GAAG,QAChChN,EAAAA,EAAAA,KAAA,QAAM6M,GAAG,KAAKC,GAAG,KAAKC,GAAG,QAAQC,GAAG,WAY/BC,EAAUvB,IACnBhM,EAAAA,EAAAA,MAAC+L,GAAQ9L,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAK+L,GAAK,IAAA3L,SAAA,EACfC,EAAAA,EAAAA,KAAA,QAAMmM,EAAE,uFACRnM,EAAAA,EAAAA,KAAA,UAAQsM,GAAG,KAAKC,GAAG,KAAKC,EAAE,UAIrBzF,EAAS2E,IAClBhM,EAAAA,EAAAA,MAAC+L,GAAQ9L,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAK+L,GAAK,IAAA3L,SAAA,EACfC,EAAAA,EAAAA,KAAA,WAASqD,OAAO,2BAChBrD,EAAAA,EAAAA,KAAA,QAAM8D,EAAE,IAAIC,EAAE,IAAI7D,MAAM,KAAKC,OAAO,KAAKuM,GAAG,IAAIC,GAAG,UAI9CpF,EAAWmE,IACpBhM,EAAAA,EAAAA,MAAC+L,GAAQ9L,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAK+L,GAAK,IAAA3L,SAAA,EACfC,EAAAA,EAAAA,KAAA,YAAUqD,OAAO,yBACjBrD,EAAAA,EAAAA,KAAA,QAAM8D,EAAE,IAAIC,EAAE,IAAI7D,MAAM,KAAKC,OAAO,OACpCH,EAAAA,EAAAA,KAAA,QAAM6M,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,WAY5BE,EAAgBxB,IACzB1L,EAAAA,EAAAA,KAACyL,GAAQ9L,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAK+L,GAAK,IAAA3L,UACfC,EAAAA,EAAAA,KAAA,YAAUqD,OAAO,sBAIZoE,EAAYiE,IACrB1L,EAAAA,EAAAA,KAACyL,GAAQ9L,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAK+L,GAAK,IAAA3L,UACfC,EAAAA,EAAAA,KAAA,QAAMmM,EAAE,8CAIH3E,EAAYkE,IACrB1L,EAAAA,EAAAA,KAACyL,GAAQ9L,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAK+L,GAAK,IAAA3L,UACfC,EAAAA,EAAAA,KAAA,QAAMmM,EAAE,+CAgBHxE,EAAU+D,IACnB1L,EAAAA,EAAAA,KAACyL,GAAQ9L,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAK+L,GAAK,IAAA3L,UACfC,EAAAA,EAAAA,KAAA,QAAMmM,EAAE,kD,qDC5HhB,IAAIjP,EAAU,GACd,GAAsB,qBAAXM,OAAwB,CAE/B,MAAM2P,EAAQ3P,OAAO4P,SAASC,KAAKF,MAAM,0BACrCA,EACAjQ,EAAUiQ,EAAM,GACT3P,OAAO4P,SAASE,KAAKC,SAAS,QAErCrQ,EAAU,GAElB,CAEA,MAAMT,EAAM+Q,EAAAA,EAAMC,OAAO,CACrBvQ,QAASA,IAIb,G,4DClBe,SAAS+J,EAAYxL,GAAyE,IAAxE,MAAEC,EAAK,WAAEC,EAAa,KAAI,MAAEC,EAAK,QAAE+K,EAAO,cAAEO,EAAa,SAAErC,GAAUpJ,EACtG,MAAMI,GAAWC,EAAAA,EAAAA,QAAO,MAClB4R,GAAQ5R,EAAAA,EAAAA,QAAO,OACdyM,EAAQC,IAAatM,EAAAA,EAAAA,UAAS,SAC9ByR,EAAkBC,IAAuB1R,EAAAA,EAAAA,UAASP,IAEzDY,EAAAA,EAAAA,WAAU,KACNqR,EAAoBjS,IACrB,CAACA,IAEJ,MAAMkS,EAA8B,QAArBF,EAA6B,MAAQA,EAC9CG,EAAU,GAAAnR,OAAMjB,EAAK,KAAAiB,OAAIkR,GAsD/B,OApDAtR,EAAAA,EAAAA,WAAU,KACN,GAAIsI,EAAU,OA8Cd,OAFInJ,GA1CkBwO,WAClB1B,EAAU,cACNkF,EAAMpQ,SAASoQ,EAAMpQ,QAAQyQ,QAEjC,MAAMC,EAAK,IAAIC,kBAAkB,CAC7BC,WAAY,CAAC,CAAEC,KAAM,mCAEzBT,EAAMpQ,QAAU0Q,EAEhBA,EAAGI,QAAW3P,IACN5C,EAASyB,UACTzB,EAASyB,QAAQ+Q,UAAY5P,EAAM6P,QAAQ,GAC3CzS,EAASyB,QAAQe,OAAOlB,MAAM,QAC9BqL,EAAU,aAIlBwF,EAAGO,eAAe,QAAS,CAAEC,UAAW,aAExC,IACI,MAAMC,QAAcT,EAAGU,oBACjBV,EAAGW,oBAAoBF,GAE7B,MAAMG,EAAM,uBAAAjS,OAA0BmR,GAChCjR,QAAYgS,MAAMD,EAAQ,CAAEE,OAAQ,OAAQC,KAAMf,EAAGgB,iBAAiBC,MAE5E,IAAKpS,EAAIqS,GAAI,MAAM,IAAIC,MAAM,UAADxS,OAAWE,EAAI0L,SAE3C,MAAM6G,QAAkBvS,EAAIwS,OACxB3B,EAAMpQ,SAA4C,WAAjCoQ,EAAMpQ,QAAQgS,sBACzBtB,EAAGuB,qBAAqB,IAAIC,sBAAsB,CAAE7Q,KAAM,SAAUsQ,IAAKG,IAEvF,CAAE,MAAOhS,GACLkB,QAAQC,KAAK,mBAAD5B,OAAoBmR,EAAU,KAAK1Q,EAAEqS,SACxB,QAArB9B,GAAmD,QAArBA,EAC9BC,EAAoB,MAEpBpF,EAAU,SAElB,GAGOkH,GAEJ,KACChC,EAAMpQ,UAAWoQ,EAAMpQ,QAAQyQ,QAASL,EAAMpQ,QAAU,QAEjE,CAAC5B,EAAOiS,EAAkBG,EAAYjJ,KAGrCnF,EAAAA,EAAAA,MAAA,OAAKsB,UAAU,aAAapF,OAAK+D,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAO/D,GAAK,IAAEgE,SAAU,WAAYC,WAAY,OAAQK,MAAO,OAAQC,OAAQ,OAAQL,SAAU,WAC9H6G,QAASA,EAASO,cAAeA,EAAcnH,SAAA,EAC/CC,EAAAA,EAAAA,KAAA,OAAKpE,MAAO,CAAEgE,SAAU,WAAYY,IAAK,EAAGC,KAAM,EAAGC,MAAO,EAAGC,OAAQ,GAAIZ,UACvEC,EAAAA,EAAAA,KAAA,SACIgB,UAAU,gBACVf,IAAKpE,EACLD,MAAO,CAAEsE,MAAO,OAAQC,OAAQ,OAAQC,UAAW,OAAQQ,QAAS,SACpEL,aAAW,EAACD,OAAK,EAACD,UAAQ,MAGtB,eAAXkI,IACGvI,EAAAA,EAAAA,KAAA,OAAKpE,MAAO,CAAEgE,SAAU,WAAYY,IAAK,EAAGC,KAAM,EAAGP,MAAO,OAAQC,OAAQ,OAAQS,QAAS,OAAQC,WAAY,SAAUC,eAAgB,SAAUC,MAAO,wBAAyB0F,SAAU,GAAIhC,OAAQ,GAAI1E,SAAC,oBAMhO,C,aCpFA,SAAS4L,EAAyBvO,EAAGuS,GACnC,GAAI,MAAQvS,EAAG,MAAO,CAAC,EACvB,IAAIwS,EACFpD,EACA3I,ECLJ,SAAuC2I,EAAGpP,GACxC,GAAI,MAAQoP,EAAG,MAAO,CAAC,EACvB,IAAImD,EAAI,CAAC,EACT,IAAK,IAAIE,KAAKrD,EAAG,GAAI,CAAC,EAAEsD,eAAeC,KAAKvD,EAAGqD,GAAI,CACjD,IAAK,IAAMzS,EAAE4S,QAAQH,GAAI,SACzBF,EAAEE,GAAKrD,EAAEqD,EACX,CACA,OAAOF,CACT,CDHQ,CAA6BvS,EAAGuS,GACtC,GAAIM,OAAOC,sBAAuB,CAChC,IAAIL,EAAII,OAAOC,sBAAsB9S,GACrC,IAAKoP,EAAI,EAAGA,EAAIqD,EAAE3M,OAAQsJ,IAAKoD,EAAIC,EAAErD,IAAK,IAAMmD,EAAEK,QAAQJ,IAAM,CAAC,EAAEO,qBAAqBJ,KAAK3S,EAAGwS,KAAO/L,EAAE+L,GAAKxS,EAAEwS,GAClH,CACA,OAAO/L,CACT,C","sources":["components/RecorderPlayer.js","components/CameraCard.js","pages/Live.js","components/Icons.js","api.js","components/Go2RTCPlayer.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { API } from '../api';\r\n// We assume Hls is available via window.Hls or installed. \r\n// Since we don't have package.json control easily, we'll try to use window.Hls if loaded from CDN, \r\n// or import it if the environment supports it. The previous code used a CDN script injection fallback.\r\n// Let's stick to the previous robust pattern but simpler.\r\n\r\nexport default function RecorderPlayer({ camId, streamType, style }) {\r\n    const videoRef = useRef(null);\r\n    const hlsRef = useRef(null);\r\n    const [hlsUrl, setHlsUrl] = useState(null);\r\n    const [error, setError] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // 1. Fetch HLS URL\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        setError(null);\r\n        const mode = streamType === 'hd' ? 'main' : 'sub';\r\n\r\n        API.get(`/recorder/live-url/${camId}/${mode}`)\r\n            .then(res => {\r\n                // Determine full URL\r\n                let url = res.data.url;\r\n                if (url.startsWith(\"/\")) url = API.defaults.baseURL + url;\r\n                setHlsUrl(url);\r\n            })\r\n            .catch(e => {\r\n                setError(\"Nu există flux live.\");\r\n                setLoading(false);\r\n            });\r\n    }, [camId, streamType]);\r\n\r\n    // 2. Init Player\r\n    useEffect(() => {\r\n        if (!hlsUrl) return;\r\n\r\n        const video = videoRef.current;\r\n\r\n        const initHls = () => {\r\n            if (window.Hls && window.Hls.isSupported()) {\r\n                if (hlsRef.current) hlsRef.current.destroy();\r\n\r\n                const hls = new window.Hls({\r\n                    enableWorker: true,\r\n                    lowLatencyMode: true,\r\n                    backBufferLength: 90\r\n                });\r\n\r\n                hls.loadSource(hlsUrl);\r\n                hls.attachMedia(video);\r\n\r\n                hls.on(window.Hls.Events.MANIFEST_PARSED, () => {\r\n                    video.play().catch(e => console.warn(\"Autoplay block\", e));\r\n                    setLoading(false);\r\n                });\r\n\r\n                hls.on(window.Hls.Events.ERROR, (event, data) => {\r\n                    if (data.fatal) {\r\n                        switch (data.type) {\r\n                            case window.Hls.ErrorTypes.NETWORK_ERROR:\r\n                                hls.startLoad();\r\n                                break;\r\n                            case window.Hls.ErrorTypes.MEDIA_ERROR:\r\n                                hls.recoverMediaError();\r\n                                break;\r\n                            default:\r\n                                hls.destroy();\r\n                                break;\r\n                        }\r\n                    }\r\n                });\r\n\r\n                hlsRef.current = hls;\r\n            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {\r\n                // iOS / Safari\r\n                video.src = hlsUrl;\r\n                video.addEventListener('loadedmetadata', () => {\r\n                    video.play();\r\n                    setLoading(false);\r\n                });\r\n            }\r\n        };\r\n\r\n        // Load Lib if missing\r\n        if (!window.Hls && typeof Hls === 'undefined') {\r\n            const script = document.createElement('script');\r\n            script.src = \"https://cdn.jsdelivr.net/npm/hls.js@1.4.0/dist/hls.min.js\";\r\n            script.onload = initHls;\r\n            document.head.appendChild(script);\r\n        } else {\r\n            initHls();\r\n        }\r\n\r\n        return () => {\r\n            if (hlsRef.current) hlsRef.current.destroy();\r\n        };\r\n    }, [hlsUrl]);\r\n\r\n    return (\r\n        <div style={{ ...style, position: 'relative', background: '#000', overflow: 'hidden' }}>\r\n            <video\r\n                ref={videoRef}\r\n                style={{ width: '100%', height: '100%', objectFit: 'contain' }}\r\n                autoPlay\r\n                muted\r\n                playsInline\r\n            />\r\n            {(loading || !hlsUrl) && !error && (\r\n                <div style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0, display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#fff', background: 'rgba(0,0,0,0.5)' }}>\r\n                    <div className=\"spinner\">Live Buffer...</div>\r\n                </div>\r\n            )}\r\n            {error && (\r\n                <div style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0, display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#ff5555' }}>\r\n                    {error}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { colors } from \"../theme\";\r\nimport Go2RTCPlayer from \"./Go2RTCPlayer\"; // For Low Latency Grid View\r\nimport RecorderPlayer from \"./RecorderPlayer\"; // For High Quality Playback View\r\nimport { Maximize, Minimize, Circle, Activity, Archive, Shield, Lock, SettingsIcon as Settings, Video } from \"./Icons\";\r\n\r\n// --- STYLES ---\r\nconst containerStyle = {\r\n    position: \"relative\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    background: \"#000\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    overflow: \"hidden\",\r\n    border: \"1px solid #333\",\r\n    borderRadius: 2\r\n};\r\n\r\nconst iconBtnStyle = {\r\n    background: \"rgba(0,0,0,0.5)\",\r\n    border: \"1px solid rgba(255,255,255,0.2)\",\r\n    color: \"rgba(255,255,255,0.9)\",\r\n    borderRadius: 4,\r\n    width: 28,\r\n    height: 28,\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    cursor: \"pointer\",\r\n    marginRight: 2\r\n};\r\n\r\n// --- ZONE OVERLAY COMPONENT ---\r\n// Renders normalized zones (0-1) scaled to current container size.\r\nfunction ZoneOverlay({ cam }) {\r\n    const containerRef = React.useRef(null);\r\n    const canvasRef = React.useRef(null);\r\n    const [dims, setDims] = useState({ w: 0, h: 0 });\r\n\r\n    // 1. Measure Container Size (Robust)\r\n    React.useEffect(() => {\r\n        const obs = new ResizeObserver(entries => {\r\n            for (const entry of entries) {\r\n                const { width, height } = entry.contentRect;\r\n                setDims({ w: Math.round(width), h: Math.round(height) });\r\n            }\r\n        });\r\n        if (containerRef.current) obs.observe(containerRef.current);\r\n        return () => obs.disconnect();\r\n    }, []);\r\n\r\n    // 2. Draw Zones\r\n    React.useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas || dims.w === 0) return;\r\n        const ctx = canvas.getContext(\"2d\");\r\n\r\n        ctx.clearRect(0, 0, dims.w, dims.h);\r\n\r\n        // Get Zones\r\n        const zones = cam.ai_server?.zones || [];\r\n        // Legacy ROI support\r\n        if (zones.length === 0 && cam.ai_server?.roi) {\r\n            zones.push({ points: cam.ai_server.roi });\r\n        }\r\n\r\n        const drawZone = (pts) => {\r\n            if (!pts || pts.length === 0) return;\r\n            ctx.beginPath();\r\n            // Logic: If point > 1 it's pixel (old), if <= 1 it's % (new).\r\n            const x0 = pts[0][0] > 1 ? pts[0][0] : pts[0][0] * dims.w;\r\n            const y0 = pts[0][1] > 1 ? pts[0][1] : pts[0][1] * dims.h;\r\n\r\n            ctx.moveTo(x0, y0);\r\n\r\n            for (let i = 1; i < pts.length; i++) {\r\n                const x = pts[i][0] > 1 ? pts[i][0] : pts[i][0] * dims.w;\r\n                const y = pts[i][1] > 1 ? pts[i][1] : pts[i][1] * dims.h;\r\n                ctx.lineTo(x, y);\r\n            }\r\n\r\n            ctx.closePath();\r\n            ctx.fillStyle = \"rgba(0, 255, 0, 0.15)\";\r\n            ctx.strokeStyle = \"#00ff00\";\r\n            ctx.lineWidth = 2;\r\n            ctx.fill();\r\n            ctx.stroke();\r\n        };\r\n\r\n        zones.forEach(z => {\r\n            if (z.points) drawZone(z.points);\r\n        });\r\n\r\n    }, [cam, dims]);\r\n\r\n    return (\r\n        <div ref={containerRef} style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%', pointerEvents: 'none', zIndex: 5 }}>\r\n            <canvas\r\n                ref={canvasRef}\r\n                width={dims.w}\r\n                height={dims.h}\r\n                style={{ width: '100%', height: '100%', display: 'block' }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\n// --- COMPONENT ---\r\nexport default function CameraCard({ cam, isMaximized, isHidden, onUpdate, onMaximise, isArmed, health }) {\r\n    const navigate = useNavigate();\r\n    const [hover, setHover] = useState(false);\r\n    const [quality, setQuality] = useState('hd');\r\n    const [contextMenu, setContextMenu] = useState(null);\r\n\r\n    // Derived states\r\n    const effectiveStreamType = isMaximized ? 'hd' : (quality === 'hd' ? 'hd' : 'low');\r\n\r\n    // Handle Closing Context Menu\r\n    React.useEffect(() => {\r\n        const h = () => setContextMenu(null);\r\n        window.addEventListener('click', h);\r\n        return () => window.removeEventListener('click', h);\r\n    }, []);\r\n\r\n    const handleContextMenu = (e) => {\r\n        e.preventDefault();\r\n        setContextMenu({ x: e.pageX, y: e.pageY });\r\n    };\r\n\r\n    const handleMaximise = (e) => {\r\n        e?.stopPropagation();\r\n        onMaximise(cam);\r\n    };\r\n\r\n    const handleRecToggle = (e) => {\r\n        e.stopPropagation();\r\n        const newMode = cam.recordingMode === 'motion' ? 'continuous' : 'motion';\r\n        onUpdate(cam.id, { recordingMode: newMode });\r\n    };\r\n\r\n    const handlePlayback = (e) => {\r\n        e.stopPropagation();\r\n        navigate(`/playback?camId=${cam.id}`);\r\n    };\r\n\r\n    const handleQualityToggle = (e) => {\r\n        e.stopPropagation();\r\n        setQuality(prev => prev === 'hd' ? 'low' : 'hd');\r\n    };\r\n\r\n    const isRecording = cam.record !== false;\r\n    const isOnline = health ? health.connected : false;\r\n\r\n    return (\r\n        <div style={containerStyle}\r\n            onMouseEnter={() => setHover(true)}\r\n            onMouseLeave={() => setHover(false)}\r\n            onContextMenu={handleContextMenu}\r\n        >\r\n            {/* CONTEXT MENU */}\r\n            {contextMenu && (\r\n                <div style={{\r\n                    position: \"fixed\", top: contextMenu.y, left: contextMenu.x,\r\n                    background: \"#222\", border: \"1px solid #444\", borderRadius: 6,\r\n                    padding: \"4px 0\", zIndex: 1000, minWidth: 160,\r\n                    boxShadow: \"0 4px 20px rgba(0,0,0,0.5)\"\r\n                }}>\r\n                    <div\r\n                        style={{ padding: \"8px 12px\", cursor: \"pointer\", display: \"flex\", alignItems: \"center\", gap: 8, fontSize: 13, color: \"#fff\" }}\r\n                        onMouseEnter={(e) => e.target.style.background = \"#333\"}\r\n                        onMouseLeave={(e) => e.target.style.background = \"transparent\"}\r\n                        onClick={() => navigate(`/settings?tab=hardware&camId=${cam.id}`)}\r\n                    >\r\n                        <Settings size={14} color=\"#aaa\" /> Setări Cameră (HW)\r\n                    </div>\r\n                    <div\r\n                        style={{ padding: \"8px 12px\", cursor: \"pointer\", display: \"flex\", alignItems: \"center\", gap: 8, fontSize: 13, color: \"#fff\" }}\r\n                        onMouseEnter={(e) => e.target.style.background = \"#333\"}\r\n                        onMouseLeave={(e) => e.target.style.background = \"transparent\"}\r\n                        onClick={() => navigate(`/settings?tab=channels&camId=${cam.id}`)}\r\n                    >\r\n                        <Video size={14} color=\"#aaa\" /> Setări Canal (AI)\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* VIDEO AREA */}\r\n            <div style={{ flex: 1, position: \"relative\", background: \"#000\", cursor: \"pointer\", width: \"100%\" }}\r\n                onClick={() => !isMaximized && onMaximise(cam)}\r\n            >\r\n                {isMaximized ? (\r\n                    <RecorderPlayer\r\n                        camId={cam.id}\r\n                        streamType=\"hd\"\r\n                        isHidden={isHidden}\r\n                        style={{ width: \"100%\", height: \"100%\" }}\r\n                    />\r\n                ) : (\r\n                    <Go2RTCPlayer\r\n                        camId={cam.id}\r\n                        streamType=\"low\"\r\n                        isHidden={isHidden}\r\n                        style={{ width: \"100%\", height: \"100%\" }}\r\n                        onDoubleClick={() => onMaximise(cam)}\r\n                    />\r\n                )}\r\n\r\n                {/* ZONE OVERLAY (Visible if Armed) */}\r\n                {isArmed && <ZoneOverlay cam={cam} />}\r\n\r\n                {/* OVERLAYS (Only visible on hover or maximized) */}\r\n                <div style={{\r\n                    position: \"absolute\", bottom: 0, left: 0, right: 0,\r\n                    padding: 8,\r\n                    display: \"flex\", justifyContent: \"space-between\", alignItems: \"flex-end\",\r\n                    opacity: (hover || isMaximized) ? 1 : 0,\r\n                    transition: \"opacity 0.2s\",\r\n                    pointerEvents: (hover || isMaximized) ? \"auto\" : \"none\",\r\n                    zIndex: 10\r\n                }}>\r\n                    <div style={{ display: \"flex\", gap: 4 }}>\r\n                        <button style={iconBtnStyle} title=\"View Archive / Playback\" onClick={handlePlayback}>\r\n                            <Archive size={14} />\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div style={{ display: \"flex\", gap: 4 }}>\r\n                        <button style={iconBtnStyle} title={isMaximized ? \"Minimize\" : \"Maximize\"} onClick={handleMaximise}>\r\n                            {isMaximized ? <Minimize size={14} /> : <Maximize size={14} />}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* HEADER / STATUS BAR (UNIFIED) */}\r\n            <div style={{\r\n                height: 32, background: isArmed ? \"rgba(0, 230, 118, 0.1)\" : \"#111\",\r\n                borderTop: \"1px solid #333\",\r\n                display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\", padding: \"0 8px\"\r\n            }}>\r\n                <div style={{ display: \"flex\", alignItems: \"center\", gap: 8, flex: 1, overflow: \"hidden\" }}>\r\n                    <div style={{\r\n                        width: 10, height: 10, borderRadius: \"50%\",\r\n                        background: isOnline ? \"#00e676\" : \"#f44336\",\r\n                        boxShadow: isOnline ? \"0 0 8px #00e676\" : \"none\"\r\n                    }} />\r\n\r\n                    {/* ARMING ICON (The Shield) - Clearly visible now */}\r\n                    <div title={isArmed ? \"Armed (AI ON)\" : \"Disarmed (AI OFF)\"}>\r\n                        <Shield size={16} color={isArmed ? \"#00e676\" : \"#555\"} fill={isArmed ? \"rgba(0,230,118,0.2)\" : \"none\"} />\r\n                    </div>\r\n\r\n                    <span style={{\r\n                        fontSize: 13, fontWeight: \"600\",\r\n                        color: isArmed ? \"#fff\" : \"#aaa\",\r\n                        whiteSpace: \"nowrap\", overflow: \"hidden\", textOverflow: \"ellipsis\"\r\n                    }}>\r\n                        {cam.name || cam.ip}\r\n                    </span>\r\n\r\n                    {isRecording && <div style={{\r\n                        width: 6, height: 6, borderRadius: \"50%\", background: \"#f44336\",\r\n                        animation: `pulse 1.5s infinite`\r\n                    }} title=\"Recording\" />}\r\n                </div>\r\n\r\n                <div style={{ fontSize: 9, color: \"#444\", fontWeight: \"bold\", letterSpacing: 0.5 }}>\r\n                    {isMaximized ? \"REC STREAM\" : \"RTC STREAM\"}\r\n                </div>\r\n            </div>\r\n\r\n            <style>{`\r\n                @keyframes pulse {\r\n                    0% { opacity: 1; transform: scale(1); }\r\n                    50% { opacity: 0.5; transform: scale(1.2); }\r\n                    100% { opacity: 1; transform: scale(1); }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { API } from \"../api\";\r\nimport CameraCard from \"../components/CameraCard\";\r\n\r\n// Styles\r\nconst colors = {\r\n    bg: \"#1e1e1e\",\r\n    text: \"#cccccc\",\r\n    accent: \"#007acc\"\r\n};\r\n\r\nexport default function Live() {\r\n    const [cams, setCams] = useState([]);\r\n    const [status, setStatus] = useState(\"Checking...\");\r\n    const [selectedCam, setSelectedCam] = useState(null);\r\n    const [gridSize, setGridSize] = useState(8);\r\n    const [armingStatus, setArmingStatus] = useState({});\r\n    const [camStatus, setCamStatus] = useState({});\r\n\r\n    // Poll Arming Status\r\n    useEffect(() => {\r\n        const checkArming = () => {\r\n            API.get(\"arming/debug\").then(res => {\r\n                const statusMap = {};\r\n                if (res.data && res.data.cameras) {\r\n                    res.data.cameras.forEach(c => statusMap[c.id] = c.isArmed);\r\n                }\r\n                setArmingStatus(statusMap);\r\n            }).catch(() => { });\r\n        };\r\n        checkArming();\r\n        const interval = setInterval(checkArming, 5000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    // Poll Config & Status\r\n    useEffect(() => {\r\n        const fetchCams = () => API.get(\"cameras/config\").then(res => setCams(res.data)).catch(console.error);\r\n        fetchCams();\r\n\r\n        const checkStatus = () => {\r\n            API.get(\"status\").then(res => {\r\n                const isOnline = res.data.online === true || res.data.status === \"Connected\" || res.data.system?.uptime > 0;\r\n                setStatus(isOnline ? \"Connected\" : \"Disconnected\");\r\n                if (res.data.cameras) {\r\n                    const map = {};\r\n                    res.data.cameras.forEach(c => map[c.id] = { ...c, connected: c.status === \"ONLINE\" });\r\n                    setCamStatus(map);\r\n                }\r\n            }).catch(() => setStatus(\"Disconnected\"));\r\n        };\r\n        checkStatus();\r\n\r\n        const i1 = setInterval(fetchCams, 10000);\r\n        const i2 = setInterval(checkStatus, 3000);\r\n        return () => { clearInterval(i1); clearInterval(i2); };\r\n    }, []);\r\n\r\n    const handleUpdateCam = async (camId, changes) => {\r\n        const newCams = cams.map(c => c.id === camId ? { ...c, ...changes } : c);\r\n        setCams(newCams);\r\n        try { await API.post(\"cameras/config\", newCams); } catch (e) { console.error(e); }\r\n    };\r\n\r\n    // Grid Logic\r\n    const getGridConfig = () => {\r\n        if (selectedCam) return { cols: \"1fr\", rows: \"1fr\" };\r\n        switch (gridSize) {\r\n            case 1: return { cols: \"1fr\", rows: \"1fr\" };\r\n            case 4: return { cols: \"repeat(2, 1fr)\", rows: \"repeat(2, 1fr)\" };\r\n            case 6: return { cols: \"repeat(3, 1fr)\", rows: \"repeat(2, 1fr)\" };\r\n            case 8: return { cols: \"repeat(4, 1fr)\", rows: \"repeat(2, 1fr)\" }; // Trassir 8-view (4x2 usually or 1 big + 7 small) - keeping symetric for now\r\n            case 9: return { cols: \"repeat(3, 1fr)\", rows: \"repeat(3, 1fr)\" };\r\n            case 16: return { cols: \"repeat(4, 1fr)\", rows: \"repeat(4, 1fr)\" };\r\n            case 24: return { cols: \"repeat(6, 1fr)\", rows: \"repeat(4, 1fr)\" };\r\n            case 25: return { cols: \"repeat(5, 1fr)\", rows: \"repeat(5, 1fr)\" };\r\n            case 32: return { cols: \"repeat(8, 1fr)\", rows: \"repeat(4, 1fr)\" };\r\n            default:\r\n                const cols = Math.ceil(Math.sqrt(gridSize));\r\n                const rows = Math.ceil(gridSize / cols);\r\n                return { cols: `repeat(${cols}, 1fr)`, rows: `repeat(${rows}, 1fr)` };\r\n        }\r\n    };\r\n\r\n    const grid = getGridConfig();\r\n    const capacity = selectedCam ? 1 : gridSize;\r\n\r\n    return (\r\n        <div className=\"live-page\" style={{\r\n            width: \"100%\", height: \"100%\", background: \"#0d0d0d\", color: colors.text,\r\n            overflow: \"hidden\", display: \"flex\", flexDirection: \"column\"\r\n        }}>\r\n\r\n            {/* TOOLBAR */}\r\n            {!selectedCam && (\r\n                <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", padding: \"4px 8px\", background: \"#1a1a1a\", borderBottom: \"1px solid #333\", height: \"32px\" }}>\r\n                    <div style={{ display: \"flex\", alignItems: \"center\", gap: 15 }}>\r\n                        <div style={{ fontWeight: \"bold\", fontSize: 13, color: \"#fff\", display: \"flex\", alignItems: \"center\", gap: 5 }}>\r\n                            <div style={{ width: 8, height: 8, borderRadius: \"50%\", background: status === \"Connected\" ? \"#4caf50\" : \"#f44336\" }}></div>\r\n                            LIVE VIEW\r\n                        </div>\r\n                        <div style={{ display: \"flex\", gap: 1 }}>\r\n                            {[1, 4, 6, 8, 9, 12, 16, 24, 32].map(num => (\r\n                                <button key={num} onClick={() => setGridSize(num)}\r\n                                    style={{\r\n                                        border: \"none\", background: gridSize === num ? \"#007acc\" : \"#333\",\r\n                                        color: \"#fff\", width: 26, height: 20, cursor: \"pointer\", fontSize: 10,\r\n                                        fontWeight: gridSize === num ? \"bold\" : \"normal\", marginRight: 1\r\n                                    }}\r\n                                >\r\n                                    {num}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                    <div style={{ fontSize: 11, color: \"#666\" }}>{new Date().toLocaleTimeString()}</div>\r\n                </div>\r\n            )}\r\n\r\n            {/* GRID AREA */}\r\n            <div style={{\r\n                display: \"grid\",\r\n                gridTemplateColumns: grid.cols,\r\n                gridTemplateRows: grid.rows,\r\n                gap: selectedCam ? 0 : 2,\r\n                flex: 1,\r\n                background: \"#000\",\r\n                padding: selectedCam ? 0 : 2,\r\n                overflow: \"hidden\"\r\n            }}>\r\n                {cams.map((cam, idx) => {\r\n                    // Logic: Keep card in DOM but hide if out of grid range, unless selected\r\n                    const isVisible = selectedCam ? (cam.id === selectedCam.id) : (idx < capacity);\r\n\r\n                    return (\r\n                        <div key={cam.id} style={{\r\n                            display: isVisible ? \"flex\" : \"none\",\r\n                            flexDirection: \"column\",\r\n                            position: \"relative\",\r\n                            width: \"100%\",\r\n                            height: \"100%\",\r\n                            background: \"#000\",\r\n                            overflow: \"hidden\",\r\n                            border: selectedCam ? \"none\" : \"1px solid #222\"\r\n                        }}\r\n                            onDoubleClick={() => setSelectedCam(selectedCam ? null : cam)}\r\n                        >\r\n                            <CameraCard\r\n                                cam={cam}\r\n                                isMaximized={selectedCam && selectedCam.id === cam.id}\r\n                                isHidden={!isVisible}\r\n                                onUpdate={handleUpdateCam}\r\n                                onMaximise={() => setSelectedCam(cam)}\r\n                                isArmed={armingStatus[cam.id]}\r\n                                health={camStatus[cam.id]}\r\n                            />\r\n                        </div>\r\n                    );\r\n                })}\r\n\r\n                {/* Empty Slots visualization */}\r\n                {!selectedCam && Array.from({ length: Math.max(0, capacity - cams.length) }).map((_, i) => (\r\n                    <div key={`empty-${i}`} style={{ background: \"#111\", border: \"1px dashed #333\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}>\r\n                        <span style={{ color: \"#333\", fontSize: 10 }}>NO SIGNAL</span>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* GLOBAL STYLES FOR VIDEO ASPECT RATIO FIX */}\r\n            <style>{`\r\n                video, img, canvas {\r\n                    object-fit: fill !important; \r\n                    width: 100% !important; \r\n                    height: 100% !important;\r\n                    display: block !important;\r\n                    background: #000;\r\n                }\r\n                /* Go2RTC Player fixes */\r\n                video-stream-mse {\r\n                    display: block;\r\n                    width: 100%;\r\n                    height: 100%;\r\n                }\r\n                /* Scrollbar hide */\r\n                ::-webkit-scrollbar { width: 6px; height: 6px; }\r\n                ::-webkit-scrollbar-track { background: #111; }\r\n                ::-webkit-scrollbar-thumb { background: #333; }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\n\r\n// Common props: size, color\r\nconst IconBase = ({ size = 16, color = \"currentColor\", children, style, ...props }) => (\r\n    <svg\r\n        width={size}\r\n        height={size}\r\n        viewBox=\"0 0 24 24\"\r\n        fill=\"none\"\r\n        stroke={color}\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        style={{ display: \"inline-block\", verticalAlign: \"middle\", ...style }}\r\n        {...props}\r\n    >\r\n        {children}\r\n    </svg>\r\n);\r\n\r\nexport const Trash = (props) => (\r\n    <IconBase {...props}>\r\n        <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n        <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n    </IconBase>\r\n);\r\n\r\nexport const Edit = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n        <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n    </IconBase>\r\n);\r\n\r\nexport const SettingsIcon = (props) => (\r\n    <IconBase {...props}>\r\n        <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n        <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path>\r\n    </IconBase>\r\n);\r\nexport const Settings = SettingsIcon;\r\n\r\nexport const Lock = (props) => (\r\n    <IconBase {...props}>\r\n        <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\r\n        <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\r\n    </IconBase>\r\n);\r\n\r\nexport const AlertTriangle = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\r\n        <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\r\n        <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\r\n    </IconBase>\r\n);\r\n\r\nexport const Save = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\"></path>\r\n        <polyline points=\"17 21 17 13 7 13 7 21\"></polyline>\r\n        <polyline points=\"7 3 7 8 15 8\"></polyline>\r\n    </IconBase>\r\n);\r\n\r\nexport const Camera = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z\"></path>\r\n        <circle cx=\"12\" cy=\"13\" r=\"4\"></circle>\r\n    </IconBase>\r\n);\r\n\r\nexport const Video = (props) => (\r\n    <IconBase {...props}>\r\n        <polygon points=\"23 7 16 12 23 17 23 7\"></polygon>\r\n        <rect x=\"1\" y=\"5\" width=\"15\" height=\"14\" rx=\"2\" ry=\"2\"></rect>\r\n    </IconBase>\r\n);\r\n\r\nexport const Archive = (props) => (\r\n    <IconBase {...props}>\r\n        <polyline points=\"21 8 21 21 3 21 3 8\"></polyline>\r\n        <rect x=\"1\" y=\"3\" width=\"22\" height=\"5\"></rect>\r\n        <line x1=\"10\" y1=\"12\" x2=\"14\" y2=\"12\"></line>\r\n    </IconBase>\r\n);\r\n\r\nexport const RefreshCw = (props) => (\r\n    <IconBase {...props}>\r\n        <polyline points=\"23 4 23 10 17 10\"></polyline>\r\n        <polyline points=\"1 20 1 14 7 14\"></polyline>\r\n        <path d=\"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15\"></path>\r\n    </IconBase>\r\n);\r\n\r\nexport const ChevronRight = (props) => (\r\n    <IconBase {...props}>\r\n        <polyline points=\"9 18 15 12 9 6\"></polyline>\r\n    </IconBase>\r\n);\r\n\r\nexport const Maximize = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7\" />\r\n    </IconBase>\r\n);\r\n\r\nexport const Minimize = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M4 14h6v6M20 10h-6V4M14 10l7-7M3 21l7-7\" />\r\n    </IconBase>\r\n);\r\n\r\nexport const Circle = (props) => (\r\n    <IconBase {...props}>\r\n        <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\r\n    </IconBase>\r\n);\r\n\r\nexport const Activity = (props) => (\r\n    <IconBase {...props}>\r\n        <polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\"></polyline>\r\n    </IconBase>\r\n);\r\n\r\nexport const Shield = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\"></path>\r\n    </IconBase>\r\n);\r\n","import axios from \"axios\";\r\n\r\n// Use relative path or detect Proxy base\r\nlet baseURL = \"\";\r\nif (typeof window !== 'undefined') {\r\n    // Check for proxy in full URL (HashRouter compatibility)\r\n    const match = window.location.href.match(/(\\/api\\/proxy\\/[^\\/]+)/);\r\n    if (match) {\r\n        baseURL = match[1];\r\n    } else if (window.location.hash.includes(\"#/\")) {\r\n        // Fallback for local dev or direct access\r\n        baseURL = \"\";\r\n    }\r\n}\r\n\r\nconst API = axios.create({\r\n    baseURL: baseURL\r\n});\r\n\r\nexport { API, baseURL };\r\nexport default API;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\n\r\nexport default function Go2RTCPlayer({ camId, streamType = 'hd', style, onClick, onDoubleClick, isHidden }) {\r\n    const videoRef = useRef(null);\r\n    const pcRef = useRef(null);\r\n    const [status, setStatus] = useState(\"init\");\r\n    const [activeStreamType, setActiveStreamType] = useState(streamType);\r\n\r\n    useEffect(() => {\r\n        setActiveStreamType(streamType);\r\n    }, [streamType]);\r\n\r\n    const suffix = activeStreamType === 'low' ? 'sub' : activeStreamType;\r\n    const streamName = `${camId}_${suffix}`;\r\n\r\n    useEffect(() => {\r\n        if (isHidden) return;\r\n\r\n        const connectWebRTC = async () => {\r\n            setStatus(\"connecting\");\r\n            if (pcRef.current) pcRef.current.close();\r\n\r\n            const pc = new RTCPeerConnection({\r\n                iceServers: [{ urls: \"stun:stun.l.google.com:19302\" }]\r\n            });\r\n            pcRef.current = pc;\r\n\r\n            pc.ontrack = (event) => {\r\n                if (videoRef.current) {\r\n                    videoRef.current.srcObject = event.streams[0];\r\n                    videoRef.current.play().catch(() => { });\r\n                    setStatus(\"playing\");\r\n                }\r\n            };\r\n\r\n            pc.addTransceiver('video', { direction: 'recvonly' });\r\n\r\n            try {\r\n                const offer = await pc.createOffer();\r\n                await pc.setLocalDescription(offer);\r\n\r\n                const apiUrl = `/rtc/api/webrtc?src=${streamName}`;\r\n                const res = await fetch(apiUrl, { method: 'POST', body: pc.localDescription.sdp });\r\n\r\n                if (!res.ok) throw new Error(`Status ${res.status}`);\r\n\r\n                const answerSdp = await res.text();\r\n                if (pcRef.current && pcRef.current.signalingState !== 'closed') {\r\n                    await pc.setRemoteDescription(new RTCSessionDescription({ type: 'answer', sdp: answerSdp }));\r\n                }\r\n            } catch (e) {\r\n                console.warn(`[WebRTC] Failed ${streamName}:`, e.message);\r\n                if (activeStreamType === 'low' || activeStreamType === 'sub') {\r\n                    setActiveStreamType('hd');\r\n                } else {\r\n                    setStatus(\"failed\");\r\n                }\r\n            }\r\n        };\r\n\r\n        if (camId) connectWebRTC();\r\n\r\n        return () => {\r\n            if (pcRef.current) { pcRef.current.close(); pcRef.current = null; }\r\n        };\r\n    }, [camId, activeStreamType, streamName, isHidden]);\r\n\r\n    return (\r\n        <div className=\"rtc-player\" style={{ ...style, position: \"relative\", background: \"#000\", width: \"100%\", height: \"100%\", overflow: \"hidden\" }}\r\n            onClick={onClick} onDoubleClick={onDoubleClick}>\r\n            <div style={{ position: \"absolute\", top: 0, left: 0, right: 0, bottom: 0 }}>\r\n                <video\r\n                    className=\"rtc-player-el\"\r\n                    ref={videoRef}\r\n                    style={{ width: \"100%\", height: \"100%\", objectFit: \"fill\", display: \"block\" }}\r\n                    playsInline muted autoPlay\r\n                />\r\n            </div>\r\n            {status === 'connecting' && (\r\n                <div style={{ position: \"absolute\", top: 0, left: 0, width: \"100%\", height: \"100%\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\", color: \"rgba(255,255,255,0.4)\", fontSize: 10, zIndex: 2 }}>\r\n                    Connecting...\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n  var o,\n    r,\n    i = objectWithoutPropertiesLoose(e, t);\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(e);\n    for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n  }\n  return i;\n}\nexport { _objectWithoutProperties as default };","function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nexport { _objectWithoutPropertiesLoose as default };"],"names":["RecorderPlayer","_ref","camId","streamType","style","videoRef","useRef","hlsRef","hlsUrl","setHlsUrl","useState","error","setError","loading","setLoading","useEffect","mode","API","get","concat","then","res","url","data","startsWith","defaults","baseURL","catch","e","video","current","initHls","window","Hls","isSupported","destroy","hls","enableWorker","lowLatencyMode","backBufferLength","loadSource","attachMedia","on","Events","MANIFEST_PARSED","play","console","warn","ERROR","event","fatal","type","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","canPlayType","src","addEventListener","script","document","createElement","onload","head","appendChild","_jsxs","_objectSpread","position","background","overflow","children","_jsx","ref","width","height","objectFit","autoPlay","muted","playsInline","top","left","right","bottom","display","alignItems","justifyContent","color","className","containerStyle","flexDirection","border","borderRadius","iconBtnStyle","cursor","marginRight","ZoneOverlay","cam","containerRef","React","canvasRef","dims","setDims","w","h","obs","ResizeObserver","entries","entry","contentRect","Math","round","observe","disconnect","_cam$ai_server","_cam$ai_server2","canvas","ctx","getContext","clearRect","zones","ai_server","length","roi","push","points","forEach","z","pts","beginPath","x0","y0","moveTo","i","x","y","lineTo","closePath","fillStyle","strokeStyle","lineWidth","fill","stroke","drawZone","pointerEvents","zIndex","CameraCard","_ref2","isMaximized","isHidden","onUpdate","onMaximise","isArmed","health","navigate","useNavigate","hover","setHover","quality","setQuality","contextMenu","setContextMenu","removeEventListener","isRecording","record","isOnline","connected","onMouseEnter","onMouseLeave","onContextMenu","preventDefault","pageX","pageY","padding","minWidth","boxShadow","gap","fontSize","target","onClick","id","Settings","size","Video","flex","Go2RTCPlayer","onDoubleClick","opacity","transition","title","stopPropagation","Archive","Minimize","Maximize","borderTop","Shield","fontWeight","whiteSpace","textOverflow","name","ip","animation","letterSpacing","colors","Live","cams","setCams","status","setStatus","selectedCam","setSelectedCam","gridSize","setGridSize","armingStatus","setArmingStatus","camStatus","setCamStatus","checkArming","statusMap","cameras","c","interval","setInterval","clearInterval","fetchCams","checkStatus","_res$data$system","online","system","uptime","map","i1","i2","handleUpdateCam","async","changes","newCams","post","grid","getGridConfig","cols","rows","ceil","sqrt","capacity","borderBottom","num","Date","toLocaleTimeString","gridTemplateColumns","gridTemplateRows","idx","isVisible","Array","from","max","_","IconBase","props","_objectWithoutProperties","_excluded","viewBox","strokeWidth","strokeLinecap","strokeLinejoin","verticalAlign","Trash","d","Edit","SettingsIcon","cx","cy","r","Lock","rx","ry","AlertTriangle","x1","y1","x2","y2","Camera","ChevronRight","match","location","href","hash","includes","axios","create","pcRef","activeStreamType","setActiveStreamType","suffix","streamName","close","pc","RTCPeerConnection","iceServers","urls","ontrack","srcObject","streams","addTransceiver","direction","offer","createOffer","setLocalDescription","apiUrl","fetch","method","body","localDescription","sdp","ok","Error","answerSdp","text","signalingState","setRemoteDescription","RTCSessionDescription","message","connectWebRTC","t","o","n","hasOwnProperty","call","indexOf","Object","getOwnPropertySymbols","propertyIsEnumerable"],"ignoreList":[],"sourceRoot":""}