{"version":3,"file":"static/js/420.fa10c4f2.chunk.js","mappings":"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","sources":["components/DualStreamPlayer.js","components/MSEPlayer.js","components/CameraCard.js","pages/Live.js","components/Icons.js","api.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\n\r\n/**\r\n * SMART DUAL STREAM MANAGER - Trassir-like with Smart Warm Standby\r\n * \r\n * ARCHITECTURE:\r\n * - Grid: substream only (low CPU)\r\n * - Hover: pre-connect main stream (warm standby)\r\n * - Fullscreen: instant switch (main already connected)\r\n * \r\n * CPU OPTIMIZATION:\r\n * - Only 1 main stream in warm standby at a time\r\n * - Grid idle: minimal overhead (25 substreams only)\r\n * - Switch: <200ms (connection already established)\r\n */\r\n\r\nconst GO2RTC_API = `${window.location.origin}/rtc`;\r\nconst streamPool = new Map();\r\n\r\n/**\r\n * Acquire WebRTC stream (reuses existing connections)\r\n */\r\nasync function acquireStream(camId, type = \"sub\") {\r\n    const key = `${camId}_${type}`;\r\n\r\n    if (streamPool.has(key)) {\r\n        const entry = streamPool.get(key);\r\n        entry.refs++;\r\n        console.log(`[SmartDual] Reusing ${key}, refs: ${entry.refs}`);\r\n        return entry;\r\n    }\r\n\r\n    console.log(`[SmartDual] Creating WebRTC for ${key}`);\r\n    const pc = new RTCPeerConnection({ iceServers: [] });\r\n    const media = new MediaStream();\r\n\r\n    pc.ontrack = (e) => {\r\n        console.log(`[SmartDual] Track received for ${key}`);\r\n        media.addTrack(e.track);\r\n    };\r\n\r\n    pc.addTransceiver(\"video\", { direction: \"recvonly\" });\r\n\r\n    try {\r\n        const offer = await pc.createOffer();\r\n        await pc.setLocalDescription(offer);\r\n\r\n        const res = await fetch(`${GO2RTC_API}/api/webrtc?src=${key}`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/sdp\" },\r\n            body: offer.sdp\r\n        });\r\n\r\n        if (!res.ok) {\r\n            throw new Error(`WebRTC failed: ${res.status}`);\r\n        }\r\n\r\n        const answer = await res.text();\r\n        await pc.setRemoteDescription({ type: \"answer\", sdp: answer });\r\n\r\n        const entry = { pc, media, refs: 1 };\r\n        streamPool.set(key, entry);\r\n        return entry;\r\n    } catch (err) {\r\n        pc.close();\r\n        throw err;\r\n    }\r\n}\r\n\r\n/**\r\n * Release stream (with grace period)\r\n */\r\nfunction releaseStream(camId, type = \"sub\") {\r\n    const key = `${camId}_${type}`;\r\n    const entry = streamPool.get(key);\r\n    if (!entry) return;\r\n\r\n    entry.refs--;\r\n    console.log(`[SmartDual] Released ${key}, refs: ${entry.refs}`);\r\n\r\n    if (entry.refs <= 0) {\r\n        setTimeout(() => {\r\n            const currentEntry = streamPool.get(key);\r\n            if (currentEntry && currentEntry.refs <= 0) {\r\n                console.log(`[SmartDual] Closing idle ${key}`);\r\n                currentEntry.pc.close();\r\n                streamPool.delete(key);\r\n            }\r\n        }, 5000); // 5s grace period (shorter for faster cleanup)\r\n    }\r\n}\r\n\r\n/**\r\n * SMART DUAL STREAM PLAYER\r\n */\r\nexport default function SmartDualStreamPlayer({ camId, isFullscreen, isHidden, isHovered, posterUrl, style }) {\r\n    const videoRef = useRef(null);\r\n    const [subStream, setSubStream] = useState(null);\r\n    const [mainStream, setMainStream] = useState(null);\r\n    const [currentStream, setCurrentStream] = useState(\"sub\");\r\n    const [posterVisible, setPosterVisible] = useState(true);\r\n\r\n    // Reset poster visibility when switching modes or cameras\r\n    useEffect(() => {\r\n        setPosterVisible(true);\r\n    }, [camId, isFullscreen]);\r\n\r\n    // Handle video play event to hide poster\r\n    const handleCanPlay = () => {\r\n        // Delay slighty to ensure frame is rendered\r\n        // setTimeout(() => setPosterVisible(false), 100);\r\n        setPosterVisible(false);\r\n    };\r\n\r\n    // Always acquire substream\r\n    useEffect(() => {\r\n        if (isHidden || !camId) return;\r\n\r\n        let active = true;\r\n        let subEntry;\r\n\r\n        acquireStream(camId, \"sub\")\r\n            .then((sub) => {\r\n                if (!active) {\r\n                    releaseStream(camId, \"sub\");\r\n                    return;\r\n                }\r\n                subEntry = sub;\r\n                setSubStream(sub);\r\n\r\n                // Attach substream to video if not fullscreen\r\n                if (videoRef.current && !isFullscreen) {\r\n                    videoRef.current.srcObject = sub.media;\r\n                    videoRef.current.play().catch(() => { });\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.error(`[SmartDual] Error for sub ${camId}:`, err);\r\n            });\r\n\r\n        return () => {\r\n            active = false;\r\n            if (subEntry) releaseStream(camId, \"sub\");\r\n        };\r\n    }, [camId, isHidden, isFullscreen]);\r\n\r\n    // SMART WARM STANDBY with DEBOUNCE: Pre-connect main stream on sustained HOVER or FULLSCREEN\r\n    useEffect(() => {\r\n        let debounceTimer;\r\n        let mainEntry;\r\n\r\n        const cleanup = () => {\r\n            if (debounceTimer) clearTimeout(debounceTimer);\r\n            if (mainEntry) releaseStream(camId, \"hd\");\r\n        };\r\n\r\n        // Immediate connection for fullscreen\r\n        if (isFullscreen && !isHidden && camId) {\r\n            acquireStream(camId, \"hd\")\r\n                .then((main) => {\r\n                    mainEntry = main;\r\n                    setMainStream(main);\r\n                    if (videoRef.current) {\r\n                        videoRef.current.srcObject = main.media;\r\n                        videoRef.current.play().catch(() => { });\r\n                        setCurrentStream(\"main\");\r\n                    }\r\n                })\r\n                .catch((err) => console.error(`[SmartDual] Error for main ${camId}:`, err));\r\n        }\r\n        // Debounced connection for hover (800ms delay)\r\n        else if (isHovered && !isHidden && camId && !isFullscreen) {\r\n            debounceTimer = setTimeout(() => {\r\n                console.log(`[SmartDual] Hover sustained - pre-connecting main for ${camId}`);\r\n                acquireStream(camId, \"hd\")\r\n                    .then((main) => {\r\n                        mainEntry = main;\r\n                        setMainStream(main);\r\n                        // Don't attach - warm standby only\r\n                    })\r\n                    .catch((err) => console.error(`[SmartDual] Error for main ${camId}:`, err));\r\n            }, 800);\r\n        }\r\n        // Release main stream when not needed\r\n        else if (mainStream && !isFullscreen && !isHovered) {\r\n            releaseStream(camId, \"hd\");\r\n            setMainStream(null);\r\n        }\r\n\r\n        return cleanup;\r\n    }, [isHovered, isFullscreen, camId, isHidden]);\r\n\r\n    // INSTANT SWITCH when fullscreen changes\r\n    useEffect(() => {\r\n        if (!videoRef.current) return;\r\n\r\n        // Show poster briefly on switch\r\n        setPosterVisible(true);\r\n\r\n        if (isFullscreen && mainStream) {\r\n            // Switch to main\r\n            console.log(`[SmartDual] Switching to MAIN for ${camId}`);\r\n            videoRef.current.srcObject = mainStream.media;\r\n            videoRef.current.play().catch(() => { });\r\n            setCurrentStream(\"main\");\r\n        } else if (!isFullscreen && subStream) {\r\n            // Switch back to sub\r\n            console.log(`[SmartDual] Switching to SUB for ${camId}`);\r\n            videoRef.current.srcObject = subStream.media;\r\n            videoRef.current.play().catch(() => { });\r\n            setCurrentStream(\"sub\");\r\n        }\r\n    }, [isFullscreen, subStream, mainStream, camId]);\r\n\r\n    return (\r\n        <div style={{ ...style, position: \"relative\", background: \"#000\", width: \"100%\", height: \"100%\", overflow: \"hidden\" }}>\r\n            {/* STATIC POSTER (Zero Latency UX) */}\r\n            {posterUrl && (\r\n                <img\r\n                    src={posterUrl}\r\n                    loading=\"eager\"\r\n                    style={{\r\n                        position: \"absolute\",\r\n                        top: 0,\r\n                        left: 0,\r\n                        width: \"100%\",\r\n                        height: \"100%\",\r\n                        objectFit: \"fill\",\r\n                        zIndex: 10,\r\n                        opacity: posterVisible ? 1 : 0,\r\n                        transition: \"opacity 150ms ease-out\",\r\n                        pointerEvents: \"none\"\r\n                    }}\r\n                    onError={(e) => e.target.style.display = 'none'}\r\n                    alt=\"\"\r\n                />\r\n            )}\r\n\r\n            <video\r\n                ref={videoRef}\r\n                autoPlay\r\n                muted\r\n                playsInline\r\n                onPlaying={handleCanPlay}\r\n                style={{\r\n                    width: \"100%\",\r\n                    height: \"100%\",\r\n                    objectFit: \"fill\",\r\n                    position: \"absolute\",\r\n                    top: 0,\r\n                    left: 0\r\n                }}\r\n            />\r\n            {/* Debug indicator */}\r\n            {process.env.NODE_ENV === 'development' && (\r\n                <div style={{\r\n                    position: \"absolute\",\r\n                    top: 4,\r\n                    right: 4,\r\n                    background: \"rgba(0,0,0,0.7)\",\r\n                    color: mainStream ? \"#0f0\" : \"#ff0\",\r\n                    padding: \"2px 6px\",\r\n                    fontSize: 10,\r\n                    fontFamily: \"monospace\",\r\n                    zIndex: 20\r\n                }}>\r\n                    {currentStream.toUpperCase()} {mainStream && !isFullscreen ? \"(STANDBY)\" : \"\"}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react';\r\n\r\nfunction MSEPlayer({ camId, streamType = 'hd', style, onClick, onDoubleClick, isHidden }) {\r\n    const videoRef = useRef(null);\r\n    const wsRef = useRef(null);\r\n    const [status, setStatus] = useState(\"init\");\r\n    const [errorMsg, setErrorMsg] = useState(null);\r\n\r\n    const suffix = streamType === 'low' ? 'sub' : streamType === 'hd' ? 'hd' : streamType;\r\n    const streamName = `${camId}_${suffix}`;\r\n\r\n    useEffect(() => {\r\n        if (isHidden) return;\r\n\r\n        let isMounted = true;\r\n        setStatus(\"analyzing\");\r\n        setErrorMsg(null);\r\n\r\n        const video = videoRef.current;\r\n        if (!video) return;\r\n\r\n        const cleanup = () => {\r\n            isMounted = false;\r\n            if (wsRef.current) {\r\n                wsRef.current.close();\r\n                wsRef.current = null;\r\n            }\r\n            if (video.src) {\r\n                URL.revokeObjectURL(video.src);\r\n                video.src = '';\r\n            }\r\n        };\r\n\r\n        const startMse = async () => {\r\n            try {\r\n                // 1. Detect Codec via Go2RTC API\r\n                const infoRes = await fetch(`/rtc/api/streams?src=${streamName}`);\r\n                if (!infoRes.ok) throw new Error(\"Stream info fetch failed\");\r\n                const infoData = await infoRes.json();\r\n\r\n                // Parse codec from Go2RTC response\r\n                // Structure: { \"streams\": { \"streamName\": { \"producers\": [ { \"medias\": [ \"video, recvonly, H264...\" ] } ] } } }\r\n                // OR simplified json depending on version. Let's look for known patterns.\r\n\r\n                let detectedCodec = 'avc1.64001E'; // Default H264 High\r\n                let codecType = 'h264';\r\n\r\n                // Robust Search in JSON\r\n                const jsonStr = JSON.stringify(infoData);\r\n                if (jsonStr.includes(\"H265\") || jsonStr.includes(\"HEVC\")) {\r\n                    detectedCodec = 'hvc1.1.6.L93.B0'; // Generic H265\r\n                    codecType = 'h265';\r\n                } else if (jsonStr.includes(\"H264\")) {\r\n                    detectedCodec = 'avc1.64001E';\r\n                    codecType = 'h264';\r\n                }\r\n\r\n                console.log(`[MSE] Detected Codec for ${streamName}: ${codecType} (${detectedCodec})`);\r\n\r\n                const mime = `video/mp4; codecs=\"${detectedCodec}\"`;\r\n                if (!MediaSource.isTypeSupported(mime)) {\r\n                    throw new Error(`Browser does not support ${codecType} (${detectedCodec})`);\r\n                }\r\n\r\n                // 2. Initialize MSE\r\n                const mse = new MediaSource();\r\n                video.src = URL.createObjectURL(mse);\r\n\r\n                mse.addEventListener('sourceopen', () => {\r\n                    if (!isMounted) return;\r\n\r\n                    const proto = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\r\n                    const wsUrl = `${proto}//${window.location.host}/rtc/api/ws?src=${streamName}`;\r\n\r\n                    const ws = new WebSocket(wsUrl);\r\n                    ws.binaryType = 'arraybuffer';\r\n                    wsRef.current = ws;\r\n\r\n                    ws.onopen = () => setStatus(\"playing\");\r\n                    ws.onclose = () => {\r\n                        if (isMounted) setStatus(\"disconnected\");\r\n                    };\r\n                    ws.onerror = (e) => console.error(\"[MSE] WS Error\", e);\r\n\r\n                    let sb = null;\r\n                    const queue = [];\r\n\r\n                    const processQueue = () => {\r\n                        if (sb && !sb.updating && queue.length > 0) {\r\n                            try {\r\n                                sb.appendBuffer(queue.shift());\r\n                            } catch (e) {\r\n                                console.error(\"[MSE] Append Error\", e);\r\n                            }\r\n                        }\r\n                    };\r\n\r\n                    ws.onmessage = (event) => {\r\n                        const data = event.data;\r\n                        if (!sb && mse.readyState === 'open') {\r\n                            try {\r\n                                sb = mse.addSourceBuffer(mime);\r\n                                sb.mode = 'segments';\r\n                                sb.addEventListener('updateend', processQueue);\r\n                            } catch (e) {\r\n                                console.error(\"[MSE] SourceBuffer Error\", e);\r\n                                ws.close();\r\n                            }\r\n                        }\r\n                        if (sb) {\r\n                            queue.push(data);\r\n                            processQueue();\r\n                        }\r\n                    };\r\n                });\r\n\r\n            } catch (e) {\r\n                console.error(\"[MSE] Init Error:\", e);\r\n                if (isMounted) {\r\n                    setStatus(\"error\");\r\n                    setErrorMsg(e.message);\r\n                }\r\n            }\r\n        };\r\n\r\n        startMse();\r\n\r\n        // Auto-play watchdog\r\n        const interval = setInterval(() => {\r\n            if (video.paused && status === 'playing') video.play().catch(() => { });\r\n        }, 2000);\r\n\r\n        return () => {\r\n            clearInterval(interval);\r\n            cleanup();\r\n        };\r\n    }, [camId, suffix, isHidden, streamName]);\r\n\r\n    return (\r\n        <div className=\"mse-player\" style={{ ...style, position: \"relative\", background: \"#000\", width: \"100%\", height: \"100%\", overflow: \"hidden\" }}\r\n            onClick={onClick} onDoubleClick={onDoubleClick}>\r\n            <video\r\n                ref={videoRef}\r\n                style={{ width: \"100%\", height: \"100%\", objectFit: \"fill\", display: \"block\" }}\r\n                playsInline muted autoPlay\r\n            />\r\n\r\n            {/* STATUS OVERLAY */}\r\n            {(status !== 'playing' || errorMsg) && (\r\n                <div style={{\r\n                    position: \"absolute\", inset: 0,\r\n                    display: \"flex\", flexDirection: \"column\", alignItems: \"center\", justifyContent: \"center\",\r\n                    background: \"rgba(0,0,0,0.6)\", color: \"#fff\", zIndex: 10\r\n                }}>\r\n                    {status === 'analyzing' && <div style={{ fontSize: 12 }}>Analyzing Stream...</div>}\r\n                    {status === 'connecting' && <div style={{ fontSize: 12 }}>Connecting TCP...</div>}\r\n                    {status === 'error' && (\r\n                        <div style={{ textAlign: \"center\", padding: 20 }}>\r\n                            <div style={{ color: \"#ff4444\", fontWeight: \"bold\", marginBottom: 5 }}>Playback Error</div>\r\n                            <div style={{ fontSize: 11, color: \"#ccc\" }}>{errorMsg}</div>\r\n                            {errorMsg && errorMsg.includes(\"H265\") && (\r\n                                <div style={{ fontSize: 10, marginTop: 10, fontStyle: \"italic\", color: \"#aaa\" }}>\r\n                                    Try native app or switch camera to H.264\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default React.memo(MSEPlayer);\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport DualStreamPlayer from \"./DualStreamPlayer\";\r\nimport MSEPlayer from \"./MSEPlayer\";\r\nimport { Maximize, Minimize, Circle, Activity, Archive, Shield, SettingsIcon } from \"./Icons\";\r\n\r\n// --- STYLES ---\r\nconst containerStyle = {\r\n    position: \"relative\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    background: \"#000\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    overflow: \"hidden\",\r\n    border: \"1px solid #222\"\r\n};\r\n\r\nconst controlBtnStyle = {\r\n    background: \"rgba(20,20,20,0.8)\",\r\n    border: \"1px solid rgba(255,255,255,0.15)\",\r\n    color: \"#fff\",\r\n    borderRadius: 4,\r\n    width: 32,\r\n    height: 32,\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    cursor: \"pointer\",\r\n    transition: \"all 0.2s ease\"\r\n};\r\n\r\n// --- ZONE OVERLAY COMPONENT ---\r\nfunction ZoneOverlay({ cam, isArmed, activeZones = [] }) {\r\n    const containerRef = useRef(null);\r\n    const canvasRef = useRef(null);\r\n    const [dims, setDims] = useState({ w: 0, h: 0 });\r\n\r\n    useEffect(() => {\r\n        const obs = new ResizeObserver(entries => {\r\n            for (const entry of entries) {\r\n                const { width, height } = entry.contentRect;\r\n                setDims({ w: Math.round(width), h: Math.round(height) });\r\n            }\r\n        });\r\n        if (containerRef.current) obs.observe(containerRef.current);\r\n        return () => obs.disconnect();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas || dims.w === 0 || !isArmed) {\r\n            if (canvas) {\r\n                const ctx = canvas.getContext(\"2d\");\r\n                ctx.clearRect(0, 0, dims.w, dims.h);\r\n            }\r\n            return;\r\n        }\r\n\r\n        const ctx = canvas.getContext(\"2d\");\r\n        ctx.clearRect(0, 0, dims.w, dims.h);\r\n\r\n        const zones = cam.ai_server?.zones || [];\r\n        if (zones.length === 0 && cam.ai_server?.roi) {\r\n            zones.push({ points: cam.ai_server.roi, name: 'default' });\r\n        }\r\n\r\n        const drawZone = (pts, isActive) => {\r\n            if (!pts || pts.length === 0) return;\r\n            ctx.beginPath();\r\n            const x0 = pts[0][0] > 1 ? pts[0][0] : pts[0][0] * dims.w;\r\n            const y0 = pts[0][1] > 1 ? pts[0][1] : pts[0][1] * dims.h;\r\n            ctx.moveTo(x0, y0);\r\n            for (let i = 1; i < pts.length; i++) {\r\n                const x = pts[i][0] > 1 ? pts[i][0] : pts[i][0] * dims.w;\r\n                const y = pts[i][1] > 1 ? pts[i][1] : pts[i][1] * dims.h;\r\n                ctx.lineTo(x, y);\r\n            }\r\n            ctx.closePath();\r\n\r\n            // ANTIGRAVITY: --overlay-style \"stroke:2px,fill:rgba(0,255,0,0.15)\"\r\n            // Use different color if zone is active/triggered? \r\n            // For now, if activeZones list is provided, only draw active ones?\r\n            // Or draw active ones in RED and inactive in GREEN?\r\n            // \"overlay-zones-source activeZones\" implies highlighting active ones.\r\n            // Assuming activeZones contains names of triggered zones.\r\n\r\n            const isTriggered = isActive;\r\n\r\n            ctx.fillStyle = isTriggered ? \"rgba(255, 0, 0, 0.3)\" : \"rgba(0, 255, 0, 0.15)\";\r\n            ctx.strokeStyle = isTriggered ? \"rgba(255, 0, 0, 0.8)\" : \"rgba(0, 255, 0, 0.8)\";\r\n            ctx.lineWidth = 2;\r\n            ctx.fill();\r\n            ctx.stroke();\r\n        };\r\n\r\n        zones.forEach(z => {\r\n            // If activeZones is not empty, check if this zone is active.\r\n            // If activeZones is undefined/empty array but isArmed is true, maybe show all as armed?\r\n            // Spec says: --overlay-zones-source activeZones\r\n            // This usually means we rely on the list.\r\n\r\n            // Logic: \r\n            // always draw configured zones. \r\n            // Highlight if in activeZones? \r\n            // Or only draw if in activeZones? \r\n            // \"overlay-trigger armed\" -> Draw if system is armed.\r\n\r\n            // Let's draw ALL configured zones in GREEN (Armed).\r\n            // If we had per-zone triggering, we'd use RED.\r\n            // Since `activeZones` usually means \"zones that are causing an alert\", \r\n            // but here it might mean \"zones that are currently monitored\".\r\n            // Let's assume if it's in the list, it's monitored.\r\n\r\n            const isMonitored = activeZones.length === 0 || activeZones.includes(z.name);\r\n            if (z.points && isMonitored) drawZone(z.points, false);\r\n        });\r\n    }, [cam, dims, isArmed, activeZones]);\r\n\r\n    return (\r\n        <div ref={containerRef} style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%', pointerEvents: 'none', zIndex: 5 }}>\r\n            <canvas ref={canvasRef} width={dims.w} height={dims.h} style={{ width: '100%', height: '100%', display: 'block', background: 'transparent' }} />\r\n        </div>\r\n    );\r\n}\r\n\r\n// --- MAIN COMPONENT ---\r\nfunction CameraCard({ cam, isMaximized, isHidden, onUpdate, onMaximise, isArmed, activeZones, health, isReady, isDegraded, quality = 'sub', isFocused }) {\r\n    const navigate = useNavigate();\r\n    const [hover, setHover] = useState(false);\r\n    const [contextMenu, setContextMenu] = useState(null);\r\n\r\n    // Hover Preview Logic\r\n    const [hoverCount, setHoverCount] = useState(0);\r\n    useEffect(() => {\r\n        let t;\r\n        if (hover && !isMaximized) {\r\n            t = setInterval(() => setHoverCount(c => c + 1), 1000);\r\n        } else {\r\n            setHoverCount(0);\r\n        }\r\n        return () => clearInterval(t);\r\n    }, [hover, isMaximized]);\r\n\r\n    const showHoverPreview = hoverCount >= 3;\r\n\r\n    useEffect(() => {\r\n        const h = () => setContextMenu(null);\r\n        window.addEventListener('click', h);\r\n        return () => window.removeEventListener('click', h);\r\n    }, []);\r\n\r\n    const handleContextMenu = (e) => {\r\n        e.preventDefault();\r\n        setContextMenu({ x: e.pageX, y: e.pageY });\r\n    };\r\n\r\n    const isRecording = cam.record !== false;\r\n    const isOnline = health ? health.connected : false;\r\n    const isActuallyHovered = isFocused || showHoverPreview;\r\n\r\n    // ANTIGRAVITY: --arming-colors \"armed=green,disarmed=gray,alert=red\"\r\n    const getArmingColor = () => {\r\n        if (isDegraded) return \"#e74c3c\"; // alert = red\r\n        if (isArmed) return \"#2ecc71\";   // armed = green\r\n        return \"#888\";                   // disarmed = gray\r\n    };\r\n\r\n    return (\r\n        <div style={{ ...containerStyle, cursor: isMaximized ? \"default\" : \"pointer\" }}\r\n            onMouseEnter={() => setHover(true)}\r\n            onMouseLeave={() => setHover(false)}\r\n            onContextMenu={handleContextMenu}\r\n            onClick={() => !isMaximized && onMaximise(cam)} // Grid click -> Fullscreen\r\n            onDoubleClick={(e) => {\r\n                if (isMaximized) {\r\n                    e.stopPropagation();\r\n                    onMaximise(null); // Fullscreen double click -> Close\r\n                }\r\n            }}\r\n        >\r\n            {/* VIDEO AREA */}\r\n            <div style={{ flex: 1, position: \"relative\", background: \"#000\", overflow: \"hidden\" }}>\r\n                {quality !== 'off' ? (\r\n                    isMaximized ? (\r\n                        <MSEPlayer\r\n                            url={`ws://${window.location.hostname}:1984/api/ws?src=${cam.id}`}\r\n                            camId={cam.id}\r\n                        />\r\n                    ) : (\r\n                        <DualStreamPlayer\r\n                            camId={cam.id}\r\n                            isFullscreen={isMaximized}\r\n                            isHidden={isHidden}\r\n                            isHovered={isActuallyHovered}\r\n                            posterUrl={`/snapshots/${cam.id}.jpg`}\r\n                            style={{ width: \"100%\", height: \"100%\" }}\r\n                        />\r\n                    )\r\n                ) : (\r\n                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: '100%', color: '#111', fontSize: 10 }}>\r\n                        PAUSED\r\n                    </div>\r\n                )}\r\n\r\n                {/* UX BADGES / ICONS */}\r\n                <div style={{ position: \"absolute\", top: 8, left: 8, display: \"flex\", gap: 6, zIndex: 10 }}>\r\n                    {isRecording && (\r\n                        <div style={{ background: \"#e74c3c\", color: \"#fff\", padding: \"2px 6px\", borderRadius: 4, fontSize: 10, fontWeight: \"bold\", display: \"flex\", alignItems: \"center\", gap: 4 }}>\r\n                            <Circle size={8} fill=\"white\" /> REC\r\n                        </div>\r\n                    )}\r\n\r\n                    <div style={{\r\n                        background: getArmingColor(),\r\n                        color: \"#fff\",\r\n                        padding: \"2px 6px\",\r\n                        borderRadius: 4,\r\n                        fontSize: 10,\r\n                        fontWeight: \"bold\",\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        gap: 4,\r\n                        boxShadow: (isArmed || isDegraded) ? `0 0 10px ${getArmingColor()}80` : \"none\"\r\n                    }}>\r\n                        <Shield size={10} fill=\"white\" />\r\n                        {isDegraded ? \"ALERTA\" : (isArmed ? \"ARMAT\" : \"DEZARMAT\")}\r\n                    </div>\r\n\r\n                    {isMaximized && (\r\n                        <div style={{ background: \"rgba(0,0,0,0.6)\", color: \"#2ecc71\", padding: \"2px 6px\", borderRadius: 4, fontSize: 10, fontWeight: \"bold\", border: \"1px solid #2ecc71\" }}>\r\n                            MAINSTREAM  15 FPS\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* INTERACTIVE OVERLAY */}\r\n                <div style={{\r\n                    position: \"absolute\", bottom: 0, left: 0, right: 0,\r\n                    padding: \"8px\", background: \"linear-gradient(transparent, rgba(0,0,0,0.95))\",\r\n                    display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\",\r\n                    opacity: (hover || isMaximized) ? 1 : 0, transition: \"opacity 0.2s\", zIndex: 20\r\n                }}>\r\n                    <span style={{ fontSize: 12, fontWeight: \"bold\", color: \"#fff\", textShadow: \"0 1px 4px #000\" }}>{cam.name || cam.ip}</span>\r\n                    <div style={{ display: \"flex\", gap: 6 }}>\r\n                        <button style={controlBtnStyle} title=\"Arhiv Video\"\r\n                            onClick={(e) => { e.stopPropagation(); navigate(`/playback?camId=${cam.id}`); }}>\r\n                            <Archive size={16} />\r\n                        </button>\r\n\r\n                        <button style={controlBtnStyle} title=\"Configurare Armare\"\r\n                            onClick={(e) => { e.stopPropagation(); navigate(`/settings?tab=channels&camId=${cam.id}`); }}\r\n                            onMouseEnter={(e) => e.target.style.background = getArmingColor()}>\r\n                            <Shield size={16} color=\"#fff\" />\r\n                        </button>\r\n\r\n                        <button style={controlBtnStyle} title={isMaximized ? \"Minimizeaza\" : \"Maximizeaza\"}\r\n                            onClick={(e) => { e.stopPropagation(); onMaximise(isMaximized ? null : cam); }}>\r\n                            {isMaximized ? <Minimize size={16} /> : <Maximize size={16} />}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* ZONES */}\r\n                <ZoneOverlay cam={cam} isArmed={isArmed} activeZones={activeZones} />\r\n\r\n                {/* CONTEXT MENU */}\r\n                {contextMenu && (\r\n                    <div style={{\r\n                        position: 'fixed',\r\n                        top: contextMenu.y,\r\n                        left: contextMenu.x,\r\n                        background: '#1a1a1a',\r\n                        border: '1px solid #333',\r\n                        borderRadius: 4,\r\n                        padding: '4px 0',\r\n                        zIndex: 10000,\r\n                        boxShadow: '0 4px 25px rgba(0,0,0,0.7)',\r\n                        minWidth: 180\r\n                    }}>\r\n                        <ContextItem icon={<Archive size={14} />} label=\"Arhiv Video\" onClick={() => navigate(`/playback?camId=${cam.id}`)} />\r\n                        <ContextItem icon={<SettingsIcon size={14} />} label=\"Hardware / Dispozitive IP\" onClick={() => navigate(`/settings?tab=hardware&camId=${cam.id}`)} />\r\n                        <ContextItem icon={<Activity size={14} />} label=\"Setri Canal\" onClick={() => navigate(`/settings?tab=channels&camId=${cam.id}`)} />\r\n                        <ContextItem icon={<Shield size={14} />} label=\"Meniu Armare\" onClick={() => navigate(`/settings?tab=arming&camId=${cam.id}`)} />\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction ContextItem({ icon, label, onClick }) {\r\n    const [hover, setHover] = useState(false);\r\n    return (\r\n        <div\r\n            onMouseEnter={() => setHover(true)}\r\n            onMouseLeave={() => setHover(false)}\r\n            onClick={(e) => { e.stopPropagation(); onClick(); }}\r\n            style={{\r\n                padding: '10px 14px',\r\n                color: hover ? '#fff' : '#ccc',\r\n                background: hover ? '#333' : 'transparent',\r\n                fontSize: 12,\r\n                cursor: 'pointer',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: 10,\r\n                transition: 'all 0.1s ease',\r\n                borderBottom: '1px solid #222'\r\n            }}\r\n        >\r\n            {icon} {label}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default React.memo(CameraCard);\r\n","import React, { useEffect, useState, useCallback } from \"react\";\r\nimport { API } from \"../api\";\r\nimport CameraCard from \"../components/CameraCard\";\r\n\r\n/**\r\n * LIVE PAGE - AUTHORITATIVE BACKEND MODEL\r\n * \r\n * Arming Contract:\r\n *   - UI has NO local arming state\r\n *   - UI is a PURE MIRROR of backend state\r\n *   - On every event: cameraState = backendState (full replace, no merge)\r\n *   - Overlay renders based on effectiveArmed + activeZones from backend\r\n * \r\n * Profile: authoritative-backend-model\r\n *   --arming-authority backend\r\n *   --ui-arming-role mirror-only\r\n *   --ui-disable-local-arming-state true\r\n *   --ui-disable-arming-merge true\r\n *   --ui-force-state-replace true\r\n */\r\n\r\nexport default function Live() {\r\n    const [cams, setCams] = useState([]);\r\n    const [status, setStatus] = useState(\"Checking...\");\r\n    const [selectedCam, setSelectedCam] = useState(null);\r\n    const [gridSize, setGridSize] = useState(8);\r\n    const [camStatus, setCamStatus] = useState({});\r\n\r\n    // BACKEND ARMING STATE - this is the ONLY source of truth\r\n    // NO local arming flags, NO merge, FULL REPLACE on every update\r\n    const [backendArmingState, setBackendArmingState] = useState({\r\n        systemArmed: false,\r\n        cameras: {} // { [camId]: { effectiveArmed, activeZones, mode, schedule } }\r\n    });\r\n\r\n    // Grid Virtualization\r\n    const [visibleCams, setVisibleCams] = useState(new Set());\r\n    const [focusedCam, setFocusedCam] = useState(null);\r\n    const MAX_ACTIVE_STREAMS = 16;\r\n\r\n    // Keyboard Shortcuts\r\n    useEffect(() => {\r\n        const handleKeys = (e) => {\r\n            if (e.key === 'Escape' && selectedCam) setSelectedCam(null);\r\n        };\r\n        window.addEventListener('keydown', handleKeys);\r\n        return () => window.removeEventListener('keydown', handleKeys);\r\n    }, [selectedCam]);\r\n\r\n    // Default visible cams\r\n    useEffect(() => {\r\n        if (cams.length > 0 && visibleCams.size === 0) {\r\n            const initial = new Set();\r\n            cams.slice(0, gridSize).forEach(c => initial.add(c.id));\r\n            setVisibleCams(initial);\r\n        }\r\n    }, [cams, gridSize]);\r\n\r\n    /**\r\n     * FETCH ARMING STATE FROM BACKEND\r\n     * This is the ONLY way arming state enters UI\r\n     * FULL REPLACE - no merge with previous state\r\n     */\r\n    const fetchArmingState = useCallback(() => {\r\n        API.get(\"arming-state/state\").then(res => {\r\n            // FULL STATE REPLACE - no merge!\r\n            setBackendArmingState({\r\n                systemArmed: !!res.data.armed,\r\n                cameras: res.data.cameras || {}\r\n            });\r\n        }).catch(() => {\r\n            // On error, clear state (fail-safe disarm display)\r\n            setBackendArmingState({ systemArmed: false, cameras: {} });\r\n        });\r\n    }, []);\r\n\r\n    // Poll arming state\r\n    useEffect(() => {\r\n        fetchArmingState();\r\n        const interval = setInterval(fetchArmingState, 5000);\r\n        return () => clearInterval(interval);\r\n    }, [fetchArmingState]);\r\n\r\n    // Poll camera config & status\r\n    useEffect(() => {\r\n        const fetchCams = () => API.get(\"cameras/config\").then(res => setCams(res.data)).catch(console.error);\r\n        fetchCams();\r\n\r\n        const checkStatus = () => {\r\n            API.get(\"status\").then(res => {\r\n                const isOnline = res.data.online === true || res.data.status === \"Connected\" || res.data.system?.uptime > 0;\r\n                setStatus(isOnline ? \"Connected\" : \"Disconnected\");\r\n                if (res.data.cameras) {\r\n                    const map = {};\r\n                    res.data.cameras.forEach(c => map[c.id] = { ...c, connected: c.status === \"ONLINE\" });\r\n                    setCamStatus(map);\r\n                }\r\n            }).catch(() => setStatus(\"Disconnected\"));\r\n        };\r\n        checkStatus();\r\n\r\n        const i1 = setInterval(fetchCams, 10000);\r\n        const i2 = setInterval(checkStatus, 3000);\r\n        return () => { clearInterval(i1); clearInterval(i2); };\r\n    }, []);\r\n\r\n    /**\r\n     * WEBSOCKET - ARMING STATE UPDATES\r\n     * On receive: FULL STATE REPLACE (no merge!)\r\n     */\r\n    useEffect(() => {\r\n        const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\r\n        const wsUrl = `${protocol}//${window.location.hostname}:8090`;\r\n        let ws;\r\n        let reconnectTimer;\r\n\r\n        const connect = () => {\r\n            ws = new WebSocket(wsUrl);\r\n\r\n            ws.onmessage = (event) => {\r\n                try {\r\n                    const msg = JSON.parse(event.data);\r\n\r\n                    if (msg.type === 'ARMING_STATE_CHANGED' || msg.type === 'camera:arming:update') {\r\n                        // FULL STATE REPLACE - the core fix\r\n                        if (msg.payload) {\r\n                            if (msg.payload.cameras) {\r\n                                // Full state update from backend\r\n                                setBackendArmingState({\r\n                                    systemArmed: !!msg.payload.armed,\r\n                                    cameras: msg.payload.cameras\r\n                                });\r\n                            } else if (msg.payload.cameraId) {\r\n                                // Single camera update - still replace that camera fully\r\n                                setBackendArmingState(prev => ({\r\n                                    ...prev,\r\n                                    cameras: {\r\n                                        ...prev.cameras,\r\n                                        [msg.payload.cameraId]: {\r\n                                            effectiveArmed: msg.payload.effectiveArmed,\r\n                                            activeZones: msg.payload.activeZones,\r\n                                            mode: msg.payload.mode\r\n                                        }\r\n                                    }\r\n                                }));\r\n                            }\r\n                        } else {\r\n                            // No payload, refetch full state\r\n                            fetchArmingState();\r\n                        }\r\n                    }\r\n                } catch (e) {\r\n                    console.warn('[Live] WS parse error', e);\r\n                }\r\n            };\r\n\r\n            ws.onclose = () => {\r\n                reconnectTimer = setTimeout(connect, 3000);\r\n            };\r\n        };\r\n\r\n        connect();\r\n        return () => {\r\n            if (ws) ws.close();\r\n            clearTimeout(reconnectTimer);\r\n        };\r\n    }, [fetchArmingState]);\r\n\r\n    // IntersectionObserver for virtualization\r\n    useEffect(() => {\r\n        if (cams.length === 0 || selectedCam) return;\r\n\r\n        const observer = new IntersectionObserver((entries) => {\r\n            setVisibleCams(prev => {\r\n                const next = new Set(prev);\r\n                entries.forEach(entry => {\r\n                    const id = entry.target.getAttribute('data-cam-id');\r\n                    if (entry.isIntersecting) next.add(id);\r\n                    else if (id) next.delete(id);\r\n                });\r\n                return next;\r\n            });\r\n        }, { threshold: 0.1, rootMargin: '200px' });\r\n\r\n        const cards = document.querySelectorAll('[data-cam-id]');\r\n        cards.forEach(card => observer.observe(card));\r\n        return () => observer.disconnect();\r\n    }, [cams, gridSize, selectedCam]);\r\n\r\n    /**\r\n     * GET CAMERA ARMING STATE\r\n     * Pure read from backend state - NO local flags\r\n     */\r\n    const getCameraArming = (camId) => {\r\n        const camState = backendArmingState.cameras[camId];\r\n        if (camState) {\r\n            return {\r\n                isArmed: !!camState.effectiveArmed,\r\n                activeZones: camState.activeZones || []\r\n            };\r\n        }\r\n        // Fallback to system armed state if no per-camera data\r\n        return {\r\n            isArmed: backendArmingState.systemArmed,\r\n            activeZones: []\r\n        };\r\n    };\r\n\r\n    // Quality policy\r\n    const getQualityForCam = (camId, idx) => {\r\n        if (selectedCam) {\r\n            return (selectedCam.id === camId) ? 'hd' : 'off';\r\n        }\r\n        const isVisible = visibleCams.has(camId) || (idx < 4);\r\n        if (!isVisible) return 'off';\r\n        if (focusedCam === camId) return 'hd';\r\n        if (visibleCams.size > MAX_ACTIVE_STREAMS) return 'low';\r\n        return 'sub';\r\n    };\r\n\r\n    // Grid config\r\n    const getGridConfig = () => {\r\n        switch (gridSize) {\r\n            case 1: return { cols: \"1fr\", rows: \"1fr\" };\r\n            case 4: return { cols: \"repeat(2, 1fr)\", rows: \"repeat(2, 1fr)\" };\r\n            case 9: return { cols: \"repeat(3, 1fr)\", rows: \"repeat(3, 1fr)\" };\r\n            case 16: return { cols: \"repeat(4, 1fr)\", rows: \"repeat(4, 1fr)\" };\r\n            case 25: return { cols: \"repeat(5, 1fr)\", rows: \"repeat(5, 1fr)\" };\r\n            case 32: return { cols: \"repeat(8, 1fr)\", rows: \"repeat(4, 1fr)\" };\r\n            default:\r\n                const cols = Math.ceil(Math.sqrt(gridSize));\r\n                const rows = Math.ceil(gridSize / cols);\r\n                return { cols: `repeat(${cols}, 1fr)`, rows: `repeat(${rows}, 1fr)` };\r\n        }\r\n    };\r\n\r\n    const grid = getGridConfig();\r\n\r\n    return (\r\n        <div style={{ width: \"100%\", height: \"100%\", background: \"#000\", color: \"#ccc\", overflow: \"hidden\", display: \"flex\", flexDirection: \"column\", position: \"relative\" }}>\r\n\r\n            {/* TOOLBAR */}\r\n            {!selectedCam && (\r\n                <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", padding: \"4px 8px\", background: \"#050505\", borderBottom: \"1px solid #111\", height: \"30px\", zIndex: 100 }}>\r\n                    <div style={{ display: \"flex\", alignItems: \"center\", gap: 15 }}>\r\n                        <div style={{ fontWeight: \"800\", fontSize: 10, color: \"#999\", display: \"flex\", alignItems: \"center\", gap: 8 }}>\r\n                            <div style={{ width: 6, height: 6, borderRadius: \"50%\", background: status === \"Connected\" ? \"#2ecc71\" : \"#e74c3c\" }}></div>\r\n                            MONITORIZARE LIVE\r\n                        </div>\r\n                        <div style={{ display: \"flex\", gap: 2 }}>\r\n                            {[1, 4, 9, 16, 25, 32].map(num => (\r\n                                <button key={num} onClick={() => setGridSize(num)} style={{ border: \"1px solid #1a1a1a\", background: gridSize === num ? \"#007acc\" : \"#0a0a0a\", color: \"#fff\", width: 28, height: 18, cursor: \"pointer\", fontSize: 9, borderRadius: 2 }}>{num}</button>\r\n                            ))}\r\n                        </div>\r\n                        <div style={{ fontSize: 9, color: backendArmingState.systemArmed ? '#2ecc71' : '#888' }}>\r\n                            {backendArmingState.systemArmed ? ' SISTEM ARMAT' : ' DEZARMAT'}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* FULLSCREEN OVERLAY */}\r\n            {selectedCam && (\r\n                <div style={{ position: \"absolute\", top: 0, left: 0, right: 0, bottom: 0, background: \"#000\", zIndex: 9999, display: \"flex\" }}>\r\n                    <CameraCard\r\n                        cam={selectedCam}\r\n                        isMaximized={true}\r\n                        isHidden={false}\r\n                        onMaximise={() => setSelectedCam(null)}\r\n                        {...getCameraArming(selectedCam.id)}\r\n                        health={camStatus[selectedCam.id]}\r\n                        isReady={camStatus[selectedCam.id]?.connected === true}\r\n                        quality=\"hd\"\r\n                        isFocused={true}\r\n                    />\r\n                </div>\r\n            )}\r\n\r\n            {/* GRID */}\r\n            <div style={{\r\n                display: \"grid\", gridTemplateColumns: grid.cols, gridTemplateRows: grid.rows, gap: 2,\r\n                flex: 1, background: \"#000\", padding: 2, overflowY: \"auto\", overflowX: \"hidden\",\r\n                visibility: selectedCam ? \"hidden\" : \"visible\",\r\n                pointerEvents: selectedCam ? \"none\" : \"auto\"\r\n            }}>\r\n                {cams.slice(0, gridSize).map((cam, idx) => {\r\n                    const quality = getQualityForCam(cam.id, idx);\r\n                    const arming = getCameraArming(cam.id);\r\n\r\n                    return (\r\n                        <div key={cam.id} data-cam-id={cam.id}\r\n                            style={{\r\n                                position: \"relative\", width: \"100%\", height: \"100%\",\r\n                                minHeight: gridSize > 16 ? \"100px\" : \"150px\",\r\n                                background: \"#000\", overflow: \"hidden\"\r\n                            }}\r\n                            onMouseEnter={() => setFocusedCam(cam.id)}\r\n                            onMouseLeave={() => setFocusedCam(null)}\r\n                        >\r\n                            <CameraCard\r\n                                cam={cam}\r\n                                isMaximized={false}\r\n                                isHidden={false}\r\n                                onMaximise={(c) => setSelectedCam(c)}\r\n                                isArmed={arming.isArmed}\r\n                                activeZones={arming.activeZones}\r\n                                health={camStatus[cam.id]}\r\n                                isReady={camStatus[cam.id]?.connected === true}\r\n                                isDegraded={arming.isArmed && camStatus[cam.id]?.connected !== true}\r\n                                quality={quality}\r\n                                isFocused={focusedCam === cam.id}\r\n                            />\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            <style>{`\r\n                video, img { width: 100% !important; height: 100% !important; object-fit: fill !important; background: #000; }\r\n                ::-webkit-scrollbar { width: 2px; }\r\n                ::-webkit-scrollbar-thumb { background: #111; }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\n\r\n// Common props: size, color\r\nconst IconBase = ({ size = 16, color = \"currentColor\", children, style, ...props }) => (\r\n    <svg\r\n        width={size}\r\n        height={size}\r\n        viewBox=\"0 0 24 24\"\r\n        fill=\"none\"\r\n        stroke={color}\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        style={{ display: \"inline-block\", verticalAlign: \"middle\", ...style }}\r\n        {...props}\r\n    >\r\n        {children}\r\n    </svg>\r\n);\r\n\r\nexport const Trash = (props) => (\r\n    <IconBase {...props}>\r\n        <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n        <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n    </IconBase>\r\n);\r\n\r\nexport const Edit = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n        <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n    </IconBase>\r\n);\r\n\r\nexport const SettingsIcon = (props) => (\r\n    <IconBase {...props}>\r\n        <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n        <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path>\r\n    </IconBase>\r\n);\r\nexport const Settings = SettingsIcon;\r\n\r\nexport const Lock = (props) => (\r\n    <IconBase {...props}>\r\n        <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\r\n        <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\r\n    </IconBase>\r\n);\r\n\r\nexport const AlertTriangle = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\r\n        <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\r\n        <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\r\n    </IconBase>\r\n);\r\n\r\nexport const Save = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\"></path>\r\n        <polyline points=\"17 21 17 13 7 13 7 21\"></polyline>\r\n        <polyline points=\"7 3 7 8 15 8\"></polyline>\r\n    </IconBase>\r\n);\r\n\r\nexport const Camera = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z\"></path>\r\n        <circle cx=\"12\" cy=\"13\" r=\"4\"></circle>\r\n    </IconBase>\r\n);\r\n\r\nexport const Video = (props) => (\r\n    <IconBase {...props}>\r\n        <polygon points=\"23 7 16 12 23 17 23 7\"></polygon>\r\n        <rect x=\"1\" y=\"5\" width=\"15\" height=\"14\" rx=\"2\" ry=\"2\"></rect>\r\n    </IconBase>\r\n);\r\n\r\nexport const Archive = (props) => (\r\n    <IconBase {...props}>\r\n        <polyline points=\"21 8 21 21 3 21 3 8\"></polyline>\r\n        <rect x=\"1\" y=\"3\" width=\"22\" height=\"5\"></rect>\r\n        <line x1=\"10\" y1=\"12\" x2=\"14\" y2=\"12\"></line>\r\n    </IconBase>\r\n);\r\n\r\nexport const RefreshCw = (props) => (\r\n    <IconBase {...props}>\r\n        <polyline points=\"23 4 23 10 17 10\"></polyline>\r\n        <polyline points=\"1 20 1 14 7 14\"></polyline>\r\n        <path d=\"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15\"></path>\r\n    </IconBase>\r\n);\r\n\r\nexport const ChevronRight = (props) => (\r\n    <IconBase {...props}>\r\n        <polyline points=\"9 18 15 12 9 6\"></polyline>\r\n    </IconBase>\r\n);\r\n\r\nexport const Maximize = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7\" />\r\n    </IconBase>\r\n);\r\n\r\nexport const Minimize = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M4 14h6v6M20 10h-6V4M14 10l7-7M3 21l7-7\" />\r\n    </IconBase>\r\n);\r\n\r\nexport const Circle = (props) => (\r\n    <IconBase {...props}>\r\n        <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\r\n    </IconBase>\r\n);\r\n\r\nexport const Activity = (props) => (\r\n    <IconBase {...props}>\r\n        <polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\"></polyline>\r\n    </IconBase>\r\n);\r\n\r\nexport const Shield = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\"></path>\r\n    </IconBase>\r\n);\r\n","import axios from \"axios\";\r\n\r\n// Use relative path or detect Proxy base\r\nlet baseURL = \"\";\r\nif (typeof window !== 'undefined') {\r\n    // Check for proxy in full URL (HashRouter compatibility)\r\n    const match = window.location.href.match(/(\\/api\\/proxy\\/[^\\/]+)/);\r\n    if (match) {\r\n        baseURL = match[1];\r\n    } else if (window.location.hash.includes(\"#/\")) {\r\n        // Fallback for local dev or direct access\r\n        baseURL = \"\";\r\n    }\r\n}\r\n\r\nconst API = axios.create({\r\n    baseURL: baseURL\r\n});\r\n\r\nexport { API, baseURL };\r\nexport default API;\r\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n  var o,\n    r,\n    i = objectWithoutPropertiesLoose(e, t);\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(e);\n    for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n  }\n  return i;\n}\nexport { _objectWithoutProperties as default };","function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nexport { _objectWithoutPropertiesLoose as default };"],"names":["GO2RTC_API","concat","window","location","origin","streamPool","Map","async","acquireStream","camId","type","arguments","length","undefined","key","has","entry","get","refs","console","log","pc","RTCPeerConnection","iceServers","media","MediaStream","ontrack","e","addTrack","track","addTransceiver","direction","offer","createOffer","setLocalDescription","res","fetch","method","headers","body","sdp","ok","Error","status","answer","text","setRemoteDescription","set","err","close","releaseStream","setTimeout","currentEntry","delete","SmartDualStreamPlayer","_ref","isFullscreen","isHidden","isHovered","posterUrl","style","videoRef","useRef","subStream","setSubStream","useState","mainStream","setMainStream","currentStream","setCurrentStream","posterVisible","setPosterVisible","useEffect","subEntry","active","then","sub","current","srcObject","play","catch","error","debounceTimer","mainEntry","main","cleanup","clearTimeout","_jsxs","_objectSpread","position","background","width","height","overflow","children","_jsx","src","loading","top","left","objectFit","zIndex","opacity","transition","pointerEvents","onError","target","display","alt","ref","autoPlay","muted","playsInline","onPlaying","handleCanPlay","process","MSEPlayer","streamType","onClick","onDoubleClick","wsRef","setStatus","errorMsg","setErrorMsg","suffix","streamName","isMounted","video","infoRes","infoData","json","detectedCodec","codecType","jsonStr","JSON","stringify","includes","mime","MediaSource","isTypeSupported","mse","URL","createObjectURL","addEventListener","proto","protocol","wsUrl","host","ws","WebSocket","binaryType","onopen","onclose","onerror","sb","queue","processQueue","updating","appendBuffer","shift","onmessage","event","data","readyState","addSourceBuffer","mode","push","message","startMse","interval","setInterval","paused","clearInterval","revokeObjectURL","className","inset","flexDirection","alignItems","justifyContent","color","fontSize","textAlign","padding","fontWeight","marginBottom","marginTop","fontStyle","React","containerStyle","border","controlBtnStyle","borderRadius","cursor","ZoneOverlay","cam","isArmed","activeZones","containerRef","canvasRef","dims","setDims","w","h","obs","ResizeObserver","entries","contentRect","Math","round","observe","disconnect","_cam$ai_server","_cam$ai_server2","canvas","getContext","clearRect","ctx","zones","ai_server","roi","points","name","forEach","z","isMonitored","drawZone","pts","isActive","beginPath","x0","y0","moveTo","i","x","y","lineTo","closePath","isTriggered","fillStyle","strokeStyle","lineWidth","fill","stroke","CameraCard","_ref2","isMaximized","onUpdate","onMaximise","health","isReady","isDegraded","quality","isFocused","navigate","useNavigate","hover","setHover","contextMenu","setContextMenu","hoverCount","setHoverCount","t","c","showHoverPreview","removeEventListener","isRecording","record","isActuallyHovered","connected","getArmingColor","onMouseEnter","onMouseLeave","onContextMenu","preventDefault","pageX","pageY","stopPropagation","flex","url","hostname","id","DualStreamPlayer","gap","Circle","size","boxShadow","Shield","bottom","right","textShadow","ip","title","Archive","Minimize","Maximize","minWidth","ContextItem","icon","label","SettingsIcon","Activity","_ref3","borderBottom","Live","_camStatus$selectedCa","cams","setCams","selectedCam","setSelectedCam","gridSize","setGridSize","camStatus","setCamStatus","backendArmingState","setBackendArmingState","systemArmed","cameras","visibleCams","setVisibleCams","Set","focusedCam","setFocusedCam","handleKeys","initial","slice","add","fetchArmingState","useCallback","API","armed","fetchCams","checkStatus","_res$data$system","isOnline","online","system","uptime","map","i1","i2","reconnectTimer","connect","msg","parse","payload","cameraId","prev","effectiveArmed","warn","observer","IntersectionObserver","next","getAttribute","isIntersecting","threshold","rootMargin","document","querySelectorAll","card","getCameraArming","camState","grid","getGridConfig","cols","rows","ceil","sqrt","num","gridTemplateColumns","gridTemplateRows","overflowY","overflowX","visibility","idx","_camStatus$cam$id","_camStatus$cam$id2","getQualityForCam","arming","minHeight","IconBase","props","_objectWithoutProperties","_excluded","viewBox","strokeWidth","strokeLinecap","strokeLinejoin","verticalAlign","Trash","d","Edit","cx","cy","r","Lock","rx","ry","AlertTriangle","x1","y1","x2","y2","Camera","Video","ChevronRight","baseURL","match","href","hash","axios","create","o","n","hasOwnProperty","call","indexOf","Object","getOwnPropertySymbols","propertyIsEnumerable"],"ignoreList":[],"sourceRoot":""}