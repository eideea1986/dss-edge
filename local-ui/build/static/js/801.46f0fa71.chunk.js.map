{"version":3,"file":"static/js/801.46f0fa71.chunk.js","mappings":"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","sources":["components/Icons.js","api.js","components/DualStreamPlayer.js","components/CameraCard.js","pages/Live.js","utils/time.js"],"sourcesContent":["import React from 'react';\r\n\r\n// Common props: size, color\r\nconst IconBase = ({ size = 16, color = \"currentColor\", children, style, ...props }) => (\r\n    <svg\r\n        width={size}\r\n        height={size}\r\n        viewBox=\"0 0 24 24\"\r\n        fill=\"none\"\r\n        stroke={color}\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        style={{ display: \"inline-block\", verticalAlign: \"middle\", ...style }}\r\n        {...props}\r\n    >\r\n        {children}\r\n    </svg>\r\n);\r\n\r\nexport const Trash = (props) => (\r\n    <IconBase {...props}>\r\n        <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n        <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n    </IconBase>\r\n);\r\n\r\nexport const Edit = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n        <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n    </IconBase>\r\n);\r\n\r\nexport const SettingsIcon = (props) => (\r\n    <IconBase {...props}>\r\n        <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n        <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path>\r\n    </IconBase>\r\n);\r\nexport const Settings = SettingsIcon;\r\n\r\nexport const Lock = (props) => (\r\n    <IconBase {...props}>\r\n        <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\r\n        <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\r\n    </IconBase>\r\n);\r\n\r\nexport const AlertTriangle = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\r\n        <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\r\n        <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\r\n    </IconBase>\r\n);\r\n\r\nexport const Save = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\"></path>\r\n        <polyline points=\"17 21 17 13 7 13 7 21\"></polyline>\r\n        <polyline points=\"7 3 7 8 15 8\"></polyline>\r\n    </IconBase>\r\n);\r\n\r\nexport const Camera = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z\"></path>\r\n        <circle cx=\"12\" cy=\"13\" r=\"4\"></circle>\r\n    </IconBase>\r\n);\r\n\r\nexport const Video = (props) => (\r\n    <IconBase {...props}>\r\n        <polygon points=\"23 7 16 12 23 17 23 7\"></polygon>\r\n        <rect x=\"1\" y=\"5\" width=\"15\" height=\"14\" rx=\"2\" ry=\"2\"></rect>\r\n    </IconBase>\r\n);\r\n\r\nexport const Archive = (props) => (\r\n    <IconBase {...props}>\r\n        <polyline points=\"21 8 21 21 3 21 3 8\"></polyline>\r\n        <rect x=\"1\" y=\"3\" width=\"22\" height=\"5\"></rect>\r\n        <line x1=\"10\" y1=\"12\" x2=\"14\" y2=\"12\"></line>\r\n    </IconBase>\r\n);\r\n\r\nexport const RefreshCw = (props) => (\r\n    <IconBase {...props}>\r\n        <polyline points=\"23 4 23 10 17 10\"></polyline>\r\n        <polyline points=\"1 20 1 14 7 14\"></polyline>\r\n        <path d=\"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15\"></path>\r\n    </IconBase>\r\n);\r\n\r\nexport const ChevronRight = (props) => (\r\n    <IconBase {...props}>\r\n        <polyline points=\"9 18 15 12 9 6\"></polyline>\r\n    </IconBase>\r\n);\r\n\r\nexport const Maximize = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7\" />\r\n    </IconBase>\r\n);\r\n\r\nexport const Minimize = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M4 14h6v6M20 10h-6V4M14 10l7-7M3 21l7-7\" />\r\n    </IconBase>\r\n);\r\n\r\nexport const Circle = (props) => (\r\n    <IconBase {...props}>\r\n        <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\r\n    </IconBase>\r\n);\r\n\r\nexport const Activity = (props) => (\r\n    <IconBase {...props}>\r\n        <polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\"></polyline>\r\n    </IconBase>\r\n);\r\n\r\nexport const Shield = (props) => (\r\n    <IconBase {...props}>\r\n        <path d=\"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\"></path>\r\n    </IconBase>\r\n);\r\n","import axios from \"axios\";\r\n\r\n// Use relative path or detect Proxy base\r\nlet baseURL = \"\";\r\nif (typeof window !== 'undefined') {\r\n    // Check for proxy in full URL (HashRouter compatibility)\r\n    const match = window.location.href.match(/(\\/api\\/proxy\\/[^\\/]+)/);\r\n    if (match) {\r\n        baseURL = match[1];\r\n    } else if (window.location.hash.includes(\"#/\")) {\r\n        // Fallback for local dev or direct access\r\n        baseURL = \"\";\r\n    }\r\n}\r\n\r\nconst API = axios.create({\r\n    baseURL: baseURL\r\n});\r\n\r\nexport { API, baseURL };\r\nexport default API;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\n\r\n/**\r\n * SMART DUAL STREAM MANAGER - Trassir-like with Smart Warm Standby\r\n * \r\n * ARCHITECTURE:\r\n * - Grid: substream only (low CPU)\r\n * - Hover: pre-connect main stream (warm standby)\r\n * - Fullscreen: instant switch (main already connected)\r\n * \r\n * CPU OPTIMIZATION:\r\n * - Only 1 main stream in warm standby at a time\r\n * - Grid idle: minimal overhead (25 substreams only)\r\n * - Switch: <200ms (connection already established)\r\n */\r\n\r\nconst GO2RTC_API = `${window.location.origin}/rtc`;\r\nconst streamPool = new Map();\r\n\r\n/**\r\n * Acquire WebRTC stream (reuses existing connections)\r\n */\r\nasync function acquireStream(camId, type = \"sub\") {\r\n    const key = `${camId}_${type}`;\r\n\r\n    if (streamPool.has(key)) {\r\n        const entry = streamPool.get(key);\r\n        entry.refs++;\r\n        console.log(`[SmartDual] Reusing ${key}, refs: ${entry.refs}`);\r\n        return entry;\r\n    }\r\n\r\n    console.log(`[SmartDual] Creating WebRTC for ${key}`);\r\n    const pc = new RTCPeerConnection({ iceServers: [] });\r\n    const media = new MediaStream();\r\n\r\n    pc.ontrack = (e) => {\r\n        console.log(`[SmartDual] Track received for ${key}`);\r\n        media.addTrack(e.track);\r\n    };\r\n\r\n    pc.addTransceiver(\"video\", { direction: \"recvonly\" });\r\n\r\n    try {\r\n        const offer = await pc.createOffer();\r\n        await pc.setLocalDescription(offer);\r\n\r\n        const res = await fetch(`${GO2RTC_API}/api/webrtc?src=${key}`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/sdp\" },\r\n            body: offer.sdp\r\n        });\r\n\r\n        if (!res.ok) {\r\n            throw new Error(`WebRTC failed: ${res.status}`);\r\n        }\r\n\r\n        const answer = await res.text();\r\n        await pc.setRemoteDescription({ type: \"answer\", sdp: answer });\r\n\r\n        const entry = { pc, media, refs: 1 };\r\n        streamPool.set(key, entry);\r\n        return entry;\r\n    } catch (err) {\r\n        pc.close();\r\n        throw err;\r\n    }\r\n}\r\n\r\n/**\r\n * Release stream (with grace period)\r\n */\r\nfunction releaseStream(camId, type = \"sub\") {\r\n    const key = `${camId}_${type}`;\r\n    const entry = streamPool.get(key);\r\n    if (!entry) return;\r\n\r\n    entry.refs--;\r\n    console.log(`[SmartDual] Released ${key}, refs: ${entry.refs}`);\r\n\r\n    if (entry.refs <= 0) {\r\n        setTimeout(() => {\r\n            const currentEntry = streamPool.get(key);\r\n            if (currentEntry && currentEntry.refs <= 0) {\r\n                console.log(`[SmartDual] Closing idle ${key}`);\r\n                currentEntry.pc.close();\r\n                streamPool.delete(key);\r\n            }\r\n        }, 5000); // 5s grace period (shorter for faster cleanup)\r\n    }\r\n}\r\n\r\n/**\r\n * SMART DUAL STREAM PLAYER\r\n */\r\nexport default function SmartDualStreamPlayer({ camId, isFullscreen, isHidden, isHovered, posterUrl, style }) {\r\n    const videoRef = useRef(null);\r\n    const [subStream, setSubStream] = useState(null);\r\n    const [mainStream, setMainStream] = useState(null);\r\n    const [currentStream, setCurrentStream] = useState(\"sub\");\r\n    const [posterVisible, setPosterVisible] = useState(true);\r\n\r\n    // Reset poster visibility when switching modes or cameras\r\n    useEffect(() => {\r\n        setPosterVisible(true);\r\n    }, [camId, isFullscreen]);\r\n\r\n    // Handle video play event to hide poster\r\n    const handleCanPlay = () => {\r\n        // Delay slighty to ensure frame is rendered\r\n        // setTimeout(() => setPosterVisible(false), 100);\r\n        setPosterVisible(false);\r\n    };\r\n\r\n    // Always acquire substream\r\n    useEffect(() => {\r\n        if (isHidden || !camId) return;\r\n\r\n        let active = true;\r\n        let subEntry;\r\n\r\n        acquireStream(camId, \"sub\")\r\n            .then((sub) => {\r\n                if (!active) {\r\n                    releaseStream(camId, \"sub\");\r\n                    return;\r\n                }\r\n                subEntry = sub;\r\n                setSubStream(sub);\r\n\r\n                // Attach substream to video if not fullscreen\r\n                if (videoRef.current && !isFullscreen) {\r\n                    videoRef.current.srcObject = sub.media;\r\n                    videoRef.current.play().catch(() => { });\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.error(`[SmartDual] Error for sub ${camId}:`, err);\r\n            });\r\n\r\n        return () => {\r\n            active = false;\r\n            if (subEntry) releaseStream(camId, \"sub\");\r\n        };\r\n    }, [camId, isHidden, isFullscreen]);\r\n\r\n    // SMART WARM STANDBY with DEBOUNCE: Pre-connect main stream on sustained HOVER or FULLSCREEN\r\n    useEffect(() => {\r\n        let debounceTimer;\r\n        let mainEntry;\r\n\r\n        const cleanup = () => {\r\n            if (debounceTimer) clearTimeout(debounceTimer);\r\n            if (mainEntry) releaseStream(camId, \"hd\");\r\n        };\r\n\r\n        // Immediate connection for fullscreen\r\n        if (isFullscreen && !isHidden && camId) {\r\n            acquireStream(camId, \"hd\")\r\n                .then((main) => {\r\n                    mainEntry = main;\r\n                    setMainStream(main);\r\n                    if (videoRef.current) {\r\n                        videoRef.current.srcObject = main.media;\r\n                        videoRef.current.play().catch(() => { });\r\n                        setCurrentStream(\"main\");\r\n                    }\r\n                })\r\n                .catch((err) => console.error(`[SmartDual] Error for main ${camId}:`, err));\r\n        }\r\n        // Debounced connection for hover (800ms delay)\r\n        else if (isHovered && !isHidden && camId && !isFullscreen) {\r\n            debounceTimer = setTimeout(() => {\r\n                console.log(`[SmartDual] Hover sustained - pre-connecting main for ${camId}`);\r\n                acquireStream(camId, \"hd\")\r\n                    .then((main) => {\r\n                        mainEntry = main;\r\n                        setMainStream(main);\r\n                        // Don't attach - warm standby only\r\n                    })\r\n                    .catch((err) => console.error(`[SmartDual] Error for main ${camId}:`, err));\r\n            }, 800);\r\n        }\r\n        // Release main stream when not needed\r\n        else if (mainStream && !isFullscreen && !isHovered) {\r\n            releaseStream(camId, \"hd\");\r\n            setMainStream(null);\r\n        }\r\n\r\n        return cleanup;\r\n    }, [isHovered, isFullscreen, camId, isHidden]);\r\n\r\n    // INSTANT SWITCH when fullscreen changes\r\n    useEffect(() => {\r\n        if (!videoRef.current) return;\r\n\r\n        // Show poster briefly on switch\r\n        setPosterVisible(true);\r\n\r\n        if (isFullscreen && mainStream) {\r\n            // Switch to main\r\n            console.log(`[SmartDual] Switching to MAIN for ${camId}`);\r\n            videoRef.current.srcObject = mainStream.media;\r\n            videoRef.current.play().catch(() => { });\r\n            setCurrentStream(\"main\");\r\n        } else if (!isFullscreen && subStream) {\r\n            // Switch back to sub\r\n            console.log(`[SmartDual] Switching to SUB for ${camId}`);\r\n            videoRef.current.srcObject = subStream.media;\r\n            videoRef.current.play().catch(() => { });\r\n            setCurrentStream(\"sub\");\r\n        }\r\n    }, [isFullscreen, subStream, mainStream, camId]);\r\n\r\n    return (\r\n        <div style={{ ...style, position: \"relative\", background: \"#000\", width: \"100%\", height: \"100%\", overflow: \"hidden\" }}>\r\n            {/* STATIC POSTER (Zero Latency UX) */}\r\n            {posterUrl && (\r\n                <img\r\n                    src={posterUrl + `?_=${Date.now()}`} // Bust cache slightly or ensure latest\r\n                    style={{\r\n                        position: \"absolute\",\r\n                        top: 0,\r\n                        left: 0,\r\n                        width: \"100%\",\r\n                        height: \"100%\",\r\n                        objectFit: \"fill\",\r\n                        zIndex: 10,\r\n                        opacity: posterVisible ? 1 : 0,\r\n                        transition: \"opacity 150ms ease-out\",\r\n                        pointerEvents: \"none\"\r\n                    }}\r\n                    onError={(e) => e.target.style.display = 'none'}\r\n                    alt=\"\"\r\n                />\r\n            )}\r\n\r\n            <video\r\n                ref={videoRef}\r\n                autoPlay\r\n                muted\r\n                playsInline\r\n                onPlaying={handleCanPlay}\r\n                style={{\r\n                    width: \"100%\",\r\n                    height: \"100%\",\r\n                    objectFit: \"fill\",\r\n                    position: \"absolute\",\r\n                    top: 0,\r\n                    left: 0\r\n                }}\r\n            />\r\n            {/* Debug indicator */}\r\n            {process.env.NODE_ENV === 'development' && (\r\n                <div style={{\r\n                    position: \"absolute\",\r\n                    top: 4,\r\n                    right: 4,\r\n                    background: \"rgba(0,0,0,0.7)\",\r\n                    color: mainStream ? \"#0f0\" : \"#ff0\",\r\n                    padding: \"2px 6px\",\r\n                    fontSize: 10,\r\n                    fontFamily: \"monospace\",\r\n                    zIndex: 20\r\n                }}>\r\n                    {currentStream.toUpperCase()} {mainStream && !isFullscreen ? \"(STANDBY)\" : \"\"}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { colors } from \"../theme\";\r\nimport DualStreamPlayer from \"./DualStreamPlayer\"; // Dual Stream for Instant Fullscreen Switch\r\nimport RecorderPlayer from \"./RecorderPlayer\"; // For High Quality Playback View\r\nimport MSEPlayer from \"./MSEPlayer\"; // For Robust Live Fullscreen (TCP)\r\nimport { Maximize, Minimize, Circle, Activity, Archive, Shield, Lock, SettingsIcon as Settings, Video } from \"./Icons\";\r\n\r\n// --- STYLES ---\r\nconst containerStyle = {\r\n    position: \"relative\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    background: \"#000\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    overflow: \"hidden\",\r\n    border: \"1px solid #333\",\r\n    borderRadius: 2\r\n};\r\n\r\nconst iconBtnStyle = {\r\n    background: \"rgba(0,0,0,0.5)\",\r\n    border: \"1px solid rgba(255,255,255,0.2)\",\r\n    color: \"rgba(255,255,255,0.9)\",\r\n    borderRadius: 4,\r\n    width: 28,\r\n    height: 28,\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    cursor: \"pointer\",\r\n    marginRight: 2\r\n};\r\n\r\n// --- ZONE OVERLAY COMPONENT ---\r\nfunction ZoneOverlay({ cam }) {\r\n    const containerRef = React.useRef(null);\r\n    const canvasRef = React.useRef(null);\r\n    const [dims, setDims] = useState({ w: 0, h: 0 });\r\n\r\n    React.useEffect(() => {\r\n        const obs = new ResizeObserver(entries => {\r\n            for (const entry of entries) {\r\n                const { width, height } = entry.contentRect;\r\n                setDims({ w: Math.round(width), h: Math.round(height) });\r\n            }\r\n        });\r\n        if (containerRef.current) obs.observe(containerRef.current);\r\n        return () => obs.disconnect();\r\n    }, []);\r\n\r\n    React.useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas || dims.w === 0) return;\r\n        const ctx = canvas.getContext(\"2d\");\r\n\r\n        ctx.clearRect(0, 0, dims.w, dims.h);\r\n\r\n        const zones = cam.ai_server?.zones || [];\r\n        if (zones.length === 0 && cam.ai_server?.roi) {\r\n            zones.push({ points: cam.ai_server.roi });\r\n        }\r\n\r\n        const drawZone = (pts) => {\r\n            if (!pts || pts.length === 0) return;\r\n            ctx.beginPath();\r\n            const x0 = pts[0][0] > 1 ? pts[0][0] : pts[0][0] * dims.w;\r\n            const y0 = pts[0][1] > 1 ? pts[0][1] : pts[0][1] * dims.h;\r\n\r\n            ctx.moveTo(x0, y0);\r\n\r\n            for (let i = 1; i < pts.length; i++) {\r\n                const x = pts[i][0] > 1 ? pts[i][0] : pts[i][0] * dims.w;\r\n                const y = pts[i][1] > 1 ? pts[i][1] : pts[i][1] * dims.h;\r\n                ctx.lineTo(x, y);\r\n            }\r\n\r\n            ctx.closePath();\r\n            ctx.fillStyle = \"rgba(0, 255, 0, 0.15)\";\r\n            ctx.strokeStyle = \"#00ff00\";\r\n            ctx.lineWidth = 2;\r\n            ctx.fill();\r\n            ctx.stroke();\r\n        };\r\n\r\n        zones.forEach(z => {\r\n            if (z.points) drawZone(z.points);\r\n        });\r\n\r\n    }, [cam, dims]);\r\n\r\n    return (\r\n        <div ref={containerRef} style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%', pointerEvents: 'none', zIndex: 5 }}>\r\n            <canvas\r\n                ref={canvasRef}\r\n                width={dims.w}\r\n                height={dims.h}\r\n                style={{ width: '100%', height: '100%', display: 'block', background: 'transparent' }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\n// --- COMPONENT ---\r\nfunction CameraCard({ cam, isMaximized, isHidden, onUpdate, onMaximise, isArmed, health }) {\r\n    const navigate = useNavigate();\r\n    const [hover, setHover] = useState(false);\r\n    const [quality, setQuality] = useState('hd');\r\n    const [contextMenu, setContextMenu] = useState(null);\r\n\r\n    React.useEffect(() => {\r\n        const h = () => setContextMenu(null);\r\n        window.addEventListener('click', h);\r\n        return () => window.removeEventListener('click', h);\r\n    }, []);\r\n\r\n    const handleContextMenu = (e) => {\r\n        e.preventDefault();\r\n        setContextMenu({ x: e.pageX, y: e.pageY });\r\n    };\r\n\r\n    const handleMaximise = (e) => {\r\n        e?.stopPropagation();\r\n        onMaximise(cam);\r\n    };\r\n\r\n    const handlePlayback = (e) => {\r\n        e.stopPropagation();\r\n        navigate(`/playback?camId=${cam.id}`);\r\n    };\r\n\r\n    const isRecording = cam.record !== false;\r\n    const isOnline = health ? health.connected : false;\r\n\r\n    return (\r\n        <div style={containerStyle}\r\n            onMouseEnter={() => setHover(true)}\r\n            onMouseLeave={() => setHover(false)}\r\n            onContextMenu={handleContextMenu}\r\n        >\r\n            {/* CONTEXT MENU */}\r\n            {contextMenu && (\r\n                <div style={{\r\n                    position: \"fixed\", top: contextMenu.y, left: contextMenu.x,\r\n                    background: \"#222\", border: \"1px solid #444\", borderRadius: 6,\r\n                    padding: \"4px 0\", zIndex: 1000, minWidth: 160,\r\n                    boxShadow: \"0 4px 20px rgba(0,0,0,0.5)\"\r\n                }}>\r\n                    <div\r\n                        style={{ padding: \"8px 12px\", cursor: \"pointer\", display: \"flex\", alignItems: \"center\", gap: 8, fontSize: 13, color: \"#fff\" }}\r\n                        onMouseEnter={(e) => e.target.style.background = \"#333\"}\r\n                        onMouseLeave={(e) => e.target.style.background = \"transparent\"}\r\n                        onClick={() => navigate(`/settings?tab=hardware&camId=${cam.id}`)}\r\n                    >\r\n                        <Settings size={14} color=\"#aaa\" /> Setări Cameră (HW)\r\n                    </div>\r\n                    <div\r\n                        style={{ padding: \"8px 12px\", cursor: \"pointer\", display: \"flex\", alignItems: \"center\", gap: 8, fontSize: 13, color: \"#fff\" }}\r\n                        onMouseEnter={(e) => e.target.style.background = \"#333\"}\r\n                        onMouseLeave={(e) => e.target.style.background = \"transparent\"}\r\n                        onClick={() => navigate(`/settings?tab=channels&camId=${cam.id}`)}\r\n                    >\r\n                        <Video size={14} color=\"#aaa\" /> Setări Canal (AI)\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* VIDEO AREA - SMART DUAL STREAM */}\r\n            <div style={{ flex: 1, position: \"relative\", background: \"#000\", cursor: \"pointer\", width: \"100%\" }}\r\n                onClick={() => !isMaximized && onMaximise(cam)}\r\n            >\r\n                <DualStreamPlayer\r\n                    camId={cam.id}\r\n                    isFullscreen={isMaximized}\r\n                    isHovered={hover}\r\n                    isHidden={isHidden}\r\n                    posterUrl={`/snapshots/${cam.id}.jpg`}\r\n                    style={{ width: \"100%\", height: \"100%\" }}\r\n                />\r\n\r\n                {/* ZONE OVERLAY */}\r\n                {isArmed && <ZoneOverlay cam={cam} />}\r\n\r\n                {/* OVERLAYS */}\r\n                <div style={{\r\n                    position: \"absolute\", bottom: 0, left: 0, right: 0,\r\n                    padding: 8,\r\n                    display: \"flex\", justifyContent: \"space-between\", alignItems: \"flex-end\",\r\n                    opacity: (hover || isMaximized) ? 1 : 0,\r\n                    transition: \"opacity 0.2s\",\r\n                    pointerEvents: (hover || isMaximized) ? \"auto\" : \"none\",\r\n                    zIndex: 10\r\n                }}>\r\n                    <div style={{ display: \"flex\", gap: 4 }}>\r\n                        <button style={iconBtnStyle} title=\"View Archive / Playback\" onClick={handlePlayback}>\r\n                            <Archive size={14} />\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div style={{ display: \"flex\", gap: 4 }}>\r\n                        <button style={iconBtnStyle} title={isMaximized ? \"Minimize\" : \"Maximize\"} onClick={handleMaximise}>\r\n                            {isMaximized ? <Minimize size={14} /> : <Maximize size={14} />}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* HEADER / STATUS BAR */}\r\n            <div style={{\r\n                height: 32, background: isArmed ? \"rgba(0, 230, 118, 0.1)\" : \"#111\",\r\n                borderTop: \"1px solid #333\",\r\n                display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\", padding: \"0 8px\"\r\n            }}>\r\n                <div style={{ display: \"flex\", alignItems: \"center\", gap: 8, flex: 1, overflow: \"hidden\" }}>\r\n                    <div style={{\r\n                        width: 10, height: 10, borderRadius: \"50%\",\r\n                        background: isOnline ? \"#00e676\" : \"#f44336\",\r\n                        boxShadow: isOnline ? \"0 0 8px #00e676\" : \"none\"\r\n                    }} />\r\n\r\n                    <div title={isArmed ? \"Armed (AI ON)\" : \"Disarmed (AI OFF)\"}>\r\n                        <Shield size={16} color={isArmed ? \"#00e676\" : \"#555\"} fill={isArmed ? \"rgba(0,230,118,0.2)\" : \"none\"} />\r\n                    </div>\r\n\r\n                    <span style={{\r\n                        fontSize: 13, fontWeight: \"600\",\r\n                        color: isArmed ? \"#fff\" : \"#aaa\",\r\n                        whiteSpace: \"nowrap\", overflow: \"hidden\", textOverflow: \"ellipsis\"\r\n                    }}>\r\n                        {cam.name || cam.ip}\r\n                    </span>\r\n\r\n                    {isRecording && <div style={{\r\n                        width: 6, height: 6, borderRadius: \"50%\", background: \"#f44336\",\r\n                        animation: `pulse 1.5s infinite`\r\n                    }} title=\"Recording\" />}\r\n                </div>\r\n\r\n                <div style={{ fontSize: 9, color: \"#444\", fontWeight: \"bold\", letterSpacing: 0.5 }}>\r\n                    {isMaximized ? \"MAIN STREAM\" : \"SUB STREAM\"}\r\n                </div>\r\n            </div>\r\n\r\n            <style>{`\r\n                @keyframes pulse {\r\n                    0% { opacity: 1; transform: scale(1); }\r\n                    50% { opacity: 0.5; transform: scale(1.2); }\r\n                    100% { opacity: 1; transform: scale(1); }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default React.memo(CameraCard);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { API } from \"../api\";\r\nimport CameraCard from \"../components/CameraCard\";\r\nimport { formatLocalTime } from '../utils/time';\r\n\r\n// Styles\r\nconst colors = {\r\n    bg: \"#1e1e1e\",\r\n    text: \"#cccccc\",\r\n    accent: \"#007acc\"\r\n};\r\n\r\nexport default function Live() {\r\n    const [cams, setCams] = useState([]);\r\n    const [status, setStatus] = useState(\"Checking...\");\r\n    const [selectedCam, setSelectedCam] = useState(null);\r\n    const [gridSize, setGridSize] = useState(8);\r\n    const [armingStatus, setArmingStatus] = useState({});\r\n    const [camStatus, setCamStatus] = useState({});\r\n\r\n    // Poll Arming Status\r\n    useEffect(() => {\r\n        const checkArming = () => {\r\n            API.get(\"arming/debug\").then(res => {\r\n                const statusMap = {};\r\n                if (res.data && res.data.cameras) {\r\n                    res.data.cameras.forEach(c => statusMap[c.id] = c.isArmed);\r\n                }\r\n                setArmingStatus(statusMap);\r\n            }).catch(() => { });\r\n        };\r\n        checkArming();\r\n        const interval = setInterval(checkArming, 5000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    // Poll Config & Status\r\n    useEffect(() => {\r\n        const fetchCams = () => API.get(\"cameras/config\").then(res => setCams(res.data)).catch(console.error);\r\n        fetchCams();\r\n\r\n        const checkStatus = () => {\r\n            API.get(\"status\").then(res => {\r\n                const isOnline = res.data.online === true || res.data.status === \"Connected\" || res.data.system?.uptime > 0;\r\n                setStatus(isOnline ? \"Connected\" : \"Disconnected\");\r\n                if (res.data.cameras) {\r\n                    const map = {};\r\n                    res.data.cameras.forEach(c => map[c.id] = { ...c, connected: c.status === \"ONLINE\" });\r\n                    setCamStatus(map);\r\n                }\r\n            }).catch(() => setStatus(\"Disconnected\"));\r\n        };\r\n        checkStatus();\r\n\r\n        const i1 = setInterval(fetchCams, 10000);\r\n        const i2 = setInterval(checkStatus, 3000);\r\n        return () => { clearInterval(i1); clearInterval(i2); };\r\n    }, []);\r\n\r\n    // NEW: Server Time Sync\r\n    const [currentTime, setCurrentTime] = useState(new Date());\r\n    const [serverTimezone, setServerTimezone] = useState(null);\r\n\r\n    useEffect(() => {\r\n        API.get('/system/time').then(res => {\r\n            if (res.data?.raw?.['Time zone']) setServerTimezone(res.data.raw['Time zone'].split(' ')[0]);\r\n        }).catch(() => { });\r\n\r\n        const i = setInterval(() => setCurrentTime(new Date()), 1000);\r\n        return () => clearInterval(i);\r\n    }, []);\r\n\r\n    const formatTime = (date) => {\r\n        if (!date) return \"\";\r\n        const ts = date instanceof Date ? date.getTime() : date;\r\n        return formatLocalTime(ts, serverTimezone);\r\n    };\r\n\r\n    const handleUpdateCam = async (camId, changes) => {\r\n        const newCams = cams.map(c => c.id === camId ? { ...c, ...changes } : c);\r\n        setCams(newCams);\r\n        try { await API.post(\"cameras/config\", newCams); } catch (e) { console.error(e); }\r\n    };\r\n\r\n    // Grid Logic\r\n    const getGridConfig = () => {\r\n        if (selectedCam) return { cols: \"1fr\", rows: \"1fr\" };\r\n        switch (gridSize) {\r\n            case 1: return { cols: \"1fr\", rows: \"1fr\" };\r\n            case 4: return { cols: \"repeat(2, 1fr)\", rows: \"repeat(2, 1fr)\" };\r\n            case 6: return { cols: \"repeat(3, 1fr)\", rows: \"repeat(2, 1fr)\" };\r\n            case 8: return { cols: \"repeat(4, 1fr)\", rows: \"repeat(2, 1fr)\" }; // Trassir 8-view (4x2 usually or 1 big + 7 small) - keeping symetric for now\r\n            case 9: return { cols: \"repeat(3, 1fr)\", rows: \"repeat(3, 1fr)\" };\r\n            case 16: return { cols: \"repeat(4, 1fr)\", rows: \"repeat(4, 1fr)\" };\r\n            case 24: return { cols: \"repeat(6, 1fr)\", rows: \"repeat(4, 1fr)\" };\r\n            case 25: return { cols: \"repeat(5, 1fr)\", rows: \"repeat(5, 1fr)\" };\r\n            case 32: return { cols: \"repeat(8, 1fr)\", rows: \"repeat(4, 1fr)\" };\r\n            default:\r\n                const cols = Math.ceil(Math.sqrt(gridSize));\r\n                const rows = Math.ceil(gridSize / cols);\r\n                return { cols: `repeat(${cols}, 1fr)`, rows: `repeat(${rows}, 1fr)` };\r\n        }\r\n    };\r\n\r\n    const grid = getGridConfig();\r\n    const capacity = selectedCam ? 1 : gridSize;\r\n\r\n    return (\r\n        <div className=\"live-page\" style={{\r\n            width: \"100%\", height: \"100%\", background: \"#0d0d0d\", color: colors.text,\r\n            overflow: \"hidden\", display: \"flex\", flexDirection: \"column\"\r\n        }}>\r\n\r\n            {/* TOOLBAR */}\r\n            {!selectedCam && (\r\n                <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", padding: \"4px 8px\", background: \"#1a1a1a\", borderBottom: \"1px solid #333\", height: \"32px\" }}>\r\n                    <div style={{ display: \"flex\", alignItems: \"center\", gap: 15 }}>\r\n                        <div style={{ fontWeight: \"bold\", fontSize: 13, color: \"#fff\", display: \"flex\", alignItems: \"center\", gap: 5 }}>\r\n                            <div style={{ width: 8, height: 8, borderRadius: \"50%\", background: status === \"Connected\" ? \"#4caf50\" : \"#f44336\" }}></div>\r\n                            LIVE VIEW\r\n                        </div>\r\n                        <div style={{ display: \"flex\", gap: 1 }}>\r\n                            {[1, 4, 6, 8, 9, 12, 16, 24, 32].map(num => (\r\n                                <button key={num} onClick={() => setGridSize(num)}\r\n                                    style={{\r\n                                        border: \"none\", background: gridSize === num ? \"#007acc\" : \"#333\",\r\n                                        color: \"#fff\", width: 26, height: 20, cursor: \"pointer\", fontSize: 10,\r\n                                        fontWeight: gridSize === num ? \"bold\" : \"normal\", marginRight: 1\r\n                                    }}\r\n                                >\r\n                                    {num}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                    <div style={{ fontSize: 11, color: \"#666\" }}>{formatTime(currentTime)}</div>\r\n                </div>\r\n            )}\r\n\r\n            {/* GRID AREA */}\r\n            <div style={{\r\n                display: \"grid\",\r\n                gridTemplateColumns: grid.cols,\r\n                gridTemplateRows: grid.rows,\r\n                gap: selectedCam ? 0 : 2,\r\n                flex: 1,\r\n                background: \"#000\",\r\n                padding: selectedCam ? 0 : 2,\r\n                overflow: \"hidden\"\r\n            }}>\r\n                {cams.map((cam, idx) => {\r\n                    // Logic: Keep card in DOM but hide if out of grid range, unless selected\r\n                    const isVisible = selectedCam ? (cam.id === selectedCam.id) : (idx < capacity);\r\n\r\n                    return (\r\n                        <div key={cam.id} style={{\r\n                            display: isVisible ? \"flex\" : \"none\",\r\n                            flexDirection: \"column\",\r\n                            position: \"relative\",\r\n                            width: \"100%\",\r\n                            height: \"100%\",\r\n                            background: \"#000\",\r\n                            overflow: \"hidden\",\r\n                            border: \"none\",\r\n                            padding: 0\r\n                        }}\r\n                            onDoubleClick={() => setSelectedCam(selectedCam ? null : cam)}\r\n                        >\r\n                            <CameraCard\r\n                                cam={cam}\r\n                                isMaximized={selectedCam && selectedCam.id === cam.id}\r\n                                isHidden={!isVisible}\r\n                                onUpdate={handleUpdateCam}\r\n                                onMaximise={() => setSelectedCam(cam)}\r\n                                isArmed={armingStatus[cam.id]}\r\n                                health={camStatus[cam.id]}\r\n                            />\r\n                        </div>\r\n                    );\r\n                })}\r\n\r\n                {/* Empty Slots visualization */}\r\n                {!selectedCam && Array.from({ length: Math.max(0, capacity - cams.length) }).map((_, i) => (\r\n                    <div key={`empty-${i}`} style={{ background: \"#111\", border: \"1px dashed #333\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}>\r\n                        <span style={{ color: \"#333\", fontSize: 10 }}>NO SIGNAL</span>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* GLOBAL STYLES FOR VIDEO CONSTRAINTS */}\r\n            <style>{`\r\n                /* Robust Absolute Positioning for Video */\r\n                .camera-card-container {\r\n                    position: relative;\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    overflow: hidden;\r\n                }\r\n                video, img, canvas, video-stream-mse {\r\n                    position: absolute !important;\r\n                    top: 0; left: 0;\r\n                    width: 100% !important; \r\n                    height: 100% !important;\r\n                    object-fit: contain !important;\r\n                    background: #000;\r\n                    border: none !important;\r\n                }\r\n                \r\n                /* Scrollbar hide */\r\n                ::-webkit-scrollbar { width: 6px; height: 6px; }\r\n                ::-webkit-scrollbar-track { background: #111; }\r\n                ::-webkit-scrollbar-thumb { background: #333; }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n","/* Standard DSS Time Utilities using Luxon */\r\nimport { DateTime } from 'luxon';\r\n\r\n/**\r\n * Returns the UTC Timestamp (ms) for a given Date (\"YYYY-MM-DD\") and Time (\"HH:MM\")\r\n * in the NVR's Timezone.\r\n * Usage: UI Click -> Backend Request.\r\n * timeStr format: \"HH:mm\" or \"HH:mm:ss\"\r\n */\r\nexport function localToUtcTs(dateStr, timeStr, timezone) {\r\n    if (!timezone) {\r\n        // Fallback safely if TZ not loaded yet\r\n        return DateTime.fromISO(`${dateStr}T${timeStr}`).toMillis();\r\n    }\r\n    return DateTime.fromISO(`${dateStr}T${timeStr}`, { zone: timezone }).toMillis();\r\n}\r\n\r\n/**\r\n * Returns the Epoch (ms) corresponding to 00:00:00 in the Target Timezone.\r\n * Usage: Setting the Timeline anchor (x=0).\r\n */\r\nexport function getLocalDayStart(dateStr, timezone) {\r\n    if (!timezone) return DateTime.fromISO(dateStr).startOf('day').toMillis();\r\n    return DateTime.fromISO(dateStr, { zone: timezone }).startOf('day').toMillis();\r\n}\r\n\r\n/**\r\n * Formats a UTC Timestamp into \"HH:mm:ss\" in the Target Timezone.\r\n * Usage: Displaying Playhead time, Debug info.\r\n */\r\nexport function formatLocalTime(ts, timezone) {\r\n    if (!ts) return \"--:--:--\";\r\n    const opts = timezone ? { zone: timezone } : {};\r\n    return DateTime.fromMillis(ts, opts).toFormat('HH:mm:ss');\r\n}\r\n\r\n/**\r\n * Formats a UTC Timestamp into \"yyyy-MM-dd\" in the Target Timezone.\r\n */\r\nexport function formatLocalDate(ts, timezone) {\r\n    if (!ts) return \"\";\r\n    const opts = timezone ? { zone: timezone } : {};\r\n    return DateTime.fromMillis(ts, opts).toFormat('yyyy-MM-dd');\r\n}\r\n"],"names":["IconBase","_ref","size","color","children","style","props","_objectWithoutProperties","_excluded","_jsx","_objectSpread","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","display","verticalAlign","Trash","_jsxs","points","d","Edit","SettingsIcon","cx","cy","r","Lock","x","y","rx","ry","AlertTriangle","x1","y1","x2","y2","Camera","Video","Archive","ChevronRight","Maximize","Minimize","Shield","baseURL","window","match","location","href","hash","includes","API","axios","create","GO2RTC_API","concat","origin","streamPool","Map","async","acquireStream","camId","type","arguments","length","undefined","key","has","entry","get","refs","console","log","pc","RTCPeerConnection","iceServers","media","MediaStream","ontrack","e","addTrack","track","addTransceiver","direction","offer","createOffer","setLocalDescription","res","fetch","method","headers","body","sdp","ok","Error","status","answer","text","setRemoteDescription","set","err","close","releaseStream","setTimeout","currentEntry","delete","SmartDualStreamPlayer","isFullscreen","isHidden","isHovered","posterUrl","videoRef","useRef","subStream","setSubStream","useState","mainStream","setMainStream","currentStream","setCurrentStream","posterVisible","setPosterVisible","useEffect","subEntry","active","then","sub","current","srcObject","play","catch","error","debounceTimer","mainEntry","main","cleanup","clearTimeout","position","background","overflow","src","Date","now","top","left","objectFit","zIndex","opacity","transition","pointerEvents","onError","target","alt","ref","autoPlay","muted","playsInline","onPlaying","handleCanPlay","process","containerStyle","flexDirection","border","borderRadius","iconBtnStyle","alignItems","justifyContent","cursor","marginRight","ZoneOverlay","cam","containerRef","React","canvasRef","dims","setDims","w","h","obs","ResizeObserver","entries","contentRect","Math","round","observe","disconnect","_cam$ai_server","_cam$ai_server2","canvas","ctx","getContext","clearRect","zones","ai_server","roi","push","forEach","z","pts","beginPath","x0","y0","moveTo","i","lineTo","closePath","fillStyle","strokeStyle","lineWidth","drawZone","CameraCard","_ref2","isMaximized","onUpdate","onMaximise","isArmed","health","navigate","useNavigate","hover","setHover","quality","setQuality","contextMenu","setContextMenu","addEventListener","removeEventListener","isRecording","record","isOnline","connected","onMouseEnter","onMouseLeave","onContextMenu","preventDefault","pageX","pageY","padding","minWidth","boxShadow","gap","fontSize","onClick","id","Settings","flex","DualStreamPlayer","bottom","right","title","stopPropagation","borderTop","fontWeight","whiteSpace","textOverflow","name","ip","animation","letterSpacing","colors","Live","cams","setCams","setStatus","selectedCam","setSelectedCam","gridSize","setGridSize","armingStatus","setArmingStatus","camStatus","setCamStatus","checkArming","statusMap","data","cameras","c","interval","setInterval","clearInterval","fetchCams","checkStatus","_res$data$system","online","system","uptime","map","i1","i2","currentTime","setCurrentTime","serverTimezone","setServerTimezone","_res$data","_res$data$raw","raw","split","handleUpdateCam","changes","newCams","post","grid","getGridConfig","cols","rows","ceil","sqrt","capacity","className","borderBottom","num","date","ts","timezone","opts","zone","DateTime","fromMillis","toFormat","formatLocalTime","getTime","formatTime","gridTemplateColumns","gridTemplateRows","idx","isVisible","onDoubleClick","Array","from","max","_"],"ignoreList":[],"sourceRoot":""}