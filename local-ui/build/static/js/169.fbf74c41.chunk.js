"use strict";(self.webpackChunkdss_edge_ui=self.webpackChunkdss_edge_ui||[]).push([[169],{169(e,t,i){i.r(t),i.d(t,{default:()=>p});var s=i(43),n=i(768),l=i(579);const r=()=>(0,l.jsx)("span",{style:{marginRight:8},children:"[CPU]"}),a=()=>(0,l.jsx)("span",{style:{marginRight:8},children:"[GPU]"}),o=()=>(0,l.jsx)("span",{style:{marginRight:8},children:"[RAM]"}),d=()=>(0,l.jsx)("span",{style:{marginRight:8},children:"[NET]"}),c=()=>(0,l.jsx)("span",{style:{marginRight:8},children:"[HDD]"});function p(){var e,t,i;const[p,b]=(0,s.useState)(null),[j,v]=(0,s.useState)(null),[m,S]=(0,s.useState)(!0);if((0,s.useEffect)(()=>{(async()=>{try{const e=await n.Ay.get("status");b(e.data),S(!1)}catch(e){console.error("Status fetch error",e)}})();const e=setInterval(()=>{n.Ay.get("status").then(e=>b(e.data)).catch(()=>{})},5e3);return()=>clearInterval(e)},[]),!p)return(0,l.jsx)("div",{style:{padding:40,textAlign:"center",color:"#888"},children:(0,l.jsx)("div",{className:"skeleton",style:{width:200,height:20,background:"#444",borderRadius:4,animation:"pulse 1.5s infinite"}})});const w=p.ram||{total:0,free:0},R=w.total-w.free,k=(w.total/1024/1024/1024).toFixed(1),A=(R/1024/1024/1024).toFixed(1),T=w.total>0?Math.round(R/w.total*100):0,C=p.cpu&&Array.isArray(p.cpu)&&p.cpu[0]||0,I=(null===j||void 0===j?void 0:j.gpuLoad)||0,z=(null===(e=p.disk)||void 0===e?void 0:e.usedPercent)||0;return(0,l.jsxs)("div",{style:{padding:"20px 30px",background:"#121212",minHeight:"100%",color:"#e0e0e0",fontFamily:"'Segoe UI', 'Roboto', sans-serif"},children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:25,borderBottom:"1px solid #333",paddingBottom:15},children:[(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:15},children:[(0,l.jsx)("div",{style:{fontSize:24,padding:"5px 10px",background:"#333",borderRadius:4},children:"SYS"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{style:{margin:0,fontSize:22,color:"#fff",fontWeight:600,letterSpacing:.5},children:"SYSTEM STATUS"}),(0,l.jsxs)("div",{style:{fontSize:13,color:"#666",display:"flex",gap:15,marginTop:4},children:[(0,l.jsxs)("span",{children:[(0,l.jsx)("b",{children:"v2.1 PRO"})," Display"]}),(0,l.jsx)("span",{children:"\u2022"}),(0,l.jsxs)("span",{children:["Uptime: ",(0,l.jsxs)("b",{style:{color:"#4caf50"},children:[Math.floor(p.uptime/3600),"h ",Math.floor(p.uptime%3600/60),"m"]})]})]})]})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,l.jsx)(x,{color:"#f44336",label:"Restart Services",onClick:async()=>{window.confirm("ATENTIE: Serviciile de inregistrare si live view se vor opri temporar. Continuati?")&&await n.Ay.post("status/restart-service")}}),(0,l.jsx)(x,{color:"#2196f3",label:"Quick Diagnose",onClick:async()=>{await n.Ay.post("status/fix-deps"),alert("Diagnosticare pornita in background.")}})]})]}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:20,marginBottom:25},children:[(0,l.jsx)(u,{title:"CPU LOAD (1m)",value:C,unit:"%",pct:C,color:C>80?"#f44336":C>50?"#ff9800":"#4caf50",icon:(0,l.jsx)(r,{}),sub:"Model: ".concat(null!==j&&void 0!==j&&j.cpu?j.cpu.split("@")[0].trim():"...")}),(0,l.jsx)(u,{title:"GPU DECODE",value:I,unit:"%",pct:I,color:I>80?"#f44336":"#e91e63",icon:(0,l.jsx)(a,{}),sub:(null===j||void 0===j?void 0:j.gpu)||"Integrated"}),(0,l.jsx)(u,{title:"MEMORY RAM",value:T,unit:"%",pct:T,color:"#2196f3",icon:(0,l.jsx)(o,{}),sub:"".concat(A," / ").concat(k," GB Active")}),(0,l.jsx)(u,{title:"STORAGE (ROOT)",value:z,unit:"%",pct:z,color:z>90?"#f44336":"#9c27b0",icon:(0,l.jsx)(c,{}),sub:"Free: ".concat((null===(t=p.disk)||void 0===t?void 0:t.avail)||"?")})]}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"2fr 1.5fr",gap:20},children:[(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[(0,l.jsx)(f,{title:"HARDWARE COMPOSITION",children:j||m?m?(0,l.jsxs)("div",{style:{padding:20,color:"#666",textAlign:"center"},children:[(0,l.jsx)("div",{className:"spinner",style:{marginBottom:10},children:"[WAIT]"}),"Scanning hardware layer..."]}):(0,l.jsx)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:14},children:(0,l.jsxs)("tbody",{children:[(0,l.jsx)(h,{label:"Motherboard",value:null===j||void 0===j?void 0:j.motherboard}),(0,l.jsx)(h,{label:"Processor SKU",value:null===j||void 0===j?void 0:j.cpu,highlight:!0}),(0,l.jsx)(h,{label:"Graphics Unit",value:(null===j||void 0===j?void 0:j.gpu)||"N/A"}),(0,l.jsx)(h,{label:"Total Memory",value:null===j||void 0===j?void 0:j.ram}),(0,l.jsx)(h,{label:"Kernel Version",value:null===j||void 0===j?void 0:j.kernel}),(0,l.jsx)(h,{label:"OS Distro",value:null===j||void 0===j?void 0:j.os})]})}):(0,l.jsxs)("div",{style:{padding:20,textAlign:"center"},children:[(0,l.jsx)("div",{style:{color:"#666",marginBottom:15,fontSize:13},children:"Hardware details are collected on demand to save resources."}),(0,l.jsx)("button",{onClick:async()=>{S(!0);try{const e=await n.Ay.get("status/hardware");v(e.data)}catch(e){console.error("Hardware scan error",e)}S(!1)},style:{padding:"8px 20px",background:"#2196f3",color:"white",border:"none",borderRadius:4,fontSize:13,cursor:"pointer",fontWeight:"bold"},children:"Scan System Hardware"})]})}),(0,l.jsx)(f,{title:"MODULE HEALTH",children:(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:15},children:[(0,l.jsx)(g,{name:"Core System (dss-edge)",status:!0}),(0,l.jsx)(g,{name:"Web Interface (UI)",status:!0}),(0,l.jsx)(g,{name:"API Gateway",status:!0}),(0,l.jsx)(g,{name:"Live Streaming (Go2RTC)",status:!0}),(0,l.jsx)(g,{name:"AI Detection Engine",status:p.modules&&p.modules["dss-ai"]}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 15px",background:"#1e1e1e",borderRadius:6,borderLeft:"4px solid ".concat(p.storageMap?"#4caf50":"#ff9800")},children:[(0,l.jsx)("span",{style:{fontWeight:500,fontSize:14},children:"Retention Engine"}),(0,l.jsx)("span",{style:{color:p.storageMap?"#4caf50":"#ff9800",fontSize:11,fontWeight:"bold"},children:p.storageMap?"ACTIVE":"NO MAP (DISK FULL?)"})]})]})})]}),(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[(0,l.jsx)(f,{title:"NETWORK INTERFACES",children:(null===j||void 0===j||null===(i=j.network)||void 0===i?void 0:i.length)>0?(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[j.network.map((e,t)=>(0,l.jsxs)("div",{style:{background:"#1a1a1a",padding:15,borderRadius:6,border:"1px solid #2a2a2a",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{fontSize:15,fontWeight:"bold",color:"#fff",display:"flex",alignItems:"center",gap:8},children:[(0,l.jsx)(d,{})," ",e.name]}),(0,l.jsx)("div",{style:{fontSize:12,color:"#888",marginTop:4},children:e.brand})]}),(0,l.jsx)("div",{style:{textAlign:"right"},children:(0,l.jsx)("div",{style:{fontFamily:"monospace",color:"#81d4fa",fontSize:13,background:"rgba(33, 150, 243, 0.1)",padding:"2px 6px",borderRadius:4},children:e.mac})})]},t)),(0,l.jsxs)("div",{style:{fontSize:12,color:"#666",marginTop:5,paddingLeft:5},children:["DNS: ",(null===j||void 0===j?void 0:j.dns.join(", "))||"Auto"]})]}):(0,l.jsx)("div",{style:{padding:20,color:"#666"},children:"Scanning network adapters..."})}),(0,l.jsxs)("div",{style:{marginTop:10},children:[(0,l.jsx)("h4",{style:{fontSize:12,textTransform:"uppercase",color:"#666",marginBottom:10},children:"System Logs"}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10},children:[(0,l.jsx)(y,{label:"Recorder.log",href:"".concat(n.Ay.defaults.baseURL,"/status/recorder-logs")}),(0,l.jsx)(y,{label:"CameraMgr.log",href:"".concat(n.Ay.defaults.baseURL,"/status/camera-logs")}),(0,l.jsx)(y,{label:"AI_Engine.log",href:"".concat(n.Ay.defaults.baseURL,"/status/ai-logs")}),(0,l.jsx)(y,{label:"Journalctl -u",href:"".concat(n.Ay.defaults.baseURL,"/status/journal"),warning:!0})]})]})]})]})]})}const g=e=>{let{name:t,status:i}=e;return(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 15px",background:"#1e1e1e",borderRadius:6,borderLeft:"4px solid ".concat(i?"#4caf50":"#f44336")},children:[(0,l.jsx)("span",{style:{fontWeight:500,fontSize:14},children:t}),(0,l.jsx)("span",{style:{fontSize:11,fontWeight:"bold",padding:"2px 8px",borderRadius:10,background:i?"rgba(76, 175, 80, 0.1)":"rgba(244, 67, 54, 0.1)",color:i?"#4caf50":"#f44336"},children:i?"RUNNING":"STOPPED"})]})},x=e=>{let{label:t,onClick:i,color:s}=e;return(0,l.jsx)("button",{onClick:i,style:{background:"transparent",border:"1px solid ".concat(s),color:s,padding:"6px 14px",borderRadius:4,cursor:"pointer",fontSize:12,fontWeight:600,transition:"all 0.2s",textTransform:"uppercase"},onMouseEnter:e=>e.target.style.background="rgba(".concat(parseInt(s.slice(1,3),16),",0,0,0.1)"),onMouseLeave:e=>e.target.style.background="transparent",children:t})},u=s.memo(e=>{let{title:t,value:i,unit:s,pct:n,color:r,icon:a,sub:o}=e;return(0,l.jsxs)("div",{style:{background:"#1e1e1e",padding:20,borderRadius:8,borderTop:"3px solid ".concat(r),boxShadow:"0 4px 10px rgba(0,0,0,0.2)"},children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:10},children:[(0,l.jsx)("div",{style:{fontSize:11,fontWeight:700,color:"#888",letterSpacing:1},children:t}),(0,l.jsx)("div",{style:{color:r,fontSize:18},children:a})]}),(0,l.jsxs)("div",{style:{fontSize:32,fontWeight:"bold",color:"#fff",lineHeight:1},children:[i,(0,l.jsx)("span",{style:{fontSize:16,color:"#666",marginLeft:4},children:s})]}),(0,l.jsx)("div",{style:{width:"100%",background:"#333",height:4,borderRadius:2,marginTop:15,marginBottom:8},children:(0,l.jsx)("div",{style:{height:"100%",width:"".concat(Math.min(n,100),"%"),background:r,borderRadius:2}})}),(0,l.jsx)("div",{style:{fontSize:11,color:"#666",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:o})]})}),f=s.memo(e=>{let{title:t,children:i}=e;return(0,l.jsxs)("div",{style:{background:"#1e1e1e",borderRadius:8,border:"1px solid #2a2a2a",overflow:"hidden"},children:[(0,l.jsx)("div",{style:{padding:"12px 20px",background:"#252526",borderBottom:"1px solid #2a2a2a",fontSize:12,fontWeight:700,color:"#aaa",letterSpacing:1},children:t}),(0,l.jsx)("div",{style:{padding:20},children:i})]})}),h=s.memo(e=>{let{label:t,value:i,highlight:s}=e;return(0,l.jsxs)("tr",{style:{borderBottom:"1px solid #2a2a2a"},children:[(0,l.jsx)("td",{style:{padding:"10px 0",color:"#888",fontSize:13},children:t}),(0,l.jsx)("td",{style:{padding:"10px 0",textAlign:"right",color:s?"#fff":"#ccc",fontWeight:s?600:400},children:i||(0,l.jsx)("span",{style:{opacity:.3},children:"-"})})]})}),y=e=>{let{label:t,href:i,warning:s}=e;return(0,l.jsx)("a",{href:i,target:"_blank",rel:"noreferrer",style:{display:"block",textAlign:"center",padding:"10px",background:s?"rgba(244, 67, 54, 0.1)":"#222",color:s?"#f44336":"#aaa",textDecoration:"none",fontSize:12,borderRadius:4,border:"1px solid ".concat(s?"rgba(244, 67, 54, 0.3)":"#333")},children:t})}},768(e,t,i){i.d(t,{Ay:()=>r,nC:()=>l});var s=i(722);let n="";if("undefined"!==typeof window){const e=window.location.href.match(/(\/api\/proxy\/[^\/]+)/);e?n=e[1]:window.location.hash.includes("#/")&&(n="")}const l=s.A.create({baseURL:n}),r=l}}]);
//# sourceMappingURL=169.fbf74c41.chunk.js.map