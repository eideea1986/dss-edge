/*! For license information please see 510.8a4a4fdb.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkdss_edge_ui=self.webpackChunkdss_edge_ui||[]).push([[169,510],{169(e,t,n){n.r(t),n.d(t,{default:()=>p});var i=n(43),r=n(768),s=n(579);const a=()=>(0,s.jsx)("span",{style:{marginRight:8},children:"[CPU]"}),o=()=>(0,s.jsx)("span",{style:{marginRight:8},children:"[GPU]"}),l=()=>(0,s.jsx)("span",{style:{marginRight:8},children:"[RAM]"}),d=()=>(0,s.jsx)("span",{style:{marginRight:8},children:"[NET]"}),c=()=>(0,s.jsx)("span",{style:{marginRight:8},children:"[HDD]"});function p(){var e,t,n;const[p,f]=(0,i.useState)(null),[m,b]=(0,i.useState)(null),[j,v]=(0,i.useState)(!0);if((0,i.useEffect)(()=>{(async()=>{try{const e=await r.Ay.get("status");f(e.data),v(!1)}catch(e){console.error("Status fetch error",e)}})();const e=setInterval(()=>{r.Ay.get("status").then(e=>f(e.data)).catch(()=>{})},5e3);return()=>clearInterval(e)},[]),!p)return(0,s.jsx)("div",{style:{padding:40,textAlign:"center",color:"#888"},children:(0,s.jsx)("div",{className:"skeleton",style:{width:200,height:20,background:"#444",borderRadius:4,animation:"pulse 1.5s infinite"}})});const A=p.ram||{total:0,free:0},S=A.total-A.free,C=(A.total/1024/1024/1024).toFixed(1),E=(S/1024/1024/1024).toFixed(1),R=A.total>0?Math.round(S/A.total*100):0,w=p.cpu&&Array.isArray(p.cpu)&&p.cpu[0]||0,k=(null===m||void 0===m?void 0:m.gpuLoad)||0,I=(null===(e=p.disk)||void 0===e?void 0:e.usedPercent)||0;return(0,s.jsxs)("div",{style:{padding:"20px 30px",background:"#121212",minHeight:"100%",color:"#e0e0e0",fontFamily:"'Segoe UI', 'Roboto', sans-serif"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:25,borderBottom:"1px solid #333",paddingBottom:15},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:15},children:[(0,s.jsx)("div",{style:{fontSize:24,padding:"5px 10px",background:"#333",borderRadius:4},children:"SYS"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{style:{margin:0,fontSize:22,color:"#fff",fontWeight:600,letterSpacing:.5},children:"SYSTEM STATUS"}),(0,s.jsxs)("div",{style:{fontSize:13,color:"#666",display:"flex",gap:15,marginTop:4},children:[(0,s.jsxs)("span",{children:[(0,s.jsx)("b",{children:"v2.1 PRO"})," Display"]}),(0,s.jsx)("span",{children:"\u2022"}),(0,s.jsxs)("span",{children:["Uptime: ",(0,s.jsxs)("b",{style:{color:"#4caf50"},children:[Math.floor(p.uptime/3600),"h ",Math.floor(p.uptime%3600/60),"m"]})]})]})]})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,s.jsx)(h,{color:"#f44336",label:"Restart Services",onClick:async()=>{window.confirm("ATENTIE: Serviciile de inregistrare si live view se vor opri temporar. Continuati?")&&await r.Ay.post("status/restart-service")}}),(0,s.jsx)(h,{color:"#2196f3",label:"Quick Diagnose",onClick:async()=>{await r.Ay.post("status/fix-deps"),alert("Diagnosticare pornita in background.")}})]})]}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:20,marginBottom:25},children:[(0,s.jsx)(u,{title:"CPU LOAD (1m)",value:w,unit:"%",pct:w,color:w>80?"#f44336":w>50?"#ff9800":"#4caf50",icon:(0,s.jsx)(a,{}),sub:"Model: ".concat(null!==m&&void 0!==m&&m.cpu?m.cpu.split("@")[0].trim():"...")}),(0,s.jsx)(u,{title:"GPU DECODE",value:k,unit:"%",pct:k,color:k>80?"#f44336":"#e91e63",icon:(0,s.jsx)(o,{}),sub:(null===m||void 0===m?void 0:m.gpu)||"Integrated"}),(0,s.jsx)(u,{title:"MEMORY RAM",value:R,unit:"%",pct:R,color:"#2196f3",icon:(0,s.jsx)(l,{}),sub:"".concat(E," / ").concat(C," GB Active")}),(0,s.jsx)(u,{title:"STORAGE (ROOT)",value:I,unit:"%",pct:I,color:I>90?"#f44336":"#9c27b0",icon:(0,s.jsx)(c,{}),sub:"Free: ".concat((null===(t=p.disk)||void 0===t?void 0:t.avail)||"?")})]}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"2fr 1.5fr",gap:20},children:[(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[(0,s.jsx)(g,{title:"HARDWARE COMPOSITION",children:m||j?j?(0,s.jsxs)("div",{style:{padding:20,color:"#666",textAlign:"center"},children:[(0,s.jsx)("div",{className:"spinner",style:{marginBottom:10},children:"[WAIT]"}),"Scanning hardware layer..."]}):(0,s.jsx)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:14},children:(0,s.jsxs)("tbody",{children:[(0,s.jsx)(x,{label:"Motherboard",value:null===m||void 0===m?void 0:m.motherboard}),(0,s.jsx)(x,{label:"Processor SKU",value:null===m||void 0===m?void 0:m.cpu,highlight:!0}),(0,s.jsx)(x,{label:"Graphics Unit",value:(null===m||void 0===m?void 0:m.gpu)||"N/A"}),(0,s.jsx)(x,{label:"Total Memory",value:null===m||void 0===m?void 0:m.ram}),(0,s.jsx)(x,{label:"Kernel Version",value:null===m||void 0===m?void 0:m.kernel}),(0,s.jsx)(x,{label:"OS Distro",value:null===m||void 0===m?void 0:m.os})]})}):(0,s.jsxs)("div",{style:{padding:20,textAlign:"center"},children:[(0,s.jsx)("div",{style:{color:"#666",marginBottom:15,fontSize:13},children:"Hardware details are collected on demand to save resources."}),(0,s.jsx)("button",{onClick:async()=>{v(!0);try{const e=await r.Ay.get("status/hardware");b(e.data)}catch(e){console.error("Hardware scan error",e)}v(!1)},style:{padding:"8px 20px",background:"#2196f3",color:"white",border:"none",borderRadius:4,fontSize:13,cursor:"pointer",fontWeight:"bold"},children:"Scan System Hardware"})]})}),(0,s.jsx)(g,{title:"MODULE HEALTH",children:(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:15},children:[p.modules&&Object.entries(p.modules).map(e=>{let[t,n]=e;return(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 15px",background:"#1e1e1e",borderRadius:6,borderLeft:"4px solid ".concat(n?"#4caf50":"#f44336")},children:[(0,s.jsx)("span",{style:{fontWeight:500,textTransform:"capitalize",fontSize:14},children:t.replace("-"," ")}),(0,s.jsx)("span",{style:{fontSize:11,fontWeight:"bold",padding:"2px 8px",borderRadius:10,background:n?"rgba(76, 175, 80, 0.1)":"rgba(244, 67, 54, 0.1)",color:n?"#4caf50":"#f44336"},children:n?"RUNNING":"STOPPED"})]},t)}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 15px",background:"#1e1e1e",borderRadius:6,borderLeft:"4px solid ".concat(p.storageMap?"#4caf50":"#ffa726")},children:[(0,s.jsx)("span",{style:{fontWeight:500,fontSize:14},children:"Retention Engine"}),(0,s.jsx)("span",{style:{color:p.storageMap?"#4caf50":"#ffa726",fontSize:11,fontWeight:"bold"},children:p.storageMap?"ACTIVE":"NO MAP"})]})]})})]}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[(0,s.jsx)(g,{title:"NETWORK INTERFACES",children:(null===m||void 0===m||null===(n=m.network)||void 0===n?void 0:n.length)>0?(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[m.network.map((e,t)=>(0,s.jsxs)("div",{style:{background:"#1a1a1a",padding:15,borderRadius:6,border:"1px solid #2a2a2a",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{fontSize:15,fontWeight:"bold",color:"#fff",display:"flex",alignItems:"center",gap:8},children:[(0,s.jsx)(d,{})," ",e.name]}),(0,s.jsx)("div",{style:{fontSize:12,color:"#888",marginTop:4},children:e.brand})]}),(0,s.jsx)("div",{style:{textAlign:"right"},children:(0,s.jsx)("div",{style:{fontFamily:"monospace",color:"#81d4fa",fontSize:13,background:"rgba(33, 150, 243, 0.1)",padding:"2px 6px",borderRadius:4},children:e.mac})})]},t)),(0,s.jsxs)("div",{style:{fontSize:12,color:"#666",marginTop:5,paddingLeft:5},children:["DNS: ",(null===m||void 0===m?void 0:m.dns.join(", "))||"Auto"]})]}):(0,s.jsx)("div",{style:{padding:20,color:"#666"},children:"Scanning network adapters..."})}),(0,s.jsxs)("div",{style:{marginTop:10},children:[(0,s.jsx)("h4",{style:{fontSize:12,textTransform:"uppercase",color:"#666",marginBottom:10},children:"System Logs"}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10},children:[(0,s.jsx)(y,{label:"Recorder.log",href:"".concat(r.Ay.defaults.baseURL,"/status/recorder-logs")}),(0,s.jsx)(y,{label:"CameraMgr.log",href:"".concat(r.Ay.defaults.baseURL,"/status/camera-logs")}),(0,s.jsx)(y,{label:"AI_Engine.log",href:"".concat(r.Ay.defaults.baseURL,"/status/ai-logs")}),(0,s.jsx)(y,{label:"Journalctl -u",href:"".concat(r.Ay.defaults.baseURL,"/status/journal"),warning:!0})]})]})]})]})]})}const h=e=>{let{label:t,onClick:n,color:i}=e;return(0,s.jsx)("button",{onClick:n,style:{background:"transparent",border:"1px solid ".concat(i),color:i,padding:"6px 14px",borderRadius:4,cursor:"pointer",fontSize:12,fontWeight:600,transition:"all 0.2s",textTransform:"uppercase"},onMouseEnter:e=>e.target.style.background="rgba(".concat(parseInt(i.slice(1,3),16),",0,0,0.1)"),onMouseLeave:e=>e.target.style.background="transparent",children:t})},u=i.memo(e=>{let{title:t,value:n,unit:i,pct:r,color:a,icon:o,sub:l}=e;return(0,s.jsxs)("div",{style:{background:"#1e1e1e",padding:20,borderRadius:8,borderTop:"3px solid ".concat(a),boxShadow:"0 4px 10px rgba(0,0,0,0.2)"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:10},children:[(0,s.jsx)("div",{style:{fontSize:11,fontWeight:700,color:"#888",letterSpacing:1},children:t}),(0,s.jsx)("div",{style:{color:a,fontSize:18},children:o})]}),(0,s.jsxs)("div",{style:{fontSize:32,fontWeight:"bold",color:"#fff",lineHeight:1},children:[n,(0,s.jsx)("span",{style:{fontSize:16,color:"#666",marginLeft:4},children:i})]}),(0,s.jsx)("div",{style:{width:"100%",background:"#333",height:4,borderRadius:2,marginTop:15,marginBottom:8},children:(0,s.jsx)("div",{style:{height:"100%",width:"".concat(Math.min(r,100),"%"),background:a,borderRadius:2}})}),(0,s.jsx)("div",{style:{fontSize:11,color:"#666",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:l})]})}),g=i.memo(e=>{let{title:t,children:n}=e;return(0,s.jsxs)("div",{style:{background:"#1e1e1e",borderRadius:8,border:"1px solid #2a2a2a",overflow:"hidden"},children:[(0,s.jsx)("div",{style:{padding:"12px 20px",background:"#252526",borderBottom:"1px solid #2a2a2a",fontSize:12,fontWeight:700,color:"#aaa",letterSpacing:1},children:t}),(0,s.jsx)("div",{style:{padding:20},children:n})]})}),x=i.memo(e=>{let{label:t,value:n,highlight:i}=e;return(0,s.jsxs)("tr",{style:{borderBottom:"1px solid #2a2a2a"},children:[(0,s.jsx)("td",{style:{padding:"10px 0",color:"#888",fontSize:13},children:t}),(0,s.jsx)("td",{style:{padding:"10px 0",textAlign:"right",color:i?"#fff":"#ccc",fontWeight:i?600:400},children:n||(0,s.jsx)("span",{style:{opacity:.3},children:"-"})})]})}),y=e=>{let{label:t,href:n,warning:i}=e;return(0,s.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",style:{display:"block",textAlign:"center",padding:"10px",background:i?"rgba(244, 67, 54, 0.1)":"#222",color:i?"#f44336":"#aaa",textDecoration:"none",fontSize:12,borderRadius:4,border:"1px solid ".concat(i?"rgba(244, 67, 54, 0.3)":"#333")},children:t})}},422(e,t,n){n.d(t,{A:()=>o});var i=n(555),r=n(43),s=n(768),a=n(579);function o(e){let{camId:t,streamType:n,style:o}=e;const l=(0,r.useRef)(null),d=(0,r.useRef)(null),[c,p]=(0,r.useState)(null),[h,u]=(0,r.useState)(null),[g,x]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{x(!0),u(null);const e="hd"===n?"main":"sub";s.nC.get("/recorder/live-url/".concat(t,"/").concat(e)).then(e=>{let t=e.data.url;t.startsWith("/")&&(t=s.nC.defaults.baseURL+t),p(t)}).catch(e=>{u("Nu exist\u0103 flux live."),x(!1)})},[t,n]),(0,r.useEffect)(()=>{if(!c)return;const e=l.current,t=()=>{if(window.Hls&&window.Hls.isSupported()){d.current&&d.current.destroy();const t=new window.Hls({enableWorker:!0,lowLatencyMode:!0,backBufferLength:90});t.loadSource(c),t.attachMedia(e),t.on(window.Hls.Events.MANIFEST_PARSED,()=>{e.play().catch(e=>console.warn("Autoplay block",e)),x(!1)}),t.on(window.Hls.Events.ERROR,(e,n)=>{if(n.fatal)switch(n.type){case window.Hls.ErrorTypes.NETWORK_ERROR:t.startLoad();break;case window.Hls.ErrorTypes.MEDIA_ERROR:t.recoverMediaError();break;default:t.destroy()}}),d.current=t}else e.canPlayType("application/vnd.apple.mpegurl")&&(e.src=c,e.addEventListener("loadedmetadata",()=>{e.play(),x(!1)}))};if(window.Hls||"undefined"!==typeof Hls)t();else{const e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/hls.js@1.4.0/dist/hls.min.js",e.onload=t,document.head.appendChild(e)}return()=>{d.current&&d.current.destroy()}},[c]),(0,a.jsxs)("div",{style:(0,i.A)((0,i.A)({},o),{},{position:"relative",background:"#000",overflow:"hidden"}),children:[(0,a.jsx)("video",{ref:l,style:{width:"100%",height:"100%",objectFit:"contain"},autoPlay:!0,muted:!0,playsInline:!0}),(g||!c)&&!h&&(0,a.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",background:"rgba(0,0,0,0.5)"},children:(0,a.jsx)("div",{className:"spinner",children:"Live Buffer..."})}),h&&(0,a.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",color:"#ff5555"},children:h})]})}},510(e,t,n){n.r(t),n.d(t,{default:()=>he});var i=n(555),r=n(43),s=n(216),a=n(768),o=n(777),l=n(579);const d=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],c=e=>{let{schedules:t,onSave:n}=e;const[s,a]=(0,r.useState)({}),[o,c]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e={};if((Array.isArray(t)?t:Object.values(t||{})).forEach(t=>{const n=t.id||"sch_"+Math.random().toString(36).substr(2,9);let r=t.matrix;if(!r&&t.slots){r={};for(let e=0;e<7;e++)r[e]=Array(48).fill(0),t.slots[e]&&t.slots[e].forEach(t=>{t>=0&&t<24&&(r[e][2*t]=1,r[e][2*t+1]=1)})}if(r)for(let e=0;e<7;e++)r[e]||(r[e]=Array(48).fill(0));else{r={};for(let e=0;e<7;e++)r[e]=Array(48).fill(0)}e[n]=(0,i.A)((0,i.A)({},t),{},{id:n,matrix:r,slots:void 0})}),0===Object.keys(e).length){const t="sch_"+Date.now(),n={};for(let e=0;e<7;e++)n[e]=Array(48).fill(0);e[t]={id:t,name:"Default Schedule",matrix:n,enabled:!0}}a(e),c(Object.keys(e)[0])},[t]);const p=s[o],h=(e,t)=>{if(!p)return;const n=e.toString(),r=[...p.matrix[n]||Array(48).fill(0)];r[t]=r[t]?0:1,a((0,i.A)((0,i.A)({},s),{},{[o]:(0,i.A)((0,i.A)({},p),{},{matrix:(0,i.A)((0,i.A)({},p.matrix),{},{[n]:r})})}))},u=(e,t)=>{if(!p)return;const n=e.toString(),r=Array(48).fill(t?1:0);a(e=>(0,i.A)((0,i.A)({},e),{},{[o]:(0,i.A)((0,i.A)({},e[o]),{},{matrix:(0,i.A)((0,i.A)({},e[o].matrix),{},{[n]:r})})}))};return!p&&Object.keys(s).length>0?(c(Object.keys(s)[0]),null):(0,l.jsxs)("div",{style:{padding:20,color:"#ccc",height:"100%",display:"flex",flexDirection:"column"},children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:20},children:[(0,l.jsx)("h2",{children:"Schedule Editor (30 min intervals)"}),(0,l.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,l.jsx)("button",{onClick:()=>{if(!window.confirm("Delete schedule?"))return;const e=(0,i.A)({},s);delete e[o],a(e),c(Object.keys(e)[0]||null)},style:{background:"#d32f2f",color:"white",border:"none",padding:"5px 15px",cursor:"pointer"},children:"Delete"}),(0,l.jsx)("button",{onClick:()=>{const e=Object.values(s);n(e)},style:{background:"#007acc",color:"white",border:"none",padding:"5px 20px",fontWeight:"bold",cursor:"pointer"},children:"SAVE ALL Schedules"})]})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:20,flex:1,overflow:"hidden"},children:[(0,l.jsxs)("div",{style:{width:200,background:"#252526",border:"1px solid #444",display:"flex",flexDirection:"column"},children:[(0,l.jsxs)("div",{style:{padding:10,borderBottom:"1px solid #444",fontWeight:"bold",background:"#333",display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Schedules",(0,l.jsx)("button",{onClick:()=>{const e="sch_"+Date.now(),t={};for(let i=0;i<7;i++)t[i]=Array(48).fill(0);const n={id:e,name:"New Schedule",matrix:t,enabled:!0};a((0,i.A)((0,i.A)({},s),{},{[e]:n})),c(e)},style:{fontSize:16,cursor:"pointer",background:"none",border:"none",color:"#4caf50"},children:"+"})]}),(0,l.jsx)("div",{style:{flex:1,overflowY:"auto"},children:Object.values(s).map(e=>(0,l.jsx)("div",{onClick:()=>c(e.id),style:{padding:10,cursor:"pointer",background:e.id===o?"#007acc":"transparent",borderBottom:"1px solid #333"},children:e.name},e.id))})]}),p&&(0,l.jsxs)("div",{style:{flex:1,background:"#252526",border:"1px solid #444",padding:20,overflowY:"auto"},children:[(0,l.jsxs)("div",{style:{marginBottom:20},children:[(0,l.jsx)("label",{children:"Schedule Name: "}),(0,l.jsx)("input",{value:p.name,onChange:e=>{a((0,i.A)((0,i.A)({},s),{},{[o]:(0,i.A)((0,i.A)({},p),{},{name:e.target.value})}))},style:{background:"#111",border:"1px solid #444",color:"#fff",padding:5,width:300,marginLeft:10}})]}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",gap:10},children:[(0,l.jsx)("div",{}),(0,l.jsx)("div",{style:{display:"flex"},children:Array.from({length:24},(e,t)=>(0,l.jsx)("div",{style:{flex:1,fontSize:10,textAlign:"center",color:"#888",borderLeft:t>0?"1px solid #333":"none"},children:t},t))}),d.map((e,t)=>(0,l.jsxs)(r.Fragment,{children:[(0,l.jsxs)("div",{style:{textAlign:"right",paddingRight:10,fontSize:13,paddingTop:5},children:[(0,l.jsx)("div",{style:{fontWeight:"bold"},children:e}),(0,l.jsx)("div",{style:{fontSize:9,color:"#007acc",cursor:"pointer",textDecoration:"underline"},onClick:()=>u(t,!0),children:"All"}),(0,l.jsx)("div",{style:{fontSize:9,color:"#f44336",cursor:"pointer",textDecoration:"underline"},onClick:()=>u(t,!1),children:"None"})]}),(0,l.jsx)("div",{style:{display:"flex",border:"1px solid #444",background:"#111",height:30},children:Array.from({length:24},(n,i)=>{var r,s;const a=null===(r=p.matrix[t])||void 0===r?void 0:r[2*i],o=null===(s=p.matrix[t])||void 0===s?void 0:s[2*i+1];return(0,l.jsxs)("div",{style:{flex:1,display:"flex",borderRight:"1px solid #333"},children:[(0,l.jsx)("div",{style:{flex:1,background:a?"#4caf50":"transparent",borderRight:"1px dotted #222",cursor:"pointer"},onMouseDown:e=>1===e.buttons&&h(t,2*i),onMouseEnter:e=>1===e.buttons&&h(t,2*i),title:"".concat(e," ").concat(i,":00 - ").concat(i,":30")}),(0,l.jsx)("div",{style:{flex:1,background:o?"#4caf50":"transparent",cursor:"pointer"},onMouseDown:e=>1===e.buttons&&h(t,2*i+1),onMouseEnter:e=>1===e.buttons&&h(t,2*i+1),title:"".concat(e," ").concat(i,":30 - ").concat(i+1,":00")})]},i)})})]},e))]})]})]})]})},p=e=>{let{schedules:t,cams:n,assignments:s,modes:a,labels:o,onSave:d,onSaveModes:c,onSaveLabels:p,onToggleSchedule:h}=e;const[u,g]=(0,r.useState)(s||{}),[x,y]=(0,r.useState)(a||{ARMED_AWAY:!1,ARMED_HOME:!1,ARMED_NIGHT:!1,DISARMED:!0}),[f,m]=(0,r.useState)(o||{ARMED_AWAY:"Away",ARMED_HOME:"Home",ARMED_NIGHT:"Night"});(0,r.useEffect)(()=>{g(s||{})},[s]);return(0,l.jsxs)("div",{style:{padding:20,color:"#ccc",height:"100%",overflowY:"auto"},children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[(0,l.jsx)("h2",{style:{margin:0},children:"Arming Configuration"}),(0,l.jsx)("div",{style:{fontSize:12,color:"#4caf50",fontStyle:"italic"},children:"Changes are saved automatically."})]}),(0,l.jsxs)("div",{style:{background:"#252526",padding:15,marginBottom:20,border:"1px solid #444"},children:[(0,l.jsx)("h3",{style:{marginTop:0},children:"System Modes"}),(0,l.jsx)("p",{style:{fontSize:13,color:"#888"},children:"Define which global modes are currently ACTIVE. Cameras assigned to a mode will only arm if that mode is active."}),(0,l.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:15},children:["ARMED_AWAY","ARMED_HOME","ARMED_NIGHT"].map(e=>(0,l.jsx)("div",{style:{background:"#1e1e1e",padding:10,borderLeft:x[e]?"4px solid #4caf50":"4px solid #f44336"},children:(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:5},children:[(0,l.jsx)("input",{value:f[e]||e,onChange:t=>m((0,i.A)((0,i.A)({},f),{},{[e]:t.target.value})),style:{background:"transparent",border:"none",color:"#fff",fontWeight:"bold",borderBottom:"1px solid #444"}}),(0,l.jsx)("div",{onClick:()=>(e=>{const t=(0,i.A)((0,i.A)({},x),{},{[e]:!x[e]});y(t),c(t)})(e),style:{cursor:"pointer",padding:"2px 8px",borderRadius:4,background:x[e]?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)",color:x[e]?"#4caf50":"#f44336",fontSize:11,fontWeight:"bold"},children:x[e]?"ACTIVE":"INACTIVE"})]})},e))})]}),(0,l.jsxs)("div",{style:{background:"#252526",padding:15,marginBottom:20,border:"1px solid #444"},children:[(0,l.jsx)("h3",{style:{marginTop:0},children:"Active Schedules"}),(0,l.jsx)("p",{style:{fontSize:13,color:"#888"},children:"Time-based automation schedules. Assign cameras below."}),(0,l.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:15},children:(()=>{const e=Array.isArray(t)?t.map((e,t)=>(0,i.A)({id:t.toString()},e)):Object.entries(t||{}).map(e=>{let[t,n]=e;return(0,i.A)({id:t},n)});return 0===e.length?(0,l.jsx)("div",{style:{color:"#777"},children:"No schedules defined."}):e.map((e,t)=>(0,l.jsxs)("div",{style:{background:"#1e1e1e",padding:10,borderLeft:!1!==e.enabled?"4px solid #4caf50":"4px solid #f44336"},children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:5},children:[(0,l.jsx)("div",{style:{fontWeight:"bold",color:"#fff"},children:e.name||"Untitled Schedule"}),(0,l.jsx)("div",{onClick:()=>h&&h(t,!1!==e.enabled),style:{cursor:"pointer",fontSize:11,background:!1!==e.enabled?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)",color:!1!==e.enabled?"#4caf50":"#f44336",padding:"2px 6px",borderRadius:4,display:"flex",alignItems:"center"},children:!1!==e.enabled?"ACTIVE":"DISABLED"})]}),(0,l.jsxs)("div",{style:{fontSize:11,color:"#aaa"},children:[(e.days||[]).join(", ")||"Every Day"," ",(0,l.jsx)("br",{}),(e.intervals||[]).map(e=>"".concat(e.start,"-").concat(e.end)).join(", ")||"24/7"]})]},e.id))})()})]}),(0,l.jsxs)("div",{style:{background:"#252526",padding:15,border:"1px solid #444"},children:[(0,l.jsx)("h3",{style:{marginTop:0},children:"Camera Assignments"}),(0,l.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{style:{background:"#333"},children:[(0,l.jsx)("th",{style:{padding:10,textAlign:"left"},children:"Camera"}),(0,l.jsx)("th",{style:{padding:10,textAlign:"left"},children:"Arming Strategy"})]})}),(0,l.jsx)("tbody",{children:n.map(e=>(0,l.jsxs)("tr",{style:{borderBottom:"1px solid #333"},children:[(0,l.jsxs)("td",{style:{padding:10},children:[(0,l.jsx)("div",{style:{fontWeight:"bold"},children:e.name||e.ip}),(0,l.jsx)("div",{style:{fontSize:11,color:"#777"},children:e.ip})]}),(0,l.jsx)("td",{style:{padding:10},children:(0,l.jsxs)("select",{value:u[e.id]||"DISARMED",onChange:t=>((e,t)=>{const n=(0,i.A)((0,i.A)({},u),{},{[e]:t});g(n),d(n)})(e.id,t.target.value),style:{background:"#1e1e1e",color:"#fff",border:"1px solid #555",padding:6,width:"100%",maxWidth:300},children:[(0,l.jsx)("option",{value:"DISARMED",children:"\u26d4 Disarmed (Never)"}),(0,l.jsx)("optgroup",{label:"Follow Global Mode",children:["ARMED_AWAY","ARMED_HOME","ARMED_NIGHT"].map(e=>(0,l.jsxs)("option",{value:e,children:["Follow '",f[e]||e,"'"]},e))}),(0,l.jsx)("optgroup",{label:"Schedules",children:Object.entries(t).map(e=>{let[t,n]=e;return(0,l.jsxs)("option",{value:t,children:["\ud83d\udcc5 ",n.name]},t)})})]})})]},e.id))})]})]})]})};var h=n(169);var u=n(647);const g="#121212",x="#1e1e1e",y="#333",f="#2196f3",m="#4caf50",b="#f44336",j="#e0e0e0",v="#aaa";function A(e){let{onFinish:t,onUpdate:n,onOpenSetup:i}=e;const[s,o]=(0,r.useState)([]),[d,c]=(0,r.useState)(!1),[p,h]=(0,r.useState)([]);(0,r.useEffect)(()=>{u()},[]);const u=()=>{a.Ay.get("cameras/config").then(e=>h(e.data)).catch(console.error)};return(0,l.jsxs)("div",{style:{display:"flex",height:"100%",background:g,color:j,fontFamily:"Segoe UI, sans-serif"},children:[(0,l.jsxs)("div",{style:{width:320,borderRight:"1px solid ".concat(y),display:"flex",flexDirection:"column",background:"#181818"},children:[(0,l.jsxs)("div",{style:{padding:15},children:[(0,l.jsx)("div",{style:{fontSize:14,fontWeight:"bold",marginBottom:10,color:f},children:"DISCOVERED DEVICES"}),(0,l.jsx)("button",{onClick:async()=>{c(!0),o([]);try{const e=await a.Ay.post("discovery/scan",{},{timeout:6e4});Array.isArray(e.data)&&o(e.data)}catch(e){console.error(e)}finally{c(!1)}},disabled:d,style:{width:"100%",padding:"8px",background:d?"#333":f,color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontWeight:"bold"},children:d?"SCANNING...":"SCAN NETWORK"})]}),(0,l.jsx)("div",{style:{flex:1,overflowY:"auto",padding:10},children:s.map((e,t)=>{const n=p.some(t=>t.ip===e.ip);return(0,l.jsxs)("div",{onClick:()=>!n&&(e=>{i&&i({ip:e.ip,user:"admin",pass:"",manufacturer:e.manufacturer||"Auto-Detect"})})(e),style:{padding:10,marginBottom:5,borderRadius:4,background:n?"rgba(76, 175, 80, 0.1)":"#252526",border:"1px solid ".concat(n?m:"#333"),cursor:n?"default":"pointer",opacity:n?.6:1},children:[(0,l.jsx)("div",{style:{fontWeight:"bold"},children:e.ip}),(0,l.jsxs)("div",{style:{fontSize:11,color:v},children:[e.manufacturer," ",e.model]})]},t)})})]}),(0,l.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#121212"},children:[(0,l.jsxs)("div",{style:{width:"100%",maxWidth:500,background:x,padding:40,borderRadius:8,border:"1px solid ".concat(y),boxShadow:"0 10px 30px rgba(0,0,0,0.5)",textAlign:"center"},children:[(0,l.jsx)("h2",{style:{margin:"0 0 20px 0",color:"#fff"},children:"ADD CAMERA"}),(0,l.jsxs)("p",{style:{color:"#aaa",marginBottom:30},children:["Select a discovered device from the list on the left",(0,l.jsx)("br",{}),"or manually configure a new connection."]}),(0,l.jsx)("button",{onClick:()=>{i&&i({ip:"",user:"admin",pass:"",manufacturer:""})},style:{padding:"15px 30px",background:f,color:"#fff",border:"none",borderRadius:4,fontSize:16,fontWeight:"bold",cursor:"pointer",width:"100%"},children:"MANUAL ADD (CONNECTION SETUP)"}),(0,l.jsx)("div",{style:{marginTop:20,fontSize:12,color:"#666"},children:"Opens the Advanced Connection Setup Dialog"})]}),(0,l.jsxs)("div",{style:{marginTop:40,width:"100%",maxWidth:800},children:[(0,l.jsxs)("h3",{style:{color:v,fontSize:13,textTransform:"uppercase",borderBottom:"1px solid ".concat(y),paddingBottom:5},children:["Active Cameras (",p.length,")"]}),(0,l.jsx)("div",{style:{display:"flex",gap:10,overflowX:"auto",padding:"10px 0"},children:p.map(e=>(0,l.jsxs)("div",{style:{minWidth:160,padding:12,background:"#222",border:"1px solid ".concat(y),borderRadius:4,fontSize:12,position:"relative"},children:[(0,l.jsx)("button",{onClick:t=>(async(e,t)=>{if(t.stopPropagation(),window.confirm("Are you sure you want to delete this camera?"))try{await a.Ay.delete("cameras/".concat(e)),u(),n&&n()}catch(t){var i,r;alert("Delete failed: "+((null===(i=t.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.error)||t.message))}})(e.id,t),title:"Delete Camera",style:{position:"absolute",top:5,right:5,background:"transparent",border:"none",color:"#f44336",cursor:"pointer",fontWeight:"bold"},children:"\u2715"}),(0,l.jsx)("div",{style:{fontWeight:"bold",color:"#fff",marginBottom:3,paddingRight:20},children:e.ip}),(0,l.jsx)("div",{style:{color:v},children:e.manufacturer}),(0,l.jsxs)("div",{style:{marginTop:5,display:"flex",alignItems:"center",gap:5},children:[(0,l.jsx)("div",{style:{width:6,height:6,borderRadius:"50%",background:e.connected?m:b}}),(0,l.jsx)("span",{style:{color:e.connected?m:b},children:e.connected?"Online":"Offline"})]})]},e.id))})]})]})]})}const S={sectionHeader:{borderBottom:"1px solid #444",paddingBottom:10,marginBottom:15,fontSize:16,fontWeight:"bold",color:"#fff"},formGrid:{display:"grid",gridTemplateColumns:"150px 1fr",gap:15,marginBottom:10,alignItems:"center"},label:{color:"#aaa",fontSize:13},input:{background:"#333",border:"1px solid #555",color:"#fff",padding:5,width:"100%",maxWidth:300},btnPrimary:{marginRight:10,padding:"6px 20px",background:"#007acc",color:"white",border:"none",borderRadius:2,fontSize:13,cursor:"pointer",fontWeight:"bold"},btnToolbar:{marginRight:10,padding:"6px 15px",background:"#333",color:"#ddd",border:"1px solid #444",borderRadius:2,fontSize:12,cursor:"pointer"},table:{width:"100%",borderCollapse:"collapse",marginTop:10,fontSize:13,background:"#252526"},th:{textAlign:"left",borderBottom:"1px solid #444",padding:8,color:"#ccc"},td:{padding:8,borderBottom:"1px solid #333",color:"#ddd"},inputTable:{background:"#444",border:"1px solid #555",color:"#fff",width:"100%",padding:2}};function C(e){let{networkConfig:t,setNetworkConfig:n,saveNetwork:s}=e;const[a,o]=(0,r.useState)(0),d="manual"===t.mode,c=t.availableInterfaces||[],p=c[a]||c[0],h=(e,t)=>{o(t),n(t=>(0,i.A)((0,i.A)({},t),{},{interface:e.interface,ip:e.ip||"",netmask:e.netmask||"255.255.255.0",gateway:e.gateway||"",dns1:e.dns1||"",dns2:e.dns2||""}))};(0,r.useEffect)(()=>{c.length>0&&!t.interface&&h(c[0],0)},[c]);return(0,l.jsxs)("div",{style:{padding:20},children:[(0,l.jsx)("h2",{style:{fontSize:18,marginBottom:20,color:"#fff"},children:"Interface Settings (IPv4/IPv6)"}),(0,l.jsx)("div",{style:{display:"flex",gap:10,marginBottom:20},children:Array.isArray(c)&&c.map((e,t)=>(0,l.jsxs)("button",{onClick:()=>(e=>{const t=c[e];h(t,e)})(t),style:{padding:"8px 16px",background:a===t?"#ff9800":"#333",color:a===t?"#000":"#ccc",border:"none",cursor:"pointer",fontWeight:"bold",borderRadius:4},children:[e.interface," (",e.ip||"No IP",")"]},t))}),(0,l.jsxs)("div",{style:{background:"#252526",padding:20,border:"1px solid #444",maxWidth:700},children:[(0,l.jsxs)("div",{style:{marginBottom:15,borderBottom:"1px solid #444",paddingBottom:10,fontWeight:"bold",color:"#ddd",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsxs)("span",{children:["Configuration for ",(0,l.jsx)("span",{style:{color:"#ff9800"},children:null===p||void 0===p?void 0:p.interface})]}),(0,l.jsx)("span",{style:{fontSize:12,color:"#aaa",background:"#333",padding:"2px 6px",borderRadius:4},children:(null===p||void 0===p?void 0:p.family)||"IPv4"})]}),(0,l.jsxs)("div",{style:{marginBottom:20,display:"flex",gap:20},children:[(0,l.jsxs)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",color:d?"#aaa":"#fff"},children:[(0,l.jsx)("input",{type:"radio",name:"netmode",checked:!d,onChange:()=>n((0,i.A)((0,i.A)({},t),{},{mode:"dhcp"})),style:{marginRight:8}}),"DHCP (Automatic)"]}),(0,l.jsxs)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",color:d?"#fff":"#aaa"},children:[(0,l.jsx)("input",{type:"radio",name:"netmode",checked:d,onChange:()=>n((0,i.A)((0,i.A)({},t),{},{mode:"manual"})),style:{marginRight:8}}),"Manual Configuration"]})]}),(0,l.jsxs)("div",{style:{opacity:d?1:.5,pointerEvents:d?"auto":"none",transition:"0.2s"},children:[(0,l.jsxs)("div",{style:S.formGrid,children:[(0,l.jsx)("label",{style:S.label,children:"IPv4 Address:"}),(0,l.jsx)("input",{style:S.input,value:t.ip||"",onChange:e=>n((0,i.A)((0,i.A)({},t),{},{ip:e.target.value})),placeholder:"192.168.1.50"})]}),(0,l.jsxs)("div",{style:S.formGrid,children:[(0,l.jsx)("label",{style:S.label,children:"Netmask:"}),(0,l.jsx)("input",{style:S.input,value:t.netmask||"",onChange:e=>n((0,i.A)((0,i.A)({},t),{},{netmask:e.target.value})),placeholder:"255.255.255.0"})]}),(0,l.jsxs)("div",{style:S.formGrid,children:[(0,l.jsx)("label",{style:S.label,children:"Gateway (Global):"}),(0,l.jsx)("input",{style:S.input,value:t.gateway||"",onChange:e=>n((0,i.A)((0,i.A)({},t),{},{gateway:e.target.value})),placeholder:"192.168.1.1"})]}),(0,l.jsxs)("div",{style:S.formGrid,children:[(0,l.jsx)("label",{style:S.label,children:"DNS Server 1:"}),(0,l.jsx)("input",{style:S.input,value:t.dns1||"",onChange:e=>n((0,i.A)((0,i.A)({},t),{},{dns1:e.target.value})),placeholder:"8.8.8.8"})]}),(0,l.jsxs)("div",{style:S.formGrid,children:[(0,l.jsx)("label",{style:S.label,children:"DNS Server 2:"}),(0,l.jsx)("input",{style:S.input,value:t.dns2||"",onChange:e=>n((0,i.A)((0,i.A)({},t),{},{dns2:e.target.value})),placeholder:"8.8.4.4"})]})]}),(0,l.jsx)("div",{style:{marginTop:20,display:"flex",justifyContent:"flex-end"},children:(0,l.jsxs)("button",{style:S.btnPrimary,onClick:s,children:["Save Settings for ",null===p||void 0===p?void 0:p.interface]})})]})]})}function E(e){let{netConfig:t,setNetConfig:n,connectVPN:s,connectDualVPN:a,saveImportedVPN:o}=e;const[d,c]=(0,r.useState)("wg0"),p=d,h=e=>t["".concat(p,"_").concat(e)],g=(e,r)=>n((0,i.A)((0,i.A)({},t),{},{["".concat(p,"_").concat(e)]:r})),x=h("status"),y=x&&x.includes("Connected");return(0,l.jsxs)("div",{style:{padding:20},children:[(0,l.jsx)("h2",{style:{fontSize:18,marginBottom:20,color:"#fff"},children:"VPN Configuration (Dual WireGuard)"}),(0,l.jsxs)("div",{style:{display:"flex",gap:10,marginBottom:20},children:[(0,l.jsxs)("button",{onClick:()=>c("wg0"),style:{padding:"10px 20px",background:"wg0"===d?"#007acc":"#333",color:"#fff",border:"none",cursor:"pointer",fontWeight:"bold",borderBottom:"wg0"===d?"2px solid #fff":"none"},children:[(0,l.jsx)(u.LM,{size:14,style:{marginRight:5}})," VPN #1 (Management)"]}),(0,l.jsx)("button",{onClick:()=>c("wg1"),style:{padding:"10px 20px",background:"wg1"===d?"#e91e63":"#333",color:"#fff",border:"none",cursor:"pointer",fontWeight:"bold",borderBottom:"wg1"===d?"2px solid #fff":"none"},children:"[AI] VPN #2 (AI Stream)"})]}),(0,l.jsxs)("div",{style:{background:"#252526",padding:20,border:"1px solid #444",maxWidth:600},children:[(0,l.jsxs)("div",{style:{marginBottom:20,padding:10,background:y?"rgba(76, 175, 80, 0.1)":"rgba(244, 67, 54, 0.1)",border:"1px solid #444",borderRadius:4},children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsxs)("div",{style:{fontWeight:"bold",color:y?"#4caf50":"#f44336"},children:["Interface: ",p.toUpperCase()," | Status: ",x||"Not Configured"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{type:"file",id:"vpn-import",accept:".json",style:{display:"none"},onChange:e=>{const r=e.target.files[0];if(!r)return;const s=new FileReader;s.onload=e=>{try{const r=JSON.parse(e.target.result);if(!r.mgmt||!r.ai)throw new Error("Format fi\u0219ier invalid (Pachet Dual VPN necesar)");const s=(0,i.A)({},t);s.wg0_address=r.mgmt.interface.address,s.wg0_privateKey=r.mgmt.interface.privateKey,s.wg0_serverPubKey=r.mgmt.peer.publicKey,s.wg0_endpoint=r.mgmt.peer.endpoint,s.wg0_allowedIps=r.mgmt.peer.allowedIps,s.wg1_address=r.ai.interface.address,s.wg1_privateKey=r.ai.interface.privateKey,s.wg1_serverPubKey=r.ai.peer.publicKey,s.wg1_endpoint=r.ai.peer.endpoint,s.wg1_allowedIps=r.ai.peer.allowedIps,n(s),o?window.confirm("Configura\u021bie valid\u0103! Dori\u021bi s\u0103 aplica\u021bi set\u0103rile pentru AMBELE tuneluri VPN acum?")&&o(r):alert("Configura\u021bie VPN importat\u0103 \xeen memorie! Ap\u0103sa\u021bi 'Update & Connect'.")}catch(r){alert("Eroare la citirea fi\u0219ierului: "+r.message)}},s.readAsText(r)}}),(0,l.jsx)("button",{onClick:()=>document.getElementById("vpn-import").click(),style:{background:"#2e7d32",color:"#fff",border:"1px solid #4caf50",padding:"4px 8px",borderRadius:4,cursor:"pointer",fontSize:11,fontWeight:"bold"},children:"\ud83d\udcc2 Import\u0103 VPN (.json)"})]})]}),h("ip")&&(0,l.jsxs)("div",{style:{fontSize:13,color:"#ccc",marginTop:5},children:["Internal IP: ",(0,l.jsx)("b",{style:{color:"#fff"},children:h("ip")})]})]}),(0,l.jsx)("h3",{style:{fontSize:14,color:"#aaa",borderBottom:"1px solid #444",paddingBottom:5},children:"wg0"===d?"Management Tunnel Settings":"High-Speed AI Tunnel Settings"}),(0,l.jsxs)("div",{style:{marginBottom:10},children:[(0,l.jsx)("label",{style:{display:"block",color:"#ccc",fontSize:12},children:"IP Address (Client)"}),(0,l.jsx)("input",{style:(0,i.A)((0,i.A)({},S.input),{},{width:"100%",fontFamily:"monospace"}),value:h("address")||"",onChange:e=>g("address",e.target.value),placeholder:"wg0"===d?"10.100.0.x/16":"10.100.1.x/16"})]}),(0,l.jsxs)("div",{style:{marginBottom:10},children:[(0,l.jsx)("label",{style:{display:"block",color:"#ccc",fontSize:12},children:"Private Key (Client)"}),(0,l.jsx)("input",{style:(0,i.A)((0,i.A)({},S.input),{},{width:"100%",fontFamily:"monospace"}),type:"password",value:h("privateKey")||"",onChange:e=>g("privateKey",e.target.value),placeholder:"Client Private Key"})]}),(0,l.jsxs)("div",{style:{marginBottom:10},children:[(0,l.jsx)("label",{style:{display:"block",color:"#ccc",fontSize:12},children:"Public Key (Server)"}),(0,l.jsx)("input",{style:(0,i.A)((0,i.A)({},S.input),{},{width:"100%",fontFamily:"monospace"}),value:h("serverPubKey")||"",onChange:e=>g("serverPubKey",e.target.value),placeholder:"Server Public Key"})]}),(0,l.jsxs)("div",{style:{marginBottom:10},children:[(0,l.jsx)("label",{style:{display:"block",color:"#ccc",fontSize:12},children:"Endpoint (Server IP:Port)"}),(0,l.jsx)("input",{style:(0,i.A)((0,i.A)({},S.input),{},{width:"100%",fontFamily:"monospace"}),value:h("endpoint")||"",onChange:e=>g("endpoint",e.target.value),placeholder:"wg0"===d?"194.107.163.227:51820":"194.107.163.227:51821"})]}),(0,l.jsxs)("div",{style:{marginBottom:20},children:[(0,l.jsx)("label",{style:{display:"block",color:"#ccc",fontSize:12},children:"Allowed IPs"}),(0,l.jsx)("input",{style:(0,i.A)((0,i.A)({},S.input),{},{width:"100%",fontFamily:"monospace"}),value:h("allowedIps")||"",onChange:e=>g("allowedIps",e.target.value),placeholder:"wg0"===d?"10.100.0.0/16":"10.100.1.0/24"})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,l.jsxs)("button",{style:(0,i.A)((0,i.A)({},S.btnPrimary),{},{flex:2}),onClick:()=>s(d),children:["Update & Connect ",d.toUpperCase()]}),t.wg1_privateKey&&(0,l.jsx)("button",{style:(0,i.A)((0,i.A)({},S.btnPrimary),{},{flex:3,background:"#ff9800",color:"#000"}),onClick:a,children:"\u26a1 Connect ALL VPN Tunnels (Dual)"})]})]})]})}function R(e){let{netConfig:t,setNetConfig:n,saveDispatch:s}=e;const[o,d]=(0,r.useState)(!1);return(0,l.jsxs)("div",{style:{padding:20},children:[(0,l.jsx)("h2",{style:{fontSize:18,marginBottom:20,color:"#fff"},children:"Evenimente Server (Dispatch)"}),(0,l.jsxs)("div",{style:{background:"#252526",padding:20,border:"1px solid #444",maxWidth:600},children:[(0,l.jsxs)("div",{style:{marginBottom:15},children:[(0,l.jsx)("label",{style:{display:"block",color:"#aaa",fontSize:12,marginBottom:5},children:"Dispatch URL (Primary)"}),(0,l.jsx)("input",{style:(0,i.A)((0,i.A)({},S.input),{},{width:"100%",maxWidth:"100%",fontFamily:"monospace"}),value:t.dispatchUrl||"",onChange:e=>n((0,i.A)((0,i.A)({},t),{},{dispatchUrl:e.target.value})),placeholder:"http://dispatch.example.com/events"})]}),(0,l.jsxs)("div",{style:{marginBottom:20},children:[(0,l.jsx)("button",{style:S.btnPrimary,onClick:s,children:"Save Dispatch Config"}),(0,l.jsx)("button",{style:(0,i.A)((0,i.A)({},S.btnToolbar),{},{background:"#4caf50",color:"#fff",border:"none"}),onClick:async()=>{d(!0);try{const e=await a.nC.post("/dispatch/sync");alert("Sync Result: "+e.data.message)}catch(n){var e,t;alert("Sync Failed: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||n.message))}finally{d(!1)}},disabled:o,children:o?"Syncing...":"Sync Now (Manual)"})]}),(0,l.jsxs)("div",{style:{borderTop:"1px solid #444",paddingTop:15,marginTop:15},children:[(0,l.jsx)("h4",{style:{margin:"0 0 10px 0",color:"#888",fontSize:12},children:"Active Connection Status"}),(0,l.jsxs)("div",{style:{fontSize:13,display:"flex",gap:10,alignItems:"center"},children:[(0,l.jsx)("div",{style:{width:10,height:10,background:"Connected"===t.vpn_status?"#4caf50":"#f44336",borderRadius:"50%"}}),(0,l.jsxs)("span",{children:["VPN: ",t.vpn_status||"Disconnected"]})]}),(0,l.jsxs)("div",{style:{fontSize:13,display:"flex",gap:10,alignItems:"center",marginTop:5},children:[(0,l.jsx)("div",{style:{width:10,height:10,background:"Connected"===t.wg1_status?"#e91e63":"#555",borderRadius:"50%"}}),(0,l.jsxs)("span",{children:["AI HUB: ","Connected"===t.wg1_status?"Active (10.200.0.2)":"Searching..."]})]})]})]})]})}function w(){return(0,l.jsxs)("div",{style:{padding:20},children:[(0,l.jsx)("h2",{style:{fontSize:18,marginBottom:20,color:"#fff"},children:"System Port Usage"}),(0,l.jsx)("div",{style:{background:"#252526",padding:20,border:"1px solid #444",maxWidth:800},children:(0,l.jsxs)("table",{style:S.table,children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{style:S.th,children:"Serviciu"}),(0,l.jsx)("th",{style:S.th,children:"Port"}),(0,l.jsx)("th",{style:S.th,children:"Protocol"}),(0,l.jsx)("th",{style:S.th,children:"Descriere"})]})}),(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{style:S.td,children:"Interfata Web"}),(0,l.jsx)("td",{style:S.td,children:"80"}),(0,l.jsx)("td",{style:S.td,children:"TCP"}),(0,l.jsx)("td",{style:S.td,children:"Acces Panou Control"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{style:S.td,children:"API Local"}),(0,l.jsx)("td",{style:S.td,children:"3000"}),(0,l.jsx)("td",{style:S.td,children:"TCP"}),(0,l.jsx)("td",{style:S.td,children:"Backend Intern"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{style:S.td,children:"SSH"}),(0,l.jsx)("td",{style:S.td,children:"22"}),(0,l.jsx)("td",{style:S.td,children:"TCP"}),(0,l.jsx)("td",{style:S.td,children:"Administrare"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{style:S.td,children:"WireGuard"}),(0,l.jsx)("td",{style:S.td,children:"51820/51821"}),(0,l.jsx)("td",{style:S.td,children:"UDP"}),(0,l.jsx)("td",{style:S.td,children:"VPN Tunnels"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{style:S.td,children:"RTSP"}),(0,l.jsx)("td",{style:S.td,children:"554/8554"}),(0,l.jsx)("td",{style:S.td,children:"TCP/UDP"}),(0,l.jsx)("td",{style:S.td,children:"Video Streams"})]})]})]})})]})}const k={input:{background:"#333",border:"1px solid #555",color:"#fff",padding:5,width:"100%",maxWidth:300},label:{color:"#aaa",fontSize:13},btnPrimary:{marginRight:10,padding:"6px 20px",background:"#007acc",color:"white",border:"none",borderRadius:2,fontSize:13,cursor:"pointer",fontWeight:"bold"},btnToolbar:{marginRight:10,padding:"6px 15px",background:"#333",color:"#ddd",border:"1px solid #444",borderRadius:2,fontSize:12,cursor:"pointer"}};function I(e){let{newUserForm:t,setNewUserForm:n,handleAddUser:r}=e;return(0,l.jsxs)("div",{style:{padding:20},children:[(0,l.jsx)("h2",{style:{fontSize:18,marginBottom:20,color:"#fff"},children:"Add User"}),(0,l.jsxs)("div",{style:{background:"#252526",padding:20,border:"1px solid #444",maxWidth:500},children:[(0,l.jsxs)("div",{style:{marginBottom:15},children:[(0,l.jsx)("label",{style:{display:"block",marginBottom:5,color:"#ccc"},children:"Login"}),(0,l.jsx)("input",{style:(0,i.A)((0,i.A)({},k.input),{},{width:"100%"}),value:t.username,onChange:e=>n((0,i.A)((0,i.A)({},t),{},{username:e.target.value}))})]}),(0,l.jsxs)("div",{style:{marginBottom:15},children:[(0,l.jsx)("label",{style:{display:"block",marginBottom:5,color:"#ccc"},children:"Password"}),(0,l.jsx)("input",{type:"password",style:(0,i.A)((0,i.A)({},k.input),{},{width:"100%"}),value:t.password,onChange:e=>n((0,i.A)((0,i.A)({},t),{},{password:e.target.value}))})]}),(0,l.jsxs)("div",{style:{marginBottom:15},children:[(0,l.jsx)("label",{style:{display:"block",marginBottom:5,color:"#ccc"},children:"Confirm password"}),(0,l.jsx)("input",{type:"password",style:(0,i.A)((0,i.A)({},k.input),{},{width:"100%"}),value:t.confirm,onChange:e=>n((0,i.A)((0,i.A)({},t),{},{confirm:e.target.value}))})]}),(0,l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,l.jsx)("button",{style:k.btnPrimary,onClick:r,children:"Create User"})})]})]})}function T(e){let{selectedUser:t,setSelectedUser:n,currentUser:r,handleDeleteUser:s,loadUsers:o}=e;return(0,l.jsxs)("div",{style:{padding:20},children:[(0,l.jsxs)("h2",{style:{fontSize:18,marginBottom:20,color:"#fff"},children:["User Settings - ",t.name]}),(0,l.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:30},children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:20},children:[(0,l.jsx)("div",{style:{fontSize:40,marginRight:20},children:t.icon}),(0,l.jsxs)("div",{style:{flex:1},children:[(0,l.jsx)("label",{style:k.label,children:"User name:"}),(0,l.jsx)("input",{style:(0,i.A)((0,i.A)({},k.input),{},{width:"100%"}),value:t.name,readOnly:!0,disabled:!0}),"admin"===r.role&&"admin"!==t.role&&(0,l.jsx)("button",{style:(0,i.A)((0,i.A)({},k.btnToolbar),{},{marginTop:10,color:"#f44336"}),onClick:()=>s(t.name),children:"[Del] Delete user"})]})]}),(0,l.jsxs)("div",{style:{marginTop:20,border:"1px solid #444",padding:15,background:"#222"},children:[(0,l.jsx)("h4",{style:{marginTop:0,marginBottom:15,color:"#ccc"},children:"Acces Meniuri (Vizibilitate)"}),(0,l.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:8},children:[{id:"LIVE",label:"Monitorizare Live"},{id:"ARCHIVE",label:"Arhiva Inregistrari"},{id:"SETTINGS",label:"Setari Sistem"},{id:"HARDWARE",label:"Gestionare Hardware"},{id:"NETWORK",label:"Setari Retea"}].map(e=>{var s;return(0,l.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:10,cursor:"pointer",color:"#ddd"},children:[(0,l.jsx)("input",{type:"checkbox",checked:null===(s=t.menus)||void 0===s?void 0:s.includes(e.id),onChange:()=>(e=>{const r=t.menus||[],s=r.includes(e)?r.filter(t=>t!==e):[...r,e];n((0,i.A)((0,i.A)({},t),{},{menus:s}))})(e.id),disabled:"admin"!==r.role}),e.label]},e.id)})}),"admin"===r.role&&(0,l.jsx)("button",{style:(0,i.A)((0,i.A)({},k.btnPrimary),{},{width:"100%",marginTop:20}),onClick:async()=>{if("admin"===r.role)try{await a.nC.put("/auth/users/".concat(t.id),{menus:t.menus}),alert("Permisiuni salvate cu succes!"),o()}catch(e){alert("Eroare salvare: "+e.message)}},children:"Salveaza Permisiuni"})]})]})})]})}const N={th:{textAlign:"left",borderBottom:"1px solid #444",padding:8,color:"#ccc"},td:{padding:8,borderBottom:"1px solid #333",color:"#ddd"},table:{width:"100%",borderCollapse:"collapse",marginTop:10,fontSize:13,background:"#252526"}};function M(){const[e,t]=(0,r.useState)(null),n=(0,s.Zp)();(0,r.useEffect)(()=>{a.nC.get("/cameras/orphans").then(e=>{Array.isArray(e.data)?t(e.data):t([])}).catch(()=>t([]))},[]);return(0,l.jsxs)("div",{style:{padding:20},children:[(0,l.jsx)("h2",{style:{fontSize:18,marginBottom:20,color:"#fff"},children:"Camere Sterse (Arhiva)"}),(0,l.jsx)("p",{style:{color:"#aaa",fontSize:13},children:"Aceste directoare contin inregistrari dar nu sunt legate de nicio camera activa."}),(0,l.jsx)("div",{style:{background:"#252526",padding:10,border:"1px solid #444"},children:(0,l.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:10,fontSize:13,background:"#252526"},children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{style:N.th,children:"UUID Folder / Inregistrari"}),(0,l.jsx)("th",{style:N.th,children:"Ultima Modificare"}),(0,l.jsx)("th",{style:N.th,children:"Actiune"})]})}),(0,l.jsx)("tbody",{children:e?Array.isArray(e)&&0!==e.length?e.map(e=>(0,l.jsxs)("tr",{style:{background:"transparent",transition:"0.2s"},children:[(0,l.jsx)("td",{style:N.td,children:(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.uuid,(0,l.jsx)("span",{onClick:()=>n("/playback?camId=".concat(e.uuid)),style:{color:"#81d4fa",cursor:"pointer",textDecoration:"underline",background:"rgba(33, 150, 243, 0.1)",padding:"2px 6px",borderRadius:4,fontSize:11},children:"Vezi Inregistrari [->]"})]})}),(0,l.jsx)("td",{style:N.td,children:new Date(e.birthtime).toLocaleString()}),(0,l.jsx)("td",{style:N.td,children:(0,l.jsx)("button",{style:{marginRight:10,padding:"6px 15px",background:"#f44336",color:"#fff",border:"none",borderRadius:2,fontSize:12,cursor:"pointer"},onClick:()=>(async e=>{if(window.confirm("Sunteti sigur ca doriti sa stergeti aceste inregistrari? Aceasta actiune este ireversibila."))try{await a.nC.delete("/cameras/orphans",{data:{uuid:e}}),t(t=>Array.isArray(t)?t.filter(t=>t.uuid!==e):[])}catch(n){alert("Eroare la stergere: "+n.message)}})(e.uuid),children:"Delete"})})]},e.uuid)):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"3",style:{padding:20,textAlign:"center",color:"#666"},children:"No orphaned recordings found."})}):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"3",style:{padding:20,textAlign:"center"},children:"Loading..."})})})]})})]})}function z(e){var t,n;let{cams:i}=e;const[s,o]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=()=>{a.nC.get("/recorder/status").then(e=>o(e.data)).catch(e=>console.error("Failed to load recorder stats:",e))};e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[]);return(0,l.jsxs)("div",{style:{padding:20},children:[(0,l.jsx)("h2",{style:{fontSize:18,marginBottom:20,color:"#fff"},children:"Archive & Storage Management"}),(0,l.jsxs)("div",{style:{background:"#252526",padding:20,border:"1px solid #444",marginBottom:20},children:[(0,l.jsx)("h3",{style:{marginTop:0,marginBottom:15},children:"Recorded Streams Status"}),(0,l.jsxs)("table",{style:N.table,children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{style:N.th,children:"Camera"}),(0,l.jsx)("th",{style:N.th,children:"Main Stream"}),(0,l.jsx)("th",{style:N.th,children:"Sub Stream"}),(0,l.jsx)("th",{style:N.th,children:"Retention"}),(0,l.jsx)("th",{style:N.th,children:"Status"})]})}),(0,l.jsx)("tbody",{children:i.map((e,t)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{style:N.td,children:e.name||e.ip}),(0,l.jsx)("td",{style:N.td,children:"main"!==e.recordStream&&e.recordStream?"NO":"YES"}),(0,l.jsx)("td",{style:N.td,children:"sub"===e.recordStream?"YES":"NO"}),(0,l.jsxs)("td",{style:N.td,children:[e.retention||7," Days"]}),(0,l.jsx)("td",{style:N.td,children:(0,l.jsx)("span",{style:{color:e.enabled?"#4caf50":"#f44336"},children:e.enabled?"Active":"Disabled"})})]},t))})]})]}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20},children:[(0,l.jsxs)("div",{style:{background:"#252526",padding:20,border:"1px solid #444"},children:[(0,l.jsx)("h3",{style:{marginTop:0,marginBottom:15},children:"Archive Statistics"}),s?(0,l.jsxs)("div",{style:{display:"grid",gap:8,fontSize:13,color:"#ddd"},children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,l.jsx)("span",{children:"Total Cameras:"}),(0,l.jsx)("b",{children:Object.keys(s.cameras||{}).length})]}),(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,l.jsx)("span",{children:"Recording:"}),(0,l.jsx)("b",{children:Object.values(s.cameras||{}).filter(e=>e.main||e.sub).length})]}),(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,l.jsx)("span",{children:"Disk Usage:"}),(0,l.jsxs)("b",{children:[(null===(t=s.storage)||void 0===t?void 0:t.usedPercent)||0,"% Full"]})]}),(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,l.jsx)("span",{children:"Available Space:"}),(0,l.jsx)("b",{children:(null===(n=s.storage)||void 0===n?void 0:n.avail)||"N/A"})]})]}):(0,l.jsx)("div",{style:{color:"#666",textAlign:"center",padding:20},children:"Loading statistics..."})]}),(0,l.jsxs)("div",{style:{background:"#252526",padding:20,border:"1px solid #444"},children:[(0,l.jsx)("h3",{style:{marginTop:0,marginBottom:15},children:"Camera Recording Status"}),s&&s.cameras?(0,l.jsx)("div",{style:{display:"grid",gap:8,fontSize:13,color:"#ddd"},children:Object.entries(s.cameras).map(e=>{let[t,n]=e;return(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid #333"},children:[(0,l.jsxs)("span",{style:{color:"#aaa"},children:[t,":"]}),(0,l.jsxs)("span",{children:[n.main&&(0,l.jsx)("span",{style:{color:"#4caf50",marginRight:8},children:"\u25cfMAIN"}),n.sub&&(0,l.jsx)("span",{style:{color:"#2196f3"},children:"\u25cfSUB"}),!n.main&&!n.sub&&(0,l.jsx)("span",{style:{color:"#666"},children:"IDLE"})]})]},t)})}):(0,l.jsx)("div",{style:{color:"#666",textAlign:"center",padding:20},children:"No camera data"})]})]}),(0,l.jsxs)("div",{style:{background:"#252526",padding:20,border:"1px solid #444",marginTop:20},children:[(0,l.jsx)("h3",{style:{marginTop:0,borderBottom:"1px solid #444",paddingBottom:10},children:"Active Camera Storage Mapping"}),(0,l.jsxs)("table",{style:N.table,children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{style:N.th,children:"Camera Name / IP"}),(0,l.jsx)("th",{style:N.th,children:"Storage ID"}),(0,l.jsx)("th",{style:N.th,children:"Physical HDD Path"})]})}),(0,l.jsx)("tbody",{children:i.filter(e=>e.enabled).map((e,t)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{style:N.td,children:e.name||e.ip}),(0,l.jsx)("td",{style:N.td,children:(0,l.jsx)("code",{style:{color:"#aaa"},children:e.storagePath||"N/A"})}),(0,l.jsx)("td",{style:N.td,children:(0,l.jsx)("input",{type:"text",readOnly:!0,value:e.physicalPath||"Generating...",style:{width:"100%",background:"#111",border:"1px solid #333",color:"#007acc",fontSize:11,padding:"4px 8px",fontFamily:"monospace",borderRadius:3}})})]},t))})]})]})]})}var _=n(986);const D=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},O=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var P={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const B=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],W=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:d,iconNode:c}=e,p=(0,_.A)(e,B);return(0,r.createElement)("svg",(0,i.A)((0,i.A)((0,i.A)({ref:t},P),{},{width:s,height:s,stroke:n,strokeWidth:o?24*Number(a)/Number(s):a,className:O("lucide",l)},!d&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(p)&&{"aria-hidden":"true"}),p),[...c.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(d)?d:[d]])}),U=["className"],H=(e,t)=>{const n=(0,r.forwardRef)((n,s)=>{let{className:a}=n,o=(0,_.A)(n,U);return(0,r.createElement)(W,(0,i.A)({ref:s,iconNode:t,className:O("lucide-".concat((l=D(e),l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),a)},o));var l});return n.displayName=D(e),n},L=H("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),V=H("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),K=H("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),G=H("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),F=H("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Y=H("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function Z(){const[e,t]=(0,r.useState)("antispam"),[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)("default");return(0,l.jsxs)("div",{style:{padding:20,color:"#ccc"},children:[(0,l.jsxs)("h3",{style:{display:"flex",alignItems:"center",gap:10,borderBottom:"1px solid #444",paddingBottom:10},children:[(0,l.jsx)(L,{size:20})," AI & Inteligen\u021b\u0103"]}),(0,l.jsxs)("div",{style:{display:"flex",gap:20,marginTop:20,borderBottom:"1px solid #333"},children:[(0,l.jsx)(X,{label:"Anti-Spam Intelligence",icon:(0,l.jsx)(V,{size:16}),active:"antispam"===e,onClick:()=>t("antispam")}),(0,l.jsx)(X,{label:"Hub Connection",icon:(0,l.jsx)(K,{size:16}),active:"hub"===e,onClick:()=>t("hub")})]}),(0,l.jsxs)("div",{style:{marginTop:20},children:["hub"===e&&(0,l.jsx)($,{}),"antispam"===e&&(0,l.jsx)(J,{})]})]})}function X(e){let{label:t,icon:n,active:i,onClick:r}=e;return(0,l.jsxs)("div",{onClick:r,style:{padding:"10px 0",cursor:"pointer",borderBottom:i?"2px solid #2196f3":"2px solid transparent",color:i?"#fff":"#888",display:"flex",alignItems:"center",gap:8,fontWeight:i?"bold":"normal"},children:[n," ",t]})}function J(){var e,t,n,s,o,d;const[c,p]=(0,r.useState)([]),[h,u]=(0,r.useState)("default"),[g,x]=(0,r.useState)(null),[y,f]=(0,r.useState)(!1),[m,b]=(0,r.useState)(!1),[j,v]=(0,r.useState)(null);(0,r.useEffect)(()=>{A(),S();const e=setInterval(S,5e3);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{h&&C(h)},[h]);const A=async()=>{try{const e=await a.nC.get("/cameras");p(e.data||[])}catch(e){}},S=async()=>{try{const e=await a.nC.get("/ai-intelligence/api/stats");v(e.data)}catch(e){}},C=async e=>{f(!0);try{var t;const n=await a.nC.get("/ai-intelligence/api/config/".concat(e));x((null===(t=n.data)||void 0===t?void 0:t.config)||n.data)}catch(n){console.error("Load Config Error",n)}f(!1)},E=(e,t)=>{x(n=>(0,i.A)((0,i.A)({},n),{},{false_detection_filter:(0,i.A)((0,i.A)({},n.false_detection_filter),{},{[e]:t})}))};return g?(0,l.jsxs)("div",{children:[j&&(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:10,marginBottom:20},children:[(0,l.jsx)(q,{label:"Tracked Objects",value:j.tracked_objects,color:"#2196f3"}),(0,l.jsx)(q,{label:"Events Today",value:j.events_today,color:"#4caf50"}),(0,l.jsx)(q,{label:"Ignored Zones",value:j.false_zones,color:"#ff9800"}),(0,l.jsx)(q,{label:"Uptime",value:Math.round(j.uptime_seconds/60)+" min",color:"#9c27b0"})]}),(0,l.jsxs)("div",{style:{marginBottom:20,background:"#222",padding:15,borderRadius:6},children:[(0,l.jsx)("label",{style:{marginRight:10},children:"Select Camera:"}),(0,l.jsxs)("select",{value:h,onChange:e=>u(e.target.value),style:{padding:8,borderRadius:4,background:"#333",color:"#fff",border:"1px solid #444"},children:[(0,l.jsx)("option",{value:"default",children:"Global Defaults (All Cameras)"}),c.map(e=>(0,l.jsxs)("option",{value:e.id,children:[e.name||e.ip," (",e.id,")"]},e.id))]})]}),y?(0,l.jsx)("div",{children:"Loading..."}):(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20},children:[(0,l.jsxs)("div",{style:{background:"#1a1a1a",padding:20,borderRadius:8,border:"1px solid #333"},children:[(0,l.jsxs)("h4",{style:{margin:"0 0 15px 0",color:"#4caf50",display:"flex",alignItems:"center",gap:8},children:[(0,l.jsx)(V,{size:18})," False Detection Filter"]}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:15},children:[(0,l.jsx)("input",{type:"checkbox",checked:null===(e=g.false_detection_filter)||void 0===e?void 0:e.enabled,onChange:e=>E("enabled",e.target.checked),style:{width:18,height:18}}),(0,l.jsx)("label",{style:{marginLeft:10,fontWeight:"bold"},children:"Enable Filter"})]}),(0,l.jsxs)("div",{className:"setting-row",children:[(0,l.jsx)("label",{children:"Detect objects only on motion"}),(0,l.jsx)("input",{type:"checkbox",checked:null===(t=g.false_detection_filter)||void 0===t?void 0:t.motion_only,onChange:e=>E("motion_only",e.target.checked)})]}),(0,l.jsxs)("div",{className:"setting-row",children:[(0,l.jsx)("label",{children:"Ignore repeated detections (Anti-Wind/Rain)"}),(0,l.jsx)("input",{type:"number",value:null===(n=g.false_detection_filter)||void 0===n?void 0:n.detection_count_before_ignore,onChange:e=>E("detection_count_before_ignore",parseInt(e.target.value)),style:{width:60}})]}),(0,l.jsx)("p",{style:{fontSize:11,color:"#666",marginTop:-5,marginBottom:10},children:"Ignore area after N detections without motion."}),(0,l.jsxs)("div",{className:"setting-row",children:[(0,l.jsx)("label",{children:"Stability Frames (Confirmation)"}),(0,l.jsx)("input",{type:"number",value:null===(s=g.false_detection_filter)||void 0===s?void 0:s.stability_frames,onChange:e=>E("stability_frames",parseInt(e.target.value)),style:{width:60}})]})]}),(0,l.jsxs)("div",{style:{background:"#1a1a1a",padding:20,borderRadius:8,border:"1px solid #333"},children:[(0,l.jsxs)("h4",{style:{margin:"0 0 15px 0",color:"#2196f3",display:"flex",alignItems:"center",gap:8},children:[(0,l.jsx)(G,{size:18})," Anti-Spam & Events"]}),(0,l.jsxs)("div",{className:"setting-row",children:[(0,l.jsx)("label",{children:"Event Cooldown (seconds)"}),(0,l.jsx)("input",{type:"number",value:null===(o=g.event_manager)||void 0===o?void 0:o.cooldown_seconds,onChange:e=>{return t="cooldown_seconds",n=parseInt(e.target.value),void x(e=>(0,i.A)((0,i.A)({},e),{},{event_manager:(0,i.A)((0,i.A)({},e.event_manager),{},{[t]:n})}));var t,n},style:{width:60}})]}),(0,l.jsx)("p",{style:{fontSize:11,color:"#666",marginTop:-5,marginBottom:10},children:"Don't send same event again for X seconds."}),(0,l.jsxs)("div",{className:"setting-row",children:[(0,l.jsx)("label",{children:"Min Displacement (Pixels)"}),(0,l.jsx)("input",{type:"number",value:null===(d=g.false_detection_filter)||void 0===d?void 0:d.min_displacement_pixels,onChange:e=>E("min_displacement_pixels",parseInt(e.target.value)),style:{width:60}})]})]})]}),(0,l.jsx)("div",{style:{marginTop:20,display:"flex",justifyContent:"flex-end"},children:(0,l.jsxs)("button",{onClick:async()=>{b(!0);try{await a.nC.post("/ai-intelligence/api/config/".concat(h),g),alert("Set\u0103ri salvate cu succes!")}catch(e){alert("Eroare la salvare: "+e.message)}b(!1)},disabled:m,style:{background:"#2196f3",color:"white",padding:"10px 25px",border:"none",borderRadius:4,cursor:"pointer",display:"flex",alignItems:"center",gap:10,fontSize:14},children:[m?(0,l.jsx)(F,{className:"spin"}):(0,l.jsx)(Y,{size:18})," Save Configuration"]})}),(0,l.jsx)("style",{children:'\n                .setting-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid #2a2a2a; }\n                .setting-row label { font-size: 13px; color: #ccc; }\n                .setting-row input[type="number"] { background: #222; border: 1px solid #444; color: #fff; padding: 4px; borderRadius: 4px; }\n                .stat-box { background: #222; padding: 10px; borderRadius: 4px; text-align: center; border: 1px solid #333; }\n                .spin { animation: spin 1s linear infinite; }\n                @keyframes spin { 100% { transform: rotate(360deg); } }\n            '})]}):(0,l.jsx)("div",{style:{padding:20},children:"Selecta\u021bi o camer\u0103 sau a\u0219tepta\u021bi \xeenc\u0103rcarea..."})}function q(e){let{label:t,value:n,color:i}=e;return(0,l.jsxs)("div",{className:"stat-box",style:{borderTop:"2px solid ".concat(i)},children:[(0,l.jsx)("div",{style:{fontSize:24,fontWeight:"bold",color:"#fff"},children:n}),(0,l.jsx)("div",{style:{fontSize:11,color:"#888",textTransform:"uppercase"},children:t})]})}function $(){const[e,t]=(0,r.useState)({hubUrl:"",enabled:!0});(0,r.useEffect)(()=>{a.nC.get("/api/ai/config").then(e=>t(e.data)).catch(()=>{})},[]);return(0,l.jsxs)("div",{style:{maxWidth:500},children:[(0,l.jsx)("h4",{children:"Hub Connection"}),(0,l.jsxs)("div",{style:{marginBottom:15},children:[(0,l.jsx)("label",{style:{display:"block",marginBottom:5},children:"Hub URL"}),(0,l.jsx)("input",{style:{width:"100%",padding:8,background:"#222",color:"#fff",border:"1px solid #444"},value:e.hubUrl||"",onChange:n=>t((0,i.A)((0,i.A)({},e),{},{hubUrl:n.target.value}))})]}),(0,l.jsx)("button",{onClick:()=>{a.nC.post("/api/ai/config",e).then(()=>alert("Saved!")).catch(e=>alert(e.message))},style:{padding:"8px 16px",background:"#4caf50",color:"#fff",border:"none",cursor:"pointer"},children:"Save Hub Settings"})]})}var Q=n(975);n(422);const ee={width:"100%",height:"100%"};function te(e){let{camId:t,active:n=!0}=e;return n?(0,l.jsx)("div",{style:{width:"100%",height:"100%",background:"#000",overflow:"hidden"},children:(0,l.jsx)(Q.A,{camId:t,streamType:"sub"})}):(0,l.jsx)("div",{style:{width:"100%",height:"100%",background:"#000"}})}function ne(e){let{points:t=[],onChange:n,readOnly:i=!1,otherZones:s=[]}=e;const a=(0,r.useRef)(null),o=(0,r.useRef)(null),[d,c]=(0,r.useState)({w:0,h:0}),[p,h]=(0,r.useState)(-1);(0,r.useEffect)(()=>{const e=new ResizeObserver(e=>{for(const t of e){const{width:e,height:n}=t.contentRect;c({w:Math.round(e),h:Math.round(n)})}});return a.current&&e.observe(a.current),()=>e.disconnect()},[]),(0,r.useEffect)(()=>{const e=o.current;if(!e||0===d.w||0===d.h)return;const n=e.getContext("2d");n.clearRect(0,0,d.w,d.h);const r=(e,t,r)=>{if(e&&0!==e.length){n.beginPath(),n.moveTo(e[0][0]*d.w,e[0][1]*d.h);for(let t=1;t<e.length;t++)n.lineTo(e[t][0]*d.w,e[t][1]*d.h);n.closePath(),n.strokeStyle=t,n.fillStyle=r,n.lineWidth=2,n.fill(),n.stroke(),i||"#00ff00"!==t||(n.fillStyle="#fff",e.forEach(e=>{n.beginPath(),n.arc(e[0]*d.w,e[1]*d.h,4,0,2*Math.PI),n.fill()}))}};s.forEach(e=>{e.points&&r(e.points,"rgba(0,122,204,0.5)","rgba(0,122,204,0.2)")});const a=t.map(e=>[e[0]>1?e[0]/d.w:e[0],e[1]>1?e[1]/d.h:e[1]]);r(a,i?"#ff9800":"#00ff00",i?"rgba(255,152,0,0.25)":"rgba(0,255,0,0.15)")},[t,d,i,s]);const u=()=>h(-1);return(0,l.jsx)("div",{ref:a,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10},children:(0,l.jsx)("canvas",{ref:o,width:d.w,height:d.h,style:{width:"100%",height:"100%",display:"block",cursor:i?"default":"crosshair"},onMouseDown:e=>{if(i)return;const r=e.nativeEvent.offsetX,s=e.nativeEvent.offsetY,a=Math.max(0,Math.min(1,r/d.w)),o=Math.max(0,Math.min(1,s/d.h)),l=t.findIndex(e=>{const t=e[0]>1?e[0]:e[0]*d.w,n=e[1]>1?e[1]:e[1]*d.h;return Math.sqrt((t-r)**2+(n-s)**2)<10});-1!==l?h(l):n([...t,[a,o]])},onMouseMove:e=>{if(-1===p||i)return;const r=e.nativeEvent.offsetX,s=e.nativeEvent.offsetY,a=Math.max(0,Math.min(1,r/d.w)),o=Math.max(0,Math.min(1,s/d.h)),l=[...t];l[p]=[a,o],n(l)},onMouseUp:u,onMouseLeave:u})})}const ie={inputTable:{background:"#444",border:"1px solid #555",color:"#fff",width:"100%",padding:2},btnPrimary:{marginRight:10,padding:"6px 20px",background:"#007acc",color:"white",border:"none",borderRadius:2,fontSize:13,cursor:"pointer",fontWeight:"bold"},btnToolbar:{marginRight:10,padding:"6px 15px",background:"#333",color:"#ddd",border:"1px solid #444",borderRadius:2,fontSize:12,cursor:"pointer"}};function re(e){let{cams:t,statusData:n={},onEditCam:r,onSelectCam:s,onDeleteCam:a}=e;return(0,l.jsxs)("div",{style:{padding:20},children:[(0,l.jsx)("h2",{style:{fontSize:18,marginBottom:20,color:"#fff"},children:"Gestionare Dispozitive IP"}),(0,l.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:20},children:t.map(e=>{var t,o,d;return(0,l.jsxs)("div",{style:{background:"#252526",border:"1px solid #444",borderRadius:4,overflow:"hidden"},children:[(0,l.jsxs)("div",{style:{height:150,background:"#000",position:"relative"},children:[(0,l.jsx)(Q.A,{camId:e.id,streamType:"sub",style:{width:"100%",height:"100%",objectFit:"fill"}}),(0,l.jsx)("div",{style:{position:"absolute",bottom:0,left:0,right:0,padding:10,background:"rgba(0,0,0,0.7)",color:"#fff",fontSize:14},children:e.name||e.ip})]}),(0,l.jsxs)("div",{style:{padding:15},children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[(0,l.jsx)("div",{style:{fontSize:13,fontWeight:"bold",color:"#fff"},children:e.ip}),(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[null!==(t=n[e.id])&&void 0!==t&&t.connected||"ONLINE"===(null===(o=n[e.id])||void 0===o?void 0:o.status)?(0,l.jsxs)("div",{style:{fontSize:11,color:"#4caf50",background:"rgba(76,175,80,0.1)",padding:"2px 6px",borderRadius:4},children:["Active (",(null===(d=n[e.id])||void 0===d?void 0:d.fps)||0," FPS)"]}):(0,l.jsx)("div",{style:{fontSize:11,color:"#f44336",background:"rgba(244,67,54,0.1)",padding:"2px 6px",borderRadius:4},children:"Offline"}),(0,l.jsxs)("div",{style:{fontSize:9,color:"#888",marginTop:3},children:["Check: ",(new Date).toLocaleTimeString()]})]})]}),(0,l.jsxs)("div",{style:{fontSize:12,color:"#aaa",marginBottom:10},children:["Model: ",e.model||"Generic"," | ",e.manufacturer]}),(0,l.jsxs)("div",{style:{display:"flex",gap:10,marginBottom:10},children:[(0,l.jsxs)("button",{style:(0,i.A)((0,i.A)({},ie.btnToolbar),{},{flex:1}),onClick:()=>r(e),children:[(0,l.jsx)(u.ff,{size:12})," Edit"]}),(0,l.jsxs)("button",{style:(0,i.A)((0,i.A)({},ie.btnToolbar),{},{flex:1}),onClick:()=>s(e.id),children:[(0,l.jsx)(u.Ze,{size:12})," Config"]})]}),(0,l.jsxs)("button",{style:{width:"100%",padding:"6px 0",background:"rgba(244, 67, 54, 0.1)",border:"1px solid #d32f2f",color:"#e57373",borderRadius:2,fontSize:12,cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",gap:5},onClick:()=>a(e.id),children:[(0,l.jsx)(u.lM,{size:12})," Delete Device"]})]})]},e.id)})})]})}function se(e){var t,n,s,o,d,c,p,h;let{cam:g,statusData:x,updateCam:y,saveAll:f,deleteCam:m,openEditModal:b,setSelection:j}=e;const[v,A]=(0,r.useState)(!1),[S,C]=(0,r.useState)(null),E=async()=>{if(g&&g.id)try{const e=await a.nC.get("/device-config/".concat(g.id)),{current:t,capabilities:n}=e.data;t&&(t.codec&&y(g.id,"codec",t.codec),t.fps&&y(g.id,"fps",t.fps),t.gop&&y(g.id,"gop",t.gop),t.resolution&&y(g.id,"resolution",t.resolution)),n&&C(n)}catch(e){console.warn("[CamSync] Polling failed for ".concat(g.ip,":"),e.message)}};(0,r.useEffect)(()=>{E();const e=setInterval(E,1e4);return()=>clearInterval(e)},[null===g||void 0===g?void 0:g.id]);const R=async(e,t)=>{y(g.id,e,t),A(!0);try{console.log("[CamSync] Updating ".concat(e," to ").concat(t," for ").concat(g.ip,"...")),await a.nC.post("/device-config/".concat(g.id),{[e]:t}),setTimeout(E,1500)}catch(r){var n,i;console.error("[CamSync] Update failed:",r),alert("Failed to update camera: ".concat((null===(n=r.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.error)||r.message)),E()}finally{A(!1)}};return g?(0,l.jsx)("div",{style:{padding:20,display:"flex",flexDirection:"column",height:"100%"},children:(0,l.jsxs)("div",{style:{marginBottom:20},children:[(0,l.jsxs)("h2",{style:{fontSize:18,marginBottom:15,color:"#fff"},children:["Camera ",g.ip]}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",gap:10,maxWidth:600,marginBottom:15},children:[(0,l.jsx)("label",{children:"Model:"})," ",(0,l.jsx)("div",{style:{fontWeight:"bold"},children:g.model||"Autodetect"}),(0,l.jsx)("label",{children:"Device Name:"}),(0,l.jsx)("input",{style:{background:"#333",border:"1px solid #555",color:"#ddd",padding:4},value:g.name||"Camera ".concat(g.ip),onChange:e=>y(g.id,"name",e.target.value),onBlur:()=>f()})]}),(0,l.jsxs)("div",{style:{marginBottom:10,display:"flex",alignItems:"center",gap:15},children:[(0,l.jsxs)("span",{children:["IP Address: ",(0,l.jsx)("b",{style:{color:"#fff"},children:g.ip})]}),(0,l.jsxs)("span",{children:["Port: ",(0,l.jsx)("b",{style:{color:"#fff"},children:g.port})]}),(0,l.jsxs)("span",{children:["User: ",(0,l.jsx)("b",{style:{color:"#fff"},children:g.user})]}),(0,l.jsx)("button",{onClick:()=>b(g),style:{color:"rgb(66, 165, 245)",background:"none",border:"none",cursor:"pointer",textDecoration:"underline",padding:0},children:"Setup connection"})]}),g.storagePath&&(0,l.jsxs)("div",{style:{marginBottom:20,fontSize:13,color:"#ccc",display:"flex",alignItems:"center",gap:5},children:["Storage Path:",(0,l.jsxs)("span",{title:"Click to view recordings",onClick:()=>window.location.href="/playback?camId=".concat(g.id),style:{fontFamily:"monospace",color:"#81d4fa",cursor:"pointer",textDecoration:"underline",background:"rgba(33, 150, 243, 0.1)",padding:"2px 6px",borderRadius:4},children:[g.storagePath," [->]"]})]}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, auto)",gap:10,marginBottom:20,alignItems:"center",justifyContent:"start"},children:[(0,l.jsx)("button",{style:(0,i.A)((0,i.A)({},ie.btnToolbar),{},{width:120,background:!1!==g.enabled?"#333":"#4caf50",color:!1!==g.enabled?"#ddd":"#fff"}),onClick:()=>{const e=!1===g.enabled;y(g.id,"enabled",!!e),f()},children:!1!==g.enabled?"Disable":"Enable"}),(0,l.jsxs)("button",{style:(0,i.A)((0,i.A)({},ie.btnToolbar),{},{width:120}),onClick:()=>m(g.id),children:[(0,l.jsx)(u.lM,{size:12,style:{marginRight:5}})," Delete..."]}),(0,l.jsxs)("button",{style:(0,i.A)((0,i.A)({},ie.btnToolbar),{},{background:"rgba(0,122,204,0.1)",border:"1px solid #007acc",color:"#81d4fa",width:160}),onClick:()=>j({type:"CHANNEL",id:g.id}),children:[(0,l.jsx)(u.Ze,{size:12,style:{marginRight:5}})," AI / Channel Setup"]}),(0,l.jsx)("a",{href:"http://".concat(g.ip),target:"_blank",rel:"noreferrer",style:{color:"rgb(66, 165, 245)",textDecoration:"none",alignSelf:"center",margin:"0 10px"},children:"Web Interface"})]}),(0,l.jsxs)("div",{style:{marginBottom:30,display:"flex",alignItems:"center",gap:20},children:[null!==(t=x[g.id])&&void 0!==t&&t.connected||"ONLINE"===(null===(n=x[g.id])||void 0===n?void 0:n.status)?(0,l.jsxs)("div",{children:["State: ",(0,l.jsx)("span",{style:{color:"rgb(76, 175, 80)",fontWeight:"bold"},children:"Connected"})]}):(0,l.jsxs)("div",{children:["State: ",(0,l.jsx)("span",{style:{color:"#f44336",fontWeight:"bold"},children:"Disconnected production"})," ",(0,l.jsx)("span",{style:{fontSize:11,color:"#ffa726",marginLeft:10},children:null!==(s=x[g.id])&&void 0!==s&&s.lastError?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.hc,{size:10})," ",x[g.id].lastError]}):"(Retry in 5s...)"})]}),(0,l.jsx)("button",{onClick:E,style:{background:"rgba(255,255,255,0.05)",border:"1px solid #444",color:"#fff",padding:"4px 10px",borderRadius:4,cursor:"pointer",fontSize:12,display:"flex",alignItems:"center",gap:5},disabled:v,children:v?"Syncing...":"\ud83d\udd04 Refresh State"}),(0,l.jsx)("span",{style:{color:"#666",fontSize:11},children:"Auto-sync active (10s)"})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:20},children:[(0,l.jsx)("div",{style:{width:160,height:90,background:"#000",border:"1px solid #444",position:"relative"},children:(0,l.jsx)(te,{camId:g.id,active:!0})}),(0,l.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"100px 100px 120px 80px 80px",gap:10,fontSize:12,fontWeight:"bold",marginBottom:5,color:"#aaa"},children:[(0,l.jsx)("div",{}),(0,l.jsx)("div",{children:"Codec"}),(0,l.jsx)("div",{children:"Resolution"}),(0,l.jsx)("div",{children:"GOP"}),(0,l.jsx)("div",{children:"FPS"})]}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"100px 100px 120px 80px 80px",gap:10,marginBottom:10,alignItems:"center"},children:[(0,l.jsxs)("div",{style:{color:"H.265"===g.codec?"#ffa726":"#4caf50"},children:[(0,l.jsx)("input",{type:"checkbox",checked:!0,readOnly:!0,style:{marginRight:5}})," Video","H.265"===g.codec&&(0,l.jsx)("span",{title:"WebRTC doesn't support H.265 natively",children:" \u26a0\ufe0f"})]}),(0,l.jsx)("select",{style:ie.inputTable,value:g.codec||"H.264",onChange:e=>R("codec",e.target.value),children:(null===S||void 0===S||null===(o=S.codecs)||void 0===o?void 0:o.map(e=>(0,l.jsx)("option",{value:e,children:e},e)))||(0,l.jsx)("option",{children:"H.264"})}),(0,l.jsx)("select",{style:ie.inputTable,value:g.resolution,onChange:e=>R("resolution",e.target.value),children:(null===S||void 0===S||null===(d=S.resolutions)||void 0===d?void 0:d.map(e=>(0,l.jsx)("option",{value:"".concat(e.width,"x").concat(e.height),children:e.label},"".concat(e.width,"x").concat(e.height))))||(0,l.jsx)("option",{children:g.resolution})}),(0,l.jsx)("input",{style:ie.inputTable,type:"number",value:g.gop||20,min:(null===S||void 0===S||null===(c=S.gopRange)||void 0===c?void 0:c.min)||1,max:(null===S||void 0===S||null===(p=S.gopRange)||void 0===p?void 0:p.max)||400,onChange:e=>y(g.id,"gop",e.target.value),onBlur:e=>R("gop",e.target.value)}),(0,l.jsx)("select",{style:ie.inputTable,value:g.fps||25,onChange:e=>R("fps",e.target.value),children:(null===S||void 0===S||null===(h=S.fps)||void 0===h?void 0:h.map(e=>(0,l.jsxs)("option",{value:e,children:[e," fps"]},e)))||(0,l.jsxs)("option",{children:[g.fps," fps"]})})]}),"H.265"===g.codec&&(0,l.jsxs)("div",{style:{color:"#ffa726",fontSize:11,marginTop:5},children:[(0,l.jsx)(u.hc,{size:10})," Camera is in H.265 mode. Switch to H.264 for better grid performance and browser compatibility."]})]})]})]})}):(0,l.jsx)("div",{children:"Camera not found"})}function ae(e){var t,n;let{cam:s,cams:d,setCams:c,setSelection:p,availableModules:h,updateCam:u,saveAll:g}=e;const[x,y]=(0,r.useState)(0),[f,m]=(0,r.useState)(!1),[b,j]=(0,r.useState)([]),v=s.ai_server||{};let A=v.zones||[];0===A.length&&v.roi&&v.roi.length>0&&(A=[{name:"Default Zone",points:v.roi,objects:v.objects||{}}]);const S=x>=A.length?0:x,C=A[S]||null,E=f?b:(null===C||void 0===C?void 0:C.points)||[],R=async e=>{try{await a.nC.post("/cameras/config",e)}catch(t){console.error("Silent save failed",t),alert("Error saving settings: "+t.message)}};return(0,l.jsxs)("div",{style:{padding:20},children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:15},children:[(0,l.jsxs)("h2",{style:{fontSize:18,margin:0,color:"#fff"},children:["AI Zones: ",s.name||s.ip]}),(0,l.jsx)("button",{onClick:()=>p({type:"CAMERA",id:s.id}),style:{color:"rgb(66, 165, 245)",background:"none",border:"none",cursor:"pointer",fontSize:13},children:"[Back] Back to Hardware Settings"})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:20,height:500},children:[(0,l.jsxs)("div",{style:{flex:3,display:"flex",flexDirection:"column"},children:[(0,l.jsxs)("div",{style:{width:"100%",aspectRatio:"16/9",border:"2px solid #444",borderRadius:4,overflow:"hidden",background:"#000",position:"relative"},children:[(0,l.jsx)(Q.A,{camId:s.id,style:ee,streamType:"hd"}),(0,l.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10},children:C?(0,l.jsx)(ne,{points:E,onChange:f?j:void 0,readOnly:!f,width:800,height:450,otherZones:A.filter((e,t)=>t!==S)}):(0,l.jsx)("div",{style:{color:"#fff",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},children:"Select or Add a Zone"})})]}),C&&(0,l.jsxs)("div",{style:{marginTop:10,display:"flex",gap:10,padding:8,background:"#252526",borderRadius:4,border:"1px solid #333",alignItems:"center"},children:[(0,l.jsx)("span",{style:{fontSize:12,color:"#aaa",fontWeight:"bold",marginRight:10},children:"Zone Actions:"}),f?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{style:(0,i.A)((0,i.A)({},ie.btnPrimary),{},{background:"#4caf50"}),onClick:()=>{m(!1);const e=[...A];if(!e[S])return;e[S]=(0,i.A)((0,i.A)({},e[S]),{},{points:b});const t=(0,i.A)((0,i.A)({},v),{},{zones:e,enabled:!0}),n=d.map(e=>e.id===s.id?(0,i.A)((0,i.A)({},e),{},{ai_server:t}):e);c(n),R(n)},children:"[SAVE] Save Area"}),(0,l.jsx)("button",{style:ie.btnToolbar,onClick:()=>{m(!1),j([])},children:"Cancel"})]}):(0,l.jsx)("button",{style:(0,i.A)((0,i.A)({},ie.btnPrimary),{},{background:"#2196f3"}),onClick:()=>{j(C.points||[]),m(!0)},children:"[EDIT] Edit Area"})]})]}),(0,l.jsxs)("div",{style:{flex:1,background:"#1e1e1e",border:"1px solid #444",padding:15,display:"flex",flexDirection:"column"},children:[(0,l.jsxs)("div",{style:{marginBottom:20,flex:1,overflowY:"auto"},children:[(0,l.jsxs)("div",{style:{borderBottom:"1px solid #444",marginBottom:15,paddingBottom:15},children:[(0,l.jsx)("h4",{style:{margin:"0 0 10px 0",color:o.T.accent,fontSize:13},children:"AI Configuration"}),(0,l.jsxs)("div",{style:{marginBottom:15},children:[(0,l.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:5},children:(0,l.jsxs)("label",{style:{fontSize:12,color:"#aaa"},children:["Sensitivity: ",(100*(null===(t=s.ai_server)||void 0===t?void 0:t.sensitivity)||50).toFixed(0),"%"]})}),(0,l.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",value:(null===(n=s.ai_server)||void 0===n?void 0:n.sensitivity)||.5,onChange:e=>{const t=(0,i.A)((0,i.A)({},s.ai_server),{},{sensitivity:parseFloat(e.target.value)}),n=d.map(e=>e.id===s.id?(0,i.A)((0,i.A)({},e),{},{ai_server:t}):e);c(n),R(n)},style:{width:"100%",cursor:"pointer"}}),(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,color:"#666",marginTop:4},children:[(0,l.jsx)("span",{children:"0% (Filtrare Maxim\u0103)"}),(0,l.jsx)("span",{children:"100% (Alert\u0103 Maxim\u0103)"})]}),(0,l.jsxs)("p",{style:{fontSize:11,color:"#888",marginTop:8,lineHeight:"1.4"},children:[(0,l.jsx)("b",{children:"0%:"})," Doar obiecte foarte clare. Reduce alarmele false (umbre, insecte).",(0,l.jsx)("br",{}),(0,l.jsx)("b",{children:"100%:"})," Detecteaz\u0103 orice mi\u0219care suspect\u0103. Risc ridicat de alarme false."]})]})]}),(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[(0,l.jsx)("h4",{style:{margin:0,color:"#ddd"},children:"Detection Zones"}),(0,l.jsx)("button",{style:{background:"#4caf50",color:"#fff",border:"none",borderRadius:2,cursor:"pointer",padding:"2px 8px",fontSize:16},onClick:()=>{const e="Zone ".concat(A.length+1),t=[...A,{name:e,points:[],objects:{}}],n=(0,i.A)((0,i.A)({},v),{},{zones:t}),r=d.map(e=>e.id===s.id?(0,i.A)((0,i.A)({},e),{},{ai_server:n}):e);c(r),y(t.length-1),R(r)},children:"+"})]}),(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:5},children:A.map((e,t)=>(0,l.jsxs)("div",{onClick:()=>{y(t),m(!1)},style:{padding:"8px 10px",background:t===S?"#2196f3":"#333",color:"#fff",borderRadius:3,cursor:"pointer",fontSize:13,display:"flex",justifyContent:"space-between"},children:[(0,l.jsx)("span",{children:e.name}),t===S&&(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),(()=>{if(!C)return;if(!window.confirm("Delete ".concat(C.name,"?")))return;const e=A.filter((e,t)=>t!==S),t=(0,i.A)((0,i.A)({},v),{},{zones:e}),n=d.map(e=>e.id===s.id?(0,i.A)((0,i.A)({},e),{},{ai_server:t}):e);c(n),y(0),R(n)})()},style:{background:"transparent",border:"none",color:"#fff",cursor:"pointer"},children:"\xd7"})]},t))})]}),C&&(0,l.jsxs)("div",{style:{borderTop:"1px solid #444",paddingTop:15},children:[(0,l.jsxs)("h4",{style:{marginTop:0,color:"#ddd",fontSize:13},children:["Search Objects (",C.name,")"]}),(0,l.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:10},children:((e,t)=>{const n=(null===(e=s.ai_server)||void 0===e?void 0:e.module)||"ai_small",r=(Array.isArray(h)?h:[]).find(e=>e.name===n);return((null===r||void 0===r||null===(t=r.classes)||void 0===t?void 0:t.length)>0?r.classes:["person","car","truck"]).map(e=>{var t;return(0,l.jsxs)("label",{style:{display:"flex",alignItems:"center",color:"#ccc",fontSize:13,cursor:"pointer"},children:[(0,l.jsx)("input",{type:"checkbox",checked:(null===(t=C.objects)||void 0===t?void 0:t[e])||!1,onChange:()=>(e=>{var t;if(!C)return;const n=(0,i.A)((0,i.A)({},C.objects||{}),{},{[e]:!(null!==(t=C.objects)&&void 0!==t&&t[e])}),r=[...A];r[S]=(0,i.A)((0,i.A)({},r[S]),{},{objects:n});const a=(0,i.A)((0,i.A)({},v),{},{zones:r}),o=d.map(e=>e.id===s.id?(0,i.A)((0,i.A)({},e),{},{ai_server:a}):e);c(o),R(o)})(e),style:{marginRight:8}}),e]},e)})})()})]}),(0,l.jsxs)("div",{style:{borderTop:"1px solid #444",marginTop:15,paddingTop:15},children:[(0,l.jsx)("h4",{style:{margin:"0 0 10px 0",color:"#ddd",fontSize:13},children:"Recording Setup"}),(0,l.jsxs)("label",{style:{display:"flex",alignItems:"center",marginBottom:10,cursor:"pointer",color:"#ccc",fontSize:13},children:[(0,l.jsx)("input",{type:"checkbox",checked:!1!==s.record,onChange:e=>{const t=d.map(t=>t.id===s.id?(0,i.A)((0,i.A)({},t),{},{record:e.target.checked}):t);c(t),R(t)},style:{marginRight:8}}),"Enable Recording"]})]})]})]})]})}const oe={btnPrimary:{marginRight:10,padding:"6px 20px",background:"#007acc",color:"white",border:"none",borderRadius:2,fontSize:13,cursor:"pointer",fontWeight:"bold"},th:{textAlign:"left",borderBottom:"1px solid #444",padding:8,color:"#ccc"},td:{padding:8,borderBottom:"1px solid #333",color:"#ddd"}};function le(){const[e,t]=(0,r.useState)([]);return(0,r.useEffect)(()=>{const e=()=>{a.nC.get("/status/logs").then(e=>t((e=>{if(!e)return[];let t=e;if("string"===typeof e)try{t=JSON.parse(e)}catch(n){return[]}return Array.isArray(t)?t.map((e,t)=>{var n;let i=(null===e||void 0===e?void 0:e.type)||"Unknown Event";return(null===e||void 0===e||null===(n=e.detections)||void 0===n?void 0:n.length)>0&&(i=[...new Set(e.detections.map(e=>e.class||e.label))].join(", ").toUpperCase()),{id:t+1,rawId:e.id||t,name:i,camera:e.camera_name||e.cameraId||"N/A",date:e.timestamp?new Date(e.timestamp).toLocaleString():"Unknown"}}):[]})(e.data))).catch(e=>console.error(e))};e();const n=setInterval(e,5e3);return()=>clearInterval(n)},[]),(0,l.jsxs)("div",{style:{padding:20,height:"100%",display:"flex",flexDirection:"column"},children:[(0,l.jsx)("h2",{style:{fontSize:18,color:"#fff",marginBottom:20},children:"System Logs"}),(0,l.jsx)("div",{style:{flex:1,background:"#1e1e1e",border:"1px solid #444",overflowY:"auto"},children:(0,l.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{style:{background:"#252526",position:"sticky",top:0},children:[(0,l.jsx)("th",{style:(0,i.A)((0,i.A)({},oe.th),{},{width:60}),children:"#"}),(0,l.jsx)("th",{style:oe.th,children:"Event Name"}),(0,l.jsx)("th",{style:oe.th,children:"Camera"}),(0,l.jsx)("th",{style:(0,i.A)((0,i.A)({},oe.th),{},{width:180}),children:"Date & Time"})]})}),(0,l.jsx)("tbody",{children:e.map(e=>(0,l.jsxs)("tr",{style:{borderBottom:"1px solid #333"},children:[(0,l.jsx)("td",{style:(0,i.A)((0,i.A)({},oe.td),{},{color:"#888",textAlign:"center"}),children:e.id}),(0,l.jsx)("td",{style:(0,i.A)((0,i.A)({},oe.td),{},{fontWeight:"bold",color:"#4caf50"}),children:e.name}),(0,l.jsx)("td",{style:(0,i.A)((0,i.A)({},oe.td),{},{color:"#ddd"}),children:e.camera}),(0,l.jsx)("td",{style:(0,i.A)((0,i.A)({},oe.td),{},{color:"#aaa"}),children:e.date})]},e.rawId))})]})})]})}function de(e){let{services:t,onRestartStack:n}=e;return(0,l.jsxs)("div",{style:{padding:30,background:"#141414",minHeight:"100%"},children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:30,background:"#252526",padding:"15px 25px",borderRadius:8,border:"1px solid #333"},children:[(0,l.jsx)("h2",{style:{fontSize:22,margin:0,color:"#fff"},children:"Service Maintenance"}),(0,l.jsx)("button",{onClick:n,style:{background:"#ff9800",color:"#111",border:"none",padding:"8px 20px",borderRadius:4,cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",gap:8},children:"RESTART STACK"})]}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:30},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontSize:12,fontWeight:700,color:"#888",marginBottom:15,textTransform:"uppercase"},children:"Critical Services"}),t.map(e=>(0,l.jsx)("div",{style:{background:"#1e1e1e",padding:20,borderRadius:8,marginBottom:15,borderLeft:"4px solid ".concat("Running"===e.status?"#4caf50":"#f44336")},children:(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontSize:15,fontWeight:"bold",color:"#ddd"},children:e.label}),(0,l.jsx)("div",{style:{fontSize:12,color:"#777"},children:e.details})]}),(0,l.jsx)("div",{style:{background:"Running"===e.status?"rgba(76,175,80,0.1)":"rgba(244,67,54,0.1)",color:"Running"===e.status?"#4caf50":"#f44336",padding:"4px 10px",borderRadius:20,fontSize:11},children:e.status})]})},e.name))]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontSize:12,fontWeight:700,color:"#888",marginBottom:15,textTransform:"uppercase"},children:"Diagnostics"}),(0,l.jsx)("div",{style:{display:"grid",gap:15},children:(0,l.jsx)("div",{onClick:()=>window.open("http://".concat(window.location.hostname,":1984/"),"_blank"),style:{background:"#1e1e1e",padding:20,borderRadius:8,border:"1px solid #333",cursor:"pointer"},children:(0,l.jsx)("div",{style:{fontWeight:"bold",color:"#eee"},children:"Go2RTC Dashboard"})})})]})]})]})}function ce(){return(0,l.jsxs)("div",{style:{padding:20},children:[(0,l.jsx)("h2",{style:{fontSize:18,marginBottom:20,color:"#fff"},children:"Mentenanta - Server"}),(0,l.jsxs)("div",{style:{background:"#252526",padding:25,border:"1px solid #444",maxWidth:600},children:[(0,l.jsx)("h3",{style:{color:"#f44336"},children:"Reboot Server"}),(0,l.jsx)("p",{style:{color:"#aaa"},children:"Aceasta actiune va reporni complet sistemul hardware."}),(0,l.jsx)("button",{style:(0,i.A)((0,i.A)({},oe.btnPrimary),{},{background:"#f44336"}),onClick:async()=>{if(window.confirm("ATENTIUNE! Sigur reporniti serverul?"))try{await a.nC.post("/status/reboot"),alert("Comanda executata.")}catch(e){alert("Eroare: "+e.message)}},children:"Reboot Complet Server"})]})]})}function pe(e){var t;let{editCam:n,setEditCam:s,manufacturers:d,models:c,caps:p,onClose:h,onSave:u}=e;const[g,x]=(0,r.useState)(!1),[y,f]=(0,r.useState)(null);return(0,l.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,l.jsxs)("div",{style:{background:"#252526",width:600,borderRadius:6,border:"1px solid #444",overflow:"hidden",display:"flex",flexDirection:"column",maxHeight:"90vh"},children:[(0,l.jsxs)("div",{style:{background:"#333",padding:"15px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #444"},children:[(0,l.jsxs)("h3",{style:{margin:0,color:"#fff",fontSize:16},children:["Connection Setup: ",n.ip]}),(0,l.jsx)("button",{onClick:h,style:{background:"none",border:"none",color:"#aaa",cursor:"pointer",fontSize:20},children:"\xd7"})]}),(0,l.jsxs)("div",{style:{padding:25,overflowY:"auto"},children:[(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20,marginBottom:20},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{style:o.R.label,children:"IP Address"}),(0,l.jsx)("input",{style:(0,i.A)((0,i.A)({},o.R.input),{},{width:"100%"}),value:n.ip,onChange:e=>s((0,i.A)((0,i.A)({},n),{},{ip:e.target.value}))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{style:o.R.label,children:"Control Port"}),(0,l.jsx)("input",{style:(0,i.A)((0,i.A)({},o.R.input),{},{width:"100%"}),value:n.port,onChange:e=>s((0,i.A)((0,i.A)({},n),{},{port:e.target.value}))})]})]}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20,marginBottom:20},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{style:o.R.label,children:"User"}),(0,l.jsx)("input",{style:(0,i.A)((0,i.A)({},o.R.input),{},{width:"100%"}),value:n.user,onChange:e=>s((0,i.A)((0,i.A)({},n),{},{user:e.target.value}))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{style:o.R.label,children:"Password"}),(0,l.jsx)("input",{type:"password",style:(0,i.A)((0,i.A)({},o.R.input),{},{width:"100%"}),value:n.pass,onChange:e=>s((0,i.A)((0,i.A)({},n),{},{pass:e.target.value}))})]})]}),(0,l.jsxs)("div",{style:{marginBottom:20},children:[(0,l.jsx)("label",{style:o.R.label,children:"Manufacturer"}),(0,l.jsxs)("select",{style:(0,i.A)((0,i.A)({},o.R.input),{},{width:"100%",maxWidth:"100%"}),value:n.manufacturer,onChange:e=>s((0,i.A)((0,i.A)({},n),{},{manufacturer:e.target.value})),children:[(0,l.jsx)("option",{value:"",children:"Select..."}),d.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{style:{border:"1px solid #444",padding:15,borderRadius:4,background:"#1e1e1e"},children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10},children:[(0,l.jsx)("span",{style:{fontWeight:"bold",fontSize:13,color:"#ddd"},children:"Auto-Discovery & Probing"}),(0,l.jsx)("button",{onClick:async()=>{x(!0);try{const e=await a.nC.post("cameras/probe",n);f(e.data),e.data.manufacturer&&s(t=>(0,i.A)((0,i.A)({},t),{},{manufacturer:e.data.manufacturer})),e.data.model&&s(t=>(0,i.A)((0,i.A)({},t),{},{model:e.data.model}))}catch(r){var e,t;alert("Probe Failed: "+((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||r.message))}finally{x(!1)}},disabled:g,style:{background:o.T.info,color:"#fff",border:"none",padding:"4px 12px",borderRadius:2,cursor:"pointer",fontSize:12},children:g?"Probing...":"Test Connection & Find Streams"})]}),y&&(0,l.jsxs)("div",{style:{fontSize:12,color:"#4caf50",background:"rgba(76,175,80,0.1)",padding:8,borderRadius:2},children:[(0,l.jsx)("b",{children:"Probe Success!"})," Camera detected as ",y.model,". Found ",null===(t=y.channels)||void 0===t?void 0:t.length," potential channel(s)."]})]})]}),(0,l.jsxs)("div",{style:{background:"#333",padding:"15px 20px",display:"flex",justifyContent:"flex-end",borderTop:"1px solid #444"},children:[(0,l.jsx)("button",{style:o.R.btnToolbar,onClick:h,children:"Anuleaza"}),(0,l.jsx)("button",{style:o.R.btnPrimary,onClick:u,children:"Salveaza Configura\u021bia"})]})]})})}function he(){const e=(0,s.zy)(),[t,n]=(0,r.useState)({type:"SYSTEM",id:null,subTab:"SERVER"}),[d,g]=(0,r.useState)({SETTINGS:!1,HARDWARE:!1,IP_DEVICES:!1,NETWORK:!1,USERS:!1,MAINTENANCE:!1,CHANNELS:!1,ARMING:!1}),[x,y]=(0,r.useState)([]),[f,m]=(0,r.useState)({}),[b,j]=(0,r.useState)([]),{manufacturers:v,models:S,capabilities:k}=function(){const[e,t]=(0,r.useState)({manufacturers:[],models:{},capabilities:{}}),[n,s]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{a.nC.get("/models").then(e=>{const n=e.data.manufacturers.map(e=>e.name).sort(),i=e.data.manufacturers.reduce((e,t)=>(e[t.name]=t.models,e),{});a.nC.get("/models/capabilities").then(e=>{t({manufacturers:n,models:i,capabilities:e.data||{}}),s(!1)}).catch(()=>{t({manufacturers:n,models:i,capabilities:{}}),s(!1)})}).catch(e=>{console.error("Failed to load models",e),s(!1)})},[]),(0,i.A)((0,i.A)({},e),{},{loading:n})}(),[N,_]=(0,r.useState)([]),[D,O]=(0,r.useState)({mode:"dhcp",ip:"",netmask:"",gateway:"",dns1:"",dns2:"",edgeName:"DSS-SMART GUARD"}),[P,B]=(0,r.useState)({}),[W,U]=(0,r.useState)([]),[H,L]=(0,r.useState)(()=>{const e=localStorage.getItem("edge_user");if(e)try{return JSON.parse(e)}catch(t){}return{name:"Guest",role:"operator",id:-1}}),[V,K]=(0,r.useState)(null),[G,F]=(0,r.useState)({username:"",password:"",confirm:"",role:"operator"}),[Y,X]=(0,r.useState)(!1),[J,q]=(0,r.useState)([]),[$,Q]=(0,r.useState)({}),[ee,te]=(0,r.useState)({}),[ne,ie]=(0,r.useState)({}),[oe,he]=(0,r.useState)(!1),[ue,ge]=(0,r.useState)({}),xe=(0,r.useCallback)(()=>{a.nC.get("/cameras/config").then(e=>y(e.data)).catch(e=>console.error(e)),a.nC.get("/cameras/config").then(e=>{const t={};Array.isArray(e.data)&&e.data.forEach(e=>t[e.id]=e),m(t)}).catch(e=>console.error(e))},[]),ye=(0,r.useCallback)(()=>{a.nC.get("status/services").then(e=>j(e.data)).catch(e=>console.error(e))},[]),fe=(0,r.useCallback)(async()=>{try{const e=await a.nC.get("auth/users");Array.isArray(e.data)&&U(e.data.map(e=>({id:e.id||e.username,name:e.username,icon:"admin"===e.role?"[A]":"[O]",role:e.role,menus:e.menus||[]})))}catch(e){console.error(e)}},[]),me=(0,r.useCallback)(()=>{a.nC.get("/network/config").then(e=>O(t=>(0,i.A)((0,i.A)({},t),e.data))).catch(e=>console.error(e)),a.nC.get("/network/all").then(e=>B(e.data)).catch(e=>console.error(e))},[]),be=(0,r.useCallback)(async()=>{try{const e=await a.nC.get("/arming/data");q(e.data.schedules||[]),Q(e.data.assignments||{}),te(e.data.modes||{}),ie(e.data.labels||{})}catch(e){console.error("Failed to load arming data",e)}},[]);(0,r.useEffect)(()=>{xe(),ye(),fe(),me(),be(),a.nC.get("/ai/modules").then(e=>_(Array.isArray(e.data)?e.data:[])).catch(()=>_([]));const t=localStorage.getItem("edge_user");if(t)try{L(JSON.parse(t))}catch(d){}const r=new URLSearchParams(e.search),s=r.get("tab"),o=r.get("camId");"hardware"===s&&o?(n({type:"CAMERA",id:o}),g(e=>(0,i.A)((0,i.A)({},e),{},{HARDWARE:!0,IP_DEVICES:!0}))):"channels"===s&&o?(n({type:"CHANNEL",id:o}),g(e=>(0,i.A)((0,i.A)({},e),{},{CHANNELS:!0}))):"arming"===s&&(g(e=>(0,i.A)((0,i.A)({},e),{},{ARMING:!0})),n({type:"ARMING_MATRIX"}));const l=setInterval(()=>{a.nC.get("/cameras/config").then(e=>{const t={};Array.isArray(e.data)&&e.data.forEach(e=>t[e.id]=e),m(t)}).catch(e=>console.error(e)),ye(),me()},5e3);return()=>clearInterval(l)},[xe,ye,fe,me,be,e.search]),(0,r.useEffect)(()=>{if(t){if("CAMERA"===t.type||"IP_DEVICES_ROOT"===t.type||"ARCHIVE"===t.type||"WIZARD"===t.type)g({SETTINGS:!1,HARDWARE:!0,IP_DEVICES:"CAMERA"===t.type,NETWORK:!1,USERS:!1,MAINTENANCE:!1,CHANNELS:!1,ARMING:!1});else if("CHANNEL"===t.type)g({SETTINGS:!1,HARDWARE:!1,IP_DEVICES:!1,NETWORK:!1,USERS:!1,MAINTENANCE:!1,CHANNELS:!0,ARMING:!1});else if("USER"===t.type||"ADD_USER"===t.type||"SYSTEM"===t.type||"AI_HUB"===t.type||"ORPHANS"===t.type||"SYSTEM_LOGS"===t.type){"USER"===t.type||"ADD_USER"===t.type||"MAINTENANCE_SERVICES"===t.type||"MAINTENANCE_REBOOT"===t.type||"NETWORK_INTERFACE"===t.type||"NETWORK_VPN"===t.type||"NETWORK_SERVER"===t.type||t.type;g({SETTINGS:!0,HARDWARE:!1,USERS:"USER"===t.type||"ADD_USER"===t.type,MAINTENANCE:"MAINTENANCE_SERVICES"===t.type||"MAINTENANCE_REBOOT"===t.type,NETWORK:"NETWORK_INTERFACE"===t.type||"NETWORK_VPN"===t.type||"NETWORK_SERVER"===t.type||"NETWORK_PORTS"===t.type,IP_DEVICES:!1,CHANNELS:!1,ARMING:!1})}else t.type.startsWith("ARMING")?g(e=>(0,i.A)((0,i.A)({},e),{},{ARMING:!0})):["SYSTEM","AI_HUB","ADD_USER","USER","ORPHANS","MAINTENANCE_SERVICES","MAINTENANCE_REBOOT","SYSTEM_LOGS","NETWORK_INTERFACE","NETWORK_VPN","NETWORK_SERVER","NETWORK_PORTS"].includes(t.type)&&(g(e=>(0,i.A)((0,i.A)({},e),{},{SETTINGS:!0})),"ADD_USER"!==t.type&&"USER"!==t.type||g(e=>(0,i.A)((0,i.A)({},e),{},{USERS:!0})),t.type.startsWith("MAINTENANCE")&&g(e=>(0,i.A)((0,i.A)({},e),{},{MAINTENANCE:!0})),t.type.startsWith("NETWORK")&&g(e=>(0,i.A)((0,i.A)({},e),{},{NETWORK:!0})));setTimeout(()=>{const e="CHANNEL"===t.type?"sidebar_ch_".concat(t.id):"CAMERA"===t.type?"sidebar_hw_".concat(t.id):"USER"===t.type?"sidebar_user_".concat(t.id):null;if(e){const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"nearest"})}},150)}},[t.type,t.id]);const je=async e=>{try{await a.nC.post("/cameras/config",e||x),xe()}catch(t){alert("Error saving: "+t.message)}},ve=(e,t,n)=>{const r=x.map(r=>r.id===e?(0,i.A)((0,i.A)({},r),{},{[t]:n}):r);y(r)},Ae=async e=>{if(window.confirm("Delete camera?"))try{await a.nC.delete("/cameras/".concat(e)),n({type:"IP_DEVICES_ROOT"}),xe()}catch(t){alert("Error deleting: "+t.message)}},Se=async()=>{if(G.password!==G.confirm)return alert("Nu corespund parolele!");try{await a.nC.post("/auth/users",G),alert("Utilizator creat!"),F({username:"",password:"",confirm:"",role:"operator"}),fe(),n({type:"SYSTEM"})}catch(e){alert("Eroare: "+e.message)}},Ce=async e=>{if(window.confirm("Sunteti sigur ca stergeti utilizatorul ".concat(e,"?")))try{await a.nC.delete("/auth/users/".concat(e)),fe(),n({type:"SYSTEM"})}catch(t){alert("Eroare stergere: "+t.message)}},Ee=async()=>{if(window.confirm("Restart critical services?"))try{await a.nC.post("/status/restart-stack"),alert("Command sent.")}catch(e){alert(e.message)}},Re=async e=>{try{await a.nC.post("/arming/schedules",e),q(e)}catch(t){alert(t.message)}},we=async(e,t)=>{const n=[...J];n[e]&&(n[e]=(0,i.A)((0,i.A)({},n[e]),{},{enabled:!t}),await Re(n))},ke=async e=>{try{await a.nC.post("/arming/assignments",e),Q(e)}catch(t){alert(t.message)}},Ie=async e=>{try{await a.nC.post("/arming/modes",e),te(t=>(0,i.A)((0,i.A)({},t),e))}catch(t){alert(t.message)}},Te=async e=>{try{await a.nC.post("/arming/labels",e),ie(t=>(0,i.A)((0,i.A)({},t),e))}catch(t){alert(t.message)}},Ne=e=>g(t=>{const n=t[e],i={SETTINGS:!1,HARDWARE:!1,IP_DEVICES:!1,NETWORK:!1,USERS:!1,MAINTENANCE:!1,CHANNELS:!1,ARMING:!1};return["USERS","NETWORK","MAINTENANCE"].includes(e)?(i.SETTINGS=!0,i[e]=!n):"IP_DEVICES"===e?(i.HARDWARE=!0,i[e]=!n):i[e]=!n,i}),Me=e=>"admin"===H.role||H.menus&&H.menus.includes(e);return(0,l.jsxs)("div",{style:o.R.container,children:[(0,l.jsxs)("div",{style:o.R.main,children:[(0,l.jsxs)("div",{style:o.R.sidebar,children:[(0,l.jsx)("div",{style:{padding:10,borderBottom:"1px solid ".concat(o.T.border),fontWeight:"bold",cursor:"pointer"},onDoubleClick:()=>X(!0),children:Y?(0,l.jsx)("input",{autoFocus:!0,value:D.edgeName,onChange:e=>O((0,i.A)((0,i.A)({},D),{},{edgeName:e.target.value})),onBlur:()=>{X(!1),a.nC.post("network/config",D)},onKeyDown:e=>{"Enter"===e.key&&(X(!1),a.nC.post("network/config",D))},style:{width:"100%",background:"#333",color:"#fff",border:"1px solid #007acc",padding:"2px 5px",borderRadius:2}}):D.edgeName||"DSS-SMART GUARD"}),(0,l.jsxs)("div",{onClick:()=>Ne("SETTINGS"),style:{padding:"8px 10px",cursor:"pointer",background:"#222",display:"flex",alignItems:"center",fontSize:13,marginTop:5,borderTop:"1px solid #444",color:"#aaa"},children:[(0,l.jsx)(u.c_,{size:14,style:{transform:d.SETTINGS?"rotate(90deg)":"rotate(0deg)",transition:"0.2s",marginRight:5}})," SETARI SISTEM"]}),d.SETTINGS&&(0,l.jsxs)("div",{style:{background:"#1a1a1a",borderBottom:"1px solid #333"},children:[Me("SYSTEM")&&(0,l.jsx)("div",{onClick:()=>n({type:"SYSTEM"}),style:{padding:"8px 10px 8px 30px",cursor:"pointer",color:"#ccc",fontSize:13,background:"SYSTEM"===t.type?"#094771":"transparent"},children:"Status Sistem"}),Me("SYSTEM")&&(0,l.jsx)("div",{onClick:()=>n({type:"AI_HUB"}),style:{padding:"8px 10px 8px 30px",cursor:"pointer",color:"#ccc",fontSize:13,background:"AI_HUB"===t.type?"#094771":"transparent"},children:"AI Engine Hub"}),Me("USERS")&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{onClick:()=>Ne("USERS"),style:{padding:"8px 10px 8px 30px",cursor:"pointer",color:"#ccc",fontSize:13,display:"flex",alignItems:"center"},children:[(0,l.jsx)(u.c_,{size:14,style:{transform:d.USERS?"rotate(90deg)":"rotate(0deg)",transition:"0.2s",marginRight:5}})," Utilizatori"]}),d.USERS&&(0,l.jsxs)("div",{style:{background:"#111"},children:[(0,l.jsx)("div",{onClick:()=>n({type:"ADD_USER"}),style:(0,i.A)((0,i.A)({},o.R.subItem),{},{paddingLeft:45,color:o.T.success,background:"ADD_USER"===t.type?"#333":"transparent"}),children:"+ Adauga Utilizator"}),W.map(e=>(0,l.jsx)("div",{id:"sidebar_user_".concat(e.id),onClick:()=>{n({type:"USER",id:e.id}),K(e)},style:(0,i.A)((0,i.A)({},o.R.subItem),{},{paddingLeft:45,background:"USER"===t.type&&t.id===e.id?"#333":"transparent"}),children:e.name},e.id))]})]}),Me("ORPHANS")&&(0,l.jsxs)("div",{onClick:()=>n({type:"ORPHANS"}),style:{padding:"8px 10px 8px 30px",cursor:"pointer",color:"#ccc",fontSize:13,background:"ORPHANS"===t.type?"#094771":"transparent",display:"flex",alignItems:"center"},children:[(0,l.jsx)(u.lM,{size:14,style:{marginRight:5}})," Camere Sterse"]}),Me("MAINTENANCE")&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{onClick:()=>Ne("MAINTENANCE"),style:{padding:"8px 10px 8px 30px",cursor:"pointer",color:"#ccc",fontSize:13,display:"flex",alignItems:"center"},children:[(0,l.jsx)(u.c_,{size:14,style:{transform:d.MAINTENANCE?"rotate(90deg)":"rotate(0deg)",transition:"0.2s",marginRight:5}})," Mentenanta"]}),d.MAINTENANCE&&(0,l.jsxs)("div",{style:{background:"#111"},children:[(0,l.jsx)("div",{onClick:()=>n({type:"MAINTENANCE_SERVICES"}),style:(0,i.A)((0,i.A)({},o.R.subItem),{},{paddingLeft:45,background:"MAINTENANCE_SERVICES"===t.type?"#333":"transparent"}),children:"Stare Servicii"}),(0,l.jsx)("div",{onClick:()=>n({type:"MAINTENANCE_REBOOT"}),style:(0,i.A)((0,i.A)({},o.R.subItem),{},{paddingLeft:45,background:"MAINTENANCE_REBOOT"===t.type?"#333":"transparent"}),children:"Repornire"})]})]}),Me("SYSTEM_LOGS")&&(0,l.jsx)("div",{onClick:()=>n({type:"SYSTEM_LOGS"}),style:{padding:"8px 10px 8px 30px",cursor:"pointer",color:"#ccc",fontSize:13,background:"SYSTEM_LOGS"===t.type?"#094771":"transparent"},children:"LOGS"}),Me("NETWORK")&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{onClick:()=>Ne("NETWORK"),style:{padding:"8px 10px 8px 30px",cursor:"pointer",color:"#ccc",fontSize:13,display:"flex",alignItems:"center"},children:[(0,l.jsx)(u.c_,{size:14,style:{transform:d.NETWORK?"rotate(90deg)":"rotate(0deg)",transition:"0.2s",marginRight:5}})," Retea"]}),d.NETWORK&&(0,l.jsxs)("div",{style:{background:"#111"},children:[(0,l.jsx)("div",{onClick:()=>n({type:"NETWORK_INTERFACE"}),style:(0,i.A)((0,i.A)({},o.R.subItem),{},{paddingLeft:45,background:"NETWORK_INTERFACE"===t.type?"#333":"transparent"}),children:"Interfata"}),(0,l.jsx)("div",{onClick:()=>n({type:"NETWORK_VPN"}),style:(0,i.A)((0,i.A)({},o.R.subItem),{},{paddingLeft:45,background:"NETWORK_VPN"===t.type?"#333":"transparent"}),children:"VPN"}),(0,l.jsx)("div",{onClick:()=>n({type:"NETWORK_SERVER"}),style:(0,i.A)((0,i.A)({},o.R.subItem),{},{paddingLeft:45,background:"NETWORK_SERVER"===t.type?"#333":"transparent"}),children:"Evenimente Server"}),(0,l.jsx)("div",{onClick:()=>n({type:"NETWORK_PORTS"}),style:(0,i.A)((0,i.A)({},o.R.subItem),{},{paddingLeft:45,background:"NETWORK_PORTS"===t.type?"#333":"transparent"}),children:"Porturi Sistem"})]})]})]}),(Me("HARDWARE")||Me("ARCHIVE"))&&(0,l.jsxs)("div",{onClick:()=>Ne("HARDWARE"),style:{padding:"8px 10px",cursor:"pointer",background:"#333",display:"flex",alignItems:"center",fontSize:13,marginTop:5},children:[(0,l.jsx)(u.c_,{size:14,style:{transform:d.HARDWARE?"rotate(90deg)":"rotate(0deg)",transition:"0.2s",marginRight:5}})," Hardware"]}),d.HARDWARE&&(0,l.jsxs)(l.Fragment,{children:[Me("HARDWARE")&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{onClick:()=>{Ne("IP_DEVICES"),n({type:"IP_DEVICES_ROOT"})},style:(0,i.A)((0,i.A)({},o.R.subItem),{},{background:"IP_DEVICES_ROOT"===t.type?"#094771":"transparent"}),children:[(0,l.jsx)(u.c_,{size:14,style:{transform:d.IP_DEVICES?"rotate(90deg)":"rotate(0deg)",marginRight:5}})," Dispozitive IP"]}),(0,l.jsx)("div",{onClick:()=>n({type:"WIZARD"}),style:(0,i.A)((0,i.A)({},o.R.subItem),{},{paddingLeft:45,color:o.T.success,fontWeight:"bold",background:"WIZARD"===t.type?"#094771":"transparent"}),children:"+ Adauga Camera (WIZARD)"}),d.IP_DEVICES&&x.map(e=>{var r,s;const a=(null===(r=f[e.id])||void 0===r?void 0:r.connected)||"ONLINE"===(null===(s=f[e.id])||void 0===s?void 0:s.status);return(0,l.jsxs)("div",{id:"sidebar_hw_".concat(e.id),onClick:()=>n({type:"CAMERA",id:e.id}),style:(0,i.A)((0,i.A)({},o.R.subItem),{},{paddingLeft:45,background:"CAMERA"===t.type&&t.id===e.id?"#094771":"transparent",fontSize:12,display:"flex",alignItems:"center"}),children:[(0,l.jsx)("div",{style:{width:6,height:6,borderRadius:"50%",background:a?"#4caf50":"#f44336",marginRight:8,boxShadow:a?"0 0 4px #4caf50":"none"}}),(0,l.jsx)(u.i7,{size:14,style:{marginRight:5}})," ",e.name||e.ip]},"hw_"+e.id)})]}),Me("ARCHIVE")&&(0,l.jsxs)("div",{onClick:()=>n({type:"ARCHIVE"}),style:(0,i.A)((0,i.A)({},o.R.subItem),{},{background:"ARCHIVE"===t.type?"#094771":"transparent"}),children:[(0,l.jsx)(u.Td,{size:14,style:{marginRight:5}})," Arhiva"]})]}),Me("HARDWARE")&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{onClick:()=>Ne("CHANNELS"),style:{padding:"8px 10px",cursor:"pointer",background:"#333",display:"flex",alignItems:"center",fontSize:13,marginTop:5},children:[(0,l.jsx)(u.c_,{size:14,style:{transform:d.CHANNELS?"rotate(90deg)":"rotate(0deg)",transition:"0.2s",marginRight:5}})," Canale"]}),d.CHANNELS&&x.map(e=>{var r,s;const a=(null===(r=f[e.id])||void 0===r?void 0:r.connected)||"ONLINE"===(null===(s=f[e.id])||void 0===s?void 0:s.status);return(0,l.jsxs)("div",{id:"sidebar_ch_".concat(e.id),onClick:()=>n({type:"CHANNEL",id:e.id}),style:(0,i.A)((0,i.A)({},o.R.subItem),{},{background:"CHANNEL"===t.type&&t.id===e.id?"#094771":"transparent",fontSize:12,display:"flex",alignItems:"center"}),children:[(0,l.jsx)("div",{style:{width:6,height:6,borderRadius:"50%",background:a?"#4caf50":"#f44336",marginRight:8,boxShadow:a?"0 0 4px #4caf50":"none"}}),(0,l.jsx)(u.Ce,{size:14,style:{marginRight:5}})," ",e.name||e.ip," - D1"]},"ch_"+e.id)})]}),(0,l.jsxs)("div",{onClick:()=>Ne("ARMING"),style:{padding:"8px 10px",cursor:"pointer",background:"#333",display:"flex",alignItems:"center",fontSize:13,marginTop:5},children:[(0,l.jsx)(u.c_,{size:14,style:{transform:d.ARMING?"rotate(90deg)":"rotate(0deg)",transition:"0.2s",marginRight:5}})," Armare"]}),d.ARMING&&(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{onClick:()=>n({type:"ARMING_SCHEDULES"}),style:(0,i.A)((0,i.A)({},o.R.subItem),{},{background:"ARMING_SCHEDULES"===t.type?"#094771":"transparent"}),children:"Definire Orar"}),(0,l.jsx)("div",{onClick:()=>n({type:"ARMING_MATRIX"}),style:(0,i.A)((0,i.A)({},o.R.subItem),{},{background:"ARMING_MATRIX"===t.type?"#094771":"transparent"}),children:"Matrice Armare"})]}),(0,l.jsxs)("div",{style:{marginTop:"auto",padding:20},children:[(0,l.jsxs)("div",{style:{fontSize:10,color:"#666",textAlign:"center",marginBottom:10,fontFamily:"monospace"},children:["UI REVISION: 2026.01.08.1125",(0,l.jsx)("br",{}),"(AI SCALE + AUTO-COLLAPSE SIDEBAR)"]}),(0,l.jsx)("button",{style:(0,i.A)((0,i.A)({},o.R.btnPrimary),{},{background:o.T.danger,width:"100%",marginRight:0}),onClick:()=>{localStorage.removeItem("edge_user"),window.location.reload()},children:"LOGOUT"})]})]}),(0,l.jsx)("div",{style:o.R.content,children:(()=>{switch(t.type){case"SYSTEM":return(0,l.jsx)(h.default,{});case"AI_HUB":return(0,l.jsx)(Z,{});case"NETWORK_INTERFACE":return(0,l.jsx)(C,{networkConfig:D,setNetworkConfig:O,saveNetwork:()=>a.nC.post("/network/config",D).then(()=>alert("Saved"))});case"NETWORK_VPN":return(0,l.jsx)(E,{netConfig:P,setNetConfig:B,connectVPN:async e=>{const t=e,n={interface:e,address:P["".concat(t,"_address")],privateKey:P["".concat(t,"_privateKey")],publicKey:P["".concat(t,"_serverPubKey")],endpoint:P["".concat(t,"_endpoint")],allowedIps:P["".concat(t,"_allowedIps")],persistentKeepalive:25};try{const e=await a.nC.post("/vpn/setup-wireguard",n);alert(e.data.message||"VPN Command Sent!"),me()}catch(s){var i,r;alert("VPN Error: "+((null===(i=s.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.error)||s.message))}},saveImportedVPN:async e=>{try{await a.nC.post("/vpn/setup-wireguard",{interface:"wg0",address:e.mgmt.interface.address,privateKey:e.mgmt.interface.privateKey,publicKey:e.mgmt.peer.publicKey,endpoint:e.mgmt.peer.endpoint,allowedIps:e.mgmt.peer.allowedIps,persistentKeepalive:25}),await a.nC.post("/vpn/setup-wireguard",{interface:"wg1",address:e.ai.interface.address,privateKey:e.ai.interface.privateKey,publicKey:e.ai.peer.publicKey,endpoint:e.ai.peer.endpoint,allowedIps:e.ai.peer.allowedIps,persistentKeepalive:25}),alert("Configura\u021bia VPN Dual\u0103 a fost aplicat\u0103 cu succes! Sistemul se conecteaz\u0103..."),me()}catch(t){alert("Eroare la salvarea VPN: "+t.message)}},connectDualVPN:async()=>{const e=["wg0","wg1"];let t=0;for(const i of e){const e=i,r={interface:i,address:P["".concat(e,"_address")],privateKey:P["".concat(e,"_privateKey")],publicKey:P["".concat(e,"_serverPubKey")],endpoint:P["".concat(e,"_endpoint")],allowedIps:P["".concat(e,"_allowedIps")],persistentKeepalive:25};if(r.privateKey&&r.publicKey)try{await a.nC.post("/vpn/setup-wireguard",r),t++}catch(n){console.error("Failed to start ".concat(i),n)}}t>0?(alert("Comand\u0103 trimis\u0103 pentru ".concat(t," interfe\u021be.")),me()):alert("Nu s-au g\u0103sit date complete pentru ambele interfe\u021be.")}});case"NETWORK_SERVER":return(0,l.jsx)(R,{netConfig:P,setNetConfig:B,saveDispatch:()=>a.nC.post("/dispatch",{url:P.dispatchUrl}).then(()=>alert("Dispatch URL saved! Events will now be sent to this server."))});case"NETWORK_PORTS":return(0,l.jsx)(w,{});case"ADD_USER":return(0,l.jsx)(I,{newUserForm:G,setNewUserForm:F,handleAddUser:Se});case"USER":{const e=V||W.find(e=>e.id===t.id);return e?(0,l.jsx)(T,{selectedUser:e,setSelectedUser:e=>{U(t=>t.map(t=>t.id===e.id?e:t)),K(e)},currentUser:H,handleDeleteUser:Ce,loadUsers:fe}):null}case"ORPHANS":return(0,l.jsx)(M,{});case"ARCHIVE":return(0,l.jsx)(z,{cams:x});case"IP_DEVICES_ROOT":return(0,l.jsx)(re,{cams:x,statusData:f,onSelectCam:e=>n({type:"CAMERA",id:e}),onEditCam:e=>{ge(e),he(!0)},onDeleteCam:Ae});case"CAMERA":{const e=x.find(e=>e.id===t.id);return(0,l.jsx)(se,{cam:e,statusData:f,updateCam:ve,saveAll:je,deleteCam:Ae,openEditModal:e=>{ge(e),he(!0)},setSelection:n})}case"CHANNEL":{const e=x.find(e=>e.id===t.id);return(0,l.jsx)(ae,{cam:e,cams:x,setCams:y,setSelection:n,availableModules:N,updateCam:ve,saveAll:je})}case"SYSTEM_LOGS":return(0,l.jsx)(le,{});case"MAINTENANCE_SERVICES":return(0,l.jsx)(de,{services:b,onRestartStack:Ee});case"MAINTENANCE_REBOOT":return(0,l.jsx)(ce,{});case"WIZARD":return(0,l.jsx)(A,{onUpdate:xe,onFinish:()=>{xe(),n({type:"IP_DEVICES_ROOT"})},onOpenSetup:e=>{ge(e||{}),he(!0)}});case"ARMING_SCHEDULES":return(0,l.jsx)(c,{schedules:J,onSave:Re});case"ARMING_MATRIX":return(0,l.jsx)(p,{schedules:J,cams:x,assignments:$,modes:ee,labels:ne,onSave:ke,onSaveModes:Ie,onSaveLabels:Te,onToggleSchedule:we});default:return(0,l.jsx)("div",{style:{padding:20},children:"Select an item from the sidebar"})}})()})]}),oe&&(0,l.jsx)(pe,{editCam:ue,setEditCam:ge,manufacturers:v,onClose:()=>he(!1),onSave:async()=>{try{if(ue.id&&x.some(e=>e.id===ue.id)){const e=x.map(e=>e.id===ue.id?ue:e);await a.nC.post("/cameras/config",e)}else await a.nC.post("/cameras/add",ue),n({type:"IP_DEVICES_ROOT"});he(!1),xe()}catch(i){var e,t;alert("Save Error: "+((null===(e=i.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||i.message))}}})]})}},647(e,t,n){n.d(t,{Ce:()=>g,LM:()=>p,Td:()=>x,Xj:()=>m,Ze:()=>c,c_:()=>y,ek:()=>b,ff:()=>d,hc:()=>h,hz:()=>f,i7:()=>u,lM:()=>l});var i=n(555),r=n(986),s=(n(43),n(579));const a=["size","color","children","style"],o=e=>{let{size:t=16,color:n="currentColor",children:o,style:l}=e,d=(0,r.A)(e,a);return(0,s.jsx)("svg",(0,i.A)((0,i.A)({width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:(0,i.A)({display:"inline-block",verticalAlign:"middle"},l)},d),{},{children:o}))},l=e=>(0,s.jsxs)(o,(0,i.A)((0,i.A)({},e),{},{children:[(0,s.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,s.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})),d=e=>(0,s.jsxs)(o,(0,i.A)((0,i.A)({},e),{},{children:[(0,s.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,s.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})),c=e=>(0,s.jsxs)(o,(0,i.A)((0,i.A)({},e),{},{children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,s.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})),p=e=>(0,s.jsxs)(o,(0,i.A)((0,i.A)({},e),{},{children:[(0,s.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),(0,s.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})),h=e=>(0,s.jsxs)(o,(0,i.A)((0,i.A)({},e),{},{children:[(0,s.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),(0,s.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,s.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})),u=e=>(0,s.jsxs)(o,(0,i.A)((0,i.A)({},e),{},{children:[(0,s.jsx)("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),(0,s.jsx)("circle",{cx:"12",cy:"13",r:"4"})]})),g=e=>(0,s.jsxs)(o,(0,i.A)((0,i.A)({},e),{},{children:[(0,s.jsx)("polygon",{points:"23 7 16 12 23 17 23 7"}),(0,s.jsx)("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})]})),x=e=>(0,s.jsxs)(o,(0,i.A)((0,i.A)({},e),{},{children:[(0,s.jsx)("polyline",{points:"21 8 21 21 3 21 3 8"}),(0,s.jsx)("rect",{x:"1",y:"3",width:"22",height:"5"}),(0,s.jsx)("line",{x1:"10",y1:"12",x2:"14",y2:"12"})]})),y=e=>(0,s.jsx)(o,(0,i.A)((0,i.A)({},e),{},{children:(0,s.jsx)("polyline",{points:"9 18 15 12 9 6"})})),f=e=>(0,s.jsx)(o,(0,i.A)((0,i.A)({},e),{},{children:(0,s.jsx)("path",{d:"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"})})),m=e=>(0,s.jsx)(o,(0,i.A)((0,i.A)({},e),{},{children:(0,s.jsx)("path",{d:"M4 14h6v6M20 10h-6V4M14 10l7-7M3 21l7-7"})})),b=e=>(0,s.jsx)(o,(0,i.A)((0,i.A)({},e),{},{children:(0,s.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}))},768(e,t,n){n.d(t,{Ay:()=>a,nC:()=>s});var i=n(722);let r="";if("undefined"!==typeof window){const e=window.location.href.match(/(\/api\/proxy\/[^\/]+)/);e?r=e[1]:window.location.hash.includes("#/")&&(r="")}const s=i.A.create({baseURL:r}),a=s},975(e,t,n){n.d(t,{A:()=>a});var i=n(555),r=n(43),s=n(579);function a(e){let{camId:t,streamType:n="hd",style:a,onClick:o,onDoubleClick:l,isHidden:d}=e;const c=(0,r.useRef)(null),p=(0,r.useRef)(null),[h,u]=(0,r.useState)("init"),[g,x]=(0,r.useState)(n);(0,r.useEffect)(()=>{x(n)},[n]);const y="low"===g?"sub":g,f="".concat(t,"_").concat(y);return(0,r.useEffect)(()=>{if(d)return;return t&&(async()=>{u("connecting"),p.current&&p.current.close();const e=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});p.current=e,e.ontrack=e=>{c.current&&(c.current.srcObject=e.streams[0],c.current.play().catch(()=>{}),u("playing"))},e.addTransceiver("video",{direction:"recvonly"});try{const t=await e.createOffer();await e.setLocalDescription(t);const n="/rtc/api/webrtc?src=".concat(f),i=await fetch(n,{method:"POST",body:e.localDescription.sdp});if(!i.ok)throw new Error("Status ".concat(i.status));const r=await i.text();p.current&&"closed"!==p.current.signalingState&&await e.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:r}))}catch(t){console.warn("[WebRTC] Failed ".concat(f,":"),t.message),"low"===g||"sub"===g?x("hd"):u("failed")}})(),()=>{p.current&&(p.current.close(),p.current=null)}},[t,g,f,d]),(0,s.jsxs)("div",{className:"rtc-player",style:(0,i.A)((0,i.A)({},a),{},{position:"relative",background:"#000",width:"100%",height:"100%",overflow:"hidden"}),onClick:o,onDoubleClick:l,children:[(0,s.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0},children:(0,s.jsx)("video",{className:"rtc-player-el",ref:c,style:{width:"100%",height:"100%",objectFit:"fill",display:"block"},playsInline:!0,muted:!0,autoPlay:!0})}),"connecting"===h&&(0,s.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"rgba(255,255,255,0.4)",fontSize:10,zIndex:2},children:"Connecting..."})]})}},986(e,t,n){function i(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}n.d(t,{A:()=>i})}}]);
//# sourceMappingURL=510.8a4a4fdb.chunk.js.map