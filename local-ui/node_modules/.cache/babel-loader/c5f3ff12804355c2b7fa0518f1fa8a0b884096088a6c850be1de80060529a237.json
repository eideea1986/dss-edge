{"ast":null,"code":"import React,{useEffect,useState,useRef}from\"react\";import{useSearchParams}from\"react-router-dom\";import API from\"../api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const styles=\"\\n:root {\\n  --bg: #0b0b0b;\\n  --panel: #141414;\\n  --line: #2a2a2a;\\n  --segment: #1db954;\\n  --gop: #ff8c00;\\n  --txt: #e0e0e0;\\n  --muted: #9a9a9a;\\n}\\n\\n.playback-container {\\n  height: 100vh;\\n  display: flex;\\n  flex-direction: column;\\n  background: var(--bg);\\n  color: var(--txt);\\n  font-family: \\\"Segoe UI\\\", Arial, sans-serif;\\n}\\n\\n.header {\\n  height: 48px;\\n  background: #111;\\n  display: flex;\\n  align-items: center;\\n  padding: 0 16px;\\n  font-weight: 600;\\n  gap: 10px;\\n}\\n\\n.main {\\n  display: grid;\\n  grid-template-rows: 1fr 160px;\\n  height: calc(100vh - 48px);\\n}\\n\\n.player {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: #000;\\n  position: relative;\\n}\\n\\nvideo {\\n  max-width: 100%;\\n  max-height: 100%;\\n  background: #000;\\n}\\n\\n.status-overlay {\\n  position: absolute;\\n  color: #6aff6a;\\n  font-size: 0.9rem;\\n  top: 10px;\\n  left: 10px;\\n  background: rgba(0,0,0,0.7);\\n  padding: 5px 10px;\\n  border-radius: 4px;\\n}\\n\\n.controls {\\n  background: var(--panel);\\n  padding: 10px 16px;\\n}\\n\\n.timeline-wrap {\\n  position: relative;\\n  height: 28px;\\n  background: var(--line);\\n  margin-bottom: 10px;\\n  cursor: pointer;\\n  border-radius: 3px;\\n  overflow: hidden;\\n}\\n\\n.seg {\\n  position: absolute;\\n  height: 100%;\\n  background: var(--segment);\\n  opacity: 0.8;\\n}\\n\\n.gop {\\n  position: absolute;\\n  height: 100%;\\n  background: var(--gop);\\n  opacity: 0.6;\\n  width: 2px;\\n}\\n\\n.cursor {\\n  position: absolute;\\n  top: 0;\\n  width: 3px;\\n  height: 100%;\\n  background: #fff;\\n  z-index: 10;\\n}\\n\\n.row {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  flex-wrap: wrap;\\n  margin-bottom: 8px;\\n}\\n\\nbutton, select, input {\\n  background: #222;\\n  color: #fff;\\n  border: 1px solid #333;\\n  padding: 6px 12px;\\n  border-radius: 3px;\\n  cursor: pointer;\\n  font-size: 13px;\\n}\\n\\nbutton:hover {\\n  background: #333;\\n}\\n\\nbutton.primary {\\n  background: #1db954;\\n  border-color: #1aab4b;\\n}\\n\\nbutton.danger {\\n  background: #e74c3c;\\n  border-color: #c0392b;\\n}\\n\\n.small {\\n  color: var(--muted);\\n  font-size: 12px;\\n}\\n\\nkbd {\\n  background: #222;\\n  border: 1px solid #333;\\n  padding: 2px 6px;\\n  border-radius: 3px;\\n  font-size: 11px;\\n}\\n\";export default function PlaybackPremium(){const[params]=useSearchParams();const camId=params.get(\"camId\");const[segments,setSegments]=useState([]);const[gops,setGops]=useState([]);const[isPlaying,setIsPlaying]=useState(false);const[status,setStatus]=useState(\"IDLE\");const[timeRange,setTimeRange]=useState({from:Date.now()-3600000,to:Date.now()});const videoRef=useRef(null);const pcRef=useRef(null);const cursorRef=useRef(null);const timelineRef=useRef(null);// Load timeline real SQL\nconst loadTimeline=async()=>{try{const res=await API.get(\"/playback/timeline/\".concat(camId,\"?from=\").concat(timeRange.from,\"&to=\").concat(timeRange.to));setSegments(res.data.segments||[]);setGops(res.data.gops||[]);}catch(e){console.error(\"Timeline error:\",e);}};useEffect(()=>{if(!camId)return;loadTimeline();},[camId,timeRange]);const startPlayback=async()=>{setStatus(\"BUFFERING\");try{var _document$getElementB;// Start backend\nconst res=await API.post('/playback/start',{camId,from:timeRange.from,to:timeRange.to,speed:((_document$getElementB=document.getElementById(\"speed\"))===null||_document$getElementB===void 0?void 0:_document$getElementB.value)||1});console.log(\"[Playback] Started:\",res.data);// WebRTC connection\nawait connectWebRTC(res.data.webrtcUrl);setIsPlaying(true);setStatus(\"PLAY\");}catch(e){console.error(\"[Playback] Error:\",e);setStatus(\"ERROR: \"+e.message);}};const connectWebRTC=async url=>{if(pcRef.current){pcRef.current.close();}const pc=new RTCPeerConnection({iceServers:[{urls:'stun:stun.l.google.com:19302'}]});pcRef.current=pc;pc.ontrack=event=>{console.log(\"[WebRTC] Track received\");if(videoRef.current){videoRef.current.srcObject=event.streams[0];}};const offer=await pc.createOffer({offerToReceiveVideo:true,offerToReceiveAudio:false});await pc.setLocalDescription(offer);const response=await fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(offer)});const answer=await response.json();await pc.setRemoteDescription(answer);};const pausePlayback=()=>{if(videoRef.current){videoRef.current.pause();setStatus(\"PAUSED\");}};const stopPlayback=async()=>{try{await API.post('/playback/stop',{camId});if(pcRef.current){pcRef.current.close();pcRef.current=null;}if(videoRef.current){videoRef.current.srcObject=null;}setIsPlaying(false);setStatus(\"IDLE\");}catch(e){console.error(\"[Playback] Stop error:\",e);}};const seekTimeline=e=>{const rect=timelineRef.current.getBoundingClientRect();const p=(e.clientX-rect.left)/rect.width;const seekTs=timeRange.from+p*(timeRange.to-timeRange.from);if(cursorRef.current){cursorRef.current.style.left=p*100+\"%\";}// TODO: Send seek command to backend\nconsole.log(\"[Seek] Position: \".concat(p.toFixed(3),\", Timestamp: \").concat(seekTs));};// Keyboard shortcuts\nuseEffect(()=>{const handleKey=e=>{if(e.code===\"Space\"){var _videoRef$current;e.preventDefault();(_videoRef$current=videoRef.current)!==null&&_videoRef$current!==void 0&&_videoRef$current.paused?startPlayback():pausePlayback();}if(e.code===\"ArrowLeft\"){// Seek -5s\n}if(e.code===\"ArrowRight\"){// Seek +5s\n}};document.addEventListener(\"keydown\",handleKey);return()=>document.removeEventListener(\"keydown\",handleKey);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"playback-container\",children:[/*#__PURE__*/_jsx(\"style\",{children:styles}),/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href='/',children:\"\\u2190 \\xCEnapoi\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Playback Premium \\u2014 \",camId]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"player\",children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,muted:true,playsInline:true}),/*#__PURE__*/_jsx(\"div\",{className:\"status-overlay\",children:status})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"controls\",children:[/*#__PURE__*/_jsxs(\"div\",{ref:timelineRef,className:\"timeline-wrap\",onClick:seekTimeline,children:[segments.map((seg,idx)=>/*#__PURE__*/_jsx(\"div\",{className:\"seg\",style:{left:\"\".concat(seg.s*100,\"%\"),width:\"\".concat((seg.e-seg.s)*100,\"%\")}},\"seg-\".concat(idx))),gops.map((gop,idx)=>/*#__PURE__*/_jsx(\"div\",{className:\"gop\",style:{left:\"\".concat(gop.s*100,\"%\")}},\"gop-\".concat(idx))),/*#__PURE__*/_jsx(\"div\",{ref:cursorRef,className:\"cursor\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[!isPlaying?/*#__PURE__*/_jsx(\"button\",{className:\"primary\",onClick:startPlayback,children:\"\\u25B6 RED\\u0102\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:pausePlayback,children:\"\\u23F8 PAUZ\\u0102\"}),/*#__PURE__*/_jsx(\"button\",{className:\"danger\",onClick:stopPlayback,children:\"\\u25A0 OPRIRE\"})]}),/*#__PURE__*/_jsx(\"label\",{className:\"small\",children:\"Vitez\\u0103\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"speed\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"0.25\"}),/*#__PURE__*/_jsx(\"option\",{children:\"0.5\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",selected:true,children:\"1x\"}),/*#__PURE__*/_jsx(\"option\",{children:\"2\"}),/*#__PURE__*/_jsx(\"option\",{children:\"4\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"small\",children:[\"Segmente: \",segments.length,\" | GOPs: \",gops.length]}),/*#__PURE__*/_jsxs(\"span\",{className:\"small\",children:[/*#__PURE__*/_jsx(\"kbd\",{children:\"Space\"}),\" play/pause  \",/*#__PURE__*/_jsx(\"kbd\",{children:\"\\u2190\"}),\"/\",/*#__PURE__*/_jsx(\"kbd\",{children:\"\\u2192\"}),\" seek\"]})]})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","useSearchParams","API","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","styles","PlaybackPremium","params","camId","get","segments","setSegments","gops","setGops","isPlaying","setIsPlaying","status","setStatus","timeRange","setTimeRange","from","Date","now","to","videoRef","pcRef","cursorRef","timelineRef","loadTimeline","res","concat","data","e","console","error","startPlayback","_document$getElementB","post","speed","document","getElementById","value","log","connectWebRTC","webrtcUrl","message","url","current","close","pc","RTCPeerConnection","iceServers","urls","ontrack","event","srcObject","streams","offer","createOffer","offerToReceiveVideo","offerToReceiveAudio","setLocalDescription","response","fetch","method","headers","body","JSON","stringify","answer","json","setRemoteDescription","pausePlayback","pause","stopPlayback","seekTimeline","rect","getBoundingClientRect","p","clientX","left","width","seekTs","style","toFixed","handleKey","code","_videoRef$current","preventDefault","paused","addEventListener","removeEventListener","className","children","onClick","window","location","href","ref","autoPlay","muted","playsInline","map","seg","idx","s","gop","id","selected","length"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/pages/Playback.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport API from \"../api\";\r\n\r\nconst styles = `\r\n:root {\r\n  --bg: #0b0b0b;\r\n  --panel: #141414;\r\n  --line: #2a2a2a;\r\n  --segment: #1db954;\r\n  --gop: #ff8c00;\r\n  --txt: #e0e0e0;\r\n  --muted: #9a9a9a;\r\n}\r\n\r\n.playback-container {\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: var(--bg);\r\n  color: var(--txt);\r\n  font-family: \"Segoe UI\", Arial, sans-serif;\r\n}\r\n\r\n.header {\r\n  height: 48px;\r\n  background: #111;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0 16px;\r\n  font-weight: 600;\r\n  gap: 10px;\r\n}\r\n\r\n.main {\r\n  display: grid;\r\n  grid-template-rows: 1fr 160px;\r\n  height: calc(100vh - 48px);\r\n}\r\n\r\n.player {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: #000;\r\n  position: relative;\r\n}\r\n\r\nvideo {\r\n  max-width: 100%;\r\n  max-height: 100%;\r\n  background: #000;\r\n}\r\n\r\n.status-overlay {\r\n  position: absolute;\r\n  color: #6aff6a;\r\n  font-size: 0.9rem;\r\n  top: 10px;\r\n  left: 10px;\r\n  background: rgba(0,0,0,0.7);\r\n  padding: 5px 10px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.controls {\r\n  background: var(--panel);\r\n  padding: 10px 16px;\r\n}\r\n\r\n.timeline-wrap {\r\n  position: relative;\r\n  height: 28px;\r\n  background: var(--line);\r\n  margin-bottom: 10px;\r\n  cursor: pointer;\r\n  border-radius: 3px;\r\n  overflow: hidden;\r\n}\r\n\r\n.seg {\r\n  position: absolute;\r\n  height: 100%;\r\n  background: var(--segment);\r\n  opacity: 0.8;\r\n}\r\n\r\n.gop {\r\n  position: absolute;\r\n  height: 100%;\r\n  background: var(--gop);\r\n  opacity: 0.6;\r\n  width: 2px;\r\n}\r\n\r\n.cursor {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 3px;\r\n  height: 100%;\r\n  background: #fff;\r\n  z-index: 10;\r\n}\r\n\r\n.row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  flex-wrap: wrap;\r\n  margin-bottom: 8px;\r\n}\r\n\r\nbutton, select, input {\r\n  background: #222;\r\n  color: #fff;\r\n  border: 1px solid #333;\r\n  padding: 6px 12px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-size: 13px;\r\n}\r\n\r\nbutton:hover {\r\n  background: #333;\r\n}\r\n\r\nbutton.primary {\r\n  background: #1db954;\r\n  border-color: #1aab4b;\r\n}\r\n\r\nbutton.danger {\r\n  background: #e74c3c;\r\n  border-color: #c0392b;\r\n}\r\n\r\n.small {\r\n  color: var(--muted);\r\n  font-size: 12px;\r\n}\r\n\r\nkbd {\r\n  background: #222;\r\n  border: 1px solid #333;\r\n  padding: 2px 6px;\r\n  border-radius: 3px;\r\n  font-size: 11px;\r\n}\r\n`;\r\n\r\nexport default function PlaybackPremium() {\r\n    const [params] = useSearchParams();\r\n    const camId = params.get(\"camId\");\r\n\r\n    const [segments, setSegments] = useState([]);\r\n    const [gops, setGops] = useState([]);\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [status, setStatus] = useState(\"IDLE\");\r\n    const [timeRange, setTimeRange] = useState({ from: Date.now() - 3600000, to: Date.now() });\r\n\r\n    const videoRef = useRef(null);\r\n    const pcRef = useRef(null);\r\n    const cursorRef = useRef(null);\r\n    const timelineRef = useRef(null);\r\n\r\n    // Load timeline real SQL\r\n    const loadTimeline = async () => {\r\n        try {\r\n            const res = await API.get(`/playback/timeline/${camId}?from=${timeRange.from}&to=${timeRange.to}`);\r\n            setSegments(res.data.segments || []);\r\n            setGops(res.data.gops || []);\r\n        } catch (e) {\r\n            console.error(\"Timeline error:\", e);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!camId) return;\r\n        loadTimeline();\r\n    }, [camId, timeRange]);\r\n\r\n    const startPlayback = async () => {\r\n        setStatus(\"BUFFERING\");\r\n\r\n        try {\r\n            // Start backend\r\n            const res = await API.post('/playback/start', {\r\n                camId,\r\n                from: timeRange.from,\r\n                to: timeRange.to,\r\n                speed: document.getElementById(\"speed\")?.value || 1\r\n            });\r\n\r\n            console.log(\"[Playback] Started:\", res.data);\r\n\r\n            // WebRTC connection\r\n            await connectWebRTC(res.data.webrtcUrl);\r\n\r\n            setIsPlaying(true);\r\n            setStatus(\"PLAY\");\r\n        } catch (e) {\r\n            console.error(\"[Playback] Error:\", e);\r\n            setStatus(\"ERROR: \" + e.message);\r\n        }\r\n    };\r\n\r\n    const connectWebRTC = async (url) => {\r\n        if (pcRef.current) {\r\n            pcRef.current.close();\r\n        }\r\n\r\n        const pc = new RTCPeerConnection({\r\n            iceServers: [{ urls: 'stun:stun.l.google.com:19302' }]\r\n        });\r\n\r\n        pcRef.current = pc;\r\n\r\n        pc.ontrack = (event) => {\r\n            console.log(\"[WebRTC] Track received\");\r\n            if (videoRef.current) {\r\n                videoRef.current.srcObject = event.streams[0];\r\n            }\r\n        };\r\n\r\n        const offer = await pc.createOffer({\r\n            offerToReceiveVideo: true,\r\n            offerToReceiveAudio: false\r\n        });\r\n\r\n        await pc.setLocalDescription(offer);\r\n\r\n        const response = await fetch(url, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(offer)\r\n        });\r\n\r\n        const answer = await response.json();\r\n        await pc.setRemoteDescription(answer);\r\n    };\r\n\r\n    const pausePlayback = () => {\r\n        if (videoRef.current) {\r\n            videoRef.current.pause();\r\n            setStatus(\"PAUSED\");\r\n        }\r\n    };\r\n\r\n    const stopPlayback = async () => {\r\n        try {\r\n            await API.post('/playback/stop', { camId });\r\n\r\n            if (pcRef.current) {\r\n                pcRef.current.close();\r\n                pcRef.current = null;\r\n            }\r\n\r\n            if (videoRef.current) {\r\n                videoRef.current.srcObject = null;\r\n            }\r\n\r\n            setIsPlaying(false);\r\n            setStatus(\"IDLE\");\r\n        } catch (e) {\r\n            console.error(\"[Playback] Stop error:\", e);\r\n        }\r\n    };\r\n\r\n    const seekTimeline = (e) => {\r\n        const rect = timelineRef.current.getBoundingClientRect();\r\n        const p = (e.clientX - rect.left) / rect.width;\r\n        const seekTs = timeRange.from + p * (timeRange.to - timeRange.from);\r\n\r\n        if (cursorRef.current) {\r\n            cursorRef.current.style.left = (p * 100) + \"%\";\r\n        }\r\n\r\n        // TODO: Send seek command to backend\r\n        console.log(`[Seek] Position: ${p.toFixed(3)}, Timestamp: ${seekTs}`);\r\n    };\r\n\r\n    // Keyboard shortcuts\r\n    useEffect(() => {\r\n        const handleKey = (e) => {\r\n            if (e.code === \"Space\") {\r\n                e.preventDefault();\r\n                videoRef.current?.paused ? startPlayback() : pausePlayback();\r\n            }\r\n            if (e.code === \"ArrowLeft\") {\r\n                // Seek -5s\r\n            }\r\n            if (e.code === \"ArrowRight\") {\r\n                // Seek +5s\r\n            }\r\n        };\r\n\r\n        document.addEventListener(\"keydown\", handleKey);\r\n        return () => document.removeEventListener(\"keydown\", handleKey);\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"playback-container\">\r\n            <style>{styles}</style>\r\n\r\n            {/* Header */}\r\n            <div className=\"header\">\r\n                <button onClick={() => window.location.href = '/'}>← Înapoi</button>\r\n                <span>Playback Premium — {camId}</span>\r\n            </div>\r\n\r\n            {/* Main */}\r\n            <div className=\"main\">\r\n                {/* Player */}\r\n                <div className=\"player\">\r\n                    <video ref={videoRef} autoPlay muted playsInline />\r\n                    <div className=\"status-overlay\">{status}</div>\r\n                </div>\r\n\r\n                {/* Controls */}\r\n                <div className=\"controls\">\r\n                    {/* Timeline */}\r\n                    <div ref={timelineRef} className=\"timeline-wrap\" onClick={seekTimeline}>\r\n                        {segments.map((seg, idx) => (\r\n                            <div\r\n                                key={`seg-${idx}`}\r\n                                className=\"seg\"\r\n                                style={{\r\n                                    left: `${seg.s * 100}%`,\r\n                                    width: `${(seg.e - seg.s) * 100}%`\r\n                                }}\r\n                            />\r\n                        ))}\r\n                        {gops.map((gop, idx) => (\r\n                            <div\r\n                                key={`gop-${idx}`}\r\n                                className=\"gop\"\r\n                                style={{\r\n                                    left: `${gop.s * 100}%`\r\n                                }}\r\n                            />\r\n                        ))}\r\n                        <div ref={cursorRef} className=\"cursor\" />\r\n                    </div>\r\n\r\n                    {/* Controls row */}\r\n                    <div className=\"row\">\r\n                        {!isPlaying ? (\r\n                            <button className=\"primary\" onClick={startPlayback}>▶ REDĂ</button>\r\n                        ) : (\r\n                            <>\r\n                                <button onClick={pausePlayback}>⏸ PAUZĂ</button>\r\n                                <button className=\"danger\" onClick={stopPlayback}>■ OPRIRE</button>\r\n                            </>\r\n                        )}\r\n\r\n                        <label className=\"small\">Viteză</label>\r\n                        <select id=\"speed\">\r\n                            <option>0.25</option>\r\n                            <option>0.5</option>\r\n                            <option value=\"1\" selected>1x</option>\r\n                            <option>2</option>\r\n                            <option>4</option>\r\n                        </select>\r\n\r\n                        <span className=\"small\">\r\n                            Segmente: {segments.length} | GOPs: {gops.length}\r\n                        </span>\r\n\r\n                        <span className=\"small\">\r\n                            <kbd>Space</kbd> play/pause  <kbd>←</kbd>/<kbd>→</kbd> seek\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}