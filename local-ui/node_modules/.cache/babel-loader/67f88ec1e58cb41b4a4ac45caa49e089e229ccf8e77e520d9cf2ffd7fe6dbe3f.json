{"ast":null,"code":"import React,{useState,useEffect}from'react';import{colors}from'../theme';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_ROOT=window.location.hostname==='localhost'?'http://localhost:8080':'';export default function SystemStatus(){var _health$modules$recor,_health$modules$live,_health$modules$index,_health$modules$reten,_health$modules$legac;const[health,setHealth]=useState(null);useEffect(()=>{const fetchHealth=()=>{fetch(\"\".concat(API_ROOT,\"/api/system/health\")).then(r=>r.json()).then(data=>setHealth(data)).catch(e=>console.error(\"Health fetch failed\",e));};fetchHealth();const timer=setInterval(fetchHealth,5000);return()=>clearInterval(timer);},[]);if(!health)return null;const getStatusColor=status=>status==='OK'?'#4CAF50':'#F44336';return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"10px\",marginRight:\"20px\",padding:\"4px 10px\",background:\"rgba(0,0,0,0.2)\",borderRadius:\"4px\",fontSize:\"12px\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:\"#888\",fontWeight:\"bold\",textTransform:\"uppercase\",fontSize:\"10px\"},children:\"System:\"}),/*#__PURE__*/_jsx(StatusDot,{label:\"REC\",status:(_health$modules$recor=health.modules.recorder)===null||_health$modules$recor===void 0?void 0:_health$modules$recor.status}),/*#__PURE__*/_jsx(StatusDot,{label:\"LIVE\",status:(_health$modules$live=health.modules.live)===null||_health$modules$live===void 0?void 0:_health$modules$live.status}),/*#__PURE__*/_jsx(StatusDot,{label:\"IDX\",status:(_health$modules$index=health.modules.indexer)===null||_health$modules$index===void 0?void 0:_health$modules$index.status}),/*#__PURE__*/_jsx(StatusDot,{label:\"RET\",status:(_health$modules$reten=health.modules.retention)===null||_health$modules$reten===void 0?void 0:_health$modules$reten.status}),/*#__PURE__*/_jsx(StatusDot,{label:\"API\",status:(_health$modules$legac=health.modules['legacy-api'])===null||_health$modules$legac===void 0?void 0:_health$modules$legac.status}),/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:\"5px\",color:health.system==='RUNNING'?colors.primary:'#FF9800',fontWeight:\"bold\"},children:health.system})]});}function StatusDot(_ref){let{label,status}=_ref;const color=status==='OK'?'#4CAF50':'#F44336';return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"4px\"},title:\"\".concat(label,\": \").concat(status),children:[/*#__PURE__*/_jsx(\"div\",{style:{width:6,height:6,borderRadius:\"50%\",background:color,boxShadow:\"0 0 5px \".concat(color)}}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"9px\",color:\"#aaa\"},children:label})]});}","map":{"version":3,"names":["React","useState","useEffect","colors","jsx","_jsx","jsxs","_jsxs","API_ROOT","window","location","hostname","SystemStatus","_health$modules$recor","_health$modules$live","_health$modules$index","_health$modules$reten","_health$modules$legac","health","setHealth","fetchHealth","fetch","concat","then","r","json","data","catch","e","console","error","timer","setInterval","clearInterval","getStatusColor","status","style","display","alignItems","gap","marginRight","padding","background","borderRadius","fontSize","children","color","fontWeight","textTransform","StatusDot","label","modules","recorder","live","indexer","retention","marginLeft","system","primary","_ref","title","width","height","boxShadow"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/components/SystemStatus.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { colors } from '../theme';\r\n\r\nconst API_ROOT = window.location.hostname === 'localhost' ? 'http://localhost:8080' : '';\r\n\r\nexport default function SystemStatus() {\r\n    const [health, setHealth] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchHealth = () => {\r\n            fetch(`${API_ROOT}/api/system/health`)\r\n                .then(r => r.json())\r\n                .then(data => setHealth(data))\r\n                .catch(e => console.error(\"Health fetch failed\", e));\r\n        };\r\n\r\n        fetchHealth();\r\n        const timer = setInterval(fetchHealth, 5000);\r\n        return () => clearInterval(timer);\r\n    }, []);\r\n\r\n    if (!health) return null;\r\n\r\n    const getStatusColor = (status) => status === 'OK' ? '#4CAF50' : '#F44336';\r\n\r\n    return (\r\n        <div style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"10px\",\r\n            marginRight: \"20px\",\r\n            padding: \"4px 10px\",\r\n            background: \"rgba(0,0,0,0.2)\",\r\n            borderRadius: \"4px\",\r\n            fontSize: \"12px\"\r\n        }}>\r\n            <div style={{ color: \"#888\", fontWeight: \"bold\", textTransform: \"uppercase\", fontSize: \"10px\" }}>System:</div>\r\n\r\n            {/* Legend: REC, LIVE, IDX, RET, API */}\r\n            <StatusDot label=\"REC\" status={health.modules.recorder?.status} />\r\n            <StatusDot label=\"LIVE\" status={health.modules.live?.status} />\r\n            <StatusDot label=\"IDX\" status={health.modules.indexer?.status} />\r\n            <StatusDot label=\"RET\" status={health.modules.retention?.status} />\r\n            <StatusDot label=\"API\" status={health.modules['legacy-api']?.status} />\r\n\r\n            <div style={{\r\n                marginLeft: \"5px\",\r\n                color: health.system === 'RUNNING' ? colors.primary : '#FF9800',\r\n                fontWeight: \"bold\"\r\n            }}>\r\n                {health.system}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction StatusDot({ label, status }) {\r\n    const color = status === 'OK' ? '#4CAF50' : '#F44336';\r\n    return (\r\n        <div style={{ display: \"flex\", alignItems: \"center\", gap: \"4px\" }} title={`${label}: ${status}`}>\r\n            <div style={{ width: 6, height: 6, borderRadius: \"50%\", background: color, boxShadow: `0 0 5px ${color}` }}></div>\r\n            <span style={{ fontSize: \"9px\", color: \"#aaa\" }}>{label}</span>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}