{"ast":null,"code":"import React,{useState,useEffect}from'react';import{colors}from'../theme';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_ROOT=window.location.hostname==='localhost'?'http://localhost:8080':'';export default function SystemStatus(){var _health$modules$recor,_health$modules$live,_health$modules$index,_health$modules$reten,_health$vpn,_health$vpn2;const[health,setHealth]=useState(null);useEffect(()=>{const fetchHealth=()=>{fetch(\"\".concat(API_ROOT,\"/api/system/health\")).then(r=>r.json()).then(data=>setHealth(data)).catch(e=>console.error(\"Health fetch failed\",e));};fetchHealth();const timer=setInterval(fetchHealth,5000);return()=>clearInterval(timer);},[]);if(!health)return null;const getStatusColor=status=>status==='OK'?'#4CAF50':'#F44336';return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"10px\",marginRight:\"20px\",padding:\"4px 10px\",background:\"rgba(0,0,0,0.2)\",borderRadius:\"4px\",fontSize:\"12px\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:\"#888\",fontWeight:\"bold\",textTransform:\"uppercase\",fontSize:\"10px\"},children:\"System:\"}),/*#__PURE__*/_jsx(StatusDot,{label:\"REC\",status:(_health$modules$recor=health.modules.recorder)===null||_health$modules$recor===void 0?void 0:_health$modules$recor.status}),/*#__PURE__*/_jsx(StatusDot,{label:\"LIVE\",status:(_health$modules$live=health.modules.live)===null||_health$modules$live===void 0?void 0:_health$modules$live.status}),/*#__PURE__*/_jsx(StatusDot,{label:\"IDX\",status:(_health$modules$index=health.modules.indexer)===null||_health$modules$index===void 0?void 0:_health$modules$index.status}),/*#__PURE__*/_jsx(StatusDot,{label:\"RET\",status:(_health$modules$reten=health.modules.retention)===null||_health$modules$reten===void 0?void 0:_health$modules$reten.status}),/*#__PURE__*/_jsx(StatusDot,{label:\"VPN-D\",status:(_health$vpn=health.vpn)===null||_health$vpn===void 0?void 0:_health$vpn.dispatch}),/*#__PURE__*/_jsx(StatusDot,{label:\"VPN-A\",status:(_health$vpn2=health.vpn)===null||_health$vpn2===void 0?void 0:_health$vpn2.ai}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:\"10px\",padding:\"2px 6px\",borderRadius:\"3px\",background:health.disk>90?\"#F44336\":\"rgba(255,255,255,0.1)\",color:\"#fff\",fontWeight:\"bold\",fontSize:\"10px\"},children:[\"HDD: \",health.disk,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:\"5px\",color:health.system==='RUNNING'?colors.primary:'#FF9800',fontWeight:\"bold\"},children:health.system})]});}function StatusDot(_ref){let{label,status}=_ref;const color=status==='OK'?'#4CAF50':'#F44336';return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"4px\"},title:\"\".concat(label,\": \").concat(status),children:[/*#__PURE__*/_jsx(\"div\",{style:{width:6,height:6,borderRadius:\"50%\",background:color,boxShadow:\"0 0 5px \".concat(color)}}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"9px\",color:\"#aaa\"},children:label})]});}","map":{"version":3,"names":["React","useState","useEffect","colors","jsx","_jsx","jsxs","_jsxs","API_ROOT","window","location","hostname","SystemStatus","_health$modules$recor","_health$modules$live","_health$modules$index","_health$modules$reten","_health$vpn","_health$vpn2","health","setHealth","fetchHealth","fetch","concat","then","r","json","data","catch","e","console","error","timer","setInterval","clearInterval","getStatusColor","status","style","display","alignItems","gap","marginRight","padding","background","borderRadius","fontSize","children","color","fontWeight","textTransform","StatusDot","label","modules","recorder","live","indexer","retention","vpn","dispatch","ai","marginLeft","disk","system","primary","_ref","title","width","height","boxShadow"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/components/SystemStatus.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { colors } from '../theme';\r\n\r\nconst API_ROOT = window.location.hostname === 'localhost' ? 'http://localhost:8080' : '';\r\n\r\nexport default function SystemStatus() {\r\n    const [health, setHealth] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchHealth = () => {\r\n            fetch(`${API_ROOT}/api/system/health`)\r\n                .then(r => r.json())\r\n                .then(data => setHealth(data))\r\n                .catch(e => console.error(\"Health fetch failed\", e));\r\n        };\r\n\r\n        fetchHealth();\r\n        const timer = setInterval(fetchHealth, 5000);\r\n        return () => clearInterval(timer);\r\n    }, []);\r\n\r\n    if (!health) return null;\r\n\r\n    const getStatusColor = (status) => status === 'OK' ? '#4CAF50' : '#F44336';\r\n\r\n    return (\r\n        <div style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"10px\",\r\n            marginRight: \"20px\",\r\n            padding: \"4px 10px\",\r\n            background: \"rgba(0,0,0,0.2)\",\r\n            borderRadius: \"4px\",\r\n            fontSize: \"12px\"\r\n        }}>\r\n            <div style={{ color: \"#888\", fontWeight: \"bold\", textTransform: \"uppercase\", fontSize: \"10px\" }}>System:</div>\r\n\r\n            {/* Legend: REC, LIVE, IDX, RET, API */}\r\n            <StatusDot label=\"REC\" status={health.modules.recorder?.status} />\r\n            <StatusDot label=\"LIVE\" status={health.modules.live?.status} />\r\n            <StatusDot label=\"IDX\" status={health.modules.indexer?.status} />\r\n            <StatusDot label=\"RET\" status={health.modules.retention?.status} />\r\n\r\n            {/* New: VPN Tunnels */}\r\n            <StatusDot label=\"VPN-D\" status={health.vpn?.dispatch} />\r\n            <StatusDot label=\"VPN-A\" status={health.vpn?.ai} />\r\n\r\n            <div style={{\r\n                marginLeft: \"10px\",\r\n                padding: \"2px 6px\",\r\n                borderRadius: \"3px\",\r\n                background: health.disk > 90 ? \"#F44336\" : \"rgba(255,255,255,0.1)\",\r\n                color: \"#fff\",\r\n                fontWeight: \"bold\",\r\n                fontSize: \"10px\"\r\n            }}>\r\n                HDD: {health.disk}%\r\n            </div>\r\n\r\n            <div style={{\r\n                marginLeft: \"5px\",\r\n                color: health.system === 'RUNNING' ? colors.primary : '#FF9800',\r\n                fontWeight: \"bold\"\r\n            }}>\r\n                {health.system}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction StatusDot({ label, status }) {\r\n    const color = status === 'OK' ? '#4CAF50' : '#F44336';\r\n    return (\r\n        <div style={{ display: \"flex\", alignItems: \"center\", gap: \"4px\" }} title={`${label}: ${status}`}>\r\n            <div style={{ width: 6, height: 6, borderRadius: \"50%\", background: color, boxShadow: `0 0 5px ${color}` }}></div>\r\n            <span style={{ fontSize: \"9px\", color: \"#aaa\" }}>{label}</span>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}