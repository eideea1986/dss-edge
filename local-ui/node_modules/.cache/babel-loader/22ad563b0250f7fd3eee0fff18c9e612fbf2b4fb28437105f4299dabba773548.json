{"ast":null,"code":"import _objectSpread from\"I:/dispecerat/github_release/dss-edge/local-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo,useRef}from\"react\";import{API}from\"../../api\";import{colors}from\"../../theme\";import{Trash,Edit,SettingsIcon,Lock,AlertTriangle,Save,Camera,Video,Archive,ChevronRight,RefreshCw}from\"../../components/Icons\";import Go2RTCPlayer from\"../../components/Go2RTCPlayer\";// Import optimized player\nimport RecorderPlayer from\"../../components/RecorderPlayer\";// Still used for Channel Setup Large View\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const videoStyle={width:\"100%\",height:\"100%\"};// Sub-component for auto-refreshing preview (Snapshot Mode for Performance)\nexport function LivePreview(_ref){let{camId,active=true}=_ref;const[tick,setTick]=useState(0);useEffect(()=>{if(!active)return;const interval=setInterval(()=>setTick(t=>t+1),3000);// Refresh every 3s\nreturn()=>clearInterval(interval);},[active]);if(!active)return/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",height:\"100%\",background:\"#000\"}});// Use Go2RTC frame API. Port 1984 is standard. Adjust IP if needed dynamically, but hardcoded for stability now.\n// Use relative path through the local-api proxy to avoid CORS/IP issues\nconst snapshotUrl=\"/rtc/api/frame.jpeg?src=\".concat(camId,\"_low&_t=\").concat(tick);return/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",height:\"100%\",background:\"#000\",overflow:\"hidden\"},children:/*#__PURE__*/_jsx(\"img\",{src:snapshotUrl,alt:camId,style:{width:\"100%\",height:\"100%\",objectFit:\"cover\"},onError:e=>{e.target.style.display='none';}})});}// --- REWRITTEN ROI COMPONENT ---\n// Uses normalized coordinates (0-1) for storage, mapped to dynamic pixel size for display.\nexport function CanvasROI(_ref2){let{points=[],onChange,readOnly=false,otherZones=[]}=_ref2;const containerRef=useRef(null);const canvasRef=useRef(null);const[dims,setDims]=useState({w:0,h:0});// Container dimensions\nconst[draggingIdx,setDraggingIdx]=useState(-1);// 1. Measure Container Size\nuseEffect(()=>{const obs=new ResizeObserver(entries=>{for(const entry of entries){const{width,height}=entry.contentRect;setDims({w:Math.round(width),h:Math.round(height)});}});if(containerRef.current)obs.observe(containerRef.current);return()=>obs.disconnect();},[]);// 2. Draw Loop\nuseEffect(()=>{const canvas=canvasRef.current;if(!canvas||dims.w===0||dims.h===0)return;const ctx=canvas.getContext(\"2d\");// Clear (using the set Dims)\nctx.clearRect(0,0,dims.w,dims.h);// Drawing Helper\nconst drawZone=(pts,stroke,fill)=>{if(!pts||pts.length===0)return;ctx.beginPath();// Move to first\nctx.moveTo(pts[0][0]*dims.w,pts[0][1]*dims.h);// Lines to rest\nfor(let i=1;i<pts.length;i++){ctx.lineTo(pts[i][0]*dims.w,pts[i][1]*dims.h);}ctx.closePath();ctx.strokeStyle=stroke;ctx.fillStyle=fill;ctx.lineWidth=2;ctx.fill();ctx.stroke();// Handles (only for active, editable)\nif(!readOnly&&stroke===\"#00ff00\"){ctx.fillStyle=\"#fff\";pts.forEach(p=>{ctx.beginPath();ctx.arc(p[0]*dims.w,p[1]*dims.h,4,0,Math.PI*2);ctx.fill();});}};// Draw Inactive Zones\notherZones.forEach(z=>{if(z.points)drawZone(z.points,\"rgba(0,122,204,0.5)\",\"rgba(0,122,204,0.2)\");});// Draw Active Zone\n// Ensure points are normalized (0-1). If > 1, convert on fly to support legacy.\nconst safePoints=points.map(p=>[p[0]>1?p[0]/dims.w:p[0],p[1]>1?p[1]/dims.h:p[1]]);drawZone(safePoints,readOnly?\"#ff9800\":\"#00ff00\",readOnly?\"rgba(255,152,0,0.25)\":\"rgba(0,255,0,0.15)\");},[points,dims,readOnly,otherZones]);// 3. Interactions\nconst handleMouseDown=e=>{if(readOnly)return;// Use native Offset - much faster and accurate relative to element\nconst x=e.nativeEvent.offsetX;const y=e.nativeEvent.offsetY;// Normalize\nconst nx=Math.max(0,Math.min(1,x/dims.w));const ny=Math.max(0,Math.min(1,y/dims.h));// Check hit (distance in pixels)\n// Convert existing points to pixels for check\nconst hitIdx=points.findIndex(p=>{const px=p[0]>1?p[0]:p[0]*dims.w;const py=p[1]>1?p[1]:p[1]*dims.h;return Math.sqrt((px-x)**2+(py-y)**2)<10;});if(hitIdx!==-1){setDraggingIdx(hitIdx);}else{// Add new point (Normalized)\nonChange([...points,[nx,ny]]);}};const handleMouseMove=e=>{if(draggingIdx===-1||readOnly)return;const x=e.nativeEvent.offsetX;const y=e.nativeEvent.offsetY;const nx=Math.max(0,Math.min(1,x/dims.w));const ny=Math.max(0,Math.min(1,y/dims.h));const newPoints=[...points];newPoints[draggingIdx]=[nx,ny];onChange(newPoints);};const handleMouseUp=()=>setDraggingIdx(-1);return/*#__PURE__*/_jsx(\"div\",{ref:containerRef,style:{position:\"absolute\",top:0,left:0,width:\"100%\",height:\"100%\",zIndex:10},children:/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,width:dims.w// Lock resolution to physical pixels\n,height:dims.h,style:{width:\"100%\",height:\"100%\",display:\"block\",cursor:readOnly?\"default\":\"crosshair\"},onMouseDown:handleMouseDown,onMouseMove:handleMouseMove,onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp})});}const styles={inputTable:{background:\"#444\",border:\"1px solid #555\",color:\"#fff\",width:\"100%\",padding:2},btnPrimary:{marginRight:10,padding:\"6px 20px\",background:\"#007acc\",color:\"white\",border:\"none\",borderRadius:2,fontSize:13,cursor:\"pointer\",fontWeight:\"bold\"},btnToolbar:{marginRight:10,padding:\"6px 15px\",background:\"#333\",color:\"#ddd\",border:\"1px solid #444\",borderRadius:2,fontSize:12,cursor:\"pointer\"}};export function IPDevicesRootSection(_ref3){let{cams,statusData={},onEditCam,onSelectCam,onDeleteCam}=_ref3;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:20},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:18,marginBottom:20,color:\"#fff\"},children:\"Gestionare Dispozitive IP\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"repeat(auto-fill, minmax(300px, 1fr))\",gap:20},children:cams.map(c=>{var _statusData$c$id;return/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#252526\",border:\"1px solid #444\",borderRadius:4,overflow:\"hidden\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{height:150,background:\"#000\",position:\"relative\"},children:[/*#__PURE__*/_jsx(LivePreview,{camId:c.id,active:true}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",bottom:0,left:0,right:0,padding:10,background:\"rgba(0,0,0,0.7)\",color:\"#fff\",fontSize:14},children:c.name||c.ip})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:15},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:10},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,fontWeight:\"bold\",color:\"#fff\"},children:c.ip}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",alignItems:\"flex-end\"},children:[(_statusData$c$id=statusData[c.id])!==null&&_statusData$c$id!==void 0&&_statusData$c$id.connected?/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:11,color:\"#4caf50\",background:\"rgba(76,175,80,0.1)\",padding:\"2px 6px\",borderRadius:4},children:[\"Active (\",statusData[c.id].fps||0,\" FPS)\"]}):/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,color:\"#f44336\",background:\"rgba(244,67,54,0.1)\",padding:\"2px 6px\",borderRadius:4},children:\"Offline\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:9,color:\"#888\",marginTop:3},children:[\"Check: \",new Date().toLocaleTimeString()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:12,color:\"#aaa\",marginBottom:10},children:[\"Model: \",c.model||\"Generic\",\" | \",c.manufacturer]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:10,marginBottom:10},children:[/*#__PURE__*/_jsxs(\"button\",{style:_objectSpread(_objectSpread({},styles.btnToolbar),{},{flex:1}),onClick:()=>onEditCam(c),children:[/*#__PURE__*/_jsx(Edit,{size:12}),\" Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{style:_objectSpread(_objectSpread({},styles.btnToolbar),{},{flex:1}),onClick:()=>onSelectCam(c.id),children:[/*#__PURE__*/_jsx(SettingsIcon,{size:12}),\" Config\"]})]}),/*#__PURE__*/_jsxs(\"button\",{style:{width:\"100%\",padding:\"6px 0\",background:\"rgba(244, 67, 54, 0.1)\",border:\"1px solid #d32f2f\",color:\"#e57373\",borderRadius:2,fontSize:12,cursor:\"pointer\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",gap:5},onClick:()=>onDeleteCam(c.id),children:[/*#__PURE__*/_jsx(Trash,{size:12}),\" Delete Device\"]})]})]},c.id);})})]});}export function CameraSettingsSection(_ref4){var _statusData$cam$id,_statusData$cam$id2,_caps$codecs,_caps$resolutions,_caps$gopRange,_caps$gopRange2,_caps$fps;let{cam,statusData,updateCam,saveAll,deleteCam,openEditModal,setSelection}=_ref4;const[syncing,setSyncing]=useState(false);const[caps,setCaps]=useState(null);// Store dynamic device capabilities\nconst fetchDeviceConfig=async()=>{if(!cam||!cam.id)return;try{const res=await API.get(\"/device-config/\".concat(cam.id));const{current,capabilities}=res.data;if(current){// Update local storage state with real device values\nif(current.codec)updateCam(cam.id,\"codec\",current.codec);if(current.fps)updateCam(cam.id,\"fps\",current.fps);if(current.gop)updateCam(cam.id,\"gop\",current.gop);if(current.resolution)updateCam(cam.id,\"resolution\",current.resolution);}if(capabilities){setCaps(capabilities);}}catch(e){console.warn(\"[CamSync] Polling failed for \".concat(cam.ip,\":\"),e.message);}};// Initial load and periodic polling (every 10s)\nuseEffect(()=>{fetchDeviceConfig();const timer=setInterval(fetchDeviceConfig,10000);return()=>clearInterval(timer);},[cam===null||cam===void 0?void 0:cam.id]);const handleRemoteChange=async(key,val)=>{// 1. Optimistic Update (UI)\nupdateCam(cam.id,key,val);// 2. Send to Device\nsetSyncing(true);try{console.log(\"[CamSync] Updating \".concat(key,\" to \").concat(val,\" for \").concat(cam.ip,\"...\"));await API.post(\"/device-config/\".concat(cam.id),{[key]:val});// Backend now handles saving to cameras.json, so we don't need saveAll() here.\n// This avoids race conditions with stale frontend state.\n// Confirm with a fresh fetch\nsetTimeout(fetchDeviceConfig,1500);}catch(e){var _e$response,_e$response$data;console.error(\"[CamSync] Update failed:\",e);alert(\"Failed to update camera: \".concat(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.error)||e.message));// Revert or sync back on error\nfetchDeviceConfig();}finally{setSyncing(false);}};if(!cam)return/*#__PURE__*/_jsx(\"div\",{children:\"Camera not found\"});return/*#__PURE__*/_jsx(\"div\",{style:{padding:20,display:\"flex\",flexDirection:\"column\",height:\"100%\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:20},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{fontSize:18,marginBottom:15,color:\"#fff\"},children:[\"Camera \",cam.ip]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"100px 1fr\",gap:10,maxWidth:600,marginBottom:15},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Model:\"}),\" \",/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:\"bold\"},children:cam.model||\"Autodetect\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Device Name:\"}),/*#__PURE__*/_jsx(\"input\",{style:{background:\"#333\",border:\"1px solid #555\",color:\"#ddd\",padding:4},value:cam.name||\"Camera \".concat(cam.ip),onChange:e=>updateCam(cam.id,\"name\",e.target.value),onBlur:()=>saveAll()})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:10,display:\"flex\",alignItems:\"center\",gap:15},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"IP Address: \",/*#__PURE__*/_jsx(\"b\",{style:{color:\"#fff\"},children:cam.ip})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Port: \",/*#__PURE__*/_jsx(\"b\",{style:{color:\"#fff\"},children:cam.port})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"User: \",/*#__PURE__*/_jsx(\"b\",{style:{color:\"#fff\"},children:cam.user})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openEditModal(cam),style:{color:\"rgb(66, 165, 245)\",background:\"none\",border:\"none\",cursor:\"pointer\",textDecoration:\"underline\",padding:0},children:\"Setup connection\"})]}),cam.storagePath&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:20,fontSize:13,color:\"#ccc\",display:\"flex\",alignItems:\"center\",gap:5},children:[\"Storage Path:\",/*#__PURE__*/_jsxs(\"span\",{title:\"Click to view recordings\",onClick:()=>window.location.href=\"/playback?camId=\".concat(cam.id),style:{fontFamily:\"monospace\",color:\"#81d4fa\",cursor:\"pointer\",textDecoration:\"underline\",background:\"rgba(33, 150, 243, 0.1)\",padding:\"2px 6px\",borderRadius:4},children:[cam.storagePath,\" [->]\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"repeat(6, auto)\",gap:10,marginBottom:20,alignItems:\"center\",justifyContent:\"start\"},children:[/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},styles.btnToolbar),{},{width:120,background:cam.enabled!==false?\"#333\":\"#4caf50\",color:cam.enabled!==false?\"#ddd\":\"#fff\"}),onClick:()=>{const next=cam.enabled!==false?false:true;updateCam(cam.id,\"enabled\",!!next);saveAll();},children:cam.enabled!==false?\"Disable\":\"Enable\"}),/*#__PURE__*/_jsxs(\"button\",{style:_objectSpread(_objectSpread({},styles.btnToolbar),{},{width:120}),onClick:()=>deleteCam(cam.id),children:[/*#__PURE__*/_jsx(Trash,{size:12,style:{marginRight:5}}),\" Delete...\"]}),/*#__PURE__*/_jsxs(\"button\",{style:_objectSpread(_objectSpread({},styles.btnToolbar),{},{background:\"rgba(0,122,204,0.1)\",border:\"1px solid #007acc\",color:\"#81d4fa\",width:160}),onClick:()=>setSelection({type:\"CHANNEL\",id:cam.id}),children:[/*#__PURE__*/_jsx(SettingsIcon,{size:12,style:{marginRight:5}}),\" AI / Channel Setup\"]}),/*#__PURE__*/_jsx(\"a\",{href:\"http://\".concat(cam.ip),target:\"_blank\",rel:\"noreferrer\",style:{color:\"rgb(66, 165, 245)\",textDecoration:\"none\",alignSelf:\"center\",margin:\"0 10px\"},children:\"Web Interface\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:30,display:\"flex\",alignItems:\"center\",gap:20},children:[(_statusData$cam$id=statusData[cam.id])!==null&&_statusData$cam$id!==void 0&&_statusData$cam$id.connected?/*#__PURE__*/_jsxs(\"div\",{children:[\"State: \",/*#__PURE__*/_jsx(\"span\",{style:{color:\"rgb(76, 175, 80)\",fontWeight:\"bold\"},children:\"Connected\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[\"State: \",/*#__PURE__*/_jsx(\"span\",{style:{color:\"#f44336\",fontWeight:\"bold\"},children:\"Disconnected production\"}),\" \",/*#__PURE__*/_jsx(\"span\",{style:{fontSize:11,color:\"#ffa726\",marginLeft:10},children:(_statusData$cam$id2=statusData[cam.id])!==null&&_statusData$cam$id2!==void 0&&_statusData$cam$id2.lastError?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AlertTriangle,{size:10}),\" \",statusData[cam.id].lastError]}):\"(Retry in 5s...)\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchDeviceConfig,style:{background:\"rgba(255,255,255,0.05)\",border:\"1px solid #444\",color:\"#fff\",padding:\"4px 10px\",borderRadius:4,cursor:\"pointer\",fontSize:12,display:\"flex\",alignItems:\"center\",gap:5},disabled:syncing,children:syncing?\"Syncing...\":\"ðŸ”„ Refresh State\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:\"#666\",fontSize:11},children:\"Auto-sync active (10s)\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:20},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:160,height:90,background:\"#000\",border:\"1px solid #444\",position:\"relative\"},children:/*#__PURE__*/_jsx(LivePreview,{camId:cam.id,active:true})}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,position:\"relative\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"100px 100px 120px 80px 80px\",gap:10,fontSize:12,fontWeight:\"bold\",marginBottom:5,color:\"#aaa\"},children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{children:\"Codec\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Resolution\"}),/*#__PURE__*/_jsx(\"div\",{children:\"GOP\"}),/*#__PURE__*/_jsx(\"div\",{children:\"FPS\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"100px 100px 120px 80px 80px\",gap:10,marginBottom:10,alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{color:cam.codec===\"H.265\"?\"#ffa726\":\"#4caf50\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:true,readOnly:true,style:{marginRight:5}}),\" Video\",cam.codec===\"H.265\"&&/*#__PURE__*/_jsx(\"span\",{title:\"WebRTC doesn't support H.265 natively\",children:\" \\u26A0\\uFE0F\"})]}),/*#__PURE__*/_jsx(\"select\",{style:styles.inputTable,value:cam.codec||\"H.264\",onChange:e=>handleRemoteChange(\"codec\",e.target.value),children:(caps===null||caps===void 0?void 0:(_caps$codecs=caps.codecs)===null||_caps$codecs===void 0?void 0:_caps$codecs.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c,children:c},c)))||/*#__PURE__*/_jsx(\"option\",{children:\"H.264\"})}),/*#__PURE__*/_jsx(\"select\",{style:styles.inputTable,value:cam.resolution,onChange:e=>handleRemoteChange(\"resolution\",e.target.value),children:(caps===null||caps===void 0?void 0:(_caps$resolutions=caps.resolutions)===null||_caps$resolutions===void 0?void 0:_caps$resolutions.map(r=>/*#__PURE__*/_jsx(\"option\",{value:\"\".concat(r.width,\"x\").concat(r.height),children:r.label},\"\".concat(r.width,\"x\").concat(r.height))))||/*#__PURE__*/_jsx(\"option\",{children:cam.resolution})}),/*#__PURE__*/_jsx(\"input\",{style:styles.inputTable,type:\"number\",value:cam.gop||20,min:(caps===null||caps===void 0?void 0:(_caps$gopRange=caps.gopRange)===null||_caps$gopRange===void 0?void 0:_caps$gopRange.min)||1,max:(caps===null||caps===void 0?void 0:(_caps$gopRange2=caps.gopRange)===null||_caps$gopRange2===void 0?void 0:_caps$gopRange2.max)||400,onChange:e=>updateCam(cam.id,\"gop\",e.target.value),onBlur:e=>handleRemoteChange(\"gop\",e.target.value)}),/*#__PURE__*/_jsx(\"select\",{style:styles.inputTable,value:cam.fps||25,onChange:e=>handleRemoteChange(\"fps\",e.target.value),children:(caps===null||caps===void 0?void 0:(_caps$fps=caps.fps)===null||_caps$fps===void 0?void 0:_caps$fps.map(f=>/*#__PURE__*/_jsxs(\"option\",{value:f,children:[f,\" fps\"]},f)))||/*#__PURE__*/_jsxs(\"option\",{children:[cam.fps,\" fps\"]})})]}),cam.codec===\"H.265\"&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"#ffa726\",fontSize:11,marginTop:5},children:[/*#__PURE__*/_jsx(AlertTriangle,{size:10}),\" Camera is in H.265 mode. Switch to H.264 for better grid performance and browser compatibility.\"]})]})]})]})});}export function ChannelSettingsSection(_ref5){var _cam$ai_server,_cam$ai_server2;let{cam,cams,setCams,setSelection,availableModules,updateCam,saveAll}=_ref5;const[activeZoneIdx,setActiveZoneIdx]=useState(0);const[isDrawing,setIsDrawing]=useState(false);const[roiPoints,setRoiPoints]=useState([]);const camAI=cam.ai_server||{};let zones=camAI.zones||[];if(zones.length===0&&camAI.roi&&camAI.roi.length>0){zones=[{name:\"Default Zone\",points:camAI.roi,objects:camAI.objects||{}}];}const safeIdx=activeZoneIdx>=zones.length?0:activeZoneIdx;const activeZone=zones[safeIdx]||null;const pointsToShow=isDrawing?roiPoints:(activeZone===null||activeZone===void 0?void 0:activeZone.points)||[];const silentSave=async updatedCams=>{try{await API.post(\"/cameras/config\",updatedCams);}catch(e){console.error(\"Silent save failed\",e);alert(\"Error saving settings: \"+e.message);}};const handleSaveZonePoints=()=>{setIsDrawing(false);const newZones=[...zones];if(!newZones[safeIdx])return;newZones[safeIdx]=_objectSpread(_objectSpread({},newZones[safeIdx]),{},{points:roiPoints});const newConf=_objectSpread(_objectSpread({},camAI),{},{zones:newZones,enabled:true});const updatedCams=cams.map(c=>c.id===cam.id?_objectSpread(_objectSpread({},c),{},{ai_server:newConf}):c);setCams(updatedCams);silentSave(updatedCams);};const handleAddZone=()=>{const newName=\"Zone \".concat(zones.length+1);const newZones=[...zones,{name:newName,points:[],objects:{}}];const newConf=_objectSpread(_objectSpread({},camAI),{},{zones:newZones});const updatedCams=cams.map(c=>c.id===cam.id?_objectSpread(_objectSpread({},c),{},{ai_server:newConf}):c);setCams(updatedCams);setActiveZoneIdx(newZones.length-1);silentSave(updatedCams);};const handleDeleteZone=()=>{if(!activeZone)return;if(!window.confirm(\"Delete \".concat(activeZone.name,\"?\")))return;const newZones=zones.filter((_,i)=>i!==safeIdx);const newConf=_objectSpread(_objectSpread({},camAI),{},{zones:newZones});const updatedCams=cams.map(c=>c.id===cam.id?_objectSpread(_objectSpread({},c),{},{ai_server:newConf}):c);setCams(updatedCams);setActiveZoneIdx(0);silentSave(updatedCams);};const handleObjectToggle=objKey=>{var _activeZone$objects;if(!activeZone)return;const newObjs=_objectSpread(_objectSpread({},activeZone.objects||{}),{},{[objKey]:!((_activeZone$objects=activeZone.objects)!==null&&_activeZone$objects!==void 0&&_activeZone$objects[objKey])});const newZones=[...zones];newZones[safeIdx]=_objectSpread(_objectSpread({},newZones[safeIdx]),{},{objects:newObjs});const newConf=_objectSpread(_objectSpread({},camAI),{},{zones:newZones});const updatedCams=cams.map(c=>c.id===cam.id?_objectSpread(_objectSpread({},c),{},{ai_server:newConf}):c);setCams(updatedCams);silentSave(updatedCams);};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"baseline\",marginBottom:15},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{fontSize:18,margin:0,color:\"#fff\"},children:[\"AI Zones: \",cam.name||cam.ip]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelection({type:\"CAMERA\",id:cam.id}),style:{color:\"rgb(66, 165, 245)\",background:\"none\",border:\"none\",cursor:\"pointer\",fontSize:13},children:\"[Back] Back to Hardware Settings\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:20,height:500},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:3,display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100%\",aspectRatio:\"16/9\",border:\"2px solid #444\",borderRadius:4,overflow:\"hidden\",background:\"#000\",position:\"relative\"},children:[/*#__PURE__*/_jsx(Go2RTCPlayer,{camId:cam.id,style:videoStyle,streamType:\"hd\"}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",top:0,left:0,right:0,bottom:0,zIndex:10},children:activeZone?/*#__PURE__*/_jsx(CanvasROI,{points:pointsToShow,onChange:isDrawing?setRoiPoints:undefined,readOnly:!isDrawing,width:800,height:450,otherZones:zones.filter((_,i)=>i!==safeIdx)}):/*#__PURE__*/_jsx(\"div\",{style:{color:\"#fff\",position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%,-50%)\"},children:\"Select or Add a Zone\"})})]}),activeZone&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10,display:\"flex\",gap:10,padding:8,background:\"#252526\",borderRadius:4,border:\"1px solid #333\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,color:\"#aaa\",fontWeight:\"bold\",marginRight:10},children:\"Zone Actions:\"}),isDrawing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},styles.btnPrimary),{},{background:\"#4caf50\"}),onClick:handleSaveZonePoints,children:\"[SAVE] Save Area\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.btnToolbar,onClick:()=>{setIsDrawing(false);setRoiPoints([]);},children:\"Cancel\"})]}):/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},styles.btnPrimary),{},{background:\"#2196f3\"}),onClick:()=>{setRoiPoints(activeZone.points||[]);setIsDrawing(true);},children:\"[EDIT] Edit Area\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,background:\"#1e1e1e\",border:\"1px solid #444\",padding:15,display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:20,flex:1,overflowY:\"auto\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{borderBottom:\"1px solid #444\",marginBottom:15,paddingBottom:15},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:\"0 0 10px 0\",color:colors.accent,fontSize:13},children:\"AI Configuration\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:15},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:5},children:/*#__PURE__*/_jsxs(\"label\",{style:{fontSize:12,color:\"#aaa\"},children:[\"Sensitivity: \",(((_cam$ai_server=cam.ai_server)===null||_cam$ai_server===void 0?void 0:_cam$ai_server.sensitivity)*100||50).toFixed(0),\"%\"]})}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:\"1\",step:\"0.05\",value:((_cam$ai_server2=cam.ai_server)===null||_cam$ai_server2===void 0?void 0:_cam$ai_server2.sensitivity)||0.5,onChange:e=>{const next=_objectSpread(_objectSpread({},cam.ai_server),{},{sensitivity:parseFloat(e.target.value)});const updated=cams.map(c=>c.id===cam.id?_objectSpread(_objectSpread({},c),{},{ai_server:next}):c);setCams(updated);silentSave(updated);},style:{width:\"100%\",cursor:\"pointer\"}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",fontSize:10,color:\"#666\",marginTop:4},children:[/*#__PURE__*/_jsx(\"span\",{children:\"0% (Filtrare Maxim\\u0103)\"}),/*#__PURE__*/_jsx(\"span\",{children:\"100% (Alert\\u0103 Maxim\\u0103)\"})]}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:11,color:\"#888\",marginTop:8,lineHeight:\"1.4\"},children:[/*#__PURE__*/_jsx(\"b\",{children:\"0%:\"}),\" Doar obiecte foarte clare. Reduce alarmele false (umbre, insecte).\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"100%:\"}),\" Detecteaz\\u0103 orice mi\\u0219care suspect\\u0103. Risc ridicat de alarme false.\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:10},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:0,color:\"#ddd\"},children:\"Detection Zones\"}),/*#__PURE__*/_jsx(\"button\",{style:{background:\"#4caf50\",color:\"#fff\",border:\"none\",borderRadius:2,cursor:\"pointer\",padding:\"2px 8px\",fontSize:16},onClick:handleAddZone,children:\"+\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:5},children:zones.map((z,idx)=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{setActiveZoneIdx(idx);setIsDrawing(false);},style:{padding:\"8px 10px\",background:idx===safeIdx?\"#2196f3\":\"#333\",color:\"#fff\",borderRadius:3,cursor:\"pointer\",fontSize:13,display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"span\",{children:z.name}),idx===safeIdx&&/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();handleDeleteZone();},style:{background:\"transparent\",border:\"none\",color:\"#fff\",cursor:\"pointer\"},children:\"\\xD7\"})]},idx))})]}),activeZone&&/*#__PURE__*/_jsxs(\"div\",{style:{borderTop:\"1px solid #444\",paddingTop:15},children:[/*#__PURE__*/_jsxs(\"h4\",{style:{marginTop:0,color:\"#ddd\",fontSize:13},children:[\"Search Objects (\",activeZone.name,\")\"]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gap:8,marginTop:10},children:((_cam$ai_server3,_currentMod$classes)=>{const currentModName=((_cam$ai_server3=cam.ai_server)===null||_cam$ai_server3===void 0?void 0:_cam$ai_server3.module)||\"ai_small\";const modulesList=Array.isArray(availableModules)?availableModules:[];const currentMod=modulesList.find(m=>m.name===currentModName);const displayClasses=(currentMod===null||currentMod===void 0?void 0:(_currentMod$classes=currentMod.classes)===null||_currentMod$classes===void 0?void 0:_currentMod$classes.length)>0?currentMod.classes:[\"person\",\"car\",\"truck\"];return displayClasses.map(obj=>{var _activeZone$objects2;return/*#__PURE__*/_jsxs(\"label\",{style:{display:\"flex\",alignItems:\"center\",color:\"#ccc\",fontSize:13,cursor:\"pointer\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:((_activeZone$objects2=activeZone.objects)===null||_activeZone$objects2===void 0?void 0:_activeZone$objects2[obj])||false,onChange:()=>handleObjectToggle(obj),style:{marginRight:8}}),obj]},obj);});})()})]}),/*#__PURE__*/_jsxs(\"div\",{style:{borderTop:\"1px solid #444\",marginTop:15,paddingTop:15},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:\"0 0 10px 0\",color:\"#ddd\",fontSize:13},children:\"Recording Setup\"}),/*#__PURE__*/_jsxs(\"label\",{style:{display:\"flex\",alignItems:\"center\",marginBottom:10,cursor:\"pointer\",color:\"#ccc\",fontSize:13},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:cam.record!==false,onChange:e=>{const updatedCams=cams.map(c=>c.id===cam.id?_objectSpread(_objectSpread({},c),{},{record:e.target.checked}):c);setCams(updatedCams);silentSave(updatedCams);},style:{marginRight:8}}),\"Enable Recording\"]})]})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useMemo","useRef","API","colors","Trash","Edit","SettingsIcon","Lock","AlertTriangle","Save","Camera","Video","Archive","ChevronRight","RefreshCw","Go2RTCPlayer","RecorderPlayer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","videoStyle","width","height","LivePreview","_ref","camId","active","tick","setTick","interval","setInterval","t","clearInterval","style","background","snapshotUrl","concat","overflow","children","src","alt","objectFit","onError","e","target","display","CanvasROI","_ref2","points","onChange","readOnly","otherZones","containerRef","canvasRef","dims","setDims","w","h","draggingIdx","setDraggingIdx","obs","ResizeObserver","entries","entry","contentRect","Math","round","current","observe","disconnect","canvas","ctx","getContext","clearRect","drawZone","pts","stroke","fill","length","beginPath","moveTo","i","lineTo","closePath","strokeStyle","fillStyle","lineWidth","forEach","p","arc","PI","z","safePoints","map","handleMouseDown","x","nativeEvent","offsetX","y","offsetY","nx","max","min","ny","hitIdx","findIndex","px","py","sqrt","handleMouseMove","newPoints","handleMouseUp","ref","position","top","left","zIndex","cursor","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","styles","inputTable","border","color","padding","btnPrimary","marginRight","borderRadius","fontSize","fontWeight","btnToolbar","IPDevicesRootSection","_ref3","cams","statusData","onEditCam","onSelectCam","onDeleteCam","marginBottom","gridTemplateColumns","gap","c","_statusData$c$id","id","bottom","right","name","ip","justifyContent","alignItems","flexDirection","connected","fps","marginTop","Date","toLocaleTimeString","model","manufacturer","_objectSpread","flex","onClick","size","CameraSettingsSection","_ref4","_statusData$cam$id","_statusData$cam$id2","_caps$codecs","_caps$resolutions","_caps$gopRange","_caps$gopRange2","_caps$fps","cam","updateCam","saveAll","deleteCam","openEditModal","setSelection","syncing","setSyncing","caps","setCaps","fetchDeviceConfig","res","get","capabilities","data","codec","gop","resolution","console","warn","message","timer","handleRemoteChange","key","val","log","post","setTimeout","_e$response","_e$response$data","error","alert","response","maxWidth","value","onBlur","port","user","textDecoration","storagePath","title","window","location","href","fontFamily","enabled","next","type","rel","alignSelf","margin","marginLeft","lastError","disabled","checked","codecs","resolutions","r","label","gopRange","f","ChannelSettingsSection","_ref5","_cam$ai_server","_cam$ai_server2","setCams","availableModules","activeZoneIdx","setActiveZoneIdx","isDrawing","setIsDrawing","roiPoints","setRoiPoints","camAI","ai_server","zones","roi","objects","safeIdx","activeZone","pointsToShow","silentSave","updatedCams","handleSaveZonePoints","newZones","newConf","handleAddZone","newName","handleDeleteZone","confirm","filter","_","handleObjectToggle","objKey","_activeZone$objects","newObjs","aspectRatio","streamType","undefined","transform","overflowY","borderBottom","paddingBottom","accent","sensitivity","toFixed","step","parseFloat","updated","lineHeight","idx","stopPropagation","borderTop","paddingTop","_cam$ai_server3","_currentMod$classes","currentModName","module","modulesList","Array","isArray","currentMod","find","m","displayClasses","classes","obj","_activeZone$objects2","record"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/sections/settings/HardwareSection.js"],"sourcesContent":["import React, { useState, useEffect, useMemo, useRef } from \"react\";\r\nimport { API } from \"../../api\";\r\nimport { colors } from \"../../theme\";\r\nimport { Trash, Edit, SettingsIcon, Lock, AlertTriangle, Save, Camera, Video, Archive, ChevronRight, RefreshCw } from \"../../components/Icons\";\r\nimport Go2RTCPlayer from \"../../components/Go2RTCPlayer\"; // Import optimized player\r\nimport RecorderPlayer from \"../../components/RecorderPlayer\"; // Still used for Channel Setup Large View\r\n\r\nconst videoStyle = { width: \"100%\", height: \"100%\" };\r\n\r\n// Sub-component for auto-refreshing preview (Snapshot Mode for Performance)\r\nexport function LivePreview({ camId, active = true }) {\r\n    const [tick, setTick] = useState(0);\r\n\r\n    useEffect(() => {\r\n        if (!active) return;\r\n        const interval = setInterval(() => setTick(t => t + 1), 3000); // Refresh every 3s\r\n        return () => clearInterval(interval);\r\n    }, [active]);\r\n\r\n    if (!active) return <div style={{ width: \"100%\", height: \"100%\", background: \"#000\" }} />;\r\n\r\n    // Use Go2RTC frame API. Port 1984 is standard. Adjust IP if needed dynamically, but hardcoded for stability now.\r\n    // Use relative path through the local-api proxy to avoid CORS/IP issues\r\n    const snapshotUrl = `/rtc/api/frame.jpeg?src=${camId}_low&_t=${tick}`;\r\n\r\n    return (\r\n        <div style={{ width: \"100%\", height: \"100%\", background: \"#000\", overflow: \"hidden\" }}>\r\n            <img\r\n                src={snapshotUrl}\r\n                alt={camId}\r\n                style={{ width: \"100%\", height: \"100%\", objectFit: \"cover\" }}\r\n                onError={(e) => { e.target.style.display = 'none'; }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\n// --- REWRITTEN ROI COMPONENT ---\r\n// Uses normalized coordinates (0-1) for storage, mapped to dynamic pixel size for display.\r\nexport function CanvasROI({ points = [], onChange, readOnly = false, otherZones = [] }) {\r\n    const containerRef = useRef(null);\r\n    const canvasRef = useRef(null);\r\n    const [dims, setDims] = useState({ w: 0, h: 0 }); // Container dimensions\r\n    const [draggingIdx, setDraggingIdx] = useState(-1);\r\n\r\n    // 1. Measure Container Size\r\n    useEffect(() => {\r\n        const obs = new ResizeObserver(entries => {\r\n            for (const entry of entries) {\r\n                const { width, height } = entry.contentRect;\r\n                setDims({ w: Math.round(width), h: Math.round(height) });\r\n            }\r\n        });\r\n        if (containerRef.current) obs.observe(containerRef.current);\r\n        return () => obs.disconnect();\r\n    }, []);\r\n\r\n    // 2. Draw Loop\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas || dims.w === 0 || dims.h === 0) return;\r\n        const ctx = canvas.getContext(\"2d\");\r\n\r\n        // Clear (using the set Dims)\r\n        ctx.clearRect(0, 0, dims.w, dims.h);\r\n\r\n        // Drawing Helper\r\n        const drawZone = (pts, stroke, fill) => {\r\n            if (!pts || pts.length === 0) return;\r\n            ctx.beginPath();\r\n            // Move to first\r\n            ctx.moveTo(pts[0][0] * dims.w, pts[0][1] * dims.h);\r\n            // Lines to rest\r\n            for (let i = 1; i < pts.length; i++) {\r\n                ctx.lineTo(pts[i][0] * dims.w, pts[i][1] * dims.h);\r\n            }\r\n            ctx.closePath();\r\n            ctx.strokeStyle = stroke;\r\n            ctx.fillStyle = fill;\r\n            ctx.lineWidth = 2;\r\n            ctx.fill();\r\n            ctx.stroke();\r\n\r\n            // Handles (only for active, editable)\r\n            if (!readOnly && stroke === \"#00ff00\") {\r\n                ctx.fillStyle = \"#fff\";\r\n                pts.forEach(p => {\r\n                    ctx.beginPath();\r\n                    ctx.arc(p[0] * dims.w, p[1] * dims.h, 4, 0, Math.PI * 2);\r\n                    ctx.fill();\r\n                });\r\n            }\r\n        };\r\n\r\n        // Draw Inactive Zones\r\n        otherZones.forEach(z => {\r\n            if (z.points) drawZone(z.points, \"rgba(0,122,204,0.5)\", \"rgba(0,122,204,0.2)\");\r\n        });\r\n\r\n        // Draw Active Zone\r\n        // Ensure points are normalized (0-1). If > 1, convert on fly to support legacy.\r\n        const safePoints = points.map(p => [\r\n            p[0] > 1 ? p[0] / dims.w : p[0],\r\n            p[1] > 1 ? p[1] / dims.h : p[1]\r\n        ]);\r\n\r\n        drawZone(safePoints, readOnly ? \"#ff9800\" : \"#00ff00\", readOnly ? \"rgba(255,152,0,0.25)\" : \"rgba(0,255,0,0.15)\");\r\n\r\n    }, [points, dims, readOnly, otherZones]);\r\n\r\n    // 3. Interactions\r\n    const handleMouseDown = (e) => {\r\n        if (readOnly) return;\r\n\r\n        // Use native Offset - much faster and accurate relative to element\r\n        const x = e.nativeEvent.offsetX;\r\n        const y = e.nativeEvent.offsetY;\r\n\r\n        // Normalize\r\n        const nx = Math.max(0, Math.min(1, x / dims.w));\r\n        const ny = Math.max(0, Math.min(1, y / dims.h));\r\n\r\n        // Check hit (distance in pixels)\r\n        // Convert existing points to pixels for check\r\n        const hitIdx = points.findIndex(p => {\r\n            const px = p[0] > 1 ? p[0] : p[0] * dims.w;\r\n            const py = p[1] > 1 ? p[1] : p[1] * dims.h;\r\n            return Math.sqrt((px - x) ** 2 + (py - y) ** 2) < 10;\r\n        });\r\n\r\n        if (hitIdx !== -1) {\r\n            setDraggingIdx(hitIdx);\r\n        } else {\r\n            // Add new point (Normalized)\r\n            onChange([...points, [nx, ny]]);\r\n        }\r\n    };\r\n\r\n    const handleMouseMove = (e) => {\r\n        if (draggingIdx === -1 || readOnly) return;\r\n\r\n        const x = e.nativeEvent.offsetX;\r\n        const y = e.nativeEvent.offsetY;\r\n\r\n        const nx = Math.max(0, Math.min(1, x / dims.w));\r\n        const ny = Math.max(0, Math.min(1, y / dims.h));\r\n\r\n        const newPoints = [...points];\r\n        newPoints[draggingIdx] = [nx, ny];\r\n        onChange(newPoints);\r\n    };\r\n\r\n    const handleMouseUp = () => setDraggingIdx(-1);\r\n\r\n    return (\r\n        <div ref={containerRef} style={{ position: \"absolute\", top: 0, left: 0, width: \"100%\", height: \"100%\", zIndex: 10 }}>\r\n            <canvas\r\n                ref={canvasRef}\r\n                width={dims.w} // Lock resolution to physical pixels\r\n                height={dims.h}\r\n                style={{ width: \"100%\", height: \"100%\", display: \"block\", cursor: readOnly ? \"default\" : \"crosshair\" }}\r\n                onMouseDown={handleMouseDown}\r\n                onMouseMove={handleMouseMove}\r\n                onMouseUp={handleMouseUp}\r\n                onMouseLeave={handleMouseUp}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nconst styles = {\r\n    inputTable: { background: \"#444\", border: \"1px solid #555\", color: \"#fff\", width: \"100%\", padding: 2 },\r\n    btnPrimary: { marginRight: 10, padding: \"6px 20px\", background: \"#007acc\", color: \"white\", border: \"none\", borderRadius: 2, fontSize: 13, cursor: \"pointer\", fontWeight: \"bold\" },\r\n    btnToolbar: { marginRight: 10, padding: \"6px 15px\", background: \"#333\", color: \"#ddd\", border: \"1px solid #444\", borderRadius: 2, fontSize: 12, cursor: \"pointer\" },\r\n};\r\n\r\nexport function IPDevicesRootSection({ cams, statusData = {}, onEditCam, onSelectCam, onDeleteCam }) {\r\n    return (\r\n        <div style={{ padding: 20 }}>\r\n            <h2 style={{ fontSize: 18, marginBottom: 20, color: \"#fff\" }}>Gestionare Dispozitive IP</h2>\r\n            <div style={{ display: \"grid\", gridTemplateColumns: \"repeat(auto-fill, minmax(300px, 1fr))\", gap: 20 }}>\r\n                {cams.map(c => (\r\n                    <div key={c.id} style={{ background: \"#252526\", border: \"1px solid #444\", borderRadius: 4, overflow: \"hidden\" }}>\r\n                        <div style={{ height: 150, background: \"#000\", position: \"relative\" }}>\r\n                            <LivePreview camId={c.id} active={true} />\r\n                            <div style={{ position: \"absolute\", bottom: 0, left: 0, right: 0, padding: 10, background: \"rgba(0,0,0,0.7)\", color: \"#fff\", fontSize: 14 }}>\r\n                                {c.name || c.ip}\r\n                            </div>\r\n                        </div>\r\n                        <div style={{ padding: 15 }}>\r\n                            <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 10 }}>\r\n                                <div style={{ fontSize: 13, fontWeight: \"bold\", color: \"#fff\" }}>{c.ip}</div>\r\n                                <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"flex-end\" }}>\r\n                                    {statusData[c.id]?.connected ?\r\n                                        <div style={{ fontSize: 11, color: \"#4caf50\", background: \"rgba(76,175,80,0.1)\", padding: \"2px 6px\", borderRadius: 4 }}>Active ({statusData[c.id].fps || 0} FPS)</div> :\r\n                                        <div style={{ fontSize: 11, color: \"#f44336\", background: \"rgba(244,67,54,0.1)\", padding: \"2px 6px\", borderRadius: 4 }}>Offline</div>\r\n                                    }\r\n                                    <div style={{ fontSize: 9, color: \"#888\", marginTop: 3 }}>\r\n                                        Check: {new Date().toLocaleTimeString()}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div style={{ fontSize: 12, color: \"#aaa\", marginBottom: 10 }}>Model: {c.model || \"Generic\"} | {c.manufacturer}</div>\r\n                            <div style={{ display: \"flex\", gap: 10, marginBottom: 10 }}>\r\n                                <button style={{ ...styles.btnToolbar, flex: 1 }} onClick={() => onEditCam(c)}><Edit size={12} /> Edit</button>\r\n                                <button style={{ ...styles.btnToolbar, flex: 1 }} onClick={() => onSelectCam(c.id)}><SettingsIcon size={12} /> Config</button>\r\n                            </div>\r\n                            <button\r\n                                style={{\r\n                                    width: \"100%\", padding: \"6px 0\", background: \"rgba(244, 67, 54, 0.1)\",\r\n                                    border: \"1px solid #d32f2f\", color: \"#e57373\", borderRadius: 2,\r\n                                    fontSize: 12, cursor: \"pointer\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", gap: 5\r\n                                }}\r\n                                onClick={() => onDeleteCam(c.id)}\r\n                            >\r\n                                <Trash size={12} /> Delete Device\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function CameraSettingsSection({\r\n    cam, statusData, updateCam, saveAll, deleteCam, openEditModal, setSelection\r\n}) {\r\n    const [syncing, setSyncing] = useState(false);\r\n    const [caps, setCaps] = useState(null); // Store dynamic device capabilities\r\n\r\n    const fetchDeviceConfig = async () => {\r\n        if (!cam || !cam.id) return;\r\n        try {\r\n            const res = await API.get(`/device-config/${cam.id}`);\r\n            const { current, capabilities } = res.data;\r\n            if (current) {\r\n                // Update local storage state with real device values\r\n                if (current.codec) updateCam(cam.id, \"codec\", current.codec);\r\n                if (current.fps) updateCam(cam.id, \"fps\", current.fps);\r\n                if (current.gop) updateCam(cam.id, \"gop\", current.gop);\r\n                if (current.resolution) updateCam(cam.id, \"resolution\", current.resolution);\r\n            }\r\n            if (capabilities) {\r\n                setCaps(capabilities);\r\n            }\r\n        } catch (e) {\r\n            console.warn(`[CamSync] Polling failed for ${cam.ip}:`, e.message);\r\n        }\r\n    };\r\n\r\n    // Initial load and periodic polling (every 10s)\r\n    useEffect(() => {\r\n        fetchDeviceConfig();\r\n        const timer = setInterval(fetchDeviceConfig, 10000);\r\n        return () => clearInterval(timer);\r\n    }, [cam?.id]);\r\n\r\n    const handleRemoteChange = async (key, val) => {\r\n        // 1. Optimistic Update (UI)\r\n        updateCam(cam.id, key, val);\r\n\r\n        // 2. Send to Device\r\n        setSyncing(true);\r\n        try {\r\n            console.log(`[CamSync] Updating ${key} to ${val} for ${cam.ip}...`);\r\n            await API.post(`/device-config/${cam.id}`, { [key]: val });\r\n\r\n            // Backend now handles saving to cameras.json, so we don't need saveAll() here.\r\n            // This avoids race conditions with stale frontend state.\r\n\r\n            // Confirm with a fresh fetch\r\n            setTimeout(fetchDeviceConfig, 1500);\r\n        } catch (e) {\r\n            console.error(`[CamSync] Update failed:`, e);\r\n            alert(`Failed to update camera: ${e.response?.data?.error || e.message}`);\r\n            // Revert or sync back on error\r\n            fetchDeviceConfig();\r\n        } finally {\r\n            setSyncing(false);\r\n        }\r\n    };\r\n\r\n    if (!cam) return <div>Camera not found</div>;\r\n    return (\r\n        <div style={{ padding: 20, display: \"flex\", flexDirection: \"column\", height: \"100%\" }}>\r\n            <div style={{ marginBottom: 20 }}>\r\n                <h2 style={{ fontSize: 18, marginBottom: 15, color: \"#fff\" }}>Camera {cam.ip}</h2>\r\n                <div style={{ display: \"grid\", gridTemplateColumns: \"100px 1fr\", gap: 10, maxWidth: 600, marginBottom: 15 }}>\r\n                    <label>Model:</label> <div style={{ fontWeight: \"bold\" }}>{cam.model || \"Autodetect\"}</div>\r\n                    <label>Device Name:</label>\r\n                    <input style={{ background: \"#333\", border: \"1px solid #555\", color: \"#ddd\", padding: 4 }}\r\n                        value={cam.name || `Camera ${cam.ip}`}\r\n                        onChange={e => updateCam(cam.id, \"name\", e.target.value)}\r\n                        onBlur={() => saveAll()}\r\n                    />\r\n                </div>\r\n                <div style={{ marginBottom: 10, display: \"flex\", alignItems: \"center\", gap: 15 }}>\r\n                    <span>IP Address: <b style={{ color: \"#fff\" }}>{cam.ip}</b></span>\r\n                    <span>Port: <b style={{ color: \"#fff\" }}>{cam.port}</b></span>\r\n                    <span>User: <b style={{ color: \"#fff\" }}>{cam.user}</b></span>\r\n                    <button onClick={() => openEditModal(cam)} style={{ color: \"rgb(66, 165, 245)\", background: \"none\", border: \"none\", cursor: \"pointer\", textDecoration: \"underline\", padding: 0 }}>Setup connection</button>\r\n                </div>\r\n                {cam.storagePath && (\r\n                    <div style={{ marginBottom: 20, fontSize: 13, color: \"#ccc\", display: \"flex\", alignItems: \"center\", gap: 5 }}>\r\n                        Storage Path:\r\n                        <span\r\n                            title=\"Click to view recordings\"\r\n                            onClick={() => window.location.href = `/playback?camId=${cam.id}`}\r\n                            style={{ fontFamily: \"monospace\", color: \"#81d4fa\", cursor: \"pointer\", textDecoration: \"underline\", background: \"rgba(33, 150, 243, 0.1)\", padding: \"2px 6px\", borderRadius: 4 }}\r\n                        >\r\n                            {cam.storagePath} [->]\r\n                        </span>\r\n                    </div>\r\n                )}\r\n                <div style={{ display: \"grid\", gridTemplateColumns: \"repeat(6, auto)\", gap: 10, marginBottom: 20, alignItems: \"center\", justifyContent: \"start\" }}>\r\n                    <button style={{ ...styles.btnToolbar, width: 120, background: (cam.enabled !== false) ? \"#333\" : \"#4caf50\", color: (cam.enabled !== false) ? \"#ddd\" : \"#fff\" }} onClick={() => { const next = (cam.enabled !== false) ? false : true; updateCam(cam.id, \"enabled\", !!next); saveAll(); }}>{(cam.enabled !== false) ? \"Disable\" : \"Enable\"}</button>\r\n                    <button style={{ ...styles.btnToolbar, width: 120 }} onClick={() => deleteCam(cam.id)}><Trash size={12} style={{ marginRight: 5 }} /> Delete...</button>\r\n                    <button\r\n                        style={{ ...styles.btnToolbar, background: \"rgba(0,122,204,0.1)\", border: \"1px solid #007acc\", color: \"#81d4fa\", width: 160 }}\r\n                        onClick={() => setSelection({ type: \"CHANNEL\", id: cam.id })}\r\n                    >\r\n                        <SettingsIcon size={12} style={{ marginRight: 5 }} /> AI / Channel Setup\r\n                    </button>\r\n                    <a href={`http://${cam.ip}`} target=\"_blank\" rel=\"noreferrer\" style={{ color: \"rgb(66, 165, 245)\", textDecoration: \"none\", alignSelf: \"center\", margin: \"0 10px\" }}>Web Interface</a>\r\n                </div>\r\n\r\n                <div style={{ marginBottom: 30, display: \"flex\", alignItems: \"center\", gap: 20 }}>\r\n                    {statusData[cam.id]?.connected ?\r\n                        <div>State: <span style={{ color: \"rgb(76, 175, 80)\", fontWeight: \"bold\" }}>Connected</span></div> :\r\n                        <div>State: <span style={{ color: \"#f44336\", fontWeight: \"bold\" }}>Disconnected production</span> <span style={{ fontSize: 11, color: \"#ffa726\", marginLeft: 10 }}>{statusData[cam.id]?.lastError ? <><AlertTriangle size={10} /> {statusData[cam.id].lastError}</> : \"(Retry in 5s...)\"}</span></div>\r\n                    }\r\n\r\n                    <button\r\n                        onClick={fetchDeviceConfig}\r\n                        style={{\r\n                            background: \"rgba(255,255,255,0.05)\",\r\n                            border: \"1px solid #444\",\r\n                            color: \"#fff\",\r\n                            padding: \"4px 10px\",\r\n                            borderRadius: 4,\r\n                            cursor: \"pointer\",\r\n                            fontSize: 12,\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            gap: 5\r\n                        }}\r\n                        disabled={syncing}\r\n                    >\r\n                        {syncing ? \"Syncing...\" : \"ðŸ”„ Refresh State\"}\r\n                    </button>\r\n                    <span style={{ color: \"#666\", fontSize: 11 }}>Auto-sync active (10s)</span>\r\n                </div>\r\n\r\n                <div style={{ display: \"flex\", gap: 20 }}>\r\n                    <div style={{ width: 160, height: 90, background: \"#000\", border: \"1px solid #444\", position: \"relative\" }}>\r\n                        <LivePreview camId={cam.id} active={true} />\r\n                    </div>\r\n                    <div style={{ flex: 1, position: \"relative\" }}>\r\n                        <div style={{ display: \"grid\", gridTemplateColumns: \"100px 100px 120px 80px 80px\", gap: 10, fontSize: 12, fontWeight: \"bold\", marginBottom: 5, color: \"#aaa\" }}>\r\n                            <div></div><div>Codec</div><div>Resolution</div><div>GOP</div><div>FPS</div>\r\n                        </div>\r\n                        <div style={{ display: \"grid\", gridTemplateColumns: \"100px 100px 120px 80px 80px\", gap: 10, marginBottom: 10, alignItems: \"center\" }}>\r\n                            <div style={{ color: cam.codec === \"H.265\" ? \"#ffa726\" : \"#4caf50\" }}>\r\n                                <input type=\"checkbox\" checked readOnly style={{ marginRight: 5 }} /> Video\r\n                                {cam.codec === \"H.265\" && <span title=\"WebRTC doesn't support H.265 natively\"> âš ï¸</span>}\r\n                            </div>\r\n\r\n                            <select style={styles.inputTable} value={cam.codec || \"H.264\"} onChange={e => handleRemoteChange(\"codec\", e.target.value)}>\r\n                                {caps?.codecs?.map(c => <option key={c} value={c}>{c}</option>) || <option>H.264</option>}\r\n                            </select>\r\n\r\n                            <select style={styles.inputTable} value={cam.resolution} onChange={e => handleRemoteChange(\"resolution\", e.target.value)}>\r\n                                {caps?.resolutions?.map(r => (\r\n                                    <option key={`${r.width}x${r.height}`} value={`${r.width}x${r.height}`}>\r\n                                        {r.label}\r\n                                    </option>\r\n                                )) || <option>{cam.resolution}</option>}\r\n                            </select>\r\n\r\n                            <input style={styles.inputTable}\r\n                                type=\"number\"\r\n                                value={cam.gop || 20}\r\n                                min={caps?.gopRange?.min || 1}\r\n                                max={caps?.gopRange?.max || 400}\r\n                                onChange={e => updateCam(cam.id, \"gop\", e.target.value)}\r\n                                onBlur={e => handleRemoteChange(\"gop\", e.target.value)}\r\n                            />\r\n\r\n                            <select style={styles.inputTable} value={cam.fps || 25} onChange={e => handleRemoteChange(\"fps\", e.target.value)}>\r\n                                {caps?.fps?.map(f => <option key={f} value={f}>{f} fps</option>) || <option>{cam.fps} fps</option>}\r\n                            </select>\r\n                        </div>\r\n                        {cam.codec === \"H.265\" && (\r\n                            <div style={{ color: \"#ffa726\", fontSize: 11, marginTop: 5 }}>\r\n                                <AlertTriangle size={10} /> Camera is in H.265 mode. Switch to H.264 for better grid performance and browser compatibility.\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function ChannelSettingsSection({\r\n    cam, cams, setCams, setSelection, availableModules, updateCam, saveAll\r\n}) {\r\n    const [activeZoneIdx, setActiveZoneIdx] = useState(0);\r\n    const [isDrawing, setIsDrawing] = useState(false);\r\n    const [roiPoints, setRoiPoints] = useState([]);\r\n\r\n    const camAI = cam.ai_server || {};\r\n    let zones = camAI.zones || [];\r\n    if (zones.length === 0 && camAI.roi && camAI.roi.length > 0) {\r\n        zones = [{ name: \"Default Zone\", points: camAI.roi, objects: camAI.objects || {} }];\r\n    }\r\n\r\n    const safeIdx = (activeZoneIdx >= zones.length) ? 0 : activeZoneIdx;\r\n    const activeZone = zones[safeIdx] || null;\r\n    const pointsToShow = isDrawing ? roiPoints : (activeZone?.points || []);\r\n\r\n    const silentSave = async (updatedCams) => {\r\n        try {\r\n            await API.post(\"/cameras/config\", updatedCams);\r\n        } catch (e) {\r\n            console.error(\"Silent save failed\", e);\r\n            alert(\"Error saving settings: \" + e.message);\r\n        }\r\n    };\r\n\r\n    const handleSaveZonePoints = () => {\r\n        setIsDrawing(false);\r\n        const newZones = [...zones];\r\n        if (!newZones[safeIdx]) return;\r\n        newZones[safeIdx] = { ...newZones[safeIdx], points: roiPoints };\r\n        const newConf = { ...camAI, zones: newZones, enabled: true };\r\n        const updatedCams = cams.map(c => c.id === cam.id ? { ...c, ai_server: newConf } : c);\r\n        setCams(updatedCams);\r\n        silentSave(updatedCams);\r\n    };\r\n\r\n    const handleAddZone = () => {\r\n        const newName = `Zone ${zones.length + 1}`;\r\n        const newZones = [...zones, { name: newName, points: [], objects: {} }];\r\n        const newConf = { ...camAI, zones: newZones };\r\n        const updatedCams = cams.map(c => c.id === cam.id ? { ...c, ai_server: newConf } : c);\r\n        setCams(updatedCams);\r\n        setActiveZoneIdx(newZones.length - 1);\r\n        silentSave(updatedCams);\r\n    };\r\n\r\n    const handleDeleteZone = () => {\r\n        if (!activeZone) return;\r\n        if (!window.confirm(`Delete ${activeZone.name}?`)) return;\r\n        const newZones = zones.filter((_, i) => i !== safeIdx);\r\n        const newConf = { ...camAI, zones: newZones };\r\n        const updatedCams = cams.map(c => c.id === cam.id ? { ...c, ai_server: newConf } : c);\r\n        setCams(updatedCams);\r\n        setActiveZoneIdx(0);\r\n        silentSave(updatedCams);\r\n    };\r\n\r\n    const handleObjectToggle = (objKey) => {\r\n        if (!activeZone) return;\r\n        const newObjs = { ...(activeZone.objects || {}), [objKey]: !activeZone.objects?.[objKey] };\r\n        const newZones = [...zones];\r\n        newZones[safeIdx] = { ...newZones[safeIdx], objects: newObjs };\r\n        const newConf = { ...camAI, zones: newZones };\r\n        const updatedCams = cams.map(c => c.id === cam.id ? { ...c, ai_server: newConf } : c);\r\n        setCams(updatedCams);\r\n        silentSave(updatedCams);\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: 20 }}>\r\n            <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"baseline\", marginBottom: 15 }}>\r\n                <h2 style={{ fontSize: 18, margin: 0, color: \"#fff\" }}>AI Zones: {cam.name || cam.ip}</h2>\r\n                <button onClick={() => setSelection({ type: \"CAMERA\", id: cam.id })} style={{ color: \"rgb(66, 165, 245)\", background: \"none\", border: \"none\", cursor: \"pointer\", fontSize: 13 }}>[Back] Back to Hardware Settings</button>\r\n            </div>\r\n\r\n            <div style={{ display: \"flex\", gap: 20, height: 500 }}>\r\n                <div style={{ flex: 3, display: \"flex\", flexDirection: \"column\" }}>\r\n                    {/* FIXED ASPECT RATIO 16:9 to match Camera Stream and ensure Canvas overlay aligns perfectly */}\r\n                    <div style={{ width: \"100%\", aspectRatio: \"16/9\", border: \"2px solid #444\", borderRadius: 4, overflow: \"hidden\", background: \"#000\", position: \"relative\" }}>\r\n                        <Go2RTCPlayer camId={cam.id} style={videoStyle} streamType=\"hd\" />\r\n                        <div style={{ position: \"absolute\", top: 0, left: 0, right: 0, bottom: 0, zIndex: 10 }}>\r\n                            {activeZone ? (\r\n                                <CanvasROI\r\n                                    points={pointsToShow}\r\n                                    onChange={isDrawing ? setRoiPoints : undefined}\r\n                                    readOnly={!isDrawing}\r\n                                    width={800} height={450}\r\n                                    otherZones={zones.filter((_, i) => i !== safeIdx)}\r\n                                />\r\n                            ) : (\r\n                                <div style={{ color: \"#fff\", position: \"absolute\", top: \"50%\", left: \"50%\", transform: \"translate(-50%,-50%)\" }}>Select or Add a Zone</div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {activeZone && (\r\n                        <div style={{ marginTop: 10, display: \"flex\", gap: 10, padding: 8, background: \"#252526\", borderRadius: 4, border: \"1px solid #333\", alignItems: \"center\" }}>\r\n                            <span style={{ fontSize: 12, color: \"#aaa\", fontWeight: \"bold\", marginRight: 10 }}>Zone Actions:</span>\r\n                            {isDrawing ? (\r\n                                <>\r\n                                    <button style={{ ...styles.btnPrimary, background: \"#4caf50\" }} onClick={handleSaveZonePoints}>[SAVE] Save Area</button>\r\n                                    <button style={styles.btnToolbar} onClick={() => { setIsDrawing(false); setRoiPoints([]); }}>Cancel</button>\r\n                                </>\r\n                            ) : (\r\n                                <button style={{ ...styles.btnPrimary, background: \"#2196f3\" }} onClick={() => { setRoiPoints(activeZone.points || []); setIsDrawing(true); }}>[EDIT] Edit Area</button>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div style={{ flex: 1, background: \"#1e1e1e\", border: \"1px solid #444\", padding: 15, display: \"flex\", flexDirection: \"column\" }}>\r\n                    <div style={{ marginBottom: 20, flex: 1, overflowY: \"auto\" }}>\r\n                        <div style={{ borderBottom: \"1px solid #444\", marginBottom: 15, paddingBottom: 15 }}>\r\n                            <h4 style={{ margin: \"0 0 10px 0\", color: colors.accent, fontSize: 13 }}>AI Configuration</h4>\r\n                            <div style={{ marginBottom: 15 }}>\r\n                                <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 5 }}>\r\n                                    <label style={{ fontSize: 12, color: \"#aaa\" }}>Sensitivity: {(cam.ai_server?.sensitivity * 100 || 50).toFixed(0)}%</label>\r\n                                </div>\r\n                                <input\r\n                                    type=\"range\" min=\"0\" max=\"1\" step=\"0.05\"\r\n                                    value={cam.ai_server?.sensitivity || 0.5}\r\n                                    onChange={e => {\r\n                                        const next = { ...cam.ai_server, sensitivity: parseFloat(e.target.value) };\r\n                                        const updated = cams.map(c => c.id === cam.id ? { ...c, ai_server: next } : c);\r\n                                        setCams(updated); silentSave(updated);\r\n                                    }}\r\n                                    style={{ width: \"100%\", cursor: \"pointer\" }}\r\n                                />\r\n                                <div style={{ display: \"flex\", justifyContent: \"space-between\", fontSize: 10, color: \"#666\", marginTop: 4 }}>\r\n                                    <span>0% (Filtrare MaximÄƒ)</span>\r\n                                    <span>100% (AlertÄƒ MaximÄƒ)</span>\r\n                                </div>\r\n                                <p style={{ fontSize: 11, color: \"#888\", marginTop: 8, lineHeight: \"1.4\" }}>\r\n                                    <b>0%:</b> Doar obiecte foarte clare. Reduce alarmele false (umbre, insecte).<br />\r\n                                    <b>100%:</b> DetecteazÄƒ orice miÈ™care suspectÄƒ. Risc ridicat de alarme false.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 10 }}>\r\n                            <h4 style={{ margin: 0, color: \"#ddd\" }}>Detection Zones</h4>\r\n                            <button style={{ background: \"#4caf50\", color: \"#fff\", border: \"none\", borderRadius: 2, cursor: \"pointer\", padding: \"2px 8px\", fontSize: 16 }} onClick={handleAddZone}>+</button>\r\n                        </div>\r\n                        <div style={{ display: \"flex\", flexDirection: \"column\", gap: 5 }}>\r\n                            {zones.map((z, idx) => (\r\n                                <div key={idx} onClick={() => { setActiveZoneIdx(idx); setIsDrawing(false); }}\r\n                                    style={{ padding: \"8px 10px\", background: idx === safeIdx ? \"#2196f3\" : \"#333\", color: \"#fff\", borderRadius: 3, cursor: \"pointer\", fontSize: 13, display: \"flex\", justifyContent: \"space-between\" }}>\r\n                                    <span>{z.name}</span>\r\n                                    {idx === safeIdx && <button onClick={(e) => { e.stopPropagation(); handleDeleteZone(); }} style={{ background: \"transparent\", border: \"none\", color: \"#fff\", cursor: \"pointer\" }}>Ã—</button>}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {activeZone && (\r\n                        <div style={{ borderTop: \"1px solid #444\", paddingTop: 15 }}>\r\n                            <h4 style={{ marginTop: 0, color: \"#ddd\", fontSize: 13 }}>Search Objects ({activeZone.name})</h4>\r\n                            <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gap: 8, marginTop: 10 }}>\r\n                                {(() => {\r\n                                    const currentModName = cam.ai_server?.module || \"ai_small\";\r\n                                    const modulesList = Array.isArray(availableModules) ? availableModules : [];\r\n                                    const currentMod = modulesList.find(m => m.name === currentModName);\r\n                                    const displayClasses = currentMod?.classes?.length > 0 ? currentMod.classes : [\"person\", \"car\", \"truck\"];\r\n                                    return displayClasses.map(obj => (\r\n                                        <label key={obj} style={{ display: \"flex\", alignItems: \"center\", color: \"#ccc\", fontSize: 13, cursor: \"pointer\" }}>\r\n                                            <input type=\"checkbox\" checked={activeZone.objects?.[obj] || false} onChange={() => handleObjectToggle(obj)} style={{ marginRight: 8 }} />\r\n                                            {obj}\r\n                                        </label>\r\n                                    ));\r\n                                })()}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div style={{ borderTop: \"1px solid #444\", marginTop: 15, paddingTop: 15 }}>\r\n                        <h4 style={{ margin: \"0 0 10px 0\", color: \"#ddd\", fontSize: 13 }}>Recording Setup</h4>\r\n                        <label style={{ display: \"flex\", alignItems: \"center\", marginBottom: 10, cursor: \"pointer\", color: \"#ccc\", fontSize: 13 }}>\r\n                            <input type=\"checkbox\" checked={cam.record !== false} onChange={e => {\r\n                                const updatedCams = cams.map(c => c.id === cam.id ? { ...c, record: e.target.checked } : c);\r\n                                setCams(updatedCams); silentSave(updatedCams);\r\n                            }} style={{ marginRight: 8 }} />\r\n                            Enable Recording\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}