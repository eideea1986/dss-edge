{"ast":null,"code":"import React,{useEffect,useRef,useState,useCallback}from'react';import API from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Playback=()=>{// 0. URL PARAMS\nconst urlParams=new URLSearchParams(window.location.hash.split('?')[1]);const initCam=urlParams.get('camId');// STATE\nconst[cameras,setCameras]=useState([]);const[camId,setCamId]=useState(initCam||'');const[timelineSegments,setTimelineSegments]=useState([]);const[serverDayStart,setServerDayStart]=useState(0);const[selectedDate,setSelectedDate]=useState(new Date().toISOString().split('T')[0]);const[stats,setStats]=useState({first:null,last:null});// REFS\nconst videoRef=useRef(null);const canvasRef=useRef(null);// 1. LOAD CAMERAS\nuseEffect(()=>{API.get('/cameras').then(res=>{setCameras(res.data);if(!camId&&res.data.length>0)setCamId(res.data[0].id);}).catch(err=>console.error(\"Cameras load error\",err));},[camId]);// 1.5. LOAD STATS\nuseEffect(()=>{if(!camId)return;API.get(\"/playback/stats/\".concat(camId,\"?_t=\").concat(Date.now())).then(res=>setStats(res.data)).catch(console.error);},[camId]);// 2. LOAD SEGMENTS (Când schimb camera sau data)\nuseEffect(()=>{if(!camId)return;// Fetch Timeline Data (Segments + DayStart logic from Backend)\n// Using existing endpoint '/timeline-day' which matched the blueprint's '/api/segments' logic\nAPI.get(\"/playback/timeline-day/\".concat(camId,\"/\").concat(selectedDate,\"?_ts=\").concat(Date.now())).then(res=>{const{segments,dayStart}=res.data;setServerDayStart(dayStart);setTimelineSegments(segments||[]);}).catch(err=>console.error(\"Timeline error\",err));},[camId,selectedDate]);// 3. DRAW TIMELINE (Pe canvas)\nuseEffect(()=>{const canvas=canvasRef.current;if(!canvas||!serverDayStart)return;const ctx=canvas.getContext('2d');const width=canvas.width;const height=canvas.height;const DAY_MS=86400000;// Clear\nctx.fillStyle='#1e1e1e';ctx.fillRect(0,0,width,height);// Hours Grid\nctx.strokeStyle='#444';ctx.lineWidth=1;ctx.beginPath();for(let h=0;h<=24;h++){const x=h/24*width;ctx.moveTo(x,0);ctx.lineTo(x,height);ctx.fillStyle='#888';ctx.fillText(\"\".concat(h,\":00\"),x+2,10);}ctx.stroke();// Draw Segments (Green Bars)\nctx.fillStyle='#2ecc71';// Culoarea ceruta\nconst pxPerMs=width/DAY_MS;timelineSegments.forEach(s=>{const sStart=Number(s.start_ts);const sEnd=s.end_ts===0?Date.now():Number(s.end_ts);// Clamp la ziua curenta\nconst start=Math.max(sStart,serverDayStart);const end=Math.min(sEnd,serverDayStart+DAY_MS);if(end<=start)return;const x=(start-serverDayStart)*pxPerMs;const w=Math.max((end-start)*pxPerMs,2);// Min 2px vizibil\nctx.fillRect(x,15,w,height-15);});},[timelineSegments,serverDayStart]);// 4. CLICK HANDLER (PLAYBACK)\nconst handleCanvasClick=e=>{if(!serverDayStart)return;const canvas=canvasRef.current;const rect=canvas.getBoundingClientRect();const x=e.clientX-rect.left;// Calcul Timestamp Absolut\nconst width=rect.width;const ratio=x/width;const clickTs=Math.floor(serverDayStart+ratio*86400000);console.log(\"[Playback] Seek to: \".concat(new Date(clickTs).toLocaleTimeString(),\" (\").concat(clickTs,\")\"));loadPlayback(clickTs);};const loadPlayback=ts=>{if(videoRef.current){// URL Direct catre Backend (Blueprint Stabil)\n// folosim /stream/ pt controllerul nou\nconst url=\"\".concat(API.defaults.baseURL,\"/playback/stream/\").concat(camId,\"?ts=\").concat(ts,\"&_nocache=\").concat(Date.now());console.log(\"[Player] Loading: \".concat(url));videoRef.current.src=url;videoRef.current.load();videoRef.current.play().catch(e=>console.error(\"Play error:\",e));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"playback-page\",style:{padding:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:10,display:'flex',gap:10},children:[/*#__PURE__*/_jsx(\"select\",{value:camId,onChange:e=>setCamId(e.target.value),style:{padding:5},children:cameras.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c.id,children:c.name||c.ip},c.id))}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:selectedDate,onChange:e=>setSelectedDate(e.target.value),style:{padding:5}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{window.location.reload();// Quickest way to refresh everything\n},style:{padding:'5px 15px',cursor:'pointer',background:'#333',color:'#fff',border:'1px solid #555'},children:\"Refresh\"}),stats.first&&stats.first>1700000000000&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,color:'#2ecc71',alignSelf:'center',fontWeight:'bold',marginLeft:10},children:[\"Archive: \",new Date(stats.first).toLocaleString(),\" \\u2192 \",new Date(stats.last).toLocaleString()]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"video-container\",style:{background:'#000',width:'100%',height:'60vh',marginBottom:10},children:/*#__PURE__*/_jsx(\"video\",{ref:videoRef,id:\"player\",controls:true,autoPlay:true,style:{width:'100%',height:'100%'}})}),/*#__PURE__*/_jsx(\"div\",{className:\"timeline-container\",style:{width:'100%',height:60,position:'relative'},children:/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,id:\"timeline\",width:1800// Rezolutie interna mare pt claritate\n,height:60,style:{width:'100%',height:'100%',cursor:'pointer',background:'#1e1e1e'},onClick:handleCanvasClick})}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:5,color:'#666',fontSize:12},children:\"* Click on the green bars to play.\"})]});};export default Playback;","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","API","jsx","_jsx","jsxs","_jsxs","Playback","urlParams","URLSearchParams","window","location","hash","split","initCam","get","cameras","setCameras","camId","setCamId","timelineSegments","setTimelineSegments","serverDayStart","setServerDayStart","selectedDate","setSelectedDate","Date","toISOString","stats","setStats","first","last","videoRef","canvasRef","then","res","data","length","id","catch","err","console","error","concat","now","segments","dayStart","canvas","current","ctx","getContext","width","height","DAY_MS","fillStyle","fillRect","strokeStyle","lineWidth","beginPath","h","x","moveTo","lineTo","fillText","stroke","pxPerMs","forEach","s","sStart","Number","start_ts","sEnd","end_ts","start","Math","max","end","min","w","handleCanvasClick","e","rect","getBoundingClientRect","clientX","left","ratio","clickTs","floor","log","toLocaleTimeString","loadPlayback","ts","url","defaults","baseURL","src","load","play","className","style","padding","children","marginBottom","display","gap","value","onChange","target","map","c","name","ip","type","onClick","reload","cursor","background","color","border","fontSize","alignSelf","fontWeight","marginLeft","toLocaleString","ref","controls","autoPlay","position","marginTop"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/pages/Playback.js"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\r\nimport API from '../api';\r\n\r\n\r\nconst Playback = () => {\r\n    // 0. URL PARAMS\r\n    const urlParams = new URLSearchParams(window.location.hash.split('?')[1]);\r\n    const initCam = urlParams.get('camId');\r\n\r\n    // STATE\r\n    const [cameras, setCameras] = useState([]);\r\n    const [camId, setCamId] = useState(initCam || '');\r\n\r\n    const [timelineSegments, setTimelineSegments] = useState([]);\r\n    const [serverDayStart, setServerDayStart] = useState(0);\r\n    const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);\r\n    const [stats, setStats] = useState({ first: null, last: null });\r\n\r\n    // REFS\r\n    const videoRef = useRef(null);\r\n    const canvasRef = useRef(null);\r\n\r\n    // 1. LOAD CAMERAS\r\n    useEffect(() => {\r\n        API.get('/cameras').then(res => {\r\n            setCameras(res.data);\r\n            if (!camId && res.data.length > 0) setCamId(res.data[0].id);\r\n        }).catch(err => console.error(\"Cameras load error\", err));\r\n    }, [camId]);\r\n\r\n    // 1.5. LOAD STATS\r\n    useEffect(() => {\r\n        if (!camId) return;\r\n        API.get(`/playback/stats/${camId}?_t=${Date.now()}`)\r\n            .then(res => setStats(res.data))\r\n            .catch(console.error);\r\n    }, [camId]);\r\n\r\n\r\n    // 2. LOAD SEGMENTS (Când schimb camera sau data)\r\n    useEffect(() => {\r\n        if (!camId) return;\r\n\r\n        // Fetch Timeline Data (Segments + DayStart logic from Backend)\r\n        // Using existing endpoint '/timeline-day' which matched the blueprint's '/api/segments' logic\r\n        API.get(`/playback/timeline-day/${camId}/${selectedDate}?_ts=${Date.now()}`)\r\n            .then(res => {\r\n                const { segments, dayStart } = res.data;\r\n                setServerDayStart(dayStart);\r\n                setTimelineSegments(segments || []);\r\n            })\r\n            .catch(err => console.error(\"Timeline error\", err));\r\n\r\n    }, [camId, selectedDate]);\r\n\r\n    // 3. DRAW TIMELINE (Pe canvas)\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas || !serverDayStart) return;\r\n\r\n        const ctx = canvas.getContext('2d');\r\n        const width = canvas.width;\r\n        const height = canvas.height;\r\n        const DAY_MS = 86400000;\r\n\r\n        // Clear\r\n        ctx.fillStyle = '#1e1e1e';\r\n        ctx.fillRect(0, 0, width, height);\r\n\r\n        // Hours Grid\r\n        ctx.strokeStyle = '#444';\r\n        ctx.lineWidth = 1;\r\n        ctx.beginPath();\r\n        for (let h = 0; h <= 24; h++) {\r\n            const x = (h / 24) * width;\r\n            ctx.moveTo(x, 0);\r\n            ctx.lineTo(x, height);\r\n            ctx.fillStyle = '#888';\r\n            ctx.fillText(`${h}:00`, x + 2, 10);\r\n        }\r\n        ctx.stroke();\r\n\r\n        // Draw Segments (Green Bars)\r\n        ctx.fillStyle = '#2ecc71'; // Culoarea ceruta\r\n        const pxPerMs = width / DAY_MS;\r\n\r\n        timelineSegments.forEach(s => {\r\n            const sStart = Number(s.start_ts);\r\n            const sEnd = s.end_ts === 0 ? Date.now() : Number(s.end_ts);\r\n\r\n            // Clamp la ziua curenta\r\n            const start = Math.max(sStart, serverDayStart);\r\n            const end = Math.min(sEnd, serverDayStart + DAY_MS);\r\n\r\n            if (end <= start) return;\r\n\r\n            const x = (start - serverDayStart) * pxPerMs;\r\n            const w = Math.max((end - start) * pxPerMs, 2); // Min 2px vizibil\r\n\r\n            ctx.fillRect(x, 15, w, height - 15);\r\n        });\r\n\r\n    }, [timelineSegments, serverDayStart]);\r\n\r\n    // 4. CLICK HANDLER (PLAYBACK)\r\n    const handleCanvasClick = (e) => {\r\n        if (!serverDayStart) return;\r\n\r\n        const canvas = canvasRef.current;\r\n        const rect = canvas.getBoundingClientRect();\r\n        const x = e.clientX - rect.left;\r\n\r\n        // Calcul Timestamp Absolut\r\n        const width = rect.width;\r\n        const ratio = x / width;\r\n        const clickTs = Math.floor(serverDayStart + ratio * 86400000);\r\n\r\n        console.log(`[Playback] Seek to: ${new Date(clickTs).toLocaleTimeString()} (${clickTs})`);\r\n\r\n        loadPlayback(clickTs);\r\n    };\r\n\r\n    const loadPlayback = (ts) => {\r\n        if (videoRef.current) {\r\n            // URL Direct catre Backend (Blueprint Stabil)\r\n            // folosim /stream/ pt controllerul nou\r\n            const url = `${API.defaults.baseURL}/playback/stream/${camId}?ts=${ts}&_nocache=${Date.now()}`;\r\n            console.log(`[Player] Loading: ${url}`);\r\n\r\n            videoRef.current.src = url;\r\n            videoRef.current.load();\r\n            videoRef.current.play().catch(e => console.error(\"Play error:\", e));\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"playback-page\" style={{ padding: 20 }}>\r\n            {/* TOOLBAR */}\r\n            <div style={{ marginBottom: 10, display: 'flex', gap: 10 }}>\r\n                <select value={camId} onChange={e => setCamId(e.target.value)} style={{ padding: 5 }}>\r\n                    {cameras.map(c => <option key={c.id} value={c.id}>{c.name || c.ip}</option>)}\r\n                </select>\r\n                <input\r\n                    type=\"date\"\r\n                    value={selectedDate}\r\n                    onChange={e => setSelectedDate(e.target.value)}\r\n                    style={{ padding: 5 }}\r\n                />\r\n\r\n\r\n                <button\r\n                    onClick={() => {\r\n                        window.location.reload(); // Quickest way to refresh everything\r\n                    }}\r\n                    style={{ padding: '5px 15px', cursor: 'pointer', background: '#333', color: '#fff', border: '1px solid #555' }}\r\n                >\r\n                    Refresh\r\n                </button>\r\n\r\n                {stats.first && stats.first > 1700000000000 && (\r\n                    <div style={{ fontSize: 13, color: '#2ecc71', alignSelf: 'center', fontWeight: 'bold', marginLeft: 10 }}>\r\n                        Archive: {new Date(stats.first).toLocaleString()} → {new Date(stats.last).toLocaleString()}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n\r\n            {/* PLAYER */}\r\n            <div className=\"video-container\" style={{ background: '#000', width: '100%', height: '60vh', marginBottom: 10 }}>\r\n                <video\r\n                    ref={videoRef}\r\n                    id=\"player\"\r\n                    controls\r\n                    autoPlay\r\n                    style={{ width: '100%', height: '100%' }}\r\n                />\r\n            </div>\r\n\r\n            {/* TIMELINE */}\r\n            <div className=\"timeline-container\" style={{ width: '100%', height: 60, position: 'relative' }}>\r\n                <canvas\r\n                    ref={canvasRef}\r\n                    id=\"timeline\"\r\n                    width={1800} // Rezolutie interna mare pt claritate\r\n                    height={60}\r\n                    style={{ width: '100%', height: '100%', cursor: 'pointer', background: '#1e1e1e' }}\r\n                    onClick={handleCanvasClick}\r\n                />\r\n            </div>\r\n\r\n            <div style={{ marginTop: 5, color: '#666', fontSize: 12 }}>\r\n                * Click on the green bars to play.\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Playback;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}