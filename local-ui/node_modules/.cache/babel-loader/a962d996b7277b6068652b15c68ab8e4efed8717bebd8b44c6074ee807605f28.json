{"ast":null,"code":"import React,{useEffect,useState,useRef}from\"react\";import{useSearchParams}from\"react-router-dom\";import API from\"../api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const styles=\"\\n:root {\\n  --bg: #0b0b0b;\\n  --panel: #1a1a1a;\\n  --timeline-bg: #2a2a2a;\\n  --segment: #00ff00;\\n  --txt: #e0e0e0;\\n  --muted: #888;\\n}\\n\\n.playback-container {\\n  height: 100vh;\\n  display: flex;\\n  flex-direction: column;\\n  background: var(--bg);\\n  color: var(--txt);\\n  font-family: Arial, sans-serif;\\n}\\n\\n.header {\\n  height: 45px;\\n  background: #111;\\n  display: flex;\\n  align-items: center;\\n  padding: 0 15px;\\n  gap: 12px;\\n  border-bottom: 1px solid #333;\\n}\\n\\n.main {\\n  display: grid;\\n  grid-template-rows: 1fr auto;\\n  height: calc(100vh - 45px);\\n}\\n\\n.player {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: #000;\\n  position: relative;\\n}\\n\\nvideo {\\n  max-width: 100%;\\n  max-height: 100%;\\n  background: #000;\\n}\\n\\n.error-overlay {\\n  position: absolute;\\n  color: #ff4444;\\n  font-size: 0.9rem;\\n  top: 10px;\\n  left: 10px;\\n  background: rgba(0,0,0,0.8);\\n  padding: 8px 12px;\\n  border-radius: 4px;\\n}\\n\\n.controls {\\n  background: var(--panel);\\n  padding: 10px 15px;\\n}\\n\\n.timeline-section {\\n  margin-bottom: 8px;\\n  position: relative;\\n}\\n\\n.timeline-wrap {\\n  position: relative;\\n  height: 40px;\\n  background: var(--timeline-bg);\\n  cursor: pointer;\\n  border-radius: 2px;\\n}\\n\\n.seg {\\n  position: absolute;\\n  height: 100%;\\n  background: var(--segment);\\n  opacity: 0.85;\\n}\\n\\n.cursor {\\n  position: absolute;\\n  top: 0;\\n  width: 2px;\\n  height: 100%;\\n  background: #fff;\\n  z-index: 10;\\n}\\n\\n.time-markers {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  height: 100%;\\n  display: flex;\\n  pointer-events: none;\\n}\\n\\n.hour-marker {\\n  flex: 1;\\n  position: relative;\\n  border-left: 1px solid #444;\\n  display: flex;\\n  align-items: flex-end;\\n  justify-content: center;\\n  padding-bottom: 2px;\\n}\\n\\n.hour-marker span {\\n  font-size: 10px;\\n  color: var(--muted);\\n}\\n\\n.row {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  flex-wrap: wrap;\\n  margin-top: 8px;\\n}\\n\\nbutton, select {\\n  background: #2a2a2a;\\n  color: #fff;\\n  border: 1px solid #444;\\n  padding: 5px 12px;\\n  border-radius: 3px;\\n  cursor: pointer;\\n  font-size: 12px;\\n}\\n\\nbutton:hover {\\n  background: #333;\\n}\\n\\nbutton.primary {\\n  background: #1db954;\\n  color: #000;\\n  font-weight: 600;\\n}\\n\\nbutton.danger {\\n  background: #e74c3c;\\n}\\n\\n.small {\\n  color: var(--muted);\\n  font-size: 11px;\\n}\\n\";export default function PlaybackPremium(){const[params]=useSearchParams();const camId=params.get(\"camId\");const[segments,setSegments]=useState([]);const[isPlaying,setIsPlaying]=useState(false);const[error,setError]=useState(null);const[timeRange,setTimeRange]=useState(()=>{const now=new Date();const startOfDay=new Date(now.getFullYear(),now.getMonth(),now.getDate(),0,0,0,0);return{from:startOfDay.getTime(),to:startOfDay.getTime()+24*60*60*1000// Full 24h\n};});const videoRef=useRef(null);const pcRef=useRef(null);const cursorRef=useRef(null);const timelineRef=useRef(null);// Load timeline\nconst loadTimeline=async()=>{if(!camId)return;try{const res=await API.get(\"/playback/timeline/\".concat(camId,\"?from=\").concat(timeRange.from,\"&to=\").concat(timeRange.to));setSegments(res.data.segments||[]);setError(null);}catch(e){console.error(\"Timeline error:\",e);setError(\"Eroare la încărcare timeline\");setSegments([]);}};useEffect(()=>{loadTimeline();const interval=setInterval(loadTimeline,60000);return()=>clearInterval(interval);},[camId]);const startPlayback=async()=>{if(segments.length===0){setError(\"Nicio înregistrare disponibilă\");return;}setError(\"BUFFERING...\");try{var _document$getElementB;const res=await API.post('/playback/start',{camId,from:segments[0].start_ts,to:segments[segments.length-1].end_ts||Date.now(),speed:parseFloat(((_document$getElementB=document.getElementById(\"speed\"))===null||_document$getElementB===void 0?void 0:_document$getElementB.value)||1)});console.log(\"[Playback] Started:\",res.data);await connectWebRTC(res.data.webrtcUrl);setIsPlaying(true);setError(null);}catch(e){var _e$response,_e$response$data;console.error(\"[Playback] Error:\",e);setError(\"Eroare: \"+(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.error)||e.message));}};const connectWebRTC=async url=>{if(pcRef.current){pcRef.current.close();}const pc=new RTCPeerConnection({iceServers:[{urls:'stun:stun.l.google.com:19302'}]});pcRef.current=pc;pc.ontrack=event=>{if(videoRef.current){videoRef.current.srcObject=event.streams[0];}};const offer=await pc.createOffer({offerToReceiveVideo:true,offerToReceiveAudio:false});await pc.setLocalDescription(offer);const response=await fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(offer)});const answer=await response.json();await pc.setRemoteDescription(answer);};const stopPlayback=async()=>{try{await API.post('/playback/stop',{camId});if(pcRef.current){pcRef.current.close();pcRef.current=null;}if(videoRef.current){videoRef.current.srcObject=null;}setIsPlaying(false);}catch(e){console.error(\"[Playback] Stop error:\",e);}};const seekTimeline=e=>{const rect=timelineRef.current.getBoundingClientRect();const p=(e.clientX-rect.left)/rect.width;if(cursorRef.current){cursorRef.current.style.left=p*100+\"%\";}const hour=Math.floor(p*24);console.log(\"[Seek] Hour: \".concat(hour,\":00\"));};// Generate 24 hour markers (0-23)\nconst hourMarkers=Array.from({length:25},(_,i)=>i);return/*#__PURE__*/_jsxs(\"div\",{className:\"playback-container\",children:[/*#__PURE__*/_jsx(\"style\",{children:styles}),/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href='/',children:\"\\u2190 \\xCEnapoi\"}),/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:600},children:[\"Playback Premium \\u2014 \",camId]}),/*#__PURE__*/_jsx(\"span\",{className:\"small\",style:{marginLeft:'auto'},children:\"Vitez\\u0103:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"speed\",style:{width:'70px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1x\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2x\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4x\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"small\",children:[\"Segmente: \",segments.length,\" | GOPs: 0\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"player\",children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,muted:true,playsInline:true}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-overlay\",children:error})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"controls\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"timeline-section\",children:/*#__PURE__*/_jsxs(\"div\",{ref:timelineRef,className:\"timeline-wrap\",onClick:seekTimeline,children:[/*#__PURE__*/_jsx(\"div\",{className:\"time-markers\",children:hourMarkers.map(hour=>/*#__PURE__*/_jsx(\"div\",{className:\"hour-marker\",children:/*#__PURE__*/_jsx(\"span\",{children:hour})},hour))}),segments.map((seg,idx)=>/*#__PURE__*/_jsx(\"div\",{className:\"seg\",style:{left:\"\".concat(seg.s*100,\"%\"),width:\"\".concat(Math.max((seg.e-seg.s)*100,0.3),\"%\")}},\"seg-\".concat(idx))),/*#__PURE__*/_jsx(\"div\",{ref:cursorRef,className:\"cursor\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[!isPlaying?/*#__PURE__*/_jsx(\"button\",{className:\"primary\",onClick:startPlayback,children:\"\\u25B6 RED\\u0102\"}):/*#__PURE__*/_jsx(\"button\",{className:\"danger\",onClick:stopPlayback,children:\"\\u25A0 OPRIRE\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"small\",children:[\"play/pause: \",/*#__PURE__*/_jsx(\"strong\",{children:\"Space\"})]})]})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","useSearchParams","API","jsx","_jsx","jsxs","_jsxs","styles","PlaybackPremium","params","camId","get","segments","setSegments","isPlaying","setIsPlaying","error","setError","timeRange","setTimeRange","now","Date","startOfDay","getFullYear","getMonth","getDate","from","getTime","to","videoRef","pcRef","cursorRef","timelineRef","loadTimeline","res","concat","data","e","console","interval","setInterval","clearInterval","startPlayback","length","_document$getElementB","post","start_ts","end_ts","speed","parseFloat","document","getElementById","value","log","connectWebRTC","webrtcUrl","_e$response","_e$response$data","response","message","url","current","close","pc","RTCPeerConnection","iceServers","urls","ontrack","event","srcObject","streams","offer","createOffer","offerToReceiveVideo","offerToReceiveAudio","setLocalDescription","fetch","method","headers","body","JSON","stringify","answer","json","setRemoteDescription","stopPlayback","seekTimeline","rect","getBoundingClientRect","p","clientX","left","width","style","hour","Math","floor","hourMarkers","Array","_","i","className","children","onClick","window","location","href","fontWeight","marginLeft","id","ref","autoPlay","muted","playsInline","map","seg","idx","s","max"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/pages/Playback.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport API from \"../api\";\r\n\r\nconst styles = `\r\n:root {\r\n  --bg: #0b0b0b;\r\n  --panel: #1a1a1a;\r\n  --timeline-bg: #2a2a2a;\r\n  --segment: #00ff00;\r\n  --txt: #e0e0e0;\r\n  --muted: #888;\r\n}\r\n\r\n.playback-container {\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: var(--bg);\r\n  color: var(--txt);\r\n  font-family: Arial, sans-serif;\r\n}\r\n\r\n.header {\r\n  height: 45px;\r\n  background: #111;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0 15px;\r\n  gap: 12px;\r\n  border-bottom: 1px solid #333;\r\n}\r\n\r\n.main {\r\n  display: grid;\r\n  grid-template-rows: 1fr auto;\r\n  height: calc(100vh - 45px);\r\n}\r\n\r\n.player {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: #000;\r\n  position: relative;\r\n}\r\n\r\nvideo {\r\n  max-width: 100%;\r\n  max-height: 100%;\r\n  background: #000;\r\n}\r\n\r\n.error-overlay {\r\n  position: absolute;\r\n  color: #ff4444;\r\n  font-size: 0.9rem;\r\n  top: 10px;\r\n  left: 10px;\r\n  background: rgba(0,0,0,0.8);\r\n  padding: 8px 12px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.controls {\r\n  background: var(--panel);\r\n  padding: 10px 15px;\r\n}\r\n\r\n.timeline-section {\r\n  margin-bottom: 8px;\r\n  position: relative;\r\n}\r\n\r\n.timeline-wrap {\r\n  position: relative;\r\n  height: 40px;\r\n  background: var(--timeline-bg);\r\n  cursor: pointer;\r\n  border-radius: 2px;\r\n}\r\n\r\n.seg {\r\n  position: absolute;\r\n  height: 100%;\r\n  background: var(--segment);\r\n  opacity: 0.85;\r\n}\r\n\r\n.cursor {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 2px;\r\n  height: 100%;\r\n  background: #fff;\r\n  z-index: 10;\r\n}\r\n\r\n.time-markers {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 100%;\r\n  display: flex;\r\n  pointer-events: none;\r\n}\r\n\r\n.hour-marker {\r\n  flex: 1;\r\n  position: relative;\r\n  border-left: 1px solid #444;\r\n  display: flex;\r\n  align-items: flex-end;\r\n  justify-content: center;\r\n  padding-bottom: 2px;\r\n}\r\n\r\n.hour-marker span {\r\n  font-size: 10px;\r\n  color: var(--muted);\r\n}\r\n\r\n.row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  flex-wrap: wrap;\r\n  margin-top: 8px;\r\n}\r\n\r\nbutton, select {\r\n  background: #2a2a2a;\r\n  color: #fff;\r\n  border: 1px solid #444;\r\n  padding: 5px 12px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n}\r\n\r\nbutton:hover {\r\n  background: #333;\r\n}\r\n\r\nbutton.primary {\r\n  background: #1db954;\r\n  color: #000;\r\n  font-weight: 600;\r\n}\r\n\r\nbutton.danger {\r\n  background: #e74c3c;\r\n}\r\n\r\n.small {\r\n  color: var(--muted);\r\n  font-size: 11px;\r\n}\r\n`;\r\n\r\nexport default function PlaybackPremium() {\r\n    const [params] = useSearchParams();\r\n    const camId = params.get(\"camId\");\r\n\r\n    const [segments, setSegments] = useState([]);\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [timeRange, setTimeRange] = useState(() => {\r\n        const now = new Date();\r\n        const startOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 0, 0, 0, 0);\r\n        return {\r\n            from: startOfDay.getTime(),\r\n            to: startOfDay.getTime() + 24 * 60 * 60 * 1000 // Full 24h\r\n        };\r\n    });\r\n\r\n    const videoRef = useRef(null);\r\n    const pcRef = useRef(null);\r\n    const cursorRef = useRef(null);\r\n    const timelineRef = useRef(null);\r\n\r\n    // Load timeline\r\n    const loadTimeline = async () => {\r\n        if (!camId) return;\r\n\r\n        try {\r\n            const res = await API.get(`/playback/timeline/${camId}?from=${timeRange.from}&to=${timeRange.to}`);\r\n            setSegments(res.data.segments || []);\r\n            setError(null);\r\n        } catch (e) {\r\n            console.error(\"Timeline error:\", e);\r\n            setError(\"Eroare la încărcare timeline\");\r\n            setSegments([]);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadTimeline();\r\n        const interval = setInterval(loadTimeline, 60000);\r\n        return () => clearInterval(interval);\r\n    }, [camId]);\r\n\r\n    const startPlayback = async () => {\r\n        if (segments.length === 0) {\r\n            setError(\"Nicio înregistrare disponibilă\");\r\n            return;\r\n        }\r\n\r\n        setError(\"BUFFERING...\");\r\n\r\n        try {\r\n            const res = await API.post('/playback/start', {\r\n                camId,\r\n                from: segments[0].start_ts,\r\n                to: segments[segments.length - 1].end_ts || Date.now(),\r\n                speed: parseFloat(document.getElementById(\"speed\")?.value || 1)\r\n            });\r\n\r\n            console.log(\"[Playback] Started:\", res.data);\r\n            await connectWebRTC(res.data.webrtcUrl);\r\n\r\n            setIsPlaying(true);\r\n            setError(null);\r\n        } catch (e) {\r\n            console.error(\"[Playback] Error:\", e);\r\n            setError(\"Eroare: \" + (e.response?.data?.error || e.message));\r\n        }\r\n    };\r\n\r\n    const connectWebRTC = async (url) => {\r\n        if (pcRef.current) {\r\n            pcRef.current.close();\r\n        }\r\n\r\n        const pc = new RTCPeerConnection({\r\n            iceServers: [{ urls: 'stun:stun.l.google.com:19302' }]\r\n        });\r\n\r\n        pcRef.current = pc;\r\n\r\n        pc.ontrack = (event) => {\r\n            if (videoRef.current) {\r\n                videoRef.current.srcObject = event.streams[0];\r\n            }\r\n        };\r\n\r\n        const offer = await pc.createOffer({\r\n            offerToReceiveVideo: true,\r\n            offerToReceiveAudio: false\r\n        });\r\n\r\n        await pc.setLocalDescription(offer);\r\n\r\n        const response = await fetch(url, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(offer)\r\n        });\r\n\r\n        const answer = await response.json();\r\n        await pc.setRemoteDescription(answer);\r\n    };\r\n\r\n    const stopPlayback = async () => {\r\n        try {\r\n            await API.post('/playback/stop', { camId });\r\n\r\n            if (pcRef.current) {\r\n                pcRef.current.close();\r\n                pcRef.current = null;\r\n            }\r\n\r\n            if (videoRef.current) {\r\n                videoRef.current.srcObject = null;\r\n            }\r\n\r\n            setIsPlaying(false);\r\n        } catch (e) {\r\n            console.error(\"[Playback] Stop error:\", e);\r\n        }\r\n    };\r\n\r\n    const seekTimeline = (e) => {\r\n        const rect = timelineRef.current.getBoundingClientRect();\r\n        const p = (e.clientX - rect.left) / rect.width;\r\n\r\n        if (cursorRef.current) {\r\n            cursorRef.current.style.left = (p * 100) + \"%\";\r\n        }\r\n\r\n        const hour = Math.floor(p * 24);\r\n        console.log(`[Seek] Hour: ${hour}:00`);\r\n    };\r\n\r\n    // Generate 24 hour markers (0-23)\r\n    const hourMarkers = Array.from({ length: 25 }, (_, i) => i);\r\n\r\n    return (\r\n        <div className=\"playback-container\">\r\n            <style>{styles}</style>\r\n\r\n            {/* Header */}\r\n            <div className=\"header\">\r\n                <button onClick={() => window.location.href = '/'}>← Înapoi</button>\r\n                <span style={{ fontWeight: 600 }}>Playback Premium — {camId}</span>\r\n                <span className=\"small\" style={{ marginLeft: 'auto' }}>\r\n                    Viteză:\r\n                </span>\r\n                <select id=\"speed\" style={{ width: '70px' }}>\r\n                    <option value=\"1\">1x</option>\r\n                    <option value=\"2\">2x</option>\r\n                    <option value=\"4\">4x</option>\r\n                </select>\r\n                <span className=\"small\">Segmente: {segments.length} | GOPs: 0</span>\r\n            </div>\r\n\r\n            {/* Main */}\r\n            <div className=\"main\">\r\n                {/* Player */}\r\n                <div className=\"player\">\r\n                    <video ref={videoRef} autoPlay muted playsInline />\r\n                    {error && <div className=\"error-overlay\">{error}</div>}\r\n                </div>\r\n\r\n                {/* Controls */}\r\n                <div className=\"controls\">\r\n                    {/* Timeline */}\r\n                    <div className=\"timeline-section\">\r\n                        <div ref={timelineRef} className=\"timeline-wrap\" onClick={seekTimeline}>\r\n                            {/* Hour markers (0-24) */}\r\n                            <div className=\"time-markers\">\r\n                                {hourMarkers.map(hour => (\r\n                                    <div key={hour} className=\"hour-marker\">\r\n                                        <span>{hour}</span>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            {/* Segments */}\r\n                            {segments.map((seg, idx) => (\r\n                                <div\r\n                                    key={`seg-${idx}`}\r\n                                    className=\"seg\"\r\n                                    style={{\r\n                                        left: `${seg.s * 100}%`,\r\n                                        width: `${Math.max((seg.e - seg.s) * 100, 0.3)}%`\r\n                                    }}\r\n                                />\r\n                            ))}\r\n\r\n                            <div ref={cursorRef} className=\"cursor\" />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Controls row */}\r\n                    <div className=\"row\">\r\n                        {!isPlaying ? (\r\n                            <button className=\"primary\" onClick={startPlayback}>▶ REDĂ</button>\r\n                        ) : (\r\n                            <button className=\"danger\" onClick={stopPlayback}>■ OPRIRE</button>\r\n                        )}\r\n\r\n                        <span className=\"small\">\r\n                            play/pause: <strong>Space</strong>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}