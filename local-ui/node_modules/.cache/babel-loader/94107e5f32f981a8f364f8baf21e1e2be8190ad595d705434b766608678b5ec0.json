{"ast":null,"code":"import _objectSpread from\"I:/dispecerat/github_release/dss-edge/local-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useRef,useState}from\"react\";/**\r\n * DUAL STREAM MANAGER - Trassir-like Instant Switch\r\n * \r\n * FEATURES:\r\n * - Grid: substream only (low bandwidth)\r\n * - Fullscreen: main stream pre-connected in background\r\n * - Switch: instant (<50ms) - no reconnection, no player recreation\r\n * \r\n * ARCHITECTURE:\r\n * - Both streams are acquired when component mounts\r\n * - Substream is attached to video element in grid mode\r\n * - Main stream runs in background (warm standby)\r\n * - On fullscreen: instant switch to main stream\r\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GO2RTC_API=\"\".concat(window.location.origin,\"/rtc\");const streamPool=new Map();/**\r\n * Acquire WebRTC stream (reuses existing connections)\r\n */async function acquireStream(camId){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"sub\";const key=\"\".concat(camId,\"_\").concat(type);if(streamPool.has(key)){const entry=streamPool.get(key);entry.refs++;console.log(\"[DualStream] Reusing \".concat(key,\", refs: \").concat(entry.refs));return entry;}console.log(\"[DualStream] Creating WebRTC for \".concat(key));const pc=new RTCPeerConnection({iceServers:[]});const media=new MediaStream();pc.ontrack=e=>{console.log(\"[DualStream] Track received for \".concat(key));media.addTrack(e.track);};pc.addTransceiver(\"video\",{direction:\"recvonly\"});try{const offer=await pc.createOffer();await pc.setLocalDescription(offer);const res=await fetch(\"\".concat(GO2RTC_API,\"/api/webrtc?src=\").concat(key),{method:\"POST\",headers:{\"Content-Type\":\"application/sdp\"},body:offer.sdp});if(!res.ok){throw new Error(\"WebRTC failed: \".concat(res.status));}const answer=await res.text();await pc.setRemoteDescription({type:\"answer\",sdp:answer});const entry={pc,media,refs:1};streamPool.set(key,entry);return entry;}catch(err){pc.close();throw err;}}/**\r\n * Release stream (with grace period)\r\n */function releaseStream(camId){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"sub\";const key=\"\".concat(camId,\"_\").concat(type);const entry=streamPool.get(key);if(!entry)return;entry.refs--;console.log(\"[DualStream] Released \".concat(key,\", refs: \").concat(entry.refs));if(entry.refs<=0){setTimeout(()=>{const currentEntry=streamPool.get(key);if(currentEntry&&currentEntry.refs<=0){console.log(\"[DualStream] Closing idle \".concat(key));currentEntry.pc.close();streamPool.delete(key);}},15000);// 15s grace period\n}}/**\r\n * DUAL STREAM PLAYER COMPONENT\r\n */export default function DualStreamPlayer(_ref){let{camId,isFullscreen,isHidden,style}=_ref;const videoRef=useRef(null);const[subStream,setSubStream]=useState(null);const[mainStream,setMainStream]=useState(null);const[currentStream,setCurrentStream]=useState(\"sub\");// Acquire SUBSTREAM on mount, MAIN STREAM only on fullscreen (lazy loading)\nuseEffect(()=>{if(isHidden||!camId)return;let active=true;let subEntry;// Always acquire substream\nacquireStream(camId,\"sub\").then(sub=>{if(!active){releaseStream(camId,\"sub\");return;}subEntry=sub;setSubStream(sub);// Start with substream (grid mode)\nif(videoRef.current){videoRef.current.srcObject=sub.media;videoRef.current.play().catch(()=>{});}}).catch(err=>{console.error(\"[DualStream] Error for sub \".concat(camId,\":\"),err);});return()=>{active=false;if(subEntry)releaseStream(camId,\"sub\");};},[camId,isHidden]);// Acquire MAIN STREAM only when fullscreen is activated\nuseEffect(()=>{if(!isFullscreen||isHidden||!camId){// Release main stream when leaving fullscreen\nif(mainStream){releaseStream(camId,\"hd\");setMainStream(null);}return;}let active=true;let mainEntry;acquireStream(camId,\"hd\").then(main=>{if(!active){releaseStream(camId,\"hd\");return;}mainEntry=main;setMainStream(main);// Switch to main stream immediately\nif(videoRef.current){videoRef.current.srcObject=main.media;videoRef.current.play().catch(()=>{});}}).catch(err=>{console.error(\"[DualStream] Error for main \".concat(camId,\":\"),err);});return()=>{active=false;if(mainEntry)releaseStream(camId,\"hd\");};},[isFullscreen,camId,isHidden]);// INSTANT SWITCH on fullscreen change\nuseEffect(()=>{if(!subStream||!mainStream||!videoRef.current)return;const targetStream=isFullscreen?mainStream.media:subStream.media;const targetName=isFullscreen?\"main\":\"sub\";if(currentStream!==targetName){console.log(\"[DualStream] Switching to \".concat(targetName,\" for \").concat(camId));// CRITICAL: Direct srcObject reassignment (no recreation)\nvideoRef.current.srcObject=targetStream;videoRef.current.play().catch(()=>{});setCurrentStream(targetName);}},[isFullscreen,subStream,mainStream,currentStream,camId]);return/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},style),{},{position:\"relative\",background:\"#000\",width:\"100%\",height:\"100%\"}),children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,muted:true,playsInline:true,style:{width:\"100%\",height:\"100%\",objectFit:\"fill\"}}),process.env.NODE_ENV==='development'&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",top:4,right:4,background:\"rgba(0,0,0,0.7)\",color:\"#0f0\",padding:\"2px 6px\",fontSize:10,fontFamily:\"monospace\"},children:currentStream.toUpperCase()})]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","jsx","_jsx","jsxs","_jsxs","GO2RTC_API","concat","window","location","origin","streamPool","Map","acquireStream","camId","type","arguments","length","undefined","key","has","entry","get","refs","console","log","pc","RTCPeerConnection","iceServers","media","MediaStream","ontrack","e","addTrack","track","addTransceiver","direction","offer","createOffer","setLocalDescription","res","fetch","method","headers","body","sdp","ok","Error","status","answer","text","setRemoteDescription","set","err","close","releaseStream","setTimeout","currentEntry","delete","DualStreamPlayer","_ref","isFullscreen","isHidden","style","videoRef","subStream","setSubStream","mainStream","setMainStream","currentStream","setCurrentStream","active","subEntry","then","sub","current","srcObject","play","catch","error","mainEntry","main","targetStream","targetName","_objectSpread","position","background","width","height","children","ref","autoPlay","muted","playsInline","objectFit","process","env","NODE_ENV","top","right","color","padding","fontSize","fontFamily","toUpperCase"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/components/DualStreamPlayer.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\n\r\n/**\r\n * DUAL STREAM MANAGER - Trassir-like Instant Switch\r\n * \r\n * FEATURES:\r\n * - Grid: substream only (low bandwidth)\r\n * - Fullscreen: main stream pre-connected in background\r\n * - Switch: instant (<50ms) - no reconnection, no player recreation\r\n * \r\n * ARCHITECTURE:\r\n * - Both streams are acquired when component mounts\r\n * - Substream is attached to video element in grid mode\r\n * - Main stream runs in background (warm standby)\r\n * - On fullscreen: instant switch to main stream\r\n */\r\n\r\nconst GO2RTC_API = `${window.location.origin}/rtc`;\r\nconst streamPool = new Map();\r\n\r\n/**\r\n * Acquire WebRTC stream (reuses existing connections)\r\n */\r\nasync function acquireStream(camId, type = \"sub\") {\r\n    const key = `${camId}_${type}`;\r\n\r\n    if (streamPool.has(key)) {\r\n        const entry = streamPool.get(key);\r\n        entry.refs++;\r\n        console.log(`[DualStream] Reusing ${key}, refs: ${entry.refs}`);\r\n        return entry;\r\n    }\r\n\r\n    console.log(`[DualStream] Creating WebRTC for ${key}`);\r\n    const pc = new RTCPeerConnection({ iceServers: [] });\r\n    const media = new MediaStream();\r\n\r\n    pc.ontrack = (e) => {\r\n        console.log(`[DualStream] Track received for ${key}`);\r\n        media.addTrack(e.track);\r\n    };\r\n\r\n    pc.addTransceiver(\"video\", { direction: \"recvonly\" });\r\n\r\n    try {\r\n        const offer = await pc.createOffer();\r\n        await pc.setLocalDescription(offer);\r\n\r\n        const res = await fetch(`${GO2RTC_API}/api/webrtc?src=${key}`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/sdp\" },\r\n            body: offer.sdp\r\n        });\r\n\r\n        if (!res.ok) {\r\n            throw new Error(`WebRTC failed: ${res.status}`);\r\n        }\r\n\r\n        const answer = await res.text();\r\n        await pc.setRemoteDescription({ type: \"answer\", sdp: answer });\r\n\r\n        const entry = { pc, media, refs: 1 };\r\n        streamPool.set(key, entry);\r\n        return entry;\r\n    } catch (err) {\r\n        pc.close();\r\n        throw err;\r\n    }\r\n}\r\n\r\n/**\r\n * Release stream (with grace period)\r\n */\r\nfunction releaseStream(camId, type = \"sub\") {\r\n    const key = `${camId}_${type}`;\r\n    const entry = streamPool.get(key);\r\n    if (!entry) return;\r\n\r\n    entry.refs--;\r\n    console.log(`[DualStream] Released ${key}, refs: ${entry.refs}`);\r\n\r\n    if (entry.refs <= 0) {\r\n        setTimeout(() => {\r\n            const currentEntry = streamPool.get(key);\r\n            if (currentEntry && currentEntry.refs <= 0) {\r\n                console.log(`[DualStream] Closing idle ${key}`);\r\n                currentEntry.pc.close();\r\n                streamPool.delete(key);\r\n            }\r\n        }, 15000); // 15s grace period\r\n    }\r\n}\r\n\r\n/**\r\n * DUAL STREAM PLAYER COMPONENT\r\n */\r\nexport default function DualStreamPlayer({ camId, isFullscreen, isHidden, style }) {\r\n    const videoRef = useRef(null);\r\n    const [subStream, setSubStream] = useState(null);\r\n    const [mainStream, setMainStream] = useState(null);\r\n    const [currentStream, setCurrentStream] = useState(\"sub\");\r\n\r\n    // Acquire SUBSTREAM on mount, MAIN STREAM only on fullscreen (lazy loading)\r\n    useEffect(() => {\r\n        if (isHidden || !camId) return;\r\n\r\n        let active = true;\r\n        let subEntry;\r\n\r\n        // Always acquire substream\r\n        acquireStream(camId, \"sub\")\r\n            .then((sub) => {\r\n                if (!active) {\r\n                    releaseStream(camId, \"sub\");\r\n                    return;\r\n                }\r\n                subEntry = sub;\r\n                setSubStream(sub);\r\n\r\n                // Start with substream (grid mode)\r\n                if (videoRef.current) {\r\n                    videoRef.current.srcObject = sub.media;\r\n                    videoRef.current.play().catch(() => { });\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.error(`[DualStream] Error for sub ${camId}:`, err);\r\n            });\r\n\r\n        return () => {\r\n            active = false;\r\n            if (subEntry) releaseStream(camId, \"sub\");\r\n        };\r\n    }, [camId, isHidden]);\r\n\r\n    // Acquire MAIN STREAM only when fullscreen is activated\r\n    useEffect(() => {\r\n        if (!isFullscreen || isHidden || !camId) {\r\n            // Release main stream when leaving fullscreen\r\n            if (mainStream) {\r\n                releaseStream(camId, \"hd\");\r\n                setMainStream(null);\r\n            }\r\n            return;\r\n        }\r\n\r\n        let active = true;\r\n        let mainEntry;\r\n\r\n        acquireStream(camId, \"hd\")\r\n            .then((main) => {\r\n                if (!active) {\r\n                    releaseStream(camId, \"hd\");\r\n                    return;\r\n                }\r\n                mainEntry = main;\r\n                setMainStream(main);\r\n\r\n                // Switch to main stream immediately\r\n                if (videoRef.current) {\r\n                    videoRef.current.srcObject = main.media;\r\n                    videoRef.current.play().catch(() => { });\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.error(`[DualStream] Error for main ${camId}:`, err);\r\n            });\r\n\r\n        return () => {\r\n            active = false;\r\n            if (mainEntry) releaseStream(camId, \"hd\");\r\n        };\r\n    }, [isFullscreen, camId, isHidden]);\r\n\r\n    // INSTANT SWITCH on fullscreen change\r\n    useEffect(() => {\r\n        if (!subStream || !mainStream || !videoRef.current) return;\r\n\r\n        const targetStream = isFullscreen ? mainStream.media : subStream.media;\r\n        const targetName = isFullscreen ? \"main\" : \"sub\";\r\n\r\n        if (currentStream !== targetName) {\r\n            console.log(`[DualStream] Switching to ${targetName} for ${camId}`);\r\n\r\n            // CRITICAL: Direct srcObject reassignment (no recreation)\r\n            videoRef.current.srcObject = targetStream;\r\n            videoRef.current.play().catch(() => { });\r\n            setCurrentStream(targetName);\r\n        }\r\n    }, [isFullscreen, subStream, mainStream, currentStream, camId]);\r\n\r\n    return (\r\n        <div style={{ ...style, position: \"relative\", background: \"#000\", width: \"100%\", height: \"100%\" }}>\r\n            <video\r\n                ref={videoRef}\r\n                autoPlay\r\n                muted\r\n                playsInline\r\n                style={{\r\n                    width: \"100%\",\r\n                    height: \"100%\",\r\n                    objectFit: \"fill\"\r\n                }}\r\n            />\r\n            {/* Debug indicator */}\r\n            {process.env.NODE_ENV === 'development' && (\r\n                <div style={{\r\n                    position: \"absolute\",\r\n                    top: 4,\r\n                    right: 4,\r\n                    background: \"rgba(0,0,0,0.7)\",\r\n                    color: \"#0f0\",\r\n                    padding: \"2px 6px\",\r\n                    fontSize: 10,\r\n                    fontFamily: \"monospace\"\r\n                }}>\r\n                    {currentStream.toUpperCase()}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}