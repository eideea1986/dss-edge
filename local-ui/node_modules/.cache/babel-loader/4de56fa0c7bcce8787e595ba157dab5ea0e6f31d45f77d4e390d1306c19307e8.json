{"ast":null,"code":"import _objectSpread from\"I:/dispecerat/github_release/dss-edge/local-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DAYS=[\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\",\"Sunday\"];const ScheduleEditor=_ref=>{let{schedules,onSave}=_ref;// Initialize state by converting input array to object map keyed by ID\n// Also converts legacy 'slots' to 'matrix' (48 slots)\nconst[localSchedules,setLocalSchedules]=useState({});const[selectedId,setSelectedId]=useState(null);useEffect(()=>{const init={};const inputList=Array.isArray(schedules)?schedules:Object.values(schedules||{});inputList.forEach(s=>{const id=s.id||\"sch_\"+Math.random().toString(36).substr(2,9);// Ensure matrix exists (48 slots per day)\nlet matrix=s.matrix;// Migration: Slots to Matrix\nif(!matrix&&s.slots){matrix={};for(let d=0;d<7;d++){matrix[d]=Array(48).fill(0);if(s.slots[d]){s.slots[d].forEach(h=>{if(h>=0&&h<24){matrix[d][h*2]=1;matrix[d][h*2+1]=1;}});}}}// Default empty matrix\nif(!matrix){matrix={};for(let d=0;d<7;d++)matrix[d]=Array(48).fill(0);}else{// Ensure all days exist\nfor(let d=0;d<7;d++){if(!matrix[d])matrix[d]=Array(48).fill(0);}}init[id]=_objectSpread(_objectSpread({},s),{},{id,matrix,slots:undefined});// Use matrix primarily\n});// If no schedules, create default\nif(Object.keys(init).length===0){const newId=\"sch_\"+Date.now();const mat={};for(let d=0;d<7;d++)mat[d]=Array(48).fill(0);init[newId]={id:newId,name:\"Default Schedule\",matrix:mat,enabled:true};}setLocalSchedules(init);setSelectedId(Object.keys(init)[0]);},[schedules]);const currentSchedule=localSchedules[selectedId];const handleCreate=()=>{const newId=\"sch_\"+Date.now();const mat={};for(let d=0;d<7;d++)mat[d]=Array(48).fill(0);const newSch={id:newId,name:\"New Schedule\",matrix:mat,enabled:true};setLocalSchedules(_objectSpread(_objectSpread({},localSchedules),{},{[newId]:newSch}));setSelectedId(newId);};const handleDelete=()=>{if(!window.confirm(\"Delete schedule?\"))return;const newS=_objectSpread({},localSchedules);delete newS[selectedId];// If empty, create one? Or allow empty.\nsetLocalSchedules(newS);setSelectedId(Object.keys(newS)[0]||null);};const handleSaveAll=()=>{// Convert map back to array\nconst arr=Object.values(localSchedules);onSave(arr);};const toggleSlot=(dayIndex,slotIndex)=>{if(!currentSchedule)return;const d=dayIndex.toString();const currentArr=[...(currentSchedule.matrix[d]||Array(48).fill(0))];currentArr[slotIndex]=currentArr[slotIndex]?0:1;setLocalSchedules(_objectSpread(_objectSpread({},localSchedules),{},{[selectedId]:_objectSpread(_objectSpread({},currentSchedule),{},{matrix:_objectSpread(_objectSpread({},currentSchedule.matrix),{},{[d]:currentArr})})}));};const handleNameChange=e=>{setLocalSchedules(_objectSpread(_objectSpread({},localSchedules),{},{[selectedId]:_objectSpread(_objectSpread({},currentSchedule),{},{name:e.target.value})}));};// Quick Fill Actions (Full Day)\nconst fillDay=(dayIndex,val)=>{if(!currentSchedule)return;const d=dayIndex.toString();const arr=Array(48).fill(val?1:0);setLocalSchedules(prev=>_objectSpread(_objectSpread({},prev),{},{[selectedId]:_objectSpread(_objectSpread({},prev[selectedId]),{},{matrix:_objectSpread(_objectSpread({},prev[selectedId].matrix),{},{[d]:arr})})}));};if(!currentSchedule&&Object.keys(localSchedules).length>0){setSelectedId(Object.keys(localSchedules)[0]);return null;}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:20,color:\"#ccc\",height:\"100%\",display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",marginBottom:20},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Schedule Editor (30 min intervals)\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:10},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,style:{background:\"#d32f2f\",color:\"white\",border:\"none\",padding:\"5px 15px\",cursor:\"pointer\"},children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveAll,style:{background:\"#007acc\",color:\"white\",border:\"none\",padding:\"5px 20px\",fontWeight:\"bold\",cursor:\"pointer\"},children:\"SAVE ALL Schedules\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:20,flex:1,overflow:\"hidden\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:200,background:\"#252526\",border:\"1px solid #444\",display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:10,borderBottom:\"1px solid #444\",fontWeight:\"bold\",background:\"#333\",display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[\"Schedules\",/*#__PURE__*/_jsx(\"button\",{onClick:handleCreate,style:{fontSize:16,cursor:\"pointer\",background:\"none\",border:\"none\",color:\"#4caf50\"},children:\"+\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,overflowY:\"auto\"},children:Object.values(localSchedules).map(s=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>setSelectedId(s.id),style:{padding:10,cursor:\"pointer\",background:s.id===selectedId?\"#007acc\":\"transparent\",borderBottom:\"1px solid #333\"},children:s.name},s.id))})]}),currentSchedule&&/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,background:\"#252526\",border:\"1px solid #444\",padding:20,overflowY:\"auto\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:20},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Schedule Name: \"}),/*#__PURE__*/_jsx(\"input\",{value:currentSchedule.name,onChange:handleNameChange,style:{background:\"#111\",border:\"1px solid #444\",color:\"#fff\",padding:5,width:300,marginLeft:10}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"100px 1fr\",gap:10},children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\"},children:Array.from({length:24},(_,i)=>/*#__PURE__*/_jsx(\"div\",{style:{flex:1,fontSize:10,textAlign:\"center\",color:\"#888\",borderLeft:i>0?\"1px solid #333\":\"none\"},children:i},i))}),DAYS.map((day,dIdx)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"right\",paddingRight:10,fontSize:13,paddingTop:5},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:\"bold\"},children:day}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:9,color:\"#007acc\",cursor:\"pointer\",textDecoration:\"underline\"},onClick:()=>fillDay(dIdx,true),children:\"All\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:9,color:\"#f44336\",cursor:\"pointer\",textDecoration:\"underline\"},onClick:()=>fillDay(dIdx,false),children:\"None\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",border:\"1px solid #444\",background:\"#111\",height:30},children:Array.from({length:24},(_,h)=>{var _currentSchedule$matr,_currentSchedule$matr2;// 2 slots per hour\nconst s1=(_currentSchedule$matr=currentSchedule.matrix[dIdx])===null||_currentSchedule$matr===void 0?void 0:_currentSchedule$matr[h*2];const s2=(_currentSchedule$matr2=currentSchedule.matrix[dIdx])===null||_currentSchedule$matr2===void 0?void 0:_currentSchedule$matr2[h*2+1];// Handle mouse events for drag capability (simplified)\nreturn/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,display:\"flex\",borderRight:\"1px solid #333\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:1,background:s1?\"#4caf50\":\"transparent\",borderRight:\"1px dotted #222\",cursor:\"pointer\"},onMouseDown:e=>e.buttons===1&&toggleSlot(dIdx,h*2),onMouseEnter:e=>e.buttons===1&&toggleSlot(dIdx,h*2),title:\"\".concat(day,\" \").concat(h,\":00 - \").concat(h,\":30\")}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,background:s2?\"#4caf50\":\"transparent\",cursor:\"pointer\"},onMouseDown:e=>e.buttons===1&&toggleSlot(dIdx,h*2+1),onMouseEnter:e=>e.buttons===1&&toggleSlot(dIdx,h*2+1),title:\"\".concat(day,\" \").concat(h,\":30 - \").concat(h+1,\":00\")})]},h);})})]},day))]})]})]})]});};export default ScheduleEditor;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","DAYS","ScheduleEditor","_ref","schedules","onSave","localSchedules","setLocalSchedules","selectedId","setSelectedId","init","inputList","Array","isArray","Object","values","forEach","s","id","Math","random","toString","substr","matrix","slots","d","fill","h","_objectSpread","undefined","keys","length","newId","Date","now","mat","name","enabled","currentSchedule","handleCreate","newSch","handleDelete","window","confirm","newS","handleSaveAll","arr","toggleSlot","dayIndex","slotIndex","currentArr","handleNameChange","e","target","value","fillDay","val","prev","style","padding","color","height","display","flexDirection","children","justifyContent","marginBottom","gap","onClick","background","border","cursor","fontWeight","flex","overflow","width","borderBottom","alignItems","fontSize","overflowY","map","onChange","marginLeft","gridTemplateColumns","from","_","i","textAlign","borderLeft","day","dIdx","Fragment","paddingRight","paddingTop","textDecoration","_currentSchedule$matr","_currentSchedule$matr2","s1","s2","borderRight","onMouseDown","buttons","onMouseEnter","title","concat"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/components/ScheduleInput.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nconst DAYS = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"];\r\n\r\nconst ScheduleEditor = ({ schedules, onSave }) => {\r\n    // Initialize state by converting input array to object map keyed by ID\r\n    // Also converts legacy 'slots' to 'matrix' (48 slots)\r\n    const [localSchedules, setLocalSchedules] = useState({});\r\n    const [selectedId, setSelectedId] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const init = {};\r\n        const inputList = Array.isArray(schedules) ? schedules : Object.values(schedules || {});\r\n\r\n        inputList.forEach(s => {\r\n            const id = s.id || \"sch_\" + Math.random().toString(36).substr(2, 9);\r\n\r\n            // Ensure matrix exists (48 slots per day)\r\n            let matrix = s.matrix;\r\n\r\n            // Migration: Slots to Matrix\r\n            if (!matrix && s.slots) {\r\n                matrix = {};\r\n                for (let d = 0; d < 7; d++) {\r\n                    matrix[d] = Array(48).fill(0);\r\n                    if (s.slots[d]) {\r\n                        s.slots[d].forEach(h => {\r\n                            if (h >= 0 && h < 24) {\r\n                                matrix[d][h * 2] = 1;\r\n                                matrix[d][h * 2 + 1] = 1;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Default empty matrix\r\n            if (!matrix) {\r\n                matrix = {};\r\n                for (let d = 0; d < 7; d++) matrix[d] = Array(48).fill(0);\r\n            } else {\r\n                // Ensure all days exist\r\n                for (let d = 0; d < 7; d++) {\r\n                    if (!matrix[d]) matrix[d] = Array(48).fill(0);\r\n                }\r\n            }\r\n\r\n            init[id] = { ...s, id, matrix, slots: undefined }; // Use matrix primarily\r\n        });\r\n\r\n        // If no schedules, create default\r\n        if (Object.keys(init).length === 0) {\r\n            const newId = \"sch_\" + Date.now();\r\n            const mat = {};\r\n            for (let d = 0; d < 7; d++) mat[d] = Array(48).fill(0);\r\n            init[newId] = { id: newId, name: \"Default Schedule\", matrix: mat, enabled: true };\r\n        }\r\n\r\n        setLocalSchedules(init);\r\n        setSelectedId(Object.keys(init)[0]);\r\n    }, [schedules]);\r\n\r\n    const currentSchedule = localSchedules[selectedId];\r\n\r\n    const handleCreate = () => {\r\n        const newId = \"sch_\" + Date.now();\r\n        const mat = {};\r\n        for (let d = 0; d < 7; d++) mat[d] = Array(48).fill(0);\r\n        const newSch = { id: newId, name: \"New Schedule\", matrix: mat, enabled: true };\r\n        setLocalSchedules({ ...localSchedules, [newId]: newSch });\r\n        setSelectedId(newId);\r\n    };\r\n\r\n    const handleDelete = () => {\r\n        if (!window.confirm(\"Delete schedule?\")) return;\r\n        const newS = { ...localSchedules };\r\n        delete newS[selectedId];\r\n        // If empty, create one? Or allow empty.\r\n        setLocalSchedules(newS);\r\n        setSelectedId(Object.keys(newS)[0] || null);\r\n    };\r\n\r\n    const handleSaveAll = () => {\r\n        // Convert map back to array\r\n        const arr = Object.values(localSchedules);\r\n        onSave(arr);\r\n    };\r\n\r\n    const toggleSlot = (dayIndex, slotIndex) => {\r\n        if (!currentSchedule) return;\r\n        const d = dayIndex.toString();\r\n        const currentArr = [...(currentSchedule.matrix[d] || Array(48).fill(0))];\r\n\r\n        currentArr[slotIndex] = currentArr[slotIndex] ? 0 : 1;\r\n\r\n        setLocalSchedules({\r\n            ...localSchedules,\r\n            [selectedId]: {\r\n                ...currentSchedule,\r\n                matrix: { ...currentSchedule.matrix, [d]: currentArr }\r\n            }\r\n        });\r\n    };\r\n\r\n    const handleNameChange = (e) => {\r\n        setLocalSchedules({\r\n            ...localSchedules,\r\n            [selectedId]: { ...currentSchedule, name: e.target.value }\r\n        });\r\n    };\r\n\r\n    // Quick Fill Actions (Full Day)\r\n    const fillDay = (dayIndex, val) => {\r\n        if (!currentSchedule) return;\r\n        const d = dayIndex.toString();\r\n        const arr = Array(48).fill(val ? 1 : 0);\r\n        setLocalSchedules(prev => ({\r\n            ...prev,\r\n            [selectedId]: {\r\n                ...prev[selectedId],\r\n                matrix: { ...prev[selectedId].matrix, [d]: arr }\r\n            }\r\n        }));\r\n    };\r\n\r\n    if (!currentSchedule && Object.keys(localSchedules).length > 0) {\r\n        setSelectedId(Object.keys(localSchedules)[0]);\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div style={{ padding: 20, color: \"#ccc\", height: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\r\n            <div style={{ display: \"flex\", justifyContent: \"space-between\", marginBottom: 20 }}>\r\n                <h2>Schedule Editor (30 min intervals)</h2>\r\n                <div style={{ display: \"flex\", gap: 10 }}>\r\n                    <button onClick={handleDelete} style={{ background: \"#d32f2f\", color: \"white\", border: \"none\", padding: \"5px 15px\", cursor: \"pointer\" }}>Delete</button>\r\n                    <button onClick={handleSaveAll} style={{ background: \"#007acc\", color: \"white\", border: \"none\", padding: \"5px 20px\", fontWeight: \"bold\", cursor: \"pointer\" }}>SAVE ALL Schedules</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div style={{ display: \"flex\", gap: 20, flex: 1, overflow: \"hidden\" }}>\r\n                {/* LIST */}\r\n                <div style={{ width: 200, background: \"#252526\", border: \"1px solid #444\", display: \"flex\", flexDirection: \"column\" }}>\r\n                    <div style={{ padding: 10, borderBottom: \"1px solid #444\", fontWeight: \"bold\", background: \"#333\", display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n                        Schedules\r\n                        <button onClick={handleCreate} style={{ fontSize: 16, cursor: \"pointer\", background: \"none\", border: \"none\", color: \"#4caf50\" }}>+</button>\r\n                    </div>\r\n                    <div style={{ flex: 1, overflowY: \"auto\" }}>\r\n                        {Object.values(localSchedules).map((s) => (\r\n                            <div\r\n                                key={s.id}\r\n                                onClick={() => setSelectedId(s.id)}\r\n                                style={{ padding: 10, cursor: \"pointer\", background: s.id === selectedId ? \"#007acc\" : \"transparent\", borderBottom: \"1px solid #333\" }}\r\n                            >\r\n                                {s.name}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* EDITOR */}\r\n                {currentSchedule && (\r\n                    <div style={{ flex: 1, background: \"#252526\", border: \"1px solid #444\", padding: 20, overflowY: \"auto\" }}>\r\n                        <div style={{ marginBottom: 20 }}>\r\n                            <label>Schedule Name: </label>\r\n                            <input value={currentSchedule.name} onChange={handleNameChange} style={{ background: \"#111\", border: \"1px solid #444\", color: \"#fff\", padding: 5, width: 300, marginLeft: 10 }} />\r\n                        </div>\r\n\r\n                        <div style={{ display: \"grid\", gridTemplateColumns: \"100px 1fr\", gap: 10 }}>\r\n                            {/* Header */}\r\n                            <div></div>\r\n                            <div style={{ display: \"flex\" }}>\r\n                                {Array.from({ length: 24 }, (_, i) => (\r\n                                    <div key={i} style={{ flex: 1, fontSize: 10, textAlign: \"center\", color: \"#888\", borderLeft: i > 0 ? \"1px solid #333\" : \"none\" }}>{i}</div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            {DAYS.map((day, dIdx) => (\r\n                                <React.Fragment key={day}>\r\n                                    <div style={{ textAlign: \"right\", paddingRight: 10, fontSize: 13, paddingTop: 5 }}>\r\n                                        <div style={{ fontWeight: \"bold\" }}>{day}</div>\r\n                                        <div style={{ fontSize: 9, color: \"#007acc\", cursor: \"pointer\", textDecoration: \"underline\" }} onClick={() => fillDay(dIdx, true)}>All</div>\r\n                                        <div style={{ fontSize: 9, color: \"#f44336\", cursor: \"pointer\", textDecoration: \"underline\" }} onClick={() => fillDay(dIdx, false)}>None</div>\r\n                                    </div>\r\n                                    <div style={{ display: \"flex\", border: \"1px solid #444\", background: \"#111\", height: 30 }}>\r\n                                        {Array.from({ length: 24 }, (_, h) => {\r\n                                            // 2 slots per hour\r\n                                            const s1 = currentSchedule.matrix[dIdx]?.[h * 2];\r\n                                            const s2 = currentSchedule.matrix[dIdx]?.[h * 2 + 1];\r\n\r\n                                            // Handle mouse events for drag capability (simplified)\r\n                                            return (\r\n                                                <div key={h} style={{ flex: 1, display: \"flex\", borderRight: \"1px solid #333\" }}>\r\n                                                    <div\r\n                                                        style={{ flex: 1, background: s1 ? \"#4caf50\" : \"transparent\", borderRight: \"1px dotted #222\", cursor: \"pointer\" }}\r\n                                                        onMouseDown={(e) => e.buttons === 1 && toggleSlot(dIdx, h * 2)}\r\n                                                        onMouseEnter={(e) => e.buttons === 1 && toggleSlot(dIdx, h * 2)}\r\n                                                        title={`${day} ${h}:00 - ${h}:30`}\r\n                                                    />\r\n                                                    <div\r\n                                                        style={{ flex: 1, background: s2 ? \"#4caf50\" : \"transparent\", cursor: \"pointer\" }}\r\n                                                        onMouseDown={(e) => e.buttons === 1 && toggleSlot(dIdx, h * 2 + 1)}\r\n                                                        onMouseEnter={(e) => e.buttons === 1 && toggleSlot(dIdx, h * 2 + 1)}\r\n                                                        title={`${day} ${h}:30 - ${h + 1}:00`}\r\n                                                    />\r\n                                                </div>\r\n                                            );\r\n                                        })}\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ScheduleEditor;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}