{"ast":null,"code":"import _objectSpread from\"I:/dispecerat/github_release/dss-edge/local-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useRef,useLayoutEffect}from\"react\";import{useSearchParams,useNavigate}from\"react-router-dom\";import API from\"../api\";import PlaybackController,{PlayerStates}from\"../services/PlaybackController\";// --- ENTERPRISE THEME ---\nimport{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const THEME={bg:\"#1e1e1e\",// Dark Professional Background\nheader:\"#2d2d2d\",text:\"#ffffff\",accent:\"#2196f3\",// Primary Blue\nsegment:\"#4caf50\",// Green (Normal Recording)\nsegmentEvent:\"#2196f3\",// Blue (Event Recording)\ngap:\"#333333\",// Empty Checkered\nrulerBg:\"#252526\",rulerText:\"#9e9e9e\",playhead:\"#ff9800\",// Orange High-Visibility\npanelBorder:\"#3e3e42\"};export default function PlaybackModern(){const[searchParams]=useSearchParams();const navigate=useNavigate();const camId=searchParams.get(\"camId\");// --- STATE ---\nconst[selectedDate,setSelectedDate]=useState(new Date().toISOString().split('T')[0]);const[playerState,setPlayerState]=useState(PlayerStates.IDLE);const[playbackRate,setPlaybackRate]=useState(1.0);// --- TIMELINE STATE ---\nconst[currentTimeMs,setCurrentTimeMs]=useState(Date.now());const[viewportStartMs,setViewportStartMs]=useState(new Date().setHours(0,0,0,0));const[zoomPxPerSec,setZoomPxPerSec]=useState(1000/86400);// Fit Day Default\nconst[containerWidth,setContainerWidth]=useState(1000);const[segments,setSegments]=useState([]);const[isLoadingData,setIsLoadingData]=useState(false);const videoRef=useRef(null);const playerRef=useRef(null);const timelineRef=useRef(null);const dragRef=useRef({isDragging:false,startX:0,startViewTime:0});// --- DATA SETUP ---\nuseEffect(()=>{if(selectedDate)setViewportStartMs(new Date(selectedDate).setHours(0,0,0,0));},[selectedDate]);useEffect(()=>{if(videoRef.current&&camId){playerRef.current=new PlaybackController(videoRef.current,camId,s=>setPlayerState(s));return()=>{var _playerRef$current;return(_playerRef$current=playerRef.current)===null||_playerRef$current===void 0?void 0:_playerRef$current.destroy();};}},[camId]);useLayoutEffect(()=>{const updateWidth=()=>{if(timelineRef.current)setContainerWidth(timelineRef.current.clientWidth);};window.addEventListener('resize',updateWidth);updateWidth();return()=>window.removeEventListener('resize',updateWidth);},[]);useEffect(()=>{if(!camId||!selectedDate)return;const fetchData=async()=>{setIsLoadingData(true);try{const res=await API.get(\"/api/playback/timeline-day/\".concat(camId,\"/\").concat(selectedDate));const data=res.data;const segs=(data.segments||[]).map(s=>({start:Number(s.start_ts||s.startTs),end:Number(s.end_ts||s.endTs),type:s.type||'normal',// normal vs event\nfile:s.file})).sort((a,b)=>a.start-b.start);setSegments(segs);if(playerRef.current)playerRef.current.loadSegments(segs);// Auto Fit\nif(containerWidth>0){setViewportStartMs(new Date(selectedDate).setHours(0,0,0,0));setZoomPxPerSec(containerWidth/86400);}}catch(e){console.error(e);}finally{setIsLoadingData(false);}};fetchData();},[camId,selectedDate]);// --- SYNC LOOP & GAP SKIP ---\nuseEffect(()=>{const i=setInterval(()=>{if(playerState===PlayerStates.PLAYING&&playerRef.current){const now=playerRef.current.getCurrentTime();if(Math.abs(now-currentTimeMs)>100)setCurrentTimeMs(now);// Gap Auto-Skip Logic (Enterprise Feature)\n// If we are essentially at the end of a segment, jump to next\nconst currentSeg=segments.find(s=>now>=s.start&&now<s.end);if(currentSeg&&currentSeg.end-now<500){// Check next\nconst nextSeg=segments.find(s=>s.start>=currentSeg.end);if(nextSeg){// Only skip if gap is significant (> 1s)\nif(nextSeg.start-currentSeg.end>1000){console.log(\"Auto-Skipping Gap...\");playerRef.current.seekTo(nextSeg.start);}}}}},100);return()=>clearInterval(i);},[playerState,currentTimeMs,segments]);// --- ACTIONS ---\nconst changeSpeed=rate=>{setPlaybackRate(rate);if(videoRef.current)videoRef.current.playbackRate=rate;};const performSeek=ts=>{var _playerRef$current2;// Snap to segment start if close? Optional enterprise feature.\nsetCurrentTimeMs(ts);(_playerRef$current2=playerRef.current)===null||_playerRef$current2===void 0?void 0:_playerRef$current2.seekTo(ts);};const fitDay=()=>{setViewportStartMs(new Date(selectedDate).setHours(0,0,0,0));setZoomPxPerSec(containerWidth/86400);};// --- MOUSE HANDLERS (Timeline) ---\nconst handleMouseDown=e=>{dragRef.current={isDragging:true,startX:e.clientX,startViewTime:viewportStartMs};document.body.style.cursor='grabbing';};const handleMouseMove=e=>{if(!dragRef.current.isDragging)return;const dx=e.clientX-dragRef.current.startX;const dt=-(dx/zoomPxPerSec)*1000;setViewportStartMs(dragRef.current.startViewTime+dt);};const handleMouseUp=e=>{if(dragRef.current.isDragging){dragRef.current.isDragging=false;document.body.style.cursor='default';if(Math.abs(e.clientX-dragRef.current.startX)<5){const rect=timelineRef.current.getBoundingClientRect();const clickX=e.clientX-rect.left;const ts=viewportStartMs+clickX/zoomPxPerSec*1000;performSeek(ts);}}};const handleWheel=e=>{if(e.target.closest('.timeline-area')){e.preventDefault();const rect=timelineRef.current.getBoundingClientRect();const mouseX=e.clientX-rect.left;const timeUnderMouse=viewportStartMs+mouseX/zoomPxPerSec*1000;const factor=e.deltaY>0?0.9:1.1;const newZoom=Math.max(containerWidth/86400,Math.min(5.0,zoomPxPerSec*factor));setZoomPxPerSec(newZoom);setViewportStartMs(timeUnderMouse-mouseX/newZoom*1000);}};// --- RENDER HELPERS ---\nconst timeToPx=t=>(t-viewportStartMs)/1000*zoomPxPerSec;const renderRuler=()=>{const ticks=[];const pxPerMin=zoomPxPerSec*60;// Adaptive step\nlet stepMin=60;if(pxPerMin>200)stepMin=5;if(pxPerMin>500)stepMin=1;const stepMs=stepMin*60*1000;const viewEnd=viewportStartMs+containerWidth/zoomPxPerSec*1000;const start=Math.floor(viewportStartMs/stepMs)*stepMs;for(let t=start;t<viewEnd;t+=stepMs){const x=timeToPx(t);const date=new Date(t);const isHour=date.getMinutes()===0;if(x<-20||x>containerWidth)continue;ticks.push(/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:x,top:0,height:25,borderLeft:\"1px solid \".concat(isHour?'#888':'#444')},children:isHour&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:2,left:4,fontSize:10,color:'#aaa',pointerEvents:'none'},children:[date.getHours(),\":00\"]})},t));}return ticks;};return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',height:'100vh',background:THEME.bg,color:THEME.text},children:[/*#__PURE__*/_jsxs(\"header\",{style:{height:40,background:THEME.header,borderBottom:\"1px solid \".concat(THEME.panelBorder),display:'flex',alignItems:'center',padding:'0 16px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold',color:THEME.accent,marginRight:20},children:\"DSS EDGE VMS\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:13,background:'#444',padding:'2px 8px',borderRadius:4},children:camId}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:selectedDate,onChange:e=>setSelectedDate(e.target.value),style:{background:'#333',color:'#fff',border:'none',borderRadius:4,padding:'4px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,position:'relative',background:'#000',display:'flex',justifyContent:'center',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,style:{width:'100%',maxHeight:'100%'}}),isLoadingData&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',color:'#fff'},children:\"Loading Timeline...\"}),segments.length===0&&!isLoadingData&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',color:'#aaa'},children:\"No Recordings\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{height:48,background:'#252526',borderTop:\"1px solid \".concat(THEME.panelBorder),display:'flex',alignItems:'center',padding:'0 10px',gap:8},children:[/*#__PURE__*/_jsx(\"button\",{style:btnStyle,onClick:()=>performSeek(currentTimeMs-10000),children:\"\\u23EA\"}),/*#__PURE__*/_jsx(\"button\",{style:btnStyle,onClick:()=>{var _playerRef$current3,_playerRef$current4;return playerState===PlayerStates.PLAYING?(_playerRef$current3=playerRef.current)===null||_playerRef$current3===void 0?void 0:_playerRef$current3.pause():(_playerRef$current4=playerRef.current)===null||_playerRef$current4===void 0?void 0:_playerRef$current4.play();},children:playerState===PlayerStates.PLAYING?\"⏸\":\"▶\"}),/*#__PURE__*/_jsx(\"button\",{style:btnStyle,onClick:()=>performSeek(currentTimeMs+10000),children:\"\\u23E9\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:1,height:20,background:'#555',margin:'0 8px'}}),[0.25,0.5,1,2,4].map(rate=>/*#__PURE__*/_jsxs(\"button\",{style:_objectSpread(_objectSpread({},btnStyle),{},{background:playbackRate===rate?THEME.accent:'transparent',color:playbackRate===rate?'#fff':'#aaa'}),onClick:()=>changeSpeed(rate),children:[rate,\"x\"]},rate)),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),/*#__PURE__*/_jsx(\"span\",{style:{fontFamily:'monospace',fontSize:14},children:new Date(currentTimeMs).toLocaleTimeString()}),/*#__PURE__*/_jsx(\"button\",{style:btnStyle,onClick:fitDay,children:\"\\u26F6 24H\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-area\",ref:timelineRef,style:{height:120,background:THEME.rulerBg,position:'relative',overflow:'hidden',cursor:dragRef.current.isDragging?'grabbing':'default',userSelect:'none'},onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp,onMouseMove:handleMouseMove,onMouseDown:handleMouseDown,onWheel:handleWheel,children:[/*#__PURE__*/_jsx(\"div\",{style:{height:25,borderBottom:'1px solid #444'},children:renderRuler()}),/*#__PURE__*/_jsx(\"div\",{style:{position:'relative',top:10,height:40},children:segments.map((s,i)=>{const x=timeToPx(s.start);const w=Math.max(2,(s.end-s.start)/1000*zoomPxPerSec);if(x+w<0||x>containerWidth)return null;return/*#__PURE__*/_jsx(\"div\",{title:new Date(s.start).toLocaleTimeString(),style:{position:'absolute',left:x,width:w,height:'100%',background:s.type==='event'?THEME.segmentEvent:THEME.segment,borderRadius:2,borderLeft:'1px solid rgba(0,0,0,0.2)'}},i);})}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',left:timeToPx(currentTimeMs),top:0,bottom:0,width:2,background:THEME.playhead,zIndex:10,pointerEvents:'none'},children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:0,left:-4,width:10,height:10,background:THEME.playhead,transform:'rotate(45deg)',marginTop:-5}}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',bottom:2,left:4,background:THEME.playhead,color:'#000',fontSize:10,padding:'0 2px',borderRadius:2},children:new Date(currentTimeMs).toLocaleTimeString()})]})]})]});}const btnStyle={background:'transparent',border:'none',color:'#e0e0e0',cursor:'pointer',padding:'4px 8px',borderRadius:4,fontSize:14};","map":{"version":3,"names":["React","useEffect","useState","useRef","useLayoutEffect","useSearchParams","useNavigate","API","PlaybackController","PlayerStates","jsxs","_jsxs","jsx","_jsx","THEME","bg","header","text","accent","segment","segmentEvent","gap","rulerBg","rulerText","playhead","panelBorder","PlaybackModern","searchParams","navigate","camId","get","selectedDate","setSelectedDate","Date","toISOString","split","playerState","setPlayerState","IDLE","playbackRate","setPlaybackRate","currentTimeMs","setCurrentTimeMs","now","viewportStartMs","setViewportStartMs","setHours","zoomPxPerSec","setZoomPxPerSec","containerWidth","setContainerWidth","segments","setSegments","isLoadingData","setIsLoadingData","videoRef","playerRef","timelineRef","dragRef","isDragging","startX","startViewTime","current","s","_playerRef$current","destroy","updateWidth","clientWidth","window","addEventListener","removeEventListener","fetchData","res","concat","data","segs","map","start","Number","start_ts","startTs","end","end_ts","endTs","type","file","sort","a","b","loadSegments","e","console","error","i","setInterval","PLAYING","getCurrentTime","Math","abs","currentSeg","find","nextSeg","log","seekTo","clearInterval","changeSpeed","rate","performSeek","ts","_playerRef$current2","fitDay","handleMouseDown","clientX","document","body","style","cursor","handleMouseMove","dx","dt","handleMouseUp","rect","getBoundingClientRect","clickX","left","handleWheel","target","closest","preventDefault","mouseX","timeUnderMouse","factor","deltaY","newZoom","max","min","timeToPx","t","renderRuler","ticks","pxPerMin","stepMin","stepMs","viewEnd","floor","x","date","isHour","getMinutes","push","position","top","height","borderLeft","children","fontSize","color","pointerEvents","getHours","display","flexDirection","background","borderBottom","alignItems","padding","fontWeight","marginRight","borderRadius","flex","value","onChange","border","justifyContent","ref","width","maxHeight","length","borderTop","btnStyle","onClick","_playerRef$current3","_playerRef$current4","pause","play","margin","_objectSpread","fontFamily","toLocaleTimeString","className","overflow","userSelect","onMouseUp","onMouseLeave","onMouseMove","onMouseDown","onWheel","w","title","bottom","zIndex","transform","marginTop"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/pages/PlaybackModern.js"],"sourcesContent":["import React, { useEffect, useState, useRef, useLayoutEffect } from \"react\";\r\nimport { useSearchParams, useNavigate } from \"react-router-dom\";\r\nimport API from \"../api\";\r\nimport PlaybackController, { PlayerStates } from \"../services/PlaybackController\";\r\n\r\n// --- ENTERPRISE THEME ---\r\nconst THEME = {\r\n    bg: \"#1e1e1e\",           // Dark Professional Background\r\n    header: \"#2d2d2d\",\r\n    text: \"#ffffff\",\r\n    accent: \"#2196f3\",       // Primary Blue\r\n    segment: \"#4caf50\",      // Green (Normal Recording)\r\n    segmentEvent: \"#2196f3\", // Blue (Event Recording)\r\n    gap: \"#333333\",          // Empty Checkered\r\n    rulerBg: \"#252526\",\r\n    rulerText: \"#9e9e9e\",\r\n    playhead: \"#ff9800\",     // Orange High-Visibility\r\n    panelBorder: \"#3e3e42\"\r\n};\r\n\r\nexport default function PlaybackModern() {\r\n    const [searchParams] = useSearchParams();\r\n    const navigate = useNavigate();\r\n    const camId = searchParams.get(\"camId\");\r\n\r\n    // --- STATE ---\r\n    const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);\r\n    const [playerState, setPlayerState] = useState(PlayerStates.IDLE);\r\n    const [playbackRate, setPlaybackRate] = useState(1.0);\r\n\r\n    // --- TIMELINE STATE ---\r\n    const [currentTimeMs, setCurrentTimeMs] = useState(Date.now());\r\n    const [viewportStartMs, setViewportStartMs] = useState(new Date().setHours(0, 0, 0, 0));\r\n    const [zoomPxPerSec, setZoomPxPerSec] = useState(1000 / 86400); // Fit Day Default\r\n    const [containerWidth, setContainerWidth] = useState(1000);\r\n    const [segments, setSegments] = useState([]);\r\n    const [isLoadingData, setIsLoadingData] = useState(false);\r\n\r\n    const videoRef = useRef(null);\r\n    const playerRef = useRef(null);\r\n    const timelineRef = useRef(null);\r\n    const dragRef = useRef({ isDragging: false, startX: 0, startViewTime: 0 });\r\n\r\n    // --- DATA SETUP ---\r\n    useEffect(() => {\r\n        if (selectedDate) setViewportStartMs(new Date(selectedDate).setHours(0, 0, 0, 0));\r\n    }, [selectedDate]);\r\n\r\n    useEffect(() => {\r\n        if (videoRef.current && camId) {\r\n            playerRef.current = new PlaybackController(videoRef.current, camId, (s) => setPlayerState(s));\r\n            return () => playerRef.current?.destroy();\r\n        }\r\n    }, [camId]);\r\n\r\n    useLayoutEffect(() => {\r\n        const updateWidth = () => { if (timelineRef.current) setContainerWidth(timelineRef.current.clientWidth); };\r\n        window.addEventListener('resize', updateWidth);\r\n        updateWidth();\r\n        return () => window.removeEventListener('resize', updateWidth);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!camId || !selectedDate) return;\r\n        const fetchData = async () => {\r\n            setIsLoadingData(true);\r\n            try {\r\n                const res = await API.get(`/api/playback/timeline-day/${camId}/${selectedDate}`);\r\n                const data = res.data;\r\n                const segs = (data.segments || []).map(s => ({\r\n                    start: Number(s.start_ts || s.startTs),\r\n                    end: Number(s.end_ts || s.endTs),\r\n                    type: s.type || 'normal', // normal vs event\r\n                    file: s.file\r\n                })).sort((a, b) => a.start - b.start);\r\n\r\n                setSegments(segs);\r\n                if (playerRef.current) playerRef.current.loadSegments(segs);\r\n\r\n                // Auto Fit\r\n                if (containerWidth > 0) {\r\n                    setViewportStartMs(new Date(selectedDate).setHours(0, 0, 0, 0));\r\n                    setZoomPxPerSec(containerWidth / 86400);\r\n                }\r\n            } catch (e) { console.error(e); } finally { setIsLoadingData(false); }\r\n        };\r\n        fetchData();\r\n    }, [camId, selectedDate]);\r\n\r\n    // --- SYNC LOOP & GAP SKIP ---\r\n    useEffect(() => {\r\n        const i = setInterval(() => {\r\n            if (playerState === PlayerStates.PLAYING && playerRef.current) {\r\n                const now = playerRef.current.getCurrentTime();\r\n                if (Math.abs(now - currentTimeMs) > 100) setCurrentTimeMs(now);\r\n\r\n                // Gap Auto-Skip Logic (Enterprise Feature)\r\n                // If we are essentially at the end of a segment, jump to next\r\n                const currentSeg = segments.find(s => now >= s.start && now < s.end);\r\n                if (currentSeg && (currentSeg.end - now) < 500) {\r\n                    // Check next\r\n                    const nextSeg = segments.find(s => s.start >= currentSeg.end);\r\n                    if (nextSeg) {\r\n                        // Only skip if gap is significant (> 1s)\r\n                        if (nextSeg.start - currentSeg.end > 1000) {\r\n                            console.log(\"Auto-Skipping Gap...\");\r\n                            playerRef.current.seekTo(nextSeg.start);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }, 100);\r\n        return () => clearInterval(i);\r\n    }, [playerState, currentTimeMs, segments]);\r\n\r\n    // --- ACTIONS ---\r\n    const changeSpeed = (rate) => {\r\n        setPlaybackRate(rate);\r\n        if (videoRef.current) videoRef.current.playbackRate = rate;\r\n    };\r\n\r\n    const performSeek = (ts) => {\r\n        // Snap to segment start if close? Optional enterprise feature.\r\n        setCurrentTimeMs(ts);\r\n        playerRef.current?.seekTo(ts);\r\n    };\r\n\r\n    const fitDay = () => {\r\n        setViewportStartMs(new Date(selectedDate).setHours(0, 0, 0, 0));\r\n        setZoomPxPerSec(containerWidth / 86400);\r\n    };\r\n\r\n    // --- MOUSE HANDLERS (Timeline) ---\r\n    const handleMouseDown = (e) => {\r\n        dragRef.current = { isDragging: true, startX: e.clientX, startViewTime: viewportStartMs };\r\n        document.body.style.cursor = 'grabbing';\r\n    };\r\n\r\n    const handleMouseMove = (e) => {\r\n        if (!dragRef.current.isDragging) return;\r\n        const dx = e.clientX - dragRef.current.startX;\r\n        const dt = -(dx / zoomPxPerSec) * 1000;\r\n        setViewportStartMs(dragRef.current.startViewTime + dt);\r\n    };\r\n\r\n    const handleMouseUp = (e) => {\r\n        if (dragRef.current.isDragging) {\r\n            dragRef.current.isDragging = false;\r\n            document.body.style.cursor = 'default';\r\n            if (Math.abs(e.clientX - dragRef.current.startX) < 5) {\r\n                const rect = timelineRef.current.getBoundingClientRect();\r\n                const clickX = e.clientX - rect.left;\r\n                const ts = viewportStartMs + (clickX / zoomPxPerSec) * 1000;\r\n                performSeek(ts);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleWheel = (e) => {\r\n        if (e.target.closest('.timeline-area')) {\r\n            e.preventDefault();\r\n            const rect = timelineRef.current.getBoundingClientRect();\r\n            const mouseX = e.clientX - rect.left;\r\n            const timeUnderMouse = viewportStartMs + (mouseX / zoomPxPerSec) * 1000;\r\n            const factor = e.deltaY > 0 ? 0.9 : 1.1;\r\n            const newZoom = Math.max(containerWidth / 86400, Math.min(5.0, zoomPxPerSec * factor));\r\n            setZoomPxPerSec(newZoom);\r\n            setViewportStartMs(timeUnderMouse - (mouseX / newZoom) * 1000);\r\n        }\r\n    };\r\n\r\n    // --- RENDER HELPERS ---\r\n    const timeToPx = (t) => (t - viewportStartMs) / 1000 * zoomPxPerSec;\r\n\r\n    const renderRuler = () => {\r\n        const ticks = [];\r\n        const pxPerMin = zoomPxPerSec * 60;\r\n        // Adaptive step\r\n        let stepMin = 60;\r\n        if (pxPerMin > 200) stepMin = 5;\r\n        if (pxPerMin > 500) stepMin = 1;\r\n\r\n        const stepMs = stepMin * 60 * 1000;\r\n        const viewEnd = viewportStartMs + (containerWidth / zoomPxPerSec * 1000);\r\n        const start = Math.floor(viewportStartMs / stepMs) * stepMs;\r\n\r\n        for (let t = start; t < viewEnd; t += stepMs) {\r\n            const x = timeToPx(t);\r\n            const date = new Date(t);\r\n            const isHour = date.getMinutes() === 0;\r\n            if (x < -20 || x > containerWidth) continue;\r\n\r\n            ticks.push(\r\n                <div key={t} style={{ position: 'absolute', left: x, top: 0, height: 25, borderLeft: `1px solid ${isHour ? '#888' : '#444'}` }}>\r\n                    {isHour && <div style={{ position: 'absolute', top: 2, left: 4, fontSize: 10, color: '#aaa', pointerEvents: 'none' }}>\r\n                        {date.getHours()}:00\r\n                    </div>}\r\n                </div>\r\n            );\r\n        }\r\n        return ticks;\r\n    };\r\n\r\n    return (\r\n        <div style={{ display: 'flex', flexDirection: 'column', height: '100vh', background: THEME.bg, color: THEME.text }}>\r\n\r\n            {/* HEADER */}\r\n            <header style={{ height: 40, background: THEME.header, borderBottom: `1px solid ${THEME.panelBorder}`, display: 'flex', alignItems: 'center', padding: '0 16px' }}>\r\n                <span style={{ fontWeight: 'bold', color: THEME.accent, marginRight: 20 }}>DSS EDGE VMS</span>\r\n                <span style={{ fontSize: 13, background: '#444', padding: '2px 8px', borderRadius: 4 }}>{camId}</span>\r\n                <div style={{ flex: 1 }} />\r\n                <input type=\"date\" value={selectedDate} onChange={e => setSelectedDate(e.target.value)}\r\n                    style={{ background: '#333', color: '#fff', border: 'none', borderRadius: 4, padding: '4px' }} />\r\n            </header>\r\n\r\n            {/* PLAYER AREA */}\r\n            <div style={{ flex: 1, position: 'relative', background: '#000', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n                <video ref={videoRef} style={{ width: '100%', maxHeight: '100%' }} />\r\n                {isLoadingData && <div style={{ position: 'absolute', color: '#fff' }}>Loading Timeline...</div>}\r\n                {segments.length === 0 && !isLoadingData && <div style={{ position: 'absolute', color: '#aaa' }}>No Recordings</div>}\r\n            </div>\r\n\r\n            {/* CONTROLS BAR */}\r\n            <div style={{ height: 48, background: '#252526', borderTop: `1px solid ${THEME.panelBorder}`, display: 'flex', alignItems: 'center', padding: '0 10px', gap: 8 }}>\r\n\r\n                {/* Playback Controls */}\r\n                <button style={btnStyle} onClick={() => performSeek(currentTimeMs - 10000)}>⏪</button>\r\n                <button style={btnStyle} onClick={() => playerState === PlayerStates.PLAYING ? playerRef.current?.pause() : playerRef.current?.play()}>\r\n                    {playerState === PlayerStates.PLAYING ? \"⏸\" : \"▶\"}\r\n                </button>\r\n                <button style={btnStyle} onClick={() => performSeek(currentTimeMs + 10000)}>⏩</button>\r\n\r\n                <div style={{ width: 1, height: 20, background: '#555', margin: '0 8px' }} />\r\n\r\n                {/* Speed Controls */}\r\n                {[0.25, 0.5, 1, 2, 4].map(rate => (\r\n                    <button key={rate}\r\n                        style={{ ...btnStyle, background: playbackRate === rate ? THEME.accent : 'transparent', color: playbackRate === rate ? '#fff' : '#aaa' }}\r\n                        onClick={() => changeSpeed(rate)}>\r\n                        {rate}x\r\n                    </button>\r\n                ))}\r\n\r\n                <div style={{ flex: 1 }} />\r\n\r\n                {/* Time Display */}\r\n                <span style={{ fontFamily: 'monospace', fontSize: 14 }}>\r\n                    {new Date(currentTimeMs).toLocaleTimeString()}\r\n                </span>\r\n\r\n                <button style={btnStyle} onClick={fitDay}>⛶ 24H</button>\r\n            </div>\r\n\r\n            {/* TIMELINE AREA */}\r\n            <div className=\"timeline-area\" ref={timelineRef}\r\n                style={{ height: 120, background: THEME.rulerBg, position: 'relative', overflow: 'hidden', cursor: dragRef.current.isDragging ? 'grabbing' : 'default', userSelect: 'none' }}\r\n                onMouseUp={handleMouseUp} onMouseLeave={handleMouseUp} onMouseMove={handleMouseMove} onMouseDown={handleMouseDown} onWheel={handleWheel}\r\n            >\r\n                {/* Ruler Track */}\r\n                <div style={{ height: 25, borderBottom: '1px solid #444' }}>\r\n                    {renderRuler()}\r\n                </div>\r\n\r\n                {/* Recording Track */}\r\n                <div style={{ position: 'relative', top: 10, height: 40 }}>\r\n                    {segments.map((s, i) => {\r\n                        const x = timeToPx(s.start);\r\n                        const w = Math.max(2, (s.end - s.start) / 1000 * zoomPxPerSec);\r\n                        if (x + w < 0 || x > containerWidth) return null;\r\n                        return (\r\n                            <div key={i} title={new Date(s.start).toLocaleTimeString()} style={{\r\n                                position: 'absolute', left: x, width: w, height: '100%',\r\n                                background: s.type === 'event' ? THEME.segmentEvent : THEME.segment,\r\n                                borderRadius: 2, borderLeft: '1px solid rgba(0,0,0,0.2)'\r\n                            }} />\r\n                        );\r\n                    })}\r\n                </div>\r\n\r\n                {/* Cursor */}\r\n                <div style={{\r\n                    position: 'absolute', left: timeToPx(currentTimeMs), top: 0, bottom: 0,\r\n                    width: 2, background: THEME.playhead, zIndex: 10, pointerEvents: 'none'\r\n                }}>\r\n                    <div style={{\r\n                        position: 'absolute', top: 0, left: -4,\r\n                        width: 10, height: 10, background: THEME.playhead,\r\n                        transform: 'rotate(45deg)', marginTop: -5\r\n                    }} />\r\n                    <div style={{ position: 'absolute', bottom: 2, left: 4, background: THEME.playhead, color: '#000', fontSize: 10, padding: '0 2px', borderRadius: 2 }}>\r\n                        {new Date(currentTimeMs).toLocaleTimeString()}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst btnStyle = {\r\n    background: 'transparent', border: 'none', color: '#e0e0e0',\r\n    cursor: 'pointer', padding: '4px 8px', borderRadius: 4, fontSize: 14\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}