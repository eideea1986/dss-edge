{"ast":null,"code":"var _jsxFileName = \"I:\\\\dispecerat\\\\github_release\\\\dss-edge\\\\local-ui\\\\src\\\\components\\\\SystemStatus.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { colors } from '../theme';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_ROOT = window.location.hostname === 'localhost' ? 'http://localhost:8080' : '';\nexport default function SystemStatus() {\n  _s();\n  var _health$modules$recor, _health$modules$live, _health$modules$index, _health$modules$reten, _health$vpn, _health$vpn2;\n  const [health, setHealth] = useState(null);\n  useEffect(() => {\n    const fetchHealth = () => {\n      fetch(`${API_ROOT}/api/system/health`).then(r => r.json()).then(data => setHealth(data)).catch(e => console.error(\"Health fetch failed\", e));\n    };\n    fetchHealth();\n    const timer = setInterval(fetchHealth, 5000);\n    return () => clearInterval(timer);\n  }, []);\n  if (!health) return null;\n  const getStatusColor = status => status === 'OK' ? '#4CAF50' : '#F44336';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      alignItems: \"center\",\n      gap: \"10px\",\n      marginRight: \"20px\",\n      padding: \"4px 10px\",\n      background: \"rgba(0,0,0,0.2)\",\n      borderRadius: \"4px\",\n      fontSize: \"12px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: \"#888\",\n        fontWeight: \"bold\",\n        textTransform: \"uppercase\",\n        fontSize: \"10px\"\n      },\n      children: \"System:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(StatusDot, {\n      label: \"REC\",\n      status: (_health$modules$recor = health.modules.recorder) === null || _health$modules$recor === void 0 ? void 0 : _health$modules$recor.status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(StatusDot, {\n      label: \"LIVE\",\n      status: (_health$modules$live = health.modules.live) === null || _health$modules$live === void 0 ? void 0 : _health$modules$live.status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(StatusDot, {\n      label: \"IDX\",\n      status: (_health$modules$index = health.modules.indexer) === null || _health$modules$index === void 0 ? void 0 : _health$modules$index.status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(StatusDot, {\n      label: \"RET\",\n      status: (_health$modules$reten = health.modules.retention) === null || _health$modules$reten === void 0 ? void 0 : _health$modules$reten.status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(StatusDot, {\n      label: \"VPN-D\",\n      status: (_health$vpn = health.vpn) === null || _health$vpn === void 0 ? void 0 : _health$vpn.dispatch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(StatusDot, {\n      label: \"VPN-A\",\n      status: (_health$vpn2 = health.vpn) === null || _health$vpn2 === void 0 ? void 0 : _health$vpn2.ai\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginLeft: \"10px\",\n        padding: \"2px 6px\",\n        borderRadius: \"3px\",\n        background: health.disk > 90 ? \"#F44336\" : \"rgba(255,255,255,0.1)\",\n        color: \"#fff\",\n        fontWeight: \"bold\",\n        fontSize: \"10px\"\n      },\n      children: [\"HDD: \", health.disk, \"%\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginLeft: \"5px\",\n        color: health.system === 'RUNNING' ? colors.primary : '#FF9800',\n        fontWeight: \"bold\"\n      },\n      children: health.system\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 9\n  }, this);\n}\n_s(SystemStatus, \"vW+j/qGZXZr2cCUcoowjuEDqsbQ=\");\n_c = SystemStatus;\nfunction StatusDot({\n  label,\n  status\n}) {\n  const color = status === 'OK' ? '#4CAF50' : '#F44336';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      alignItems: \"center\",\n      gap: \"4px\"\n    },\n    title: `${label}: ${status}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: 6,\n        height: 6,\n        borderRadius: \"50%\",\n        background: color,\n        boxShadow: `0 0 5px ${color}`\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      style: {\n        fontSize: \"9px\",\n        color: \"#aaa\"\n      },\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n}\n_c2 = StatusDot;\nvar _c, _c2;\n$RefreshReg$(_c, \"SystemStatus\");\n$RefreshReg$(_c2, \"StatusDot\");","map":{"version":3,"names":["React","useState","useEffect","colors","jsxDEV","_jsxDEV","API_ROOT","window","location","hostname","SystemStatus","_s","_health$modules$recor","_health$modules$live","_health$modules$index","_health$modules$reten","_health$vpn","_health$vpn2","health","setHealth","fetchHealth","fetch","then","r","json","data","catch","e","console","error","timer","setInterval","clearInterval","getStatusColor","status","style","display","alignItems","gap","marginRight","padding","background","borderRadius","fontSize","children","color","fontWeight","textTransform","fileName","_jsxFileName","lineNumber","columnNumber","StatusDot","label","modules","recorder","live","indexer","retention","vpn","dispatch","ai","marginLeft","disk","system","primary","_c","title","width","height","boxShadow","_c2","$RefreshReg$"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/components/SystemStatus.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { colors } from '../theme';\r\n\r\nconst API_ROOT = window.location.hostname === 'localhost' ? 'http://localhost:8080' : '';\r\n\r\nexport default function SystemStatus() {\r\n    const [health, setHealth] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchHealth = () => {\r\n            fetch(`${API_ROOT}/api/system/health`)\r\n                .then(r => r.json())\r\n                .then(data => setHealth(data))\r\n                .catch(e => console.error(\"Health fetch failed\", e));\r\n        };\r\n\r\n        fetchHealth();\r\n        const timer = setInterval(fetchHealth, 5000);\r\n        return () => clearInterval(timer);\r\n    }, []);\r\n\r\n    if (!health) return null;\r\n\r\n    const getStatusColor = (status) => status === 'OK' ? '#4CAF50' : '#F44336';\r\n\r\n    return (\r\n        <div style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"10px\",\r\n            marginRight: \"20px\",\r\n            padding: \"4px 10px\",\r\n            background: \"rgba(0,0,0,0.2)\",\r\n            borderRadius: \"4px\",\r\n            fontSize: \"12px\"\r\n        }}>\r\n            <div style={{ color: \"#888\", fontWeight: \"bold\", textTransform: \"uppercase\", fontSize: \"10px\" }}>System:</div>\r\n\r\n            {/* Legend: REC, LIVE, IDX, RET, API */}\r\n            <StatusDot label=\"REC\" status={health.modules.recorder?.status} />\r\n            <StatusDot label=\"LIVE\" status={health.modules.live?.status} />\r\n            <StatusDot label=\"IDX\" status={health.modules.indexer?.status} />\r\n            <StatusDot label=\"RET\" status={health.modules.retention?.status} />\r\n\r\n            {/* New: VPN Tunnels */}\r\n            <StatusDot label=\"VPN-D\" status={health.vpn?.dispatch} />\r\n            <StatusDot label=\"VPN-A\" status={health.vpn?.ai} />\r\n\r\n            <div style={{\r\n                marginLeft: \"10px\",\r\n                padding: \"2px 6px\",\r\n                borderRadius: \"3px\",\r\n                background: health.disk > 90 ? \"#F44336\" : \"rgba(255,255,255,0.1)\",\r\n                color: \"#fff\",\r\n                fontWeight: \"bold\",\r\n                fontSize: \"10px\"\r\n            }}>\r\n                HDD: {health.disk}%\r\n            </div>\r\n\r\n            <div style={{\r\n                marginLeft: \"5px\",\r\n                color: health.system === 'RUNNING' ? colors.primary : '#FF9800',\r\n                fontWeight: \"bold\"\r\n            }}>\r\n                {health.system}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction StatusDot({ label, status }) {\r\n    const color = status === 'OK' ? '#4CAF50' : '#F44336';\r\n    return (\r\n        <div style={{ display: \"flex\", alignItems: \"center\", gap: \"4px\" }} title={`${label}: ${status}`}>\r\n            <div style={{ width: 6, height: 6, borderRadius: \"50%\", background: color, boxShadow: `0 0 5px ${color}` }}></div>\r\n            <span style={{ fontSize: \"9px\", color: \"#aaa\" }}>{label}</span>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}