{"ast":null,"code":"import _objectSpread from\"I:/dispecerat/github_release/dss-edge/local-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo,useRef}from\"react\";import{API}from\"../../api\";import{colors}from\"../../theme\";import{Trash,Edit,SettingsIcon,Lock,AlertTriangle,Save,Camera,Video,Archive,ChevronRight,RefreshCw}from\"../../components/Icons\";import Go2RTCPlayer from\"../../components/Go2RTCPlayer\";// Import optimized player\nimport RecorderPlayer from\"../../components/RecorderPlayer\";// Still used for Channel Setup Large View\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const videoStyle={width:\"100%\",height:\"100%\"};// Sub-component for auto-refreshing preview (Snapshot Mode for Performance)\nexport function LivePreview(_ref){let{camId,active=true}=_ref;if(!active)return/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",height:\"100%\",background:\"#000\"}});return/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",height:\"100%\",background:\"#000\",overflow:\"hidden\"},children:/*#__PURE__*/_jsx(Go2RTCPlayer,{camId:camId,streamType:\"sub\"})});}// --- REWRITTEN ROI COMPONENT ---\n// Uses normalized coordinates (0-1) for storage, mapped to dynamic pixel size for display.\nexport function CanvasROI(_ref2){let{points=[],onChange,readOnly=false,otherZones=[]}=_ref2;const containerRef=useRef(null);const canvasRef=useRef(null);const[dims,setDims]=useState({w:0,h:0});// Container dimensions\nconst[draggingIdx,setDraggingIdx]=useState(-1);// 1. Measure Container Size\nuseEffect(()=>{const obs=new ResizeObserver(entries=>{for(const entry of entries){const{width,height}=entry.contentRect;setDims({w:Math.round(width),h:Math.round(height)});}});if(containerRef.current)obs.observe(containerRef.current);return()=>obs.disconnect();},[]);// 2. Draw Loop\nuseEffect(()=>{const canvas=canvasRef.current;if(!canvas||dims.w===0||dims.h===0)return;const ctx=canvas.getContext(\"2d\");// Clear (using the set Dims)\nctx.clearRect(0,0,dims.w,dims.h);// Drawing Helper\nconst drawZone=(pts,stroke,fill)=>{if(!pts||pts.length===0)return;ctx.beginPath();// Move to first\nctx.moveTo(pts[0][0]*dims.w,pts[0][1]*dims.h);// Lines to rest\nfor(let i=1;i<pts.length;i++){ctx.lineTo(pts[i][0]*dims.w,pts[i][1]*dims.h);}ctx.closePath();ctx.strokeStyle=stroke;ctx.fillStyle=fill;ctx.lineWidth=2;ctx.fill();ctx.stroke();// Handles (only for active, editable)\nif(!readOnly&&stroke===\"#00ff00\"){ctx.fillStyle=\"#fff\";pts.forEach(p=>{ctx.beginPath();ctx.arc(p[0]*dims.w,p[1]*dims.h,4,0,Math.PI*2);ctx.fill();});}};// Draw Inactive Zones\notherZones.forEach(z=>{if(z.points)drawZone(z.points,\"rgba(0,122,204,0.5)\",\"rgba(0,122,204,0.2)\");});// Draw Active Zone\n// Ensure points are normalized (0-1). If > 1, convert on fly to support legacy.\nconst safePoints=points.map(p=>[p[0]>1?p[0]/dims.w:p[0],p[1]>1?p[1]/dims.h:p[1]]);drawZone(safePoints,readOnly?\"#ff9800\":\"#00ff00\",readOnly?\"rgba(255,152,0,0.25)\":\"rgba(0,255,0,0.15)\");},[points,dims,readOnly,otherZones]);// 3. Interactions\nconst handleMouseDown=e=>{if(readOnly)return;// Use native Offset - much faster and accurate relative to element\nconst x=e.nativeEvent.offsetX;const y=e.nativeEvent.offsetY;// Normalize\nconst nx=Math.max(0,Math.min(1,x/dims.w));const ny=Math.max(0,Math.min(1,y/dims.h));// Check hit (distance in pixels)\n// Convert existing points to pixels for check\nconst hitIdx=points.findIndex(p=>{const px=p[0]>1?p[0]:p[0]*dims.w;const py=p[1]>1?p[1]:p[1]*dims.h;return Math.sqrt((px-x)**2+(py-y)**2)<10;});if(hitIdx!==-1){setDraggingIdx(hitIdx);}else{// Add new point (Normalized)\nonChange([...points,[nx,ny]]);}};const handleMouseMove=e=>{if(draggingIdx===-1||readOnly)return;const x=e.nativeEvent.offsetX;const y=e.nativeEvent.offsetY;const nx=Math.max(0,Math.min(1,x/dims.w));const ny=Math.max(0,Math.min(1,y/dims.h));const newPoints=[...points];newPoints[draggingIdx]=[nx,ny];onChange(newPoints);};const handleMouseUp=()=>setDraggingIdx(-1);return/*#__PURE__*/_jsx(\"div\",{ref:containerRef,style:{position:\"absolute\",top:0,left:0,width:\"100%\",height:\"100%\",zIndex:10},children:/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,width:dims.w// Lock resolution to physical pixels\n,height:dims.h,style:{width:\"100%\",height:\"100%\",display:\"block\",cursor:readOnly?\"default\":\"crosshair\"},onMouseDown:handleMouseDown,onMouseMove:handleMouseMove,onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp})});}const styles={inputTable:{background:\"#444\",border:\"1px solid #555\",color:\"#fff\",width:\"100%\",padding:2},btnPrimary:{marginRight:10,padding:\"6px 20px\",background:\"#007acc\",color:\"white\",border:\"none\",borderRadius:2,fontSize:13,cursor:\"pointer\",fontWeight:\"bold\"},btnToolbar:{marginRight:10,padding:\"6px 15px\",background:\"#333\",color:\"#ddd\",border:\"1px solid #444\",borderRadius:2,fontSize:12,cursor:\"pointer\"}};export function IPDevicesRootSection(_ref3){let{cams,statusData={},onEditCam,onSelectCam,onDeleteCam}=_ref3;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:20},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:18,marginBottom:20,color:\"#fff\"},children:\"Gestionare Dispozitive IP\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"repeat(auto-fill, minmax(300px, 1fr))\",gap:20},children:cams.map(c=>{var _statusData$c$id,_statusData$c$id2,_statusData$c$id3;return/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#252526\",border:\"1px solid #444\",borderRadius:4,overflow:\"hidden\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{height:150,background:\"#000\",position:\"relative\"},children:[/*#__PURE__*/_jsx(Go2RTCPlayer,{camId:c.id,streamType:\"sub\",style:{width:\"100%\",height:\"100%\",objectFit:\"fill\"}}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",bottom:0,left:0,right:0,padding:10,background:\"rgba(0,0,0,0.7)\",color:\"#fff\",fontSize:14},children:c.name||c.ip})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:15},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:10},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,fontWeight:\"bold\",color:\"#fff\"},children:c.ip}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",alignItems:\"flex-end\"},children:[(_statusData$c$id=statusData[c.id])!==null&&_statusData$c$id!==void 0&&_statusData$c$id.connected||((_statusData$c$id2=statusData[c.id])===null||_statusData$c$id2===void 0?void 0:_statusData$c$id2.status)===\"ONLINE\"?/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:11,color:\"#4caf50\",background:\"rgba(76,175,80,0.1)\",padding:\"2px 6px\",borderRadius:4},children:[\"Active (\",((_statusData$c$id3=statusData[c.id])===null||_statusData$c$id3===void 0?void 0:_statusData$c$id3.fps)||0,\" FPS)\"]}):/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,color:\"#f44336\",background:\"rgba(244,67,54,0.1)\",padding:\"2px 6px\",borderRadius:4},children:\"Offline\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:9,color:\"#888\",marginTop:3},children:[\"Check: \",new Date().toLocaleTimeString()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:12,color:\"#aaa\",marginBottom:10},children:[\"Model: \",c.model||\"Generic\",\" | \",c.manufacturer]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:10,marginBottom:10},children:[/*#__PURE__*/_jsxs(\"button\",{style:_objectSpread(_objectSpread({},styles.btnToolbar),{},{flex:1}),onClick:()=>onEditCam(c),children:[/*#__PURE__*/_jsx(Edit,{size:12}),\" Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{style:_objectSpread(_objectSpread({},styles.btnToolbar),{},{flex:1}),onClick:()=>onSelectCam(c.id),children:[/*#__PURE__*/_jsx(SettingsIcon,{size:12}),\" Config\"]})]}),/*#__PURE__*/_jsxs(\"button\",{style:{width:\"100%\",padding:\"6px 0\",background:\"rgba(244, 67, 54, 0.1)\",border:\"1px solid #d32f2f\",color:\"#e57373\",borderRadius:2,fontSize:12,cursor:\"pointer\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",gap:5},onClick:()=>onDeleteCam(c.id),children:[/*#__PURE__*/_jsx(Trash,{size:12}),\" Delete Device\"]})]})]},c.id);})})]});}export function CameraSettingsSection(_ref4){var _statusData$cam$id,_statusData$cam$id2,_statusData$cam$id3,_caps$codecs,_caps$resolutions,_caps$gopRange,_caps$gopRange2,_caps$fps;let{cam,statusData,updateCam,saveAll,deleteCam,openEditModal,setSelection}=_ref4;const[syncing,setSyncing]=useState(false);const[caps,setCaps]=useState(null);// Store dynamic device capabilities\nconst fetchDeviceConfig=async()=>{if(!cam||!cam.id)return;try{const res=await API.get(\"/device-config/\".concat(cam.id));const{current,capabilities}=res.data;if(current){// Update local storage state with real device values\nif(current.codec)updateCam(cam.id,\"codec\",current.codec);if(current.fps)updateCam(cam.id,\"fps\",current.fps);if(current.gop)updateCam(cam.id,\"gop\",current.gop);if(current.resolution)updateCam(cam.id,\"resolution\",current.resolution);}if(capabilities){setCaps(capabilities);}}catch(e){console.warn(\"[CamSync] Polling failed for \".concat(cam.ip,\":\"),e.message);}};// Initial load and periodic polling (every 10s)\nuseEffect(()=>{fetchDeviceConfig();const timer=setInterval(fetchDeviceConfig,10000);return()=>clearInterval(timer);},[cam===null||cam===void 0?void 0:cam.id]);const handleRemoteChange=async(key,val)=>{// 1. Optimistic Update (UI)\nupdateCam(cam.id,key,val);// 2. Send to Device\nsetSyncing(true);try{console.log(\"[CamSync] Updating \".concat(key,\" to \").concat(val,\" for \").concat(cam.ip,\"...\"));await API.post(\"/device-config/\".concat(cam.id),{[key]:val});// Backend now handles saving to cameras.json, so we don't need saveAll() here.\n// This avoids race conditions with stale frontend state.\n// Confirm with a fresh fetch\nsetTimeout(fetchDeviceConfig,1500);}catch(e){var _e$response,_e$response$data;console.error(\"[CamSync] Update failed:\",e);alert(\"Failed to update camera: \".concat(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.error)||e.message));// Revert or sync back on error\nfetchDeviceConfig();}finally{setSyncing(false);}};if(!cam)return/*#__PURE__*/_jsx(\"div\",{children:\"Camera not found\"});return/*#__PURE__*/_jsx(\"div\",{style:{padding:20,display:\"flex\",flexDirection:\"column\",height:\"100%\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:20},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{fontSize:18,marginBottom:15,color:\"#fff\"},children:[\"Camera \",cam.ip]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"100px 1fr\",gap:10,maxWidth:600,marginBottom:15},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Model:\"}),\" \",/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:\"bold\"},children:cam.model||\"Autodetect\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Device Name:\"}),/*#__PURE__*/_jsx(\"input\",{style:{background:\"#333\",border:\"1px solid #555\",color:\"#ddd\",padding:4},value:cam.name||\"Camera \".concat(cam.ip),onChange:e=>updateCam(cam.id,\"name\",e.target.value),onBlur:()=>saveAll()})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:10,display:\"flex\",alignItems:\"center\",gap:15},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"IP Address: \",/*#__PURE__*/_jsx(\"b\",{style:{color:\"#fff\"},children:cam.ip})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Port: \",/*#__PURE__*/_jsx(\"b\",{style:{color:\"#fff\"},children:cam.port})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"User: \",/*#__PURE__*/_jsx(\"b\",{style:{color:\"#fff\"},children:cam.user})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openEditModal(cam),style:{color:\"rgb(66, 165, 245)\",background:\"none\",border:\"none\",cursor:\"pointer\",textDecoration:\"underline\",padding:0},children:\"Setup connection\"})]}),cam.storagePath&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:20,fontSize:13,color:\"#ccc\",display:\"flex\",alignItems:\"center\",gap:5},children:[\"Storage Path:\",/*#__PURE__*/_jsxs(\"span\",{title:\"Click to view recordings\",onClick:()=>window.location.href=\"/playback?camId=\".concat(cam.id),style:{fontFamily:\"monospace\",color:\"#81d4fa\",cursor:\"pointer\",textDecoration:\"underline\",background:\"rgba(33, 150, 243, 0.1)\",padding:\"2px 6px\",borderRadius:4},children:[cam.storagePath,\" [->]\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"repeat(6, auto)\",gap:10,marginBottom:20,alignItems:\"center\",justifyContent:\"start\"},children:[/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},styles.btnToolbar),{},{width:120,background:cam.enabled!==false?\"#333\":\"#4caf50\",color:cam.enabled!==false?\"#ddd\":\"#fff\"}),onClick:()=>{const next=cam.enabled!==false?false:true;updateCam(cam.id,\"enabled\",!!next);saveAll();},children:cam.enabled!==false?\"Disable\":\"Enable\"}),/*#__PURE__*/_jsxs(\"button\",{style:_objectSpread(_objectSpread({},styles.btnToolbar),{},{width:120}),onClick:()=>deleteCam(cam.id),children:[/*#__PURE__*/_jsx(Trash,{size:12,style:{marginRight:5}}),\" Delete...\"]}),/*#__PURE__*/_jsxs(\"button\",{style:_objectSpread(_objectSpread({},styles.btnToolbar),{},{background:\"rgba(0,122,204,0.1)\",border:\"1px solid #007acc\",color:\"#81d4fa\",width:160}),onClick:()=>setSelection({type:\"CHANNEL\",id:cam.id}),children:[/*#__PURE__*/_jsx(SettingsIcon,{size:12,style:{marginRight:5}}),\" AI / Channel Setup\"]}),/*#__PURE__*/_jsx(\"a\",{href:\"http://\".concat(cam.ip),target:\"_blank\",rel:\"noreferrer\",style:{color:\"rgb(66, 165, 245)\",textDecoration:\"none\",alignSelf:\"center\",margin:\"0 10px\"},children:\"Web Interface\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:30,display:\"flex\",alignItems:\"center\",gap:20},children:[(_statusData$cam$id=statusData[cam.id])!==null&&_statusData$cam$id!==void 0&&_statusData$cam$id.connected||((_statusData$cam$id2=statusData[cam.id])===null||_statusData$cam$id2===void 0?void 0:_statusData$cam$id2.status)===\"ONLINE\"?/*#__PURE__*/_jsxs(\"div\",{children:[\"State: \",/*#__PURE__*/_jsx(\"span\",{style:{color:\"rgb(76, 175, 80)\",fontWeight:\"bold\"},children:\"Connected\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[\"State: \",/*#__PURE__*/_jsx(\"span\",{style:{color:\"#f44336\",fontWeight:\"bold\"},children:\"Disconnected production\"}),\" \",/*#__PURE__*/_jsx(\"span\",{style:{fontSize:11,color:\"#ffa726\",marginLeft:10},children:(_statusData$cam$id3=statusData[cam.id])!==null&&_statusData$cam$id3!==void 0&&_statusData$cam$id3.lastError?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AlertTriangle,{size:10}),\" \",statusData[cam.id].lastError]}):\"(Retry in 5s...)\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchDeviceConfig,style:{background:\"rgba(255,255,255,0.05)\",border:\"1px solid #444\",color:\"#fff\",padding:\"4px 10px\",borderRadius:4,cursor:\"pointer\",fontSize:12,display:\"flex\",alignItems:\"center\",gap:5},disabled:syncing,children:syncing?\"Syncing...\":\"ðŸ”„ Refresh State\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:\"#666\",fontSize:11},children:\"Auto-sync active (10s)\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:20},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:160,height:90,background:\"#000\",border:\"1px solid #444\",position:\"relative\"},children:/*#__PURE__*/_jsx(LivePreview,{camId:cam.id,active:true})}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,position:\"relative\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"100px 100px 120px 80px 80px\",gap:10,fontSize:12,fontWeight:\"bold\",marginBottom:5,color:\"#aaa\"},children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{children:\"Codec\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Resolution\"}),/*#__PURE__*/_jsx(\"div\",{children:\"GOP\"}),/*#__PURE__*/_jsx(\"div\",{children:\"FPS\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"100px 100px 120px 80px 80px\",gap:10,marginBottom:10,alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{color:cam.codec===\"H.265\"?\"#ffa726\":\"#4caf50\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:true,readOnly:true,style:{marginRight:5}}),\" Video\",cam.codec===\"H.265\"&&/*#__PURE__*/_jsx(\"span\",{title:\"WebRTC doesn't support H.265 natively\",children:\" \\u26A0\\uFE0F\"})]}),/*#__PURE__*/_jsx(\"select\",{style:styles.inputTable,value:cam.codec||\"H.264\",onChange:e=>handleRemoteChange(\"codec\",e.target.value),children:(caps===null||caps===void 0?void 0:(_caps$codecs=caps.codecs)===null||_caps$codecs===void 0?void 0:_caps$codecs.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c,children:c},c)))||/*#__PURE__*/_jsx(\"option\",{children:\"H.264\"})}),/*#__PURE__*/_jsx(\"select\",{style:styles.inputTable,value:cam.resolution,onChange:e=>handleRemoteChange(\"resolution\",e.target.value),children:(caps===null||caps===void 0?void 0:(_caps$resolutions=caps.resolutions)===null||_caps$resolutions===void 0?void 0:_caps$resolutions.map(r=>/*#__PURE__*/_jsx(\"option\",{value:\"\".concat(r.width,\"x\").concat(r.height),children:r.label},\"\".concat(r.width,\"x\").concat(r.height))))||/*#__PURE__*/_jsx(\"option\",{children:cam.resolution})}),/*#__PURE__*/_jsx(\"input\",{style:styles.inputTable,type:\"number\",value:cam.gop||20,min:(caps===null||caps===void 0?void 0:(_caps$gopRange=caps.gopRange)===null||_caps$gopRange===void 0?void 0:_caps$gopRange.min)||1,max:(caps===null||caps===void 0?void 0:(_caps$gopRange2=caps.gopRange)===null||_caps$gopRange2===void 0?void 0:_caps$gopRange2.max)||400,onChange:e=>updateCam(cam.id,\"gop\",e.target.value),onBlur:e=>handleRemoteChange(\"gop\",e.target.value)}),/*#__PURE__*/_jsx(\"select\",{style:styles.inputTable,value:cam.fps||25,onChange:e=>handleRemoteChange(\"fps\",e.target.value),children:(caps===null||caps===void 0?void 0:(_caps$fps=caps.fps)===null||_caps$fps===void 0?void 0:_caps$fps.map(f=>/*#__PURE__*/_jsxs(\"option\",{value:f,children:[f,\" fps\"]},f)))||/*#__PURE__*/_jsxs(\"option\",{children:[cam.fps,\" fps\"]})})]}),cam.codec===\"H.265\"&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"#ffa726\",fontSize:11,marginTop:5},children:[/*#__PURE__*/_jsx(AlertTriangle,{size:10}),\" Camera is in H.265 mode. Switch to H.264 for better grid performance and browser compatibility.\"]})]})]})]})});}export function ChannelSettingsSection(_ref5){var _cam$ai_server,_cam$ai_server2;let{cam,cams,setCams,setSelection,availableModules,updateCam,saveAll}=_ref5;const[activeZoneIdx,setActiveZoneIdx]=useState(0);const[isDrawing,setIsDrawing]=useState(false);const[roiPoints,setRoiPoints]=useState([]);const camAI=cam.ai_server||{};let zones=camAI.zones||[];if(zones.length===0&&camAI.roi&&camAI.roi.length>0){zones=[{name:\"Default Zone\",points:camAI.roi,objects:camAI.objects||{}}];}const safeIdx=activeZoneIdx>=zones.length?0:activeZoneIdx;const activeZone=zones[safeIdx]||null;const pointsToShow=isDrawing?roiPoints:(activeZone===null||activeZone===void 0?void 0:activeZone.points)||[];const silentSave=async updatedCams=>{try{await API.post(\"/cameras/config\",updatedCams);}catch(e){console.error(\"Silent save failed\",e);alert(\"Error saving settings: \"+e.message);}};const handleSaveZonePoints=()=>{setIsDrawing(false);const newZones=[...zones];if(!newZones[safeIdx])return;newZones[safeIdx]=_objectSpread(_objectSpread({},newZones[safeIdx]),{},{points:roiPoints});const newConf=_objectSpread(_objectSpread({},camAI),{},{zones:newZones,enabled:true});const updatedCams=cams.map(c=>c.id===cam.id?_objectSpread(_objectSpread({},c),{},{ai_server:newConf}):c);setCams(updatedCams);silentSave(updatedCams);};const handleAddZone=()=>{const newName=\"Zone \".concat(zones.length+1);const newZones=[...zones,{name:newName,points:[],objects:{}}];const newConf=_objectSpread(_objectSpread({},camAI),{},{zones:newZones});const updatedCams=cams.map(c=>c.id===cam.id?_objectSpread(_objectSpread({},c),{},{ai_server:newConf}):c);setCams(updatedCams);setActiveZoneIdx(newZones.length-1);silentSave(updatedCams);};const handleDeleteZone=()=>{if(!activeZone)return;if(!window.confirm(\"Delete \".concat(activeZone.name,\"?\")))return;const newZones=zones.filter((_,i)=>i!==safeIdx);const newConf=_objectSpread(_objectSpread({},camAI),{},{zones:newZones});const updatedCams=cams.map(c=>c.id===cam.id?_objectSpread(_objectSpread({},c),{},{ai_server:newConf}):c);setCams(updatedCams);setActiveZoneIdx(0);silentSave(updatedCams);};const handleObjectToggle=objKey=>{var _activeZone$objects;if(!activeZone)return;const newObjs=_objectSpread(_objectSpread({},activeZone.objects||{}),{},{[objKey]:!((_activeZone$objects=activeZone.objects)!==null&&_activeZone$objects!==void 0&&_activeZone$objects[objKey])});const newZones=[...zones];newZones[safeIdx]=_objectSpread(_objectSpread({},newZones[safeIdx]),{},{objects:newObjs});const newConf=_objectSpread(_objectSpread({},camAI),{},{zones:newZones});const updatedCams=cams.map(c=>c.id===cam.id?_objectSpread(_objectSpread({},c),{},{ai_server:newConf}):c);setCams(updatedCams);silentSave(updatedCams);};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"baseline\",marginBottom:15},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{fontSize:18,margin:0,color:\"#fff\"},children:[\"AI Zones: \",cam.name||cam.ip]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelection({type:\"CAMERA\",id:cam.id}),style:{color:\"rgb(66, 165, 245)\",background:\"none\",border:\"none\",cursor:\"pointer\",fontSize:13},children:\"[Back] Back to Hardware Settings\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:20,height:500},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:3,display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100%\",aspectRatio:\"16/9\",border:\"2px solid #444\",borderRadius:4,overflow:\"hidden\",background:\"#000\",position:\"relative\"},children:[/*#__PURE__*/_jsx(Go2RTCPlayer,{camId:cam.id,style:videoStyle,streamType:\"hd\"}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",top:0,left:0,right:0,bottom:0,zIndex:10},children:activeZone?/*#__PURE__*/_jsx(CanvasROI,{points:pointsToShow,onChange:isDrawing?setRoiPoints:undefined,readOnly:!isDrawing,width:800,height:450,otherZones:zones.filter((_,i)=>i!==safeIdx)}):/*#__PURE__*/_jsx(\"div\",{style:{color:\"#fff\",position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%,-50%)\"},children:\"Select or Add a Zone\"})})]}),activeZone&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10,display:\"flex\",gap:10,padding:8,background:\"#252526\",borderRadius:4,border:\"1px solid #333\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,color:\"#aaa\",fontWeight:\"bold\",marginRight:10},children:\"Zone Actions:\"}),isDrawing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},styles.btnPrimary),{},{background:\"#4caf50\"}),onClick:handleSaveZonePoints,children:\"[SAVE] Save Area\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.btnToolbar,onClick:()=>{setIsDrawing(false);setRoiPoints([]);},children:\"Cancel\"})]}):/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},styles.btnPrimary),{},{background:\"#2196f3\"}),onClick:()=>{setRoiPoints(activeZone.points||[]);setIsDrawing(true);},children:\"[EDIT] Edit Area\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,background:\"#1e1e1e\",border:\"1px solid #444\",padding:15,display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:20,flex:1,overflowY:\"auto\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{borderBottom:\"1px solid #444\",marginBottom:15,paddingBottom:15},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:\"0 0 10px 0\",color:colors.accent,fontSize:13},children:\"AI Configuration\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:15},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:5},children:/*#__PURE__*/_jsxs(\"label\",{style:{fontSize:12,color:\"#aaa\"},children:[\"Sensitivity: \",(((_cam$ai_server=cam.ai_server)===null||_cam$ai_server===void 0?void 0:_cam$ai_server.sensitivity)*100||50).toFixed(0),\"%\"]})}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:\"1\",step:\"0.05\",value:((_cam$ai_server2=cam.ai_server)===null||_cam$ai_server2===void 0?void 0:_cam$ai_server2.sensitivity)||0.5,onChange:e=>{const next=_objectSpread(_objectSpread({},cam.ai_server),{},{sensitivity:parseFloat(e.target.value)});const updated=cams.map(c=>c.id===cam.id?_objectSpread(_objectSpread({},c),{},{ai_server:next}):c);setCams(updated);silentSave(updated);},style:{width:\"100%\",cursor:\"pointer\"}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",fontSize:10,color:\"#666\",marginTop:4},children:[/*#__PURE__*/_jsx(\"span\",{children:\"0% (Filtrare Maxim\\u0103)\"}),/*#__PURE__*/_jsx(\"span\",{children:\"100% (Alert\\u0103 Maxim\\u0103)\"})]}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:11,color:\"#888\",marginTop:8,lineHeight:\"1.4\"},children:[/*#__PURE__*/_jsx(\"b\",{children:\"0%:\"}),\" Doar obiecte foarte clare. Reduce alarmele false (umbre, insecte).\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"100%:\"}),\" Detecteaz\\u0103 orice mi\\u0219care suspect\\u0103. Risc ridicat de alarme false.\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:10},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:0,color:\"#ddd\"},children:\"Detection Zones\"}),/*#__PURE__*/_jsx(\"button\",{style:{background:\"#4caf50\",color:\"#fff\",border:\"none\",borderRadius:2,cursor:\"pointer\",padding:\"2px 8px\",fontSize:16},onClick:handleAddZone,children:\"+\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:5},children:zones.map((z,idx)=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{setActiveZoneIdx(idx);setIsDrawing(false);},style:{padding:\"8px 10px\",background:idx===safeIdx?\"#2196f3\":\"#333\",color:\"#fff\",borderRadius:3,cursor:\"pointer\",fontSize:13,display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"span\",{children:z.name}),idx===safeIdx&&/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();handleDeleteZone();},style:{background:\"transparent\",border:\"none\",color:\"#fff\",cursor:\"pointer\"},children:\"\\xD7\"})]},idx))})]}),activeZone&&/*#__PURE__*/_jsxs(\"div\",{style:{borderTop:\"1px solid #444\",paddingTop:15},children:[/*#__PURE__*/_jsxs(\"h4\",{style:{marginTop:0,color:\"#ddd\",fontSize:13},children:[\"Search Objects (\",activeZone.name,\")\"]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gap:8,marginTop:10},children:((_cam$ai_server3,_currentMod$classes)=>{const currentModName=((_cam$ai_server3=cam.ai_server)===null||_cam$ai_server3===void 0?void 0:_cam$ai_server3.module)||\"ai_small\";const modulesList=Array.isArray(availableModules)?availableModules:[];const currentMod=modulesList.find(m=>m.name===currentModName);const displayClasses=(currentMod===null||currentMod===void 0?void 0:(_currentMod$classes=currentMod.classes)===null||_currentMod$classes===void 0?void 0:_currentMod$classes.length)>0?currentMod.classes:[\"person\",\"car\",\"truck\"];return displayClasses.map(obj=>{var _activeZone$objects2;return/*#__PURE__*/_jsxs(\"label\",{style:{display:\"flex\",alignItems:\"center\",color:\"#ccc\",fontSize:13,cursor:\"pointer\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:((_activeZone$objects2=activeZone.objects)===null||_activeZone$objects2===void 0?void 0:_activeZone$objects2[obj])||false,onChange:()=>handleObjectToggle(obj),style:{marginRight:8}}),obj]},obj);});})()})]}),/*#__PURE__*/_jsxs(\"div\",{style:{borderTop:\"1px solid #444\",marginTop:15,paddingTop:15},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:\"0 0 10px 0\",color:\"#ddd\",fontSize:13},children:\"Recording Setup\"}),/*#__PURE__*/_jsxs(\"label\",{style:{display:\"flex\",alignItems:\"center\",marginBottom:10,cursor:\"pointer\",color:\"#ccc\",fontSize:13},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:cam.record!==false,onChange:e=>{const updatedCams=cams.map(c=>c.id===cam.id?_objectSpread(_objectSpread({},c),{},{record:e.target.checked}):c);setCams(updatedCams);silentSave(updatedCams);},style:{marginRight:8}}),\"Enable Recording\"]})]})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useMemo","useRef","API","colors","Trash","Edit","SettingsIcon","Lock","AlertTriangle","Save","Camera","Video","Archive","ChevronRight","RefreshCw","Go2RTCPlayer","RecorderPlayer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","videoStyle","width","height","LivePreview","_ref","camId","active","style","background","overflow","children","streamType","CanvasROI","_ref2","points","onChange","readOnly","otherZones","containerRef","canvasRef","dims","setDims","w","h","draggingIdx","setDraggingIdx","obs","ResizeObserver","entries","entry","contentRect","Math","round","current","observe","disconnect","canvas","ctx","getContext","clearRect","drawZone","pts","stroke","fill","length","beginPath","moveTo","i","lineTo","closePath","strokeStyle","fillStyle","lineWidth","forEach","p","arc","PI","z","safePoints","map","handleMouseDown","e","x","nativeEvent","offsetX","y","offsetY","nx","max","min","ny","hitIdx","findIndex","px","py","sqrt","handleMouseMove","newPoints","handleMouseUp","ref","position","top","left","zIndex","display","cursor","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","styles","inputTable","border","color","padding","btnPrimary","marginRight","borderRadius","fontSize","fontWeight","btnToolbar","IPDevicesRootSection","_ref3","cams","statusData","onEditCam","onSelectCam","onDeleteCam","marginBottom","gridTemplateColumns","gap","c","_statusData$c$id","_statusData$c$id2","_statusData$c$id3","id","objectFit","bottom","right","name","ip","justifyContent","alignItems","flexDirection","connected","status","fps","marginTop","Date","toLocaleTimeString","model","manufacturer","_objectSpread","flex","onClick","size","CameraSettingsSection","_ref4","_statusData$cam$id","_statusData$cam$id2","_statusData$cam$id3","_caps$codecs","_caps$resolutions","_caps$gopRange","_caps$gopRange2","_caps$fps","cam","updateCam","saveAll","deleteCam","openEditModal","setSelection","syncing","setSyncing","caps","setCaps","fetchDeviceConfig","res","get","concat","capabilities","data","codec","gop","resolution","console","warn","message","timer","setInterval","clearInterval","handleRemoteChange","key","val","log","post","setTimeout","_e$response","_e$response$data","error","alert","response","maxWidth","value","target","onBlur","port","user","textDecoration","storagePath","title","window","location","href","fontFamily","enabled","next","type","rel","alignSelf","margin","marginLeft","lastError","disabled","checked","codecs","resolutions","r","label","gopRange","f","ChannelSettingsSection","_ref5","_cam$ai_server","_cam$ai_server2","setCams","availableModules","activeZoneIdx","setActiveZoneIdx","isDrawing","setIsDrawing","roiPoints","setRoiPoints","camAI","ai_server","zones","roi","objects","safeIdx","activeZone","pointsToShow","silentSave","updatedCams","handleSaveZonePoints","newZones","newConf","handleAddZone","newName","handleDeleteZone","confirm","filter","_","handleObjectToggle","objKey","_activeZone$objects","newObjs","aspectRatio","undefined","transform","overflowY","borderBottom","paddingBottom","accent","sensitivity","toFixed","step","parseFloat","updated","lineHeight","idx","stopPropagation","borderTop","paddingTop","_cam$ai_server3","_currentMod$classes","currentModName","module","modulesList","Array","isArray","currentMod","find","m","displayClasses","classes","obj","_activeZone$objects2","record"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/sections/settings/HardwareSection.js"],"sourcesContent":["import React, { useState, useEffect, useMemo, useRef } from \"react\";\r\nimport { API } from \"../../api\";\r\nimport { colors } from \"../../theme\";\r\nimport { Trash, Edit, SettingsIcon, Lock, AlertTriangle, Save, Camera, Video, Archive, ChevronRight, RefreshCw } from \"../../components/Icons\";\r\nimport Go2RTCPlayer from \"../../components/Go2RTCPlayer\"; // Import optimized player\r\nimport RecorderPlayer from \"../../components/RecorderPlayer\"; // Still used for Channel Setup Large View\r\n\r\nconst videoStyle = { width: \"100%\", height: \"100%\" };\r\n\r\n// Sub-component for auto-refreshing preview (Snapshot Mode for Performance)\r\nexport function LivePreview({ camId, active = true }) {\r\n    if (!active) return <div style={{ width: \"100%\", height: \"100%\", background: \"#000\" }} />;\r\n    return (\r\n        <div style={{ width: \"100%\", height: \"100%\", background: \"#000\", overflow: \"hidden\" }}>\r\n            <Go2RTCPlayer camId={camId} streamType=\"sub\" />\r\n        </div>\r\n    );\r\n}\r\n\r\n// --- REWRITTEN ROI COMPONENT ---\r\n// Uses normalized coordinates (0-1) for storage, mapped to dynamic pixel size for display.\r\nexport function CanvasROI({ points = [], onChange, readOnly = false, otherZones = [] }) {\r\n    const containerRef = useRef(null);\r\n    const canvasRef = useRef(null);\r\n    const [dims, setDims] = useState({ w: 0, h: 0 }); // Container dimensions\r\n    const [draggingIdx, setDraggingIdx] = useState(-1);\r\n\r\n    // 1. Measure Container Size\r\n    useEffect(() => {\r\n        const obs = new ResizeObserver(entries => {\r\n            for (const entry of entries) {\r\n                const { width, height } = entry.contentRect;\r\n                setDims({ w: Math.round(width), h: Math.round(height) });\r\n            }\r\n        });\r\n        if (containerRef.current) obs.observe(containerRef.current);\r\n        return () => obs.disconnect();\r\n    }, []);\r\n\r\n    // 2. Draw Loop\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas || dims.w === 0 || dims.h === 0) return;\r\n        const ctx = canvas.getContext(\"2d\");\r\n\r\n        // Clear (using the set Dims)\r\n        ctx.clearRect(0, 0, dims.w, dims.h);\r\n\r\n        // Drawing Helper\r\n        const drawZone = (pts, stroke, fill) => {\r\n            if (!pts || pts.length === 0) return;\r\n            ctx.beginPath();\r\n            // Move to first\r\n            ctx.moveTo(pts[0][0] * dims.w, pts[0][1] * dims.h);\r\n            // Lines to rest\r\n            for (let i = 1; i < pts.length; i++) {\r\n                ctx.lineTo(pts[i][0] * dims.w, pts[i][1] * dims.h);\r\n            }\r\n            ctx.closePath();\r\n            ctx.strokeStyle = stroke;\r\n            ctx.fillStyle = fill;\r\n            ctx.lineWidth = 2;\r\n            ctx.fill();\r\n            ctx.stroke();\r\n\r\n            // Handles (only for active, editable)\r\n            if (!readOnly && stroke === \"#00ff00\") {\r\n                ctx.fillStyle = \"#fff\";\r\n                pts.forEach(p => {\r\n                    ctx.beginPath();\r\n                    ctx.arc(p[0] * dims.w, p[1] * dims.h, 4, 0, Math.PI * 2);\r\n                    ctx.fill();\r\n                });\r\n            }\r\n        };\r\n\r\n        // Draw Inactive Zones\r\n        otherZones.forEach(z => {\r\n            if (z.points) drawZone(z.points, \"rgba(0,122,204,0.5)\", \"rgba(0,122,204,0.2)\");\r\n        });\r\n\r\n        // Draw Active Zone\r\n        // Ensure points are normalized (0-1). If > 1, convert on fly to support legacy.\r\n        const safePoints = points.map(p => [\r\n            p[0] > 1 ? p[0] / dims.w : p[0],\r\n            p[1] > 1 ? p[1] / dims.h : p[1]\r\n        ]);\r\n\r\n        drawZone(safePoints, readOnly ? \"#ff9800\" : \"#00ff00\", readOnly ? \"rgba(255,152,0,0.25)\" : \"rgba(0,255,0,0.15)\");\r\n\r\n    }, [points, dims, readOnly, otherZones]);\r\n\r\n    // 3. Interactions\r\n    const handleMouseDown = (e) => {\r\n        if (readOnly) return;\r\n\r\n        // Use native Offset - much faster and accurate relative to element\r\n        const x = e.nativeEvent.offsetX;\r\n        const y = e.nativeEvent.offsetY;\r\n\r\n        // Normalize\r\n        const nx = Math.max(0, Math.min(1, x / dims.w));\r\n        const ny = Math.max(0, Math.min(1, y / dims.h));\r\n\r\n        // Check hit (distance in pixels)\r\n        // Convert existing points to pixels for check\r\n        const hitIdx = points.findIndex(p => {\r\n            const px = p[0] > 1 ? p[0] : p[0] * dims.w;\r\n            const py = p[1] > 1 ? p[1] : p[1] * dims.h;\r\n            return Math.sqrt((px - x) ** 2 + (py - y) ** 2) < 10;\r\n        });\r\n\r\n        if (hitIdx !== -1) {\r\n            setDraggingIdx(hitIdx);\r\n        } else {\r\n            // Add new point (Normalized)\r\n            onChange([...points, [nx, ny]]);\r\n        }\r\n    };\r\n\r\n    const handleMouseMove = (e) => {\r\n        if (draggingIdx === -1 || readOnly) return;\r\n\r\n        const x = e.nativeEvent.offsetX;\r\n        const y = e.nativeEvent.offsetY;\r\n\r\n        const nx = Math.max(0, Math.min(1, x / dims.w));\r\n        const ny = Math.max(0, Math.min(1, y / dims.h));\r\n\r\n        const newPoints = [...points];\r\n        newPoints[draggingIdx] = [nx, ny];\r\n        onChange(newPoints);\r\n    };\r\n\r\n    const handleMouseUp = () => setDraggingIdx(-1);\r\n\r\n    return (\r\n        <div ref={containerRef} style={{ position: \"absolute\", top: 0, left: 0, width: \"100%\", height: \"100%\", zIndex: 10 }}>\r\n            <canvas\r\n                ref={canvasRef}\r\n                width={dims.w} // Lock resolution to physical pixels\r\n                height={dims.h}\r\n                style={{ width: \"100%\", height: \"100%\", display: \"block\", cursor: readOnly ? \"default\" : \"crosshair\" }}\r\n                onMouseDown={handleMouseDown}\r\n                onMouseMove={handleMouseMove}\r\n                onMouseUp={handleMouseUp}\r\n                onMouseLeave={handleMouseUp}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nconst styles = {\r\n    inputTable: { background: \"#444\", border: \"1px solid #555\", color: \"#fff\", width: \"100%\", padding: 2 },\r\n    btnPrimary: { marginRight: 10, padding: \"6px 20px\", background: \"#007acc\", color: \"white\", border: \"none\", borderRadius: 2, fontSize: 13, cursor: \"pointer\", fontWeight: \"bold\" },\r\n    btnToolbar: { marginRight: 10, padding: \"6px 15px\", background: \"#333\", color: \"#ddd\", border: \"1px solid #444\", borderRadius: 2, fontSize: 12, cursor: \"pointer\" },\r\n};\r\n\r\nexport function IPDevicesRootSection({ cams, statusData = {}, onEditCam, onSelectCam, onDeleteCam }) {\r\n    return (\r\n        <div style={{ padding: 20 }}>\r\n            <h2 style={{ fontSize: 18, marginBottom: 20, color: \"#fff\" }}>Gestionare Dispozitive IP</h2>\r\n            <div style={{ display: \"grid\", gridTemplateColumns: \"repeat(auto-fill, minmax(300px, 1fr))\", gap: 20 }}>\r\n                {cams.map(c => (\r\n                    <div key={c.id} style={{ background: \"#252526\", border: \"1px solid #444\", borderRadius: 4, overflow: \"hidden\" }}>\r\n                        <div style={{ height: 150, background: \"#000\", position: \"relative\" }}>\r\n                            <Go2RTCPlayer camId={c.id} streamType=\"sub\" style={{ width: \"100%\", height: \"100%\", objectFit: \"fill\" }} />\r\n                            <div style={{ position: \"absolute\", bottom: 0, left: 0, right: 0, padding: 10, background: \"rgba(0,0,0,0.7)\", color: \"#fff\", fontSize: 14 }}>\r\n                                {c.name || c.ip}\r\n                            </div>\r\n                        </div>\r\n                        <div style={{ padding: 15 }}>\r\n                            <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 10 }}>\r\n                                <div style={{ fontSize: 13, fontWeight: \"bold\", color: \"#fff\" }}>{c.ip}</div>\r\n                                <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"flex-end\" }}>\r\n                                    {(statusData[c.id]?.connected || statusData[c.id]?.status === \"ONLINE\") ?\r\n                                        <div style={{ fontSize: 11, color: \"#4caf50\", background: \"rgba(76,175,80,0.1)\", padding: \"2px 6px\", borderRadius: 4 }}>Active ({statusData[c.id]?.fps || 0} FPS)</div> :\r\n                                        <div style={{ fontSize: 11, color: \"#f44336\", background: \"rgba(244,67,54,0.1)\", padding: \"2px 6px\", borderRadius: 4 }}>Offline</div>\r\n                                    }\r\n                                    <div style={{ fontSize: 9, color: \"#888\", marginTop: 3 }}>\r\n                                        Check: {new Date().toLocaleTimeString()}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div style={{ fontSize: 12, color: \"#aaa\", marginBottom: 10 }}>Model: {c.model || \"Generic\"} | {c.manufacturer}</div>\r\n                            <div style={{ display: \"flex\", gap: 10, marginBottom: 10 }}>\r\n                                <button style={{ ...styles.btnToolbar, flex: 1 }} onClick={() => onEditCam(c)}><Edit size={12} /> Edit</button>\r\n                                <button style={{ ...styles.btnToolbar, flex: 1 }} onClick={() => onSelectCam(c.id)}><SettingsIcon size={12} /> Config</button>\r\n                            </div>\r\n                            <button\r\n                                style={{\r\n                                    width: \"100%\", padding: \"6px 0\", background: \"rgba(244, 67, 54, 0.1)\",\r\n                                    border: \"1px solid #d32f2f\", color: \"#e57373\", borderRadius: 2,\r\n                                    fontSize: 12, cursor: \"pointer\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", gap: 5\r\n                                }}\r\n                                onClick={() => onDeleteCam(c.id)}\r\n                            >\r\n                                <Trash size={12} /> Delete Device\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function CameraSettingsSection({\r\n    cam, statusData, updateCam, saveAll, deleteCam, openEditModal, setSelection\r\n}) {\r\n    const [syncing, setSyncing] = useState(false);\r\n    const [caps, setCaps] = useState(null); // Store dynamic device capabilities\r\n\r\n    const fetchDeviceConfig = async () => {\r\n        if (!cam || !cam.id) return;\r\n        try {\r\n            const res = await API.get(`/device-config/${cam.id}`);\r\n            const { current, capabilities } = res.data;\r\n            if (current) {\r\n                // Update local storage state with real device values\r\n                if (current.codec) updateCam(cam.id, \"codec\", current.codec);\r\n                if (current.fps) updateCam(cam.id, \"fps\", current.fps);\r\n                if (current.gop) updateCam(cam.id, \"gop\", current.gop);\r\n                if (current.resolution) updateCam(cam.id, \"resolution\", current.resolution);\r\n            }\r\n            if (capabilities) {\r\n                setCaps(capabilities);\r\n            }\r\n        } catch (e) {\r\n            console.warn(`[CamSync] Polling failed for ${cam.ip}:`, e.message);\r\n        }\r\n    };\r\n\r\n    // Initial load and periodic polling (every 10s)\r\n    useEffect(() => {\r\n        fetchDeviceConfig();\r\n        const timer = setInterval(fetchDeviceConfig, 10000);\r\n        return () => clearInterval(timer);\r\n    }, [cam?.id]);\r\n\r\n    const handleRemoteChange = async (key, val) => {\r\n        // 1. Optimistic Update (UI)\r\n        updateCam(cam.id, key, val);\r\n\r\n        // 2. Send to Device\r\n        setSyncing(true);\r\n        try {\r\n            console.log(`[CamSync] Updating ${key} to ${val} for ${cam.ip}...`);\r\n            await API.post(`/device-config/${cam.id}`, { [key]: val });\r\n\r\n            // Backend now handles saving to cameras.json, so we don't need saveAll() here.\r\n            // This avoids race conditions with stale frontend state.\r\n\r\n            // Confirm with a fresh fetch\r\n            setTimeout(fetchDeviceConfig, 1500);\r\n        } catch (e) {\r\n            console.error(`[CamSync] Update failed:`, e);\r\n            alert(`Failed to update camera: ${e.response?.data?.error || e.message}`);\r\n            // Revert or sync back on error\r\n            fetchDeviceConfig();\r\n        } finally {\r\n            setSyncing(false);\r\n        }\r\n    };\r\n\r\n    if (!cam) return <div>Camera not found</div>;\r\n    return (\r\n        <div style={{ padding: 20, display: \"flex\", flexDirection: \"column\", height: \"100%\" }}>\r\n            <div style={{ marginBottom: 20 }}>\r\n                <h2 style={{ fontSize: 18, marginBottom: 15, color: \"#fff\" }}>Camera {cam.ip}</h2>\r\n                <div style={{ display: \"grid\", gridTemplateColumns: \"100px 1fr\", gap: 10, maxWidth: 600, marginBottom: 15 }}>\r\n                    <label>Model:</label> <div style={{ fontWeight: \"bold\" }}>{cam.model || \"Autodetect\"}</div>\r\n                    <label>Device Name:</label>\r\n                    <input style={{ background: \"#333\", border: \"1px solid #555\", color: \"#ddd\", padding: 4 }}\r\n                        value={cam.name || `Camera ${cam.ip}`}\r\n                        onChange={e => updateCam(cam.id, \"name\", e.target.value)}\r\n                        onBlur={() => saveAll()}\r\n                    />\r\n                </div>\r\n                <div style={{ marginBottom: 10, display: \"flex\", alignItems: \"center\", gap: 15 }}>\r\n                    <span>IP Address: <b style={{ color: \"#fff\" }}>{cam.ip}</b></span>\r\n                    <span>Port: <b style={{ color: \"#fff\" }}>{cam.port}</b></span>\r\n                    <span>User: <b style={{ color: \"#fff\" }}>{cam.user}</b></span>\r\n                    <button onClick={() => openEditModal(cam)} style={{ color: \"rgb(66, 165, 245)\", background: \"none\", border: \"none\", cursor: \"pointer\", textDecoration: \"underline\", padding: 0 }}>Setup connection</button>\r\n                </div>\r\n                {cam.storagePath && (\r\n                    <div style={{ marginBottom: 20, fontSize: 13, color: \"#ccc\", display: \"flex\", alignItems: \"center\", gap: 5 }}>\r\n                        Storage Path:\r\n                        <span\r\n                            title=\"Click to view recordings\"\r\n                            onClick={() => window.location.href = `/playback?camId=${cam.id}`}\r\n                            style={{ fontFamily: \"monospace\", color: \"#81d4fa\", cursor: \"pointer\", textDecoration: \"underline\", background: \"rgba(33, 150, 243, 0.1)\", padding: \"2px 6px\", borderRadius: 4 }}\r\n                        >\r\n                            {cam.storagePath} [->]\r\n                        </span>\r\n                    </div>\r\n                )}\r\n                <div style={{ display: \"grid\", gridTemplateColumns: \"repeat(6, auto)\", gap: 10, marginBottom: 20, alignItems: \"center\", justifyContent: \"start\" }}>\r\n                    <button style={{ ...styles.btnToolbar, width: 120, background: (cam.enabled !== false) ? \"#333\" : \"#4caf50\", color: (cam.enabled !== false) ? \"#ddd\" : \"#fff\" }} onClick={() => { const next = (cam.enabled !== false) ? false : true; updateCam(cam.id, \"enabled\", !!next); saveAll(); }}>{(cam.enabled !== false) ? \"Disable\" : \"Enable\"}</button>\r\n                    <button style={{ ...styles.btnToolbar, width: 120 }} onClick={() => deleteCam(cam.id)}><Trash size={12} style={{ marginRight: 5 }} /> Delete...</button>\r\n                    <button\r\n                        style={{ ...styles.btnToolbar, background: \"rgba(0,122,204,0.1)\", border: \"1px solid #007acc\", color: \"#81d4fa\", width: 160 }}\r\n                        onClick={() => setSelection({ type: \"CHANNEL\", id: cam.id })}\r\n                    >\r\n                        <SettingsIcon size={12} style={{ marginRight: 5 }} /> AI / Channel Setup\r\n                    </button>\r\n                    <a href={`http://${cam.ip}`} target=\"_blank\" rel=\"noreferrer\" style={{ color: \"rgb(66, 165, 245)\", textDecoration: \"none\", alignSelf: \"center\", margin: \"0 10px\" }}>Web Interface</a>\r\n                </div>\r\n\r\n                <div style={{ marginBottom: 30, display: \"flex\", alignItems: \"center\", gap: 20 }}>\r\n                    {(statusData[cam.id]?.connected || statusData[cam.id]?.status === \"ONLINE\") ?\r\n                        <div>State: <span style={{ color: \"rgb(76, 175, 80)\", fontWeight: \"bold\" }}>Connected</span></div> :\r\n                        <div>State: <span style={{ color: \"#f44336\", fontWeight: \"bold\" }}>Disconnected production</span> <span style={{ fontSize: 11, color: \"#ffa726\", marginLeft: 10 }}>{statusData[cam.id]?.lastError ? <><AlertTriangle size={10} /> {statusData[cam.id].lastError}</> : \"(Retry in 5s...)\"}</span></div>\r\n                    }\r\n\r\n                    <button\r\n                        onClick={fetchDeviceConfig}\r\n                        style={{\r\n                            background: \"rgba(255,255,255,0.05)\",\r\n                            border: \"1px solid #444\",\r\n                            color: \"#fff\",\r\n                            padding: \"4px 10px\",\r\n                            borderRadius: 4,\r\n                            cursor: \"pointer\",\r\n                            fontSize: 12,\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            gap: 5\r\n                        }}\r\n                        disabled={syncing}\r\n                    >\r\n                        {syncing ? \"Syncing...\" : \"ðŸ”„ Refresh State\"}\r\n                    </button>\r\n                    <span style={{ color: \"#666\", fontSize: 11 }}>Auto-sync active (10s)</span>\r\n                </div>\r\n\r\n                <div style={{ display: \"flex\", gap: 20 }}>\r\n                    <div style={{ width: 160, height: 90, background: \"#000\", border: \"1px solid #444\", position: \"relative\" }}>\r\n                        <LivePreview camId={cam.id} active={true} />\r\n                    </div>\r\n                    <div style={{ flex: 1, position: \"relative\" }}>\r\n                        <div style={{ display: \"grid\", gridTemplateColumns: \"100px 100px 120px 80px 80px\", gap: 10, fontSize: 12, fontWeight: \"bold\", marginBottom: 5, color: \"#aaa\" }}>\r\n                            <div></div><div>Codec</div><div>Resolution</div><div>GOP</div><div>FPS</div>\r\n                        </div>\r\n                        <div style={{ display: \"grid\", gridTemplateColumns: \"100px 100px 120px 80px 80px\", gap: 10, marginBottom: 10, alignItems: \"center\" }}>\r\n                            <div style={{ color: cam.codec === \"H.265\" ? \"#ffa726\" : \"#4caf50\" }}>\r\n                                <input type=\"checkbox\" checked readOnly style={{ marginRight: 5 }} /> Video\r\n                                {cam.codec === \"H.265\" && <span title=\"WebRTC doesn't support H.265 natively\"> âš ï¸</span>}\r\n                            </div>\r\n\r\n                            <select style={styles.inputTable} value={cam.codec || \"H.264\"} onChange={e => handleRemoteChange(\"codec\", e.target.value)}>\r\n                                {caps?.codecs?.map(c => <option key={c} value={c}>{c}</option>) || <option>H.264</option>}\r\n                            </select>\r\n\r\n                            <select style={styles.inputTable} value={cam.resolution} onChange={e => handleRemoteChange(\"resolution\", e.target.value)}>\r\n                                {caps?.resolutions?.map(r => (\r\n                                    <option key={`${r.width}x${r.height}`} value={`${r.width}x${r.height}`}>\r\n                                        {r.label}\r\n                                    </option>\r\n                                )) || <option>{cam.resolution}</option>}\r\n                            </select>\r\n\r\n                            <input style={styles.inputTable}\r\n                                type=\"number\"\r\n                                value={cam.gop || 20}\r\n                                min={caps?.gopRange?.min || 1}\r\n                                max={caps?.gopRange?.max || 400}\r\n                                onChange={e => updateCam(cam.id, \"gop\", e.target.value)}\r\n                                onBlur={e => handleRemoteChange(\"gop\", e.target.value)}\r\n                            />\r\n\r\n                            <select style={styles.inputTable} value={cam.fps || 25} onChange={e => handleRemoteChange(\"fps\", e.target.value)}>\r\n                                {caps?.fps?.map(f => <option key={f} value={f}>{f} fps</option>) || <option>{cam.fps} fps</option>}\r\n                            </select>\r\n                        </div>\r\n                        {cam.codec === \"H.265\" && (\r\n                            <div style={{ color: \"#ffa726\", fontSize: 11, marginTop: 5 }}>\r\n                                <AlertTriangle size={10} /> Camera is in H.265 mode. Switch to H.264 for better grid performance and browser compatibility.\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function ChannelSettingsSection({\r\n    cam, cams, setCams, setSelection, availableModules, updateCam, saveAll\r\n}) {\r\n    const [activeZoneIdx, setActiveZoneIdx] = useState(0);\r\n    const [isDrawing, setIsDrawing] = useState(false);\r\n    const [roiPoints, setRoiPoints] = useState([]);\r\n\r\n    const camAI = cam.ai_server || {};\r\n    let zones = camAI.zones || [];\r\n    if (zones.length === 0 && camAI.roi && camAI.roi.length > 0) {\r\n        zones = [{ name: \"Default Zone\", points: camAI.roi, objects: camAI.objects || {} }];\r\n    }\r\n\r\n    const safeIdx = (activeZoneIdx >= zones.length) ? 0 : activeZoneIdx;\r\n    const activeZone = zones[safeIdx] || null;\r\n    const pointsToShow = isDrawing ? roiPoints : (activeZone?.points || []);\r\n\r\n    const silentSave = async (updatedCams) => {\r\n        try {\r\n            await API.post(\"/cameras/config\", updatedCams);\r\n        } catch (e) {\r\n            console.error(\"Silent save failed\", e);\r\n            alert(\"Error saving settings: \" + e.message);\r\n        }\r\n    };\r\n\r\n    const handleSaveZonePoints = () => {\r\n        setIsDrawing(false);\r\n        const newZones = [...zones];\r\n        if (!newZones[safeIdx]) return;\r\n        newZones[safeIdx] = { ...newZones[safeIdx], points: roiPoints };\r\n        const newConf = { ...camAI, zones: newZones, enabled: true };\r\n        const updatedCams = cams.map(c => c.id === cam.id ? { ...c, ai_server: newConf } : c);\r\n        setCams(updatedCams);\r\n        silentSave(updatedCams);\r\n    };\r\n\r\n    const handleAddZone = () => {\r\n        const newName = `Zone ${zones.length + 1}`;\r\n        const newZones = [...zones, { name: newName, points: [], objects: {} }];\r\n        const newConf = { ...camAI, zones: newZones };\r\n        const updatedCams = cams.map(c => c.id === cam.id ? { ...c, ai_server: newConf } : c);\r\n        setCams(updatedCams);\r\n        setActiveZoneIdx(newZones.length - 1);\r\n        silentSave(updatedCams);\r\n    };\r\n\r\n    const handleDeleteZone = () => {\r\n        if (!activeZone) return;\r\n        if (!window.confirm(`Delete ${activeZone.name}?`)) return;\r\n        const newZones = zones.filter((_, i) => i !== safeIdx);\r\n        const newConf = { ...camAI, zones: newZones };\r\n        const updatedCams = cams.map(c => c.id === cam.id ? { ...c, ai_server: newConf } : c);\r\n        setCams(updatedCams);\r\n        setActiveZoneIdx(0);\r\n        silentSave(updatedCams);\r\n    };\r\n\r\n    const handleObjectToggle = (objKey) => {\r\n        if (!activeZone) return;\r\n        const newObjs = { ...(activeZone.objects || {}), [objKey]: !activeZone.objects?.[objKey] };\r\n        const newZones = [...zones];\r\n        newZones[safeIdx] = { ...newZones[safeIdx], objects: newObjs };\r\n        const newConf = { ...camAI, zones: newZones };\r\n        const updatedCams = cams.map(c => c.id === cam.id ? { ...c, ai_server: newConf } : c);\r\n        setCams(updatedCams);\r\n        silentSave(updatedCams);\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: 20 }}>\r\n            <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"baseline\", marginBottom: 15 }}>\r\n                <h2 style={{ fontSize: 18, margin: 0, color: \"#fff\" }}>AI Zones: {cam.name || cam.ip}</h2>\r\n                <button onClick={() => setSelection({ type: \"CAMERA\", id: cam.id })} style={{ color: \"rgb(66, 165, 245)\", background: \"none\", border: \"none\", cursor: \"pointer\", fontSize: 13 }}>[Back] Back to Hardware Settings</button>\r\n            </div>\r\n\r\n            <div style={{ display: \"flex\", gap: 20, height: 500 }}>\r\n                <div style={{ flex: 3, display: \"flex\", flexDirection: \"column\" }}>\r\n                    {/* FIXED ASPECT RATIO 16:9 to match Camera Stream and ensure Canvas overlay aligns perfectly */}\r\n                    <div style={{ width: \"100%\", aspectRatio: \"16/9\", border: \"2px solid #444\", borderRadius: 4, overflow: \"hidden\", background: \"#000\", position: \"relative\" }}>\r\n                        <Go2RTCPlayer camId={cam.id} style={videoStyle} streamType=\"hd\" />\r\n                        <div style={{ position: \"absolute\", top: 0, left: 0, right: 0, bottom: 0, zIndex: 10 }}>\r\n                            {activeZone ? (\r\n                                <CanvasROI\r\n                                    points={pointsToShow}\r\n                                    onChange={isDrawing ? setRoiPoints : undefined}\r\n                                    readOnly={!isDrawing}\r\n                                    width={800} height={450}\r\n                                    otherZones={zones.filter((_, i) => i !== safeIdx)}\r\n                                />\r\n                            ) : (\r\n                                <div style={{ color: \"#fff\", position: \"absolute\", top: \"50%\", left: \"50%\", transform: \"translate(-50%,-50%)\" }}>Select or Add a Zone</div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {activeZone && (\r\n                        <div style={{ marginTop: 10, display: \"flex\", gap: 10, padding: 8, background: \"#252526\", borderRadius: 4, border: \"1px solid #333\", alignItems: \"center\" }}>\r\n                            <span style={{ fontSize: 12, color: \"#aaa\", fontWeight: \"bold\", marginRight: 10 }}>Zone Actions:</span>\r\n                            {isDrawing ? (\r\n                                <>\r\n                                    <button style={{ ...styles.btnPrimary, background: \"#4caf50\" }} onClick={handleSaveZonePoints}>[SAVE] Save Area</button>\r\n                                    <button style={styles.btnToolbar} onClick={() => { setIsDrawing(false); setRoiPoints([]); }}>Cancel</button>\r\n                                </>\r\n                            ) : (\r\n                                <button style={{ ...styles.btnPrimary, background: \"#2196f3\" }} onClick={() => { setRoiPoints(activeZone.points || []); setIsDrawing(true); }}>[EDIT] Edit Area</button>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div style={{ flex: 1, background: \"#1e1e1e\", border: \"1px solid #444\", padding: 15, display: \"flex\", flexDirection: \"column\" }}>\r\n                    <div style={{ marginBottom: 20, flex: 1, overflowY: \"auto\" }}>\r\n                        <div style={{ borderBottom: \"1px solid #444\", marginBottom: 15, paddingBottom: 15 }}>\r\n                            <h4 style={{ margin: \"0 0 10px 0\", color: colors.accent, fontSize: 13 }}>AI Configuration</h4>\r\n                            <div style={{ marginBottom: 15 }}>\r\n                                <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 5 }}>\r\n                                    <label style={{ fontSize: 12, color: \"#aaa\" }}>Sensitivity: {(cam.ai_server?.sensitivity * 100 || 50).toFixed(0)}%</label>\r\n                                </div>\r\n                                <input\r\n                                    type=\"range\" min=\"0\" max=\"1\" step=\"0.05\"\r\n                                    value={cam.ai_server?.sensitivity || 0.5}\r\n                                    onChange={e => {\r\n                                        const next = { ...cam.ai_server, sensitivity: parseFloat(e.target.value) };\r\n                                        const updated = cams.map(c => c.id === cam.id ? { ...c, ai_server: next } : c);\r\n                                        setCams(updated); silentSave(updated);\r\n                                    }}\r\n                                    style={{ width: \"100%\", cursor: \"pointer\" }}\r\n                                />\r\n                                <div style={{ display: \"flex\", justifyContent: \"space-between\", fontSize: 10, color: \"#666\", marginTop: 4 }}>\r\n                                    <span>0% (Filtrare MaximÄƒ)</span>\r\n                                    <span>100% (AlertÄƒ MaximÄƒ)</span>\r\n                                </div>\r\n                                <p style={{ fontSize: 11, color: \"#888\", marginTop: 8, lineHeight: \"1.4\" }}>\r\n                                    <b>0%:</b> Doar obiecte foarte clare. Reduce alarmele false (umbre, insecte).<br />\r\n                                    <b>100%:</b> DetecteazÄƒ orice miÈ™care suspectÄƒ. Risc ridicat de alarme false.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 10 }}>\r\n                            <h4 style={{ margin: 0, color: \"#ddd\" }}>Detection Zones</h4>\r\n                            <button style={{ background: \"#4caf50\", color: \"#fff\", border: \"none\", borderRadius: 2, cursor: \"pointer\", padding: \"2px 8px\", fontSize: 16 }} onClick={handleAddZone}>+</button>\r\n                        </div>\r\n                        <div style={{ display: \"flex\", flexDirection: \"column\", gap: 5 }}>\r\n                            {zones.map((z, idx) => (\r\n                                <div key={idx} onClick={() => { setActiveZoneIdx(idx); setIsDrawing(false); }}\r\n                                    style={{ padding: \"8px 10px\", background: idx === safeIdx ? \"#2196f3\" : \"#333\", color: \"#fff\", borderRadius: 3, cursor: \"pointer\", fontSize: 13, display: \"flex\", justifyContent: \"space-between\" }}>\r\n                                    <span>{z.name}</span>\r\n                                    {idx === safeIdx && <button onClick={(e) => { e.stopPropagation(); handleDeleteZone(); }} style={{ background: \"transparent\", border: \"none\", color: \"#fff\", cursor: \"pointer\" }}>Ã—</button>}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {activeZone && (\r\n                        <div style={{ borderTop: \"1px solid #444\", paddingTop: 15 }}>\r\n                            <h4 style={{ marginTop: 0, color: \"#ddd\", fontSize: 13 }}>Search Objects ({activeZone.name})</h4>\r\n                            <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gap: 8, marginTop: 10 }}>\r\n                                {(() => {\r\n                                    const currentModName = cam.ai_server?.module || \"ai_small\";\r\n                                    const modulesList = Array.isArray(availableModules) ? availableModules : [];\r\n                                    const currentMod = modulesList.find(m => m.name === currentModName);\r\n                                    const displayClasses = currentMod?.classes?.length > 0 ? currentMod.classes : [\"person\", \"car\", \"truck\"];\r\n                                    return displayClasses.map(obj => (\r\n                                        <label key={obj} style={{ display: \"flex\", alignItems: \"center\", color: \"#ccc\", fontSize: 13, cursor: \"pointer\" }}>\r\n                                            <input type=\"checkbox\" checked={activeZone.objects?.[obj] || false} onChange={() => handleObjectToggle(obj)} style={{ marginRight: 8 }} />\r\n                                            {obj}\r\n                                        </label>\r\n                                    ));\r\n                                })()}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div style={{ borderTop: \"1px solid #444\", marginTop: 15, paddingTop: 15 }}>\r\n                        <h4 style={{ margin: \"0 0 10px 0\", color: \"#ddd\", fontSize: 13 }}>Recording Setup</h4>\r\n                        <label style={{ display: \"flex\", alignItems: \"center\", marginBottom: 10, cursor: \"pointer\", color: \"#ccc\", fontSize: 13 }}>\r\n                            <input type=\"checkbox\" checked={cam.record !== false} onChange={e => {\r\n                                const updatedCams = cams.map(c => c.id === cam.id ? { ...c, record: e.target.checked } : c);\r\n                                setCams(updatedCams); silentSave(updatedCams);\r\n                            }} style={{ marginRight: 8 }} />\r\n                            Enable Recording\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}