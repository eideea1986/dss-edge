{"ast":null,"code":"import _objectSpread from\"I:/dispecerat/github_release/dss-edge/local-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useRef,useLayoutEffect}from\"react\";import{useSearchParams,useNavigate}from\"react-router-dom\";import API from\"../api\";import PlaybackController,{PlayerStates}from\"../services/PlaybackController\";import{ArrowLeft,Play,Pause,ChevronLeft,ChevronRight,ZoomIn,ZoomOut,Calendar,Monitor,Maximize}from\"../components/Icons\";// --- AZIGUARD THEME REPLICA ---\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const THEME={bg:\"#f0f2f5\",// Light grey\nheader:\"#ffffff\",headerBorder:\"#e1e4e8\",accent:\"#0277bd\",// Deep Blue\naccentHover:\"#01579b\",text:\"#333333\",textLight:\"#666666\",timelineTrack:\"#ffffff\",timelineRuler:\"#e0e0e0\",segment:\"#d32f2f\",// Red\nplayhead:\"#d32f2f\",// Red playback line per user request\npanelBorder:\"#dce1e6\"};export default function PlaybackModern(){const[searchParams]=useSearchParams();const navigate=useNavigate();const camId=searchParams.get(\"camId\");// --- STATE ---\nconst[selectedDate,setSelectedDate]=useState(new Date().toISOString().split('T')[0]);const[playerState,setPlayerState]=useState(PlayerStates.IDLE);const[serverTimezone,setServerTimezone]=useState(null);// --- TIMELINE STATE ---\nconst[currentTimeMs,setCurrentTimeMs]=useState(Date.now());const[viewportStartMs,setViewportStartMs]=useState(new Date().setHours(0,0,0,0));const[zoomPxPerSec,setZoomPxPerSec]=useState(0.005);const[containerWidth,setContainerWidth]=useState(1000);const[segments,setSegments]=useState([]);const[isLoadingData,setIsLoadingData]=useState(false);const videoRef=useRef(null);const playerRef=useRef(null);const timelineRef=useRef(null);const dragRef=useRef({isDragging:false,startX:0,startViewTime:0});// --- DATA LOADING & SETUP ---\nuseEffect(()=>{API.get('/system/time').then(res=>{var _res$data,_res$data$raw;if((_res$data=res.data)!==null&&_res$data!==void 0&&(_res$data$raw=_res$data.raw)!==null&&_res$data$raw!==void 0&&_res$data$raw['Time zone'])setServerTimezone(res.data.raw['Time zone'].split(' ')[0]);}).catch(()=>{});},[]);useEffect(()=>{if(selectedDate)setViewportStartMs(new Date(selectedDate).setHours(0,0,0,0));},[selectedDate]);useEffect(()=>{if(videoRef.current&&camId){playerRef.current=new PlaybackController(videoRef.current,camId,s=>setPlayerState(s));return()=>{var _playerRef$current;return(_playerRef$current=playerRef.current)===null||_playerRef$current===void 0?void 0:_playerRef$current.destroy();};}},[camId]);useLayoutEffect(()=>{const updateWidth=()=>{if(timelineRef.current)setContainerWidth(timelineRef.current.clientWidth);};window.addEventListener('resize',updateWidth);updateWidth();return()=>window.removeEventListener('resize',updateWidth);},[]);useEffect(()=>{if(!camId||!selectedDate)return;const fetchData=async()=>{setIsLoadingData(true);try{const res=await API.get(\"/api/playback/timeline-day/\".concat(camId,\"/\").concat(selectedDate));const data=res.data;const segs=(data.segments||[]).map(s=>({start:Number(s.start_ts||s.startTs),end:Number(s.end_ts||s.endTs),file:s.file})).sort((a,b)=>a.start-b.start);setSegments(segs);if(playerRef.current)playerRef.current.loadSegments(segs);// Auto Fit Day (0-24h)\nif(containerWidth>0){setViewportStartMs(new Date(selectedDate).setHours(0,0,0,0));setZoomPxPerSec(containerWidth/86400);}}catch(e){console.error(e);}finally{setIsLoadingData(false);}};fetchData();},[camId,selectedDate]);// --- SYNC LOOP ---\nuseEffect(()=>{const i=setInterval(()=>{if(playerState===PlayerStates.PLAYING&&playerRef.current){const now=playerRef.current.getCurrentTime();if(Math.abs(now-currentTimeMs)>200)setCurrentTimeMs(now);}},100);return()=>clearInterval(i);},[playerState,currentTimeMs]);// --- ACTIONS ---\nconst fitDay=()=>{setViewportStartMs(new Date(selectedDate).setHours(0,0,0,0));setZoomPxPerSec(containerWidth/86400);};const performSeek=ts=>{var _playerRef$current2;setCurrentTimeMs(ts);(_playerRef$current2=playerRef.current)===null||_playerRef$current2===void 0?void 0:_playerRef$current2.seekTo(ts);};// --- MOUSE EVENTS (RESTRICTED PANNING) ---\nconst handleMouseDown=e=>{dragRef.current={isDragging:true,startX:e.clientX,startViewTime:viewportStartMs};document.body.style.cursor='grabbing';};const handleMouseMove=e=>{if(!dragRef.current.isDragging)return;const dx=e.clientX-dragRef.current.startX;const dt=-(dx/zoomPxPerSec)*1000;// --- Clamp Panning Logic ---\nconst dayStart=new Date(selectedDate).setHours(0,0,0,0);const dayEnd=dayStart+86400000;let newStart=dragRef.current.startViewTime+dt;// Allow browsing +/- 6 hours outside current day\nif(newStart<dayStart-21600000)newStart=dayStart-21600000;if(newStart>dayEnd-3600000)newStart=dayEnd-3600000;setViewportStartMs(newStart);};const handleMouseUp=e=>{if(dragRef.current.isDragging){dragRef.current.isDragging=false;document.body.style.cursor='default';if(Math.abs(e.clientX-dragRef.current.startX)<5){const rect=timelineRef.current.getBoundingClientRect();const clickX=e.clientX-rect.left;const ts=viewportStartMs+clickX/zoomPxPerSec*1000;performSeek(ts);}}};const handleWheel=e=>{if(e.target.closest('.timeline-area')){e.preventDefault();const rect=timelineRef.current.getBoundingClientRect();const mouseX=e.clientX-rect.left;const timeUnderMouse=viewportStartMs+mouseX/zoomPxPerSec*1000;const factor=e.deltaY>0?0.9:1.1;const newZoom=Math.max(containerWidth/86400,Math.min(2.0,zoomPxPerSec*factor));setZoomPxPerSec(newZoom);setViewportStartMs(timeUnderMouse-mouseX/newZoom*1000);}};// --- RENDER HELPERS ---\nconst timeToPx=t=>(t-viewportStartMs)/1000*zoomPxPerSec;const renderTicks=()=>{const ticks=[];const pxPerMin=zoomPxPerSec*60;let stepMin=60*24;if(pxPerMin>1000)stepMin=1;else if(pxPerMin>200)stepMin=5;else if(pxPerMin>50)stepMin=15;else if(pxPerMin>10)stepMin=60;else stepMin=240;const stepMs=stepMin*60*1000;if(stepMs<=0)return[];const viewEnd=viewportStartMs+containerWidth/zoomPxPerSec*1000;const start=Math.floor(viewportStartMs/stepMs)*stepMs;// Day Filters\nconst dayStart=new Date(selectedDate).setHours(0,0,0,0);const dayEnd=dayStart+86400000;for(let t=start;t<viewEnd+stepMs;t+=stepMs){// Strictly hide ticks outside the relevant Day range (with small visual buffer)\nif(t<dayStart||t>dayEnd)continue;const x=timeToPx(t);const date=new Date(t);const isHour=date.getMinutes()===0;const isMidnight=date.getHours()===0&&date.getMinutes()===0;if(x<-50||x>containerWidth+50)continue;ticks.push(/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:x,height:'100%',borderLeft:\"1px solid \".concat(isHour?'#bbb':'#eee'),pointerEvents:'none'},children:(isHour||isMidnight)&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:4,left:4,fontSize:11,fontWeight:600,color:'#333'},children:date.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit',hour12:false})})},t));}return ticks;};return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',height:'100vh',background:THEME.bg,color:THEME.text,fontFamily:'-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif'},children:[/*#__PURE__*/_jsxs(\"header\",{style:{height:48,background:'#fff',borderBottom:\"1px solid \".concat(THEME.panelBorder),display:'flex',alignItems:'center',padding:'0 16px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:800,fontSize:18,color:THEME.accent,marginRight:24},children:\"AZIGUARD\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:8},children:['Live','Playback','Settings'].map(tab=>/*#__PURE__*/_jsx(\"div\",{style:{padding:'6px 12px',borderRadius:4,cursor:'pointer',fontSize:13,fontWeight:500,background:tab==='Playback'?'#e3f2fd':'transparent',color:tab==='Playback'?THEME.accent:'#666'},onClick:()=>tab==='Live'&&navigate('/'),children:tab},tab))}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,color:'#555',display:'flex',alignItems:'center',gap:10},children:[/*#__PURE__*/_jsx(\"b\",{children:serverTimezone}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:selectedDate,onChange:e=>setSelectedDate(e.target.value),style:{border:'1px solid #ccc',borderRadius:4,padding:'4px'}})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,background:'#e0e0e0',position:'relative',display:'flex',alignItems:'center',justifyContent:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'100%',maxHeight:'calc(100vh - 200px)',display:'flex',justifyContent:'center',background:'#000'},children:/*#__PURE__*/_jsx(\"video\",{ref:videoRef,style:{width:'100%',height:'100%'},onClick:()=>{var _playerRef$current3;return(_playerRef$current3=playerRef.current)===null||_playerRef$current3===void 0?void 0:_playerRef$current3.play();}})}),isLoadingData&&/*#__PURE__*/_jsx(\"div\",{style:overlayStyle,children:\"Loading...\"}),!isLoadingData&&segments.length===0&&/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},overlayStyle),{},{top:'40%'}),children:\"No Recordings Found\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff',borderTop:\"1px solid \".concat(THEME.panelBorder),display:'flex',flexDirection:'column',overflow:'hidden'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{height:36,display:'flex',alignItems:'center',padding:'0 10px',borderBottom:'1px solid #eee',background:'#fcfcfc'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _playerRef$current4;return(_playerRef$current4=playerRef.current)===null||_playerRef$current4===void 0?void 0:_playerRef$current4.seekTo(currentTimeMs-5000);},style:ctrlBtn,children:\"-5s\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _playerRef$current5,_playerRef$current6;return playerState===PlayerStates.PLAYING?(_playerRef$current5=playerRef.current)===null||_playerRef$current5===void 0?void 0:_playerRef$current5.pause():(_playerRef$current6=playerRef.current)===null||_playerRef$current6===void 0?void 0:_playerRef$current6.play();},style:_objectSpread(_objectSpread({},ctrlBtn),{},{color:THEME.accent,fontWeight:'bold',minWidth:60}),children:playerState===PlayerStates.PLAYING?\"PAUSE\":\"PLAY\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _playerRef$current7;return(_playerRef$current7=playerRef.current)===null||_playerRef$current7===void 0?void 0:_playerRef$current7.seekTo(currentTimeMs+5000);},style:ctrlBtn,children:\"+5s\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:20}}),/*#__PURE__*/_jsx(\"button\",{onClick:fitDay,style:ctrlBtn,children:\"24H View\"}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,textAlign:'center',fontWeight:'bold',color:'#444'},children:new Date(currentTimeMs).toLocaleTimeString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-area\",ref:timelineRef,style:{height:100,background:THEME.timelineTrack,position:'relative',overflow:'hidden',cursor:dragRef.current.isDragging?'grabbing':'grab'},onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp,onMouseMove:handleMouseMove,onMouseDown:handleMouseDown,onWheel:handleWheel,children:[renderTicks(),segments.map((s,i)=>{const x=timeToPx(s.start);const w=Math.max(1,(s.end-s.start)/1000*zoomPxPerSec);if(x+w<0||x>containerWidth)return null;return/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:x,width:w,top:45,height:25,background:THEME.segment,borderRadius:1}},i);}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:timeToPx(currentTimeMs),top:0,bottom:0,width:2,background:THEME.playhead,zIndex:10,pointerEvents:'none'},children:/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:0,left:-5,width:12,height:12,borderRadius:'50%',background:THEME.playhead}})})]})]})]});}const ctrlBtn={border:'1px solid #ddd',background:'#fff',borderRadius:3,padding:'4px 8px',margin:'0 4px',cursor:'pointer',fontSize:12};const overlayStyle={position:'absolute',background:'rgba(255,255,255,0.85)',padding:'10px 20px',borderRadius:6,fontWeight:'bold'};","map":{"version":3,"names":["React","useEffect","useState","useRef","useLayoutEffect","useSearchParams","useNavigate","API","PlaybackController","PlayerStates","ArrowLeft","Play","Pause","ChevronLeft","ChevronRight","ZoomIn","ZoomOut","Calendar","Monitor","Maximize","jsx","_jsx","jsxs","_jsxs","THEME","bg","header","headerBorder","accent","accentHover","text","textLight","timelineTrack","timelineRuler","segment","playhead","panelBorder","PlaybackModern","searchParams","navigate","camId","get","selectedDate","setSelectedDate","Date","toISOString","split","playerState","setPlayerState","IDLE","serverTimezone","setServerTimezone","currentTimeMs","setCurrentTimeMs","now","viewportStartMs","setViewportStartMs","setHours","zoomPxPerSec","setZoomPxPerSec","containerWidth","setContainerWidth","segments","setSegments","isLoadingData","setIsLoadingData","videoRef","playerRef","timelineRef","dragRef","isDragging","startX","startViewTime","then","res","_res$data","_res$data$raw","data","raw","catch","current","s","_playerRef$current","destroy","updateWidth","clientWidth","window","addEventListener","removeEventListener","fetchData","concat","segs","map","start","Number","start_ts","startTs","end","end_ts","endTs","file","sort","a","b","loadSegments","e","console","error","i","setInterval","PLAYING","getCurrentTime","Math","abs","clearInterval","fitDay","performSeek","ts","_playerRef$current2","seekTo","handleMouseDown","clientX","document","body","style","cursor","handleMouseMove","dx","dt","dayStart","dayEnd","newStart","handleMouseUp","rect","getBoundingClientRect","clickX","left","handleWheel","target","closest","preventDefault","mouseX","timeUnderMouse","factor","deltaY","newZoom","max","min","timeToPx","t","renderTicks","ticks","pxPerMin","stepMin","stepMs","viewEnd","floor","x","date","isHour","getMinutes","isMidnight","getHours","push","position","height","borderLeft","pointerEvents","children","top","fontSize","fontWeight","color","toLocaleTimeString","hour","minute","hour12","display","flexDirection","background","fontFamily","borderBottom","alignItems","padding","marginRight","gap","tab","borderRadius","onClick","flex","type","value","onChange","border","justifyContent","width","maxHeight","ref","_playerRef$current3","play","overlayStyle","length","_objectSpread","borderTop","overflow","_playerRef$current4","ctrlBtn","_playerRef$current5","_playerRef$current6","pause","minWidth","_playerRef$current7","textAlign","className","onMouseUp","onMouseLeave","onMouseMove","onMouseDown","onWheel","w","bottom","zIndex","margin"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/pages/PlaybackModern.js"],"sourcesContent":["import React, { useEffect, useState, useRef, useLayoutEffect } from \"react\";\r\nimport { useSearchParams, useNavigate } from \"react-router-dom\";\r\nimport API from \"../api\";\r\nimport PlaybackController, { PlayerStates } from \"../services/PlaybackController\";\r\nimport { ArrowLeft, Play, Pause, ChevronLeft, ChevronRight, ZoomIn, ZoomOut, Calendar, Monitor, Maximize } from \"../components/Icons\";\r\n\r\n// --- AZIGUARD THEME REPLICA ---\r\nconst THEME = {\r\n    bg: \"#f0f2f5\", // Light grey\r\n    header: \"#ffffff\",\r\n    headerBorder: \"#e1e4e8\",\r\n    accent: \"#0277bd\", // Deep Blue\r\n    accentHover: \"#01579b\",\r\n    text: \"#333333\",\r\n    textLight: \"#666666\",\r\n    timelineTrack: \"#ffffff\",\r\n    timelineRuler: \"#e0e0e0\",\r\n    segment: \"#d32f2f\", // Red\r\n    playhead: \"#d32f2f\", // Red playback line per user request\r\n    panelBorder: \"#dce1e6\"\r\n};\r\n\r\nexport default function PlaybackModern() {\r\n    const [searchParams] = useSearchParams();\r\n    const navigate = useNavigate();\r\n    const camId = searchParams.get(\"camId\");\r\n\r\n    // --- STATE ---\r\n    const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);\r\n    const [playerState, setPlayerState] = useState(PlayerStates.IDLE);\r\n    const [serverTimezone, setServerTimezone] = useState(null);\r\n\r\n    // --- TIMELINE STATE ---\r\n    const [currentTimeMs, setCurrentTimeMs] = useState(Date.now());\r\n    const [viewportStartMs, setViewportStartMs] = useState(new Date().setHours(0, 0, 0, 0));\r\n    const [zoomPxPerSec, setZoomPxPerSec] = useState(0.005);\r\n    const [containerWidth, setContainerWidth] = useState(1000);\r\n    const [segments, setSegments] = useState([]);\r\n    const [isLoadingData, setIsLoadingData] = useState(false);\r\n\r\n    const videoRef = useRef(null);\r\n    const playerRef = useRef(null);\r\n    const timelineRef = useRef(null);\r\n    const dragRef = useRef({ isDragging: false, startX: 0, startViewTime: 0 });\r\n\r\n    // --- DATA LOADING & SETUP ---\r\n    useEffect(() => {\r\n        API.get('/system/time').then(res => {\r\n            if (res.data?.raw?.['Time zone']) setServerTimezone(res.data.raw['Time zone'].split(' ')[0]);\r\n        }).catch(() => { });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (selectedDate) setViewportStartMs(new Date(selectedDate).setHours(0, 0, 0, 0));\r\n    }, [selectedDate]);\r\n\r\n    useEffect(() => {\r\n        if (videoRef.current && camId) {\r\n            playerRef.current = new PlaybackController(videoRef.current, camId, (s) => setPlayerState(s));\r\n            return () => playerRef.current?.destroy();\r\n        }\r\n    }, [camId]);\r\n\r\n    useLayoutEffect(() => {\r\n        const updateWidth = () => { if (timelineRef.current) setContainerWidth(timelineRef.current.clientWidth); };\r\n        window.addEventListener('resize', updateWidth);\r\n        updateWidth();\r\n        return () => window.removeEventListener('resize', updateWidth);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!camId || !selectedDate) return;\r\n        const fetchData = async () => {\r\n            setIsLoadingData(true);\r\n            try {\r\n                const res = await API.get(`/api/playback/timeline-day/${camId}/${selectedDate}`);\r\n                const data = res.data;\r\n                const segs = (data.segments || []).map(s => ({\r\n                    start: Number(s.start_ts || s.startTs),\r\n                    end: Number(s.end_ts || s.endTs),\r\n                    file: s.file\r\n                })).sort((a, b) => a.start - b.start);\r\n                setSegments(segs);\r\n                if (playerRef.current) playerRef.current.loadSegments(segs);\r\n\r\n                // Auto Fit Day (0-24h)\r\n                if (containerWidth > 0) {\r\n                    setViewportStartMs(new Date(selectedDate).setHours(0, 0, 0, 0));\r\n                    setZoomPxPerSec(containerWidth / 86400);\r\n                }\r\n            } catch (e) { console.error(e); } finally { setIsLoadingData(false); }\r\n        };\r\n        fetchData();\r\n    }, [camId, selectedDate]);\r\n\r\n    // --- SYNC LOOP ---\r\n    useEffect(() => {\r\n        const i = setInterval(() => {\r\n            if (playerState === PlayerStates.PLAYING && playerRef.current) {\r\n                const now = playerRef.current.getCurrentTime();\r\n                if (Math.abs(now - currentTimeMs) > 200) setCurrentTimeMs(now);\r\n            }\r\n        }, 100);\r\n        return () => clearInterval(i);\r\n    }, [playerState, currentTimeMs]);\r\n\r\n    // --- ACTIONS ---\r\n    const fitDay = () => {\r\n        setViewportStartMs(new Date(selectedDate).setHours(0, 0, 0, 0));\r\n        setZoomPxPerSec(containerWidth / 86400);\r\n    };\r\n\r\n    const performSeek = (ts) => {\r\n        setCurrentTimeMs(ts);\r\n        playerRef.current?.seekTo(ts);\r\n    };\r\n\r\n    // --- MOUSE EVENTS (RESTRICTED PANNING) ---\r\n    const handleMouseDown = (e) => {\r\n        dragRef.current = { isDragging: true, startX: e.clientX, startViewTime: viewportStartMs };\r\n        document.body.style.cursor = 'grabbing';\r\n    };\r\n\r\n    const handleMouseMove = (e) => {\r\n        if (!dragRef.current.isDragging) return;\r\n        const dx = e.clientX - dragRef.current.startX;\r\n        const dt = -(dx / zoomPxPerSec) * 1000;\r\n\r\n        // --- Clamp Panning Logic ---\r\n        const dayStart = new Date(selectedDate).setHours(0, 0, 0, 0);\r\n        const dayEnd = dayStart + 86400000;\r\n\r\n        let newStart = dragRef.current.startViewTime + dt;\r\n\r\n        // Allow browsing +/- 6 hours outside current day\r\n        if (newStart < dayStart - 21600000) newStart = dayStart - 21600000;\r\n        if (newStart > dayEnd - 3600000) newStart = dayEnd - 3600000;\r\n\r\n        setViewportStartMs(newStart);\r\n    };\r\n\r\n    const handleMouseUp = (e) => {\r\n        if (dragRef.current.isDragging) {\r\n            dragRef.current.isDragging = false;\r\n            document.body.style.cursor = 'default';\r\n            if (Math.abs(e.clientX - dragRef.current.startX) < 5) {\r\n                const rect = timelineRef.current.getBoundingClientRect();\r\n                const clickX = e.clientX - rect.left;\r\n                const ts = viewportStartMs + (clickX / zoomPxPerSec) * 1000;\r\n                performSeek(ts);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleWheel = (e) => {\r\n        if (e.target.closest('.timeline-area')) {\r\n            e.preventDefault();\r\n            const rect = timelineRef.current.getBoundingClientRect();\r\n            const mouseX = e.clientX - rect.left;\r\n            const timeUnderMouse = viewportStartMs + (mouseX / zoomPxPerSec) * 1000;\r\n\r\n            const factor = e.deltaY > 0 ? 0.9 : 1.1;\r\n            const newZoom = Math.max(containerWidth / 86400, Math.min(2.0, zoomPxPerSec * factor));\r\n\r\n            setZoomPxPerSec(newZoom);\r\n            setViewportStartMs(timeUnderMouse - (mouseX / newZoom) * 1000);\r\n        }\r\n    };\r\n\r\n    // --- RENDER HELPERS ---\r\n    const timeToPx = (t) => (t - viewportStartMs) / 1000 * zoomPxPerSec;\r\n\r\n    const renderTicks = () => {\r\n        const ticks = [];\r\n        const pxPerMin = zoomPxPerSec * 60;\r\n        let stepMin = 60 * 24;\r\n        if (pxPerMin > 1000) stepMin = 1; else if (pxPerMin > 200) stepMin = 5; else if (pxPerMin > 50) stepMin = 15; else if (pxPerMin > 10) stepMin = 60; else stepMin = 240;\r\n\r\n        const stepMs = stepMin * 60 * 1000;\r\n        if (stepMs <= 0) return [];\r\n\r\n        const viewEnd = viewportStartMs + (containerWidth / zoomPxPerSec * 1000);\r\n        const start = Math.floor(viewportStartMs / stepMs) * stepMs;\r\n\r\n        // Day Filters\r\n        const dayStart = new Date(selectedDate).setHours(0, 0, 0, 0);\r\n        const dayEnd = dayStart + 86400000;\r\n\r\n        for (let t = start; t < viewEnd + stepMs; t += stepMs) {\r\n            // Strictly hide ticks outside the relevant Day range (with small visual buffer)\r\n            if (t < dayStart || t > dayEnd) continue;\r\n\r\n            const x = timeToPx(t);\r\n            const date = new Date(t);\r\n            const isHour = date.getMinutes() === 0;\r\n            const isMidnight = date.getHours() === 0 && date.getMinutes() === 0;\r\n\r\n            if (x < -50 || x > containerWidth + 50) continue;\r\n\r\n            ticks.push(\r\n                <div key={t} style={{ position: 'absolute', left: x, height: '100%', borderLeft: `1px solid ${isHour ? '#bbb' : '#eee'}`, pointerEvents: 'none' }}>\r\n                    {(isHour || isMidnight) && <div style={{ position: 'absolute', top: 4, left: 4, fontSize: 11, fontWeight: 600, color: '#333' }}>\r\n                        {date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: false })}\r\n                    </div>}\r\n                </div>\r\n            );\r\n        }\r\n        return ticks;\r\n    };\r\n\r\n    return (\r\n        <div style={{ display: 'flex', flexDirection: 'column', height: '100vh', background: THEME.bg, color: THEME.text, fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif' }}>\r\n\r\n            {/* 1. TOP BAR */}\r\n            <header style={{ height: 48, background: '#fff', borderBottom: `1px solid ${THEME.panelBorder}`, display: 'flex', alignItems: 'center', padding: '0 16px' }}>\r\n                <div style={{ fontWeight: 800, fontSize: 18, color: THEME.accent, marginRight: 24 }}>AZIGUARD</div>\r\n                <div style={{ display: 'flex', gap: 8 }}>\r\n                    {['Live', 'Playback', 'Settings'].map(tab => (\r\n                        <div key={tab} style={{\r\n                            padding: '6px 12px', borderRadius: 4, cursor: 'pointer', fontSize: 13, fontWeight: 500,\r\n                            background: tab === 'Playback' ? '#e3f2fd' : 'transparent', color: tab === 'Playback' ? THEME.accent : '#666'\r\n                        }} onClick={() => tab === 'Live' && navigate('/')}>{tab}</div>\r\n                    ))}\r\n                </div>\r\n                <div style={{ flex: 1 }} />\r\n                <div style={{ fontSize: 13, color: '#555', display: 'flex', alignItems: 'center', gap: 10 }}>\r\n                    <b>{serverTimezone}</b>\r\n                    <input type=\"date\" value={selectedDate} onChange={e => setSelectedDate(e.target.value)} style={{ border: '1px solid #ccc', borderRadius: 4, padding: '4px' }} />\r\n                </div>\r\n            </header>\r\n\r\n            {/* 2. MAIN CONTENT */}\r\n            <div style={{ flex: 1, background: '#e0e0e0', position: 'relative', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                <div style={{ width: '100%', height: '100%', maxHeight: 'calc(100vh - 200px)', display: 'flex', justifyContent: 'center', background: '#000' }}>\r\n                    <video ref={videoRef} style={{ width: '100%', height: '100%' }} onClick={() => playerRef.current?.play()} />\r\n                </div>\r\n\r\n                {isLoadingData && <div style={overlayStyle}>Loading...</div>}\r\n                {!isLoadingData && segments.length === 0 && <div style={{ ...overlayStyle, top: '40%' }}>No Recordings Found</div>}\r\n            </div>\r\n\r\n            {/* 3. FOOTER */}\r\n            <div style={{ background: '#fff', borderTop: `1px solid ${THEME.panelBorder}`, display: 'flex', flexDirection: 'column', overflow: 'hidden' }}>\r\n                <div style={{ height: 36, display: 'flex', alignItems: 'center', padding: '0 10px', borderBottom: '1px solid #eee', background: '#fcfcfc' }}>\r\n                    <button onClick={() => playerRef.current?.seekTo(currentTimeMs - 5000)} style={ctrlBtn}>-5s</button>\r\n                    <button onClick={() => playerState === PlayerStates.PLAYING ? playerRef.current?.pause() : playerRef.current?.play()}\r\n                        style={{ ...ctrlBtn, color: THEME.accent, fontWeight: 'bold', minWidth: 60 }}>\r\n                        {playerState === PlayerStates.PLAYING ? \"PAUSE\" : \"PLAY\"}\r\n                    </button>\r\n                    <button onClick={() => playerRef.current?.seekTo(currentTimeMs + 5000)} style={ctrlBtn}>+5s</button>\r\n                    <div style={{ width: 20 }} />\r\n                    <button onClick={fitDay} style={ctrlBtn}>24H View</button>\r\n                    <div style={{ flex: 1, textAlign: 'center', fontWeight: 'bold', color: '#444' }}>\r\n                        {new Date(currentTimeMs).toLocaleTimeString()}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"timeline-area\"\r\n                    ref={timelineRef}\r\n                    style={{ height: 100, background: THEME.timelineTrack, position: 'relative', overflow: 'hidden', cursor: dragRef.current.isDragging ? 'grabbing' : 'grab' }}\r\n                    onMouseUp={handleMouseUp} onMouseLeave={handleMouseUp} onMouseMove={handleMouseMove} onMouseDown={handleMouseDown} onWheel={handleWheel}\r\n                >\r\n                    {renderTicks()}\r\n                    {segments.map((s, i) => {\r\n                        const x = timeToPx(s.start);\r\n                        const w = Math.max(1, (s.end - s.start) / 1000 * zoomPxPerSec);\r\n                        if (x + w < 0 || x > containerWidth) return null;\r\n                        return (\r\n                            <div key={i} style={{\r\n                                position: 'absolute', left: x, width: w, top: 45, height: 25,\r\n                                background: THEME.segment, borderRadius: 1\r\n                            }} />\r\n                        );\r\n                    })}\r\n\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        left: timeToPx(currentTimeMs),\r\n                        top: 0, bottom: 0, width: 2,\r\n                        background: THEME.playhead,\r\n                        zIndex: 10, pointerEvents: 'none'\r\n                    }}>\r\n                        <div style={{\r\n                            position: 'absolute', top: 0, left: -5,\r\n                            width: 12, height: 12, borderRadius: '50%',\r\n                            background: THEME.playhead\r\n                        }} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst ctrlBtn = { border: '1px solid #ddd', background: '#fff', borderRadius: 3, padding: '4px 8px', margin: '0 4px', cursor: 'pointer', fontSize: 12 };\r\nconst overlayStyle = { position: 'absolute', background: 'rgba(255,255,255,0.85)', padding: '10px 20px', borderRadius: 6, fontWeight: 'bold' };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}