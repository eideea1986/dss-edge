{"ast":null,"code":"import _objectSpread from\"I:/dispecerat/github_release/dss-edge/local-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{API}from\"../api\";import CameraCard from\"../components/CameraCard\";import{formatLocalTime}from'../utils/time';// Styles\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const colors={bg:\"#1e1e1e\",text:\"#cccccc\",accent:\"#007acc\"};export default function Live(){const[cams,setCams]=useState([]);const[status,setStatus]=useState(\"Checking...\");const[selectedCam,setSelectedCam]=useState(null);const[gridSize,setGridSize]=useState(8);const[armingStatus,setArmingStatus]=useState({});const[camStatus,setCamStatus]=useState({});// Poll Arming Status\nuseEffect(()=>{const checkArming=()=>{API.get(\"arming/debug\").then(res=>{const statusMap={};if(res.data&&res.data.cameras){res.data.cameras.forEach(c=>statusMap[c.id]=c.isArmed);}setArmingStatus(statusMap);}).catch(()=>{});};checkArming();const interval=setInterval(checkArming,5000);return()=>clearInterval(interval);},[]);// Poll Config & Status\nuseEffect(()=>{const fetchCams=()=>API.get(\"cameras/config\").then(res=>setCams(res.data)).catch(console.error);fetchCams();const checkStatus=()=>{API.get(\"status\").then(res=>{var _res$data$system;const isOnline=res.data.online===true||res.data.status===\"Connected\"||((_res$data$system=res.data.system)===null||_res$data$system===void 0?void 0:_res$data$system.uptime)>0;setStatus(isOnline?\"Connected\":\"Disconnected\");if(res.data.cameras){const map={};res.data.cameras.forEach(c=>map[c.id]=_objectSpread(_objectSpread({},c),{},{connected:c.status===\"ONLINE\"}));setCamStatus(map);}}).catch(()=>setStatus(\"Disconnected\"));};checkStatus();const i1=setInterval(fetchCams,10000);const i2=setInterval(checkStatus,3000);return()=>{clearInterval(i1);clearInterval(i2);};},[]);// NEW: Server Time Sync\nconst[currentTime,setCurrentTime]=useState(new Date());const[serverTimezone,setServerTimezone]=useState(null);useEffect(()=>{API.get('/system/time').then(res=>{var _res$data,_res$data$raw;if((_res$data=res.data)!==null&&_res$data!==void 0&&(_res$data$raw=_res$data.raw)!==null&&_res$data$raw!==void 0&&_res$data$raw['Time zone'])setServerTimezone(res.data.raw['Time zone'].split(' ')[0]);}).catch(()=>{});const i=setInterval(()=>setCurrentTime(new Date()),1000);return()=>clearInterval(i);},[]);const formatTime=date=>{if(!date)return\"\";const ts=date instanceof Date?date.getTime():date;return formatLocalTime(ts,serverTimezone);};const handleUpdateCam=async(camId,changes)=>{const newCams=cams.map(c=>c.id===camId?_objectSpread(_objectSpread({},c),changes):c);setCams(newCams);try{await API.post(\"cameras/config\",newCams);}catch(e){console.error(e);}};// Grid Logic\nconst getGridConfig=()=>{if(selectedCam)return{cols:\"1fr\",rows:\"1fr\"};switch(gridSize){case 1:return{cols:\"1fr\",rows:\"1fr\"};case 4:return{cols:\"repeat(2, 1fr)\",rows:\"repeat(2, 1fr)\"};case 6:return{cols:\"repeat(3, 1fr)\",rows:\"repeat(2, 1fr)\"};case 8:return{cols:\"repeat(4, 1fr)\",rows:\"repeat(2, 1fr)\"};// Trassir 8-view (4x2 usually or 1 big + 7 small) - keeping symetric for now\ncase 9:return{cols:\"repeat(3, 1fr)\",rows:\"repeat(3, 1fr)\"};case 16:return{cols:\"repeat(4, 1fr)\",rows:\"repeat(4, 1fr)\"};case 24:return{cols:\"repeat(6, 1fr)\",rows:\"repeat(4, 1fr)\"};case 25:return{cols:\"repeat(5, 1fr)\",rows:\"repeat(5, 1fr)\"};case 32:return{cols:\"repeat(8, 1fr)\",rows:\"repeat(4, 1fr)\"};default:const cols=Math.ceil(Math.sqrt(gridSize));const rows=Math.ceil(gridSize/cols);return{cols:\"repeat(\".concat(cols,\", 1fr)\"),rows:\"repeat(\".concat(rows,\", 1fr)\")};}};const grid=getGridConfig();const capacity=selectedCam?1:gridSize;return/*#__PURE__*/_jsxs(\"div\",{className:\"live-page\",style:{width:\"100%\",height:\"100%\",background:\"#0d0d0d\",color:colors.text,overflow:\"hidden\",display:\"flex\",flexDirection:\"column\"},children:[!selectedCam&&/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",padding:\"4px 8px\",background:\"#1a1a1a\",borderBottom:\"1px solid #333\",height:\"32px\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:15},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:\"bold\",fontSize:13,color:\"#fff\",display:\"flex\",alignItems:\"center\",gap:5},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:8,height:8,borderRadius:\"50%\",background:status===\"Connected\"?\"#4caf50\":\"#f44336\"}}),\"LIVE VIEW\"]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",gap:1},children:[1,4,6,8,9,12,16,24,32].map(num=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setGridSize(num),style:{border:\"none\",background:gridSize===num?\"#007acc\":\"#333\",color:\"#fff\",width:26,height:20,cursor:\"pointer\",fontSize:10,fontWeight:gridSize===num?\"bold\":\"normal\",marginRight:1},children:num},num))})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,color:\"#666\"},children:formatTime(currentTime)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:grid.cols,gridTemplateRows:grid.rows,gap:selectedCam?0:2,flex:1,background:\"#000\",padding:selectedCam?0:2,overflow:\"hidden\"},children:[cams.map((cam,idx)=>{// Logic: Keep card in DOM but hide if out of grid range, unless selected\nconst isVisible=selectedCam?cam.id===selectedCam.id:idx<capacity;return/*#__PURE__*/_jsx(\"div\",{style:{display:isVisible?\"flex\":\"none\",flexDirection:\"column\",position:\"relative\",width:\"100%\",height:\"100%\",background:\"#000\",overflow:\"hidden\",border:selectedCam?\"none\":\"1px solid #222\"},onDoubleClick:()=>setSelectedCam(selectedCam?null:cam),children:/*#__PURE__*/_jsx(CameraCard,{cam:cam,isMaximized:selectedCam&&selectedCam.id===cam.id,isHidden:!isVisible,onUpdate:handleUpdateCam,onMaximise:()=>setSelectedCam(cam),isArmed:armingStatus[cam.id],health:camStatus[cam.id]})},cam.id);}),!selectedCam&&Array.from({length:Math.max(0,capacity-cams.length)}).map((_,i)=>/*#__PURE__*/_jsx(\"div\",{style:{background:\"#111\",border:\"1px dashed #333\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(\"span\",{style:{color:\"#333\",fontSize:10},children:\"NO SIGNAL\"})},\"empty-\".concat(i)))]}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n                video, img, canvas {\\n                    object-fit: fill !important; \\n                    width: 100% !important; \\n                    height: 100% !important;\\n                    display: block !important;\\n                    background: #000;\\n                }\\n                /* Go2RTC Player fixes */\\n                video-stream-mse {\\n                    display: block;\\n                    width: 100%;\\n                    height: 100%;\\n                }\\n                /* Scrollbar hide */\\n                ::-webkit-scrollbar { width: 6px; height: 6px; }\\n                ::-webkit-scrollbar-track { background: #111; }\\n                ::-webkit-scrollbar-thumb { background: #333; }\\n            \"})]});}","map":{"version":3,"names":["React","useEffect","useState","API","CameraCard","formatLocalTime","jsx","_jsx","jsxs","_jsxs","colors","bg","text","accent","Live","cams","setCams","status","setStatus","selectedCam","setSelectedCam","gridSize","setGridSize","armingStatus","setArmingStatus","camStatus","setCamStatus","checkArming","get","then","res","statusMap","data","cameras","forEach","c","id","isArmed","catch","interval","setInterval","clearInterval","fetchCams","console","error","checkStatus","_res$data$system","isOnline","online","system","uptime","map","_objectSpread","connected","i1","i2","currentTime","setCurrentTime","Date","serverTimezone","setServerTimezone","_res$data","_res$data$raw","raw","split","i","formatTime","date","ts","getTime","handleUpdateCam","camId","changes","newCams","post","e","getGridConfig","cols","rows","Math","ceil","sqrt","concat","grid","capacity","className","style","width","height","background","color","overflow","display","flexDirection","children","justifyContent","alignItems","padding","borderBottom","gap","fontWeight","fontSize","borderRadius","num","onClick","border","cursor","marginRight","gridTemplateColumns","gridTemplateRows","flex","cam","idx","isVisible","position","onDoubleClick","isMaximized","isHidden","onUpdate","onMaximise","health","Array","from","length","max","_"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/pages/Live.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { API } from \"../api\";\r\nimport CameraCard from \"../components/CameraCard\";\r\nimport { formatLocalTime } from '../utils/time';\r\n\r\n// Styles\r\nconst colors = {\r\n    bg: \"#1e1e1e\",\r\n    text: \"#cccccc\",\r\n    accent: \"#007acc\"\r\n};\r\n\r\nexport default function Live() {\r\n    const [cams, setCams] = useState([]);\r\n    const [status, setStatus] = useState(\"Checking...\");\r\n    const [selectedCam, setSelectedCam] = useState(null);\r\n    const [gridSize, setGridSize] = useState(8);\r\n    const [armingStatus, setArmingStatus] = useState({});\r\n    const [camStatus, setCamStatus] = useState({});\r\n\r\n    // Poll Arming Status\r\n    useEffect(() => {\r\n        const checkArming = () => {\r\n            API.get(\"arming/debug\").then(res => {\r\n                const statusMap = {};\r\n                if (res.data && res.data.cameras) {\r\n                    res.data.cameras.forEach(c => statusMap[c.id] = c.isArmed);\r\n                }\r\n                setArmingStatus(statusMap);\r\n            }).catch(() => { });\r\n        };\r\n        checkArming();\r\n        const interval = setInterval(checkArming, 5000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    // Poll Config & Status\r\n    useEffect(() => {\r\n        const fetchCams = () => API.get(\"cameras/config\").then(res => setCams(res.data)).catch(console.error);\r\n        fetchCams();\r\n\r\n        const checkStatus = () => {\r\n            API.get(\"status\").then(res => {\r\n                const isOnline = res.data.online === true || res.data.status === \"Connected\" || res.data.system?.uptime > 0;\r\n                setStatus(isOnline ? \"Connected\" : \"Disconnected\");\r\n                if (res.data.cameras) {\r\n                    const map = {};\r\n                    res.data.cameras.forEach(c => map[c.id] = { ...c, connected: c.status === \"ONLINE\" });\r\n                    setCamStatus(map);\r\n                }\r\n            }).catch(() => setStatus(\"Disconnected\"));\r\n        };\r\n        checkStatus();\r\n\r\n        const i1 = setInterval(fetchCams, 10000);\r\n        const i2 = setInterval(checkStatus, 3000);\r\n        return () => { clearInterval(i1); clearInterval(i2); };\r\n    }, []);\r\n\r\n    // NEW: Server Time Sync\r\n    const [currentTime, setCurrentTime] = useState(new Date());\r\n    const [serverTimezone, setServerTimezone] = useState(null);\r\n\r\n    useEffect(() => {\r\n        API.get('/system/time').then(res => {\r\n            if (res.data?.raw?.['Time zone']) setServerTimezone(res.data.raw['Time zone'].split(' ')[0]);\r\n        }).catch(() => { });\r\n\r\n        const i = setInterval(() => setCurrentTime(new Date()), 1000);\r\n        return () => clearInterval(i);\r\n    }, []);\r\n\r\n    const formatTime = (date) => {\r\n        if (!date) return \"\";\r\n        const ts = date instanceof Date ? date.getTime() : date;\r\n        return formatLocalTime(ts, serverTimezone);\r\n    };\r\n\r\n    const handleUpdateCam = async (camId, changes) => {\r\n        const newCams = cams.map(c => c.id === camId ? { ...c, ...changes } : c);\r\n        setCams(newCams);\r\n        try { await API.post(\"cameras/config\", newCams); } catch (e) { console.error(e); }\r\n    };\r\n\r\n    // Grid Logic\r\n    const getGridConfig = () => {\r\n        if (selectedCam) return { cols: \"1fr\", rows: \"1fr\" };\r\n        switch (gridSize) {\r\n            case 1: return { cols: \"1fr\", rows: \"1fr\" };\r\n            case 4: return { cols: \"repeat(2, 1fr)\", rows: \"repeat(2, 1fr)\" };\r\n            case 6: return { cols: \"repeat(3, 1fr)\", rows: \"repeat(2, 1fr)\" };\r\n            case 8: return { cols: \"repeat(4, 1fr)\", rows: \"repeat(2, 1fr)\" }; // Trassir 8-view (4x2 usually or 1 big + 7 small) - keeping symetric for now\r\n            case 9: return { cols: \"repeat(3, 1fr)\", rows: \"repeat(3, 1fr)\" };\r\n            case 16: return { cols: \"repeat(4, 1fr)\", rows: \"repeat(4, 1fr)\" };\r\n            case 24: return { cols: \"repeat(6, 1fr)\", rows: \"repeat(4, 1fr)\" };\r\n            case 25: return { cols: \"repeat(5, 1fr)\", rows: \"repeat(5, 1fr)\" };\r\n            case 32: return { cols: \"repeat(8, 1fr)\", rows: \"repeat(4, 1fr)\" };\r\n            default:\r\n                const cols = Math.ceil(Math.sqrt(gridSize));\r\n                const rows = Math.ceil(gridSize / cols);\r\n                return { cols: `repeat(${cols}, 1fr)`, rows: `repeat(${rows}, 1fr)` };\r\n        }\r\n    };\r\n\r\n    const grid = getGridConfig();\r\n    const capacity = selectedCam ? 1 : gridSize;\r\n\r\n    return (\r\n        <div className=\"live-page\" style={{\r\n            width: \"100%\", height: \"100%\", background: \"#0d0d0d\", color: colors.text,\r\n            overflow: \"hidden\", display: \"flex\", flexDirection: \"column\"\r\n        }}>\r\n\r\n            {/* TOOLBAR */}\r\n            {!selectedCam && (\r\n                <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", padding: \"4px 8px\", background: \"#1a1a1a\", borderBottom: \"1px solid #333\", height: \"32px\" }}>\r\n                    <div style={{ display: \"flex\", alignItems: \"center\", gap: 15 }}>\r\n                        <div style={{ fontWeight: \"bold\", fontSize: 13, color: \"#fff\", display: \"flex\", alignItems: \"center\", gap: 5 }}>\r\n                            <div style={{ width: 8, height: 8, borderRadius: \"50%\", background: status === \"Connected\" ? \"#4caf50\" : \"#f44336\" }}></div>\r\n                            LIVE VIEW\r\n                        </div>\r\n                        <div style={{ display: \"flex\", gap: 1 }}>\r\n                            {[1, 4, 6, 8, 9, 12, 16, 24, 32].map(num => (\r\n                                <button key={num} onClick={() => setGridSize(num)}\r\n                                    style={{\r\n                                        border: \"none\", background: gridSize === num ? \"#007acc\" : \"#333\",\r\n                                        color: \"#fff\", width: 26, height: 20, cursor: \"pointer\", fontSize: 10,\r\n                                        fontWeight: gridSize === num ? \"bold\" : \"normal\", marginRight: 1\r\n                                    }}\r\n                                >\r\n                                    {num}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                    <div style={{ fontSize: 11, color: \"#666\" }}>{formatTime(currentTime)}</div>\r\n                </div>\r\n            )}\r\n\r\n            {/* GRID AREA */}\r\n            <div style={{\r\n                display: \"grid\",\r\n                gridTemplateColumns: grid.cols,\r\n                gridTemplateRows: grid.rows,\r\n                gap: selectedCam ? 0 : 2,\r\n                flex: 1,\r\n                background: \"#000\",\r\n                padding: selectedCam ? 0 : 2,\r\n                overflow: \"hidden\"\r\n            }}>\r\n                {cams.map((cam, idx) => {\r\n                    // Logic: Keep card in DOM but hide if out of grid range, unless selected\r\n                    const isVisible = selectedCam ? (cam.id === selectedCam.id) : (idx < capacity);\r\n\r\n                    return (\r\n                        <div key={cam.id} style={{\r\n                            display: isVisible ? \"flex\" : \"none\",\r\n                            flexDirection: \"column\",\r\n                            position: \"relative\",\r\n                            width: \"100%\",\r\n                            height: \"100%\",\r\n                            background: \"#000\",\r\n                            overflow: \"hidden\",\r\n                            border: selectedCam ? \"none\" : \"1px solid #222\"\r\n                        }}\r\n                            onDoubleClick={() => setSelectedCam(selectedCam ? null : cam)}\r\n                        >\r\n                            <CameraCard\r\n                                cam={cam}\r\n                                isMaximized={selectedCam && selectedCam.id === cam.id}\r\n                                isHidden={!isVisible}\r\n                                onUpdate={handleUpdateCam}\r\n                                onMaximise={() => setSelectedCam(cam)}\r\n                                isArmed={armingStatus[cam.id]}\r\n                                health={camStatus[cam.id]}\r\n                            />\r\n                        </div>\r\n                    );\r\n                })}\r\n\r\n                {/* Empty Slots visualization */}\r\n                {!selectedCam && Array.from({ length: Math.max(0, capacity - cams.length) }).map((_, i) => (\r\n                    <div key={`empty-${i}`} style={{ background: \"#111\", border: \"1px dashed #333\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}>\r\n                        <span style={{ color: \"#333\", fontSize: 10 }}>NO SIGNAL</span>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* GLOBAL STYLES FOR VIDEO ASPECT RATIO FIX */}\r\n            <style>{`\r\n                video, img, canvas {\r\n                    object-fit: fill !important; \r\n                    width: 100% !important; \r\n                    height: 100% !important;\r\n                    display: block !important;\r\n                    background: #000;\r\n                }\r\n                /* Go2RTC Player fixes */\r\n                video-stream-mse {\r\n                    display: block;\r\n                    width: 100%;\r\n                    height: 100%;\r\n                }\r\n                /* Scrollbar hide */\r\n                ::-webkit-scrollbar { width: 6px; height: 6px; }\r\n                ::-webkit-scrollbar-track { background: #111; }\r\n                ::-webkit-scrollbar-thumb { background: #333; }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}