{"ast":null,"code":"import React,{useEffect,useRef,useState,useCallback}from'react';import API from'../api';import PlaybackCoreV2 from'../services/PlaybackCoreV2';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DAY_MS=86400000;const HOUR_MS=3600000;const MIN_MS=60000;const Playback=()=>{// 0. URL PARAMS\nconst urlParams=new URLSearchParams(window.location.hash.split('?')[1]);const initCam=urlParams.get('camId');// STATE\nconst[cameras,setCameras]=useState([]);const[camId,setCamId]=useState(initCam||'');const[timelineSegments,setTimelineSegments]=useState([]);const[serverDayStart,setServerDayStart]=useState(0);const[selectedDate,setSelectedDate]=useState(new Date().toISOString().split('T')[0]);const[stats,setStats]=useState({first:null,last:null});const[isLoading,setIsLoading]=useState(false);// TIMELINE UI STATE\nconst[zoom,setZoom]=useState(1);const[offsetMs,setOffsetMs]=useState(0);const[playheadMs,setPlayheadMs]=useState(null);const videoRef=useRef(null);const canvasRef=useRef(null);const playbackCoreRef=useRef(null);// 1. LOAD CAMERAS\nuseEffect(()=>{API.get('/cameras').then(res=>{setCameras(res.data);if(!camId&&res.data.length>0)setCamId(res.data[0].id);}).catch(err=>console.error(\"Cameras load error\",err));},[camId]);// 1.5. LOAD STATS\nuseEffect(()=>{if(!camId)return;API.get(\"/playback/stats/\".concat(camId,\"?_t=\").concat(Date.now())).then(res=>setStats(res.data)).catch(console.error);},[camId]);// 2. LOAD SEGMENTS\nuseEffect(()=>{if(!camId)return;API.get(\"/playback/timeline-day/\".concat(camId,\"/\").concat(selectedDate,\"?_ts=\").concat(Date.now())).then(res=>{const{segments,dayStart}=res.data;setServerDayStart(dayStart);setTimelineSegments(segments||[]);setOffsetMs(0);setZoom(1);}).catch(err=>console.error(\"Timeline error\",err));},[camId,selectedDate]);// 3. INIT PLAYBACK CORE (HLS)\nuseEffect(()=>{if(!camId||!videoRef.current)return;if(playbackCoreRef.current){playbackCoreRef.current.destroy();}console.log(\"[Playback] Init HLS Core for\",camId);let baseURL=API.defaults.baseURL||'/api';if(baseURL.endsWith('/'))baseURL=baseURL.slice(0,-1);const core=new PlaybackCoreV2(videoRef.current,camId,baseURL);playbackCoreRef.current=core;return()=>core.destroy();},[camId]);// 3.5 AUTO-START ON FIRST SEGMENT\nuseEffect(()=>{if(playbackCoreRef.current&&timelineSegments.length>0&&serverDayStart){if(playheadMs===null){const firstSeg=timelineSegments[0];const startTs=Number(firstSeg.start_ts);console.log(\"[AutoStart] Starting at first segment:\",new Date(startTs).toLocaleTimeString());playbackCoreRef.current.start(startTs);setPlayheadMs(startTs-serverDayStart);}}},[timelineSegments,serverDayStart]);// 3.6 LOADING STATE HANDLERS\nuseEffect(()=>{const v=videoRef.current;if(!v)return;const onWaiting=()=>setIsLoading(true);const onPlaying=()=>setIsLoading(false);const onCanPlay=()=>setIsLoading(false);v.addEventListener('waiting',onWaiting);v.addEventListener('playing',onPlaying);v.addEventListener('canplay',onCanPlay);return()=>{v.removeEventListener('waiting',onWaiting);v.removeEventListener('playing',onPlaying);v.removeEventListener('canplay',onCanPlay);};},[]);// 4. SYNC PLAYHEAD (CLOCK)\nuseEffect(()=>{const interval=setInterval(()=>{if(!playbackCoreRef.current||!serverDayStart)return;const currentEpoch=playbackCoreRef.current.getCurrentEpochMs();if(currentEpoch&&currentEpoch>0){const relative=currentEpoch-serverDayStart;setPlayheadMs(relative);}},100);return()=>clearInterval(interval);},[serverDayStart]);const timeToX=(ms,width)=>{const visibleMs=DAY_MS/zoom;return(ms-offsetMs)/visibleMs*width;};const xToTime=(x,width)=>{const visibleMs=DAY_MS/zoom;return offsetMs+x/width*visibleMs;};const draw=useCallback(()=>{const canvas=canvasRef.current;if(!canvas||!serverDayStart)return;const ctx=canvas.getContext('2d');const width=canvas.width;const height=canvas.height;const visibleMs=DAY_MS/zoom;ctx.fillStyle='#111';ctx.fillRect(0,0,width,height);let step;if(visibleMs>12*HOUR_MS)step=HOUR_MS;else if(visibleMs>3*HOUR_MS)step=30*MIN_MS;else if(visibleMs>1*HOUR_MS)step=10*MIN_MS;else step=1*MIN_MS;ctx.lineWidth=1;for(let t=Math.floor(offsetMs/step)*step;t<offsetMs+visibleMs;t+=step){const x=timeToX(t,width);if(x<0||x>width)continue;ctx.strokeStyle='#333';ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,height);ctx.stroke();if(t%HOUR_MS===0||visibleMs<4*HOUR_MS){ctx.fillStyle='#888';ctx.font='10px Arial';const h=Math.floor(t/HOUR_MS);const m=Math.floor(t%HOUR_MS/MIN_MS);if(t>=0&&t<=DAY_MS){ctx.fillText(\"\".concat(String(h).padStart(2,'0'),\":\").concat(String(m).padStart(2,'0')),x+2,12);}}}ctx.fillStyle='#2ecc71';timelineSegments.forEach(s=>{const sStart=Number(s.start_ts)-serverDayStart;const sEnd=(s.end_ts===0?Date.now():Number(s.end_ts))-serverDayStart;const x1=timeToX(sStart,width);const x2=timeToX(sEnd,width);const w=Math.max(x2-x1,1);if(x1+w<0||x1>width)return;ctx.fillRect(x1,25,w,25);});if(playheadMs!==null){const px=timeToX(playheadMs,width);if(px>=0&&px<=width){ctx.strokeStyle='red';ctx.lineWidth=2;ctx.beginPath();ctx.moveTo(px,0);ctx.lineTo(px,height);ctx.stroke();ctx.fillStyle='red';ctx.beginPath();ctx.moveTo(px-5,0);ctx.lineTo(px+5,0);ctx.lineTo(px,8);ctx.fill();}}},[timelineSegments,serverDayStart,zoom,offsetMs,playheadMs]);useEffect(()=>{draw();},[draw]);const handleWheel=e=>{e.preventDefault();const canvas=canvasRef.current;const rect=canvas.getBoundingClientRect();const mouseX=e.clientX-rect.left;const mouseTime=xToTime(mouseX,rect.width);let newZoom=Math.min(600,Math.max(1,zoom*(e.deltaY>0?0.8:1.2)));const newVisibleMs=DAY_MS/newZoom;let newOffset=mouseTime-mouseX/rect.width*newVisibleMs;newOffset=Math.max(-newVisibleMs*0.1,Math.min(DAY_MS-newVisibleMs*0.9,newOffset));setZoom(newZoom);setOffsetMs(newOffset);};const handleCanvasClick=e=>{if(!serverDayStart||!playbackCoreRef.current)return;const canvas=canvasRef.current;const rect=canvas.getBoundingClientRect();const x=e.clientX-rect.left;const clickedRelativeMs=xToTime(x,rect.width);const absoluteTs=Math.floor(serverDayStart+clickedRelativeMs);console.log(\"[UI] Seek at x=\".concat(Math.floor(x),\" -> time=\").concat(new Date(absoluteTs).toLocaleTimeString()));playbackCoreRef.current.seekTo(absoluteTs);setPlayheadMs(clickedRelativeMs);};return/*#__PURE__*/_jsxs(\"div\",{className:\"playback-page\",style:{height:'calc(100vh - 64px)',display:'flex',flexDirection:'column',background:'#1a1a1a',color:'#eee',padding:'10px 20px',boxSizing:'border-box',overflow:'hidden'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:10,display:'flex',gap:15,alignItems:'center',flexWrap:'wrap',flexShrink:0},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:11,color:'#888',marginBottom:2},children:\"Camera\"}),/*#__PURE__*/_jsx(\"select\",{value:camId,onChange:e=>setCamId(e.target.value),style:{padding:'4px 8px',background:'#333',color:'#fff',border:'1px solid #555',borderRadius:4,outline:'none'},children:cameras.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c.id,children:c.name||c.ip},c.id))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:11,color:'#888',marginBottom:2},children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:selectedDate,onChange:e=>setSelectedDate(e.target.value),style:{padding:'3px 8px',background:'#333',color:'#fff',border:'1px solid #555',borderRadius:4,outline:'none'}})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),stats.first&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:11,color:'#2ecc71',textAlign:'right'},children:/*#__PURE__*/_jsxs(\"div\",{children:[\"Rec: \",new Date(stats.first).toLocaleDateString(),\" - \",new Date(stats.last).toLocaleDateString()]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"video-container\",style:{position:'relative',background:'#000',borderRadius:8,overflow:'hidden',width:'100%',flex:1,minHeight:0,marginBottom:10,display:'flex',alignItems:'center',justifyContent:'center',boxShadow:'0 4px 12px rgba(0,0,0,0.3)'},children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,id:\"player\",controls:true,autoPlay:true,playsInline:true,muted:true,style:{maxHeight:'100%',maxWidth:'100%',outline:'none'}}),isLoading&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'50%',left:'50%',transform:'translate(-50%, -50%)',color:'white',background:'rgba(0,0,0,0.7)',padding:'10px 20px',borderRadius:'4px',pointerEvents:'none'},children:\"Buffering...\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"timeline-container\",style:{width:'100%',height:80,flexShrink:0,position:'relative',border:'1px solid #333',borderRadius:4,overflow:'hidden',background:'#222'},children:/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,id:\"timeline\",width:2000,height:80,style:{width:'100%',height:'100%',cursor:'crosshair',display:'block'},onClick:handleCanvasClick,onWheel:handleWheel})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:5,display:'flex',justifyContent:'space-between',color:'#666',fontSize:10,flexShrink:0},children:[/*#__PURE__*/_jsx(\"div\",{children:\"Review Mode: Click on timeline to seek. Wheel to Zoom.\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Zoom: \",zoom.toFixed(1),\"x\"]})]})]});};export default Playback;","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","API","PlaybackCoreV2","jsx","_jsx","jsxs","_jsxs","DAY_MS","HOUR_MS","MIN_MS","Playback","urlParams","URLSearchParams","window","location","hash","split","initCam","get","cameras","setCameras","camId","setCamId","timelineSegments","setTimelineSegments","serverDayStart","setServerDayStart","selectedDate","setSelectedDate","Date","toISOString","stats","setStats","first","last","isLoading","setIsLoading","zoom","setZoom","offsetMs","setOffsetMs","playheadMs","setPlayheadMs","videoRef","canvasRef","playbackCoreRef","then","res","data","length","id","catch","err","console","error","concat","now","segments","dayStart","current","destroy","log","baseURL","defaults","endsWith","slice","core","firstSeg","startTs","Number","start_ts","toLocaleTimeString","start","v","onWaiting","onPlaying","onCanPlay","addEventListener","removeEventListener","interval","setInterval","currentEpoch","getCurrentEpochMs","relative","clearInterval","timeToX","ms","width","visibleMs","xToTime","x","draw","canvas","ctx","getContext","height","fillStyle","fillRect","step","lineWidth","t","Math","floor","strokeStyle","beginPath","moveTo","lineTo","stroke","font","h","m","fillText","String","padStart","forEach","s","sStart","sEnd","end_ts","x1","x2","w","max","px","fill","handleWheel","e","preventDefault","rect","getBoundingClientRect","mouseX","clientX","left","mouseTime","newZoom","min","deltaY","newVisibleMs","newOffset","handleCanvasClick","clickedRelativeMs","absoluteTs","seekTo","className","style","display","flexDirection","background","color","padding","boxSizing","overflow","children","marginBottom","gap","alignItems","flexWrap","flexShrink","fontSize","value","onChange","target","border","borderRadius","outline","map","c","name","ip","type","flex","textAlign","toLocaleDateString","position","minHeight","justifyContent","boxShadow","ref","controls","autoPlay","playsInline","muted","maxHeight","maxWidth","top","transform","pointerEvents","cursor","onClick","onWheel","marginTop","toFixed"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/pages/Playback.js"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\r\nimport API from '../api';\r\nimport PlaybackCoreV2 from '../services/PlaybackCoreV2';\r\n\r\nconst DAY_MS = 86400000;\r\nconst HOUR_MS = 3600000;\r\nconst MIN_MS = 60000;\r\n\r\nconst Playback = () => {\r\n    // 0. URL PARAMS\r\n    const urlParams = new URLSearchParams(window.location.hash.split('?')[1]);\r\n    const initCam = urlParams.get('camId');\r\n\r\n    // STATE\r\n    const [cameras, setCameras] = useState([]);\r\n    const [camId, setCamId] = useState(initCam || '');\r\n    const [timelineSegments, setTimelineSegments] = useState([]);\r\n    const [serverDayStart, setServerDayStart] = useState(0);\r\n    const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);\r\n    const [stats, setStats] = useState({ first: null, last: null });\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    // TIMELINE UI STATE\r\n    const [zoom, setZoom] = useState(1);\r\n    const [offsetMs, setOffsetMs] = useState(0);\r\n    const [playheadMs, setPlayheadMs] = useState(null);\r\n\r\n    const videoRef = useRef(null);\r\n    const canvasRef = useRef(null);\r\n    const playbackCoreRef = useRef(null);\r\n\r\n    // 1. LOAD CAMERAS\r\n    useEffect(() => {\r\n        API.get('/cameras').then(res => {\r\n            setCameras(res.data);\r\n            if (!camId && res.data.length > 0) setCamId(res.data[0].id);\r\n        }).catch(err => console.error(\"Cameras load error\", err));\r\n    }, [camId]);\r\n\r\n    // 1.5. LOAD STATS\r\n    useEffect(() => {\r\n        if (!camId) return;\r\n        API.get(`/playback/stats/${camId}?_t=${Date.now()}`)\r\n            .then(res => setStats(res.data))\r\n            .catch(console.error);\r\n    }, [camId]);\r\n\r\n    // 2. LOAD SEGMENTS\r\n    useEffect(() => {\r\n        if (!camId) return;\r\n        API.get(`/playback/timeline-day/${camId}/${selectedDate}?_ts=${Date.now()}`)\r\n            .then(res => {\r\n                const { segments, dayStart } = res.data;\r\n                setServerDayStart(dayStart);\r\n                setTimelineSegments(segments || []);\r\n                setOffsetMs(0);\r\n                setZoom(1);\r\n            })\r\n            .catch(err => console.error(\"Timeline error\", err));\r\n    }, [camId, selectedDate]);\r\n\r\n    // 3. INIT PLAYBACK CORE (HLS)\r\n    useEffect(() => {\r\n        if (!camId || !videoRef.current) return;\r\n\r\n        if (playbackCoreRef.current) {\r\n            playbackCoreRef.current.destroy();\r\n        }\r\n\r\n        console.log(\"[Playback] Init HLS Core for\", camId);\r\n        let baseURL = API.defaults.baseURL || '/api';\r\n        if (baseURL.endsWith('/')) baseURL = baseURL.slice(0, -1);\r\n\r\n        const core = new PlaybackCoreV2(videoRef.current, camId, baseURL);\r\n\r\n        playbackCoreRef.current = core;\r\n\r\n        return () => core.destroy();\r\n    }, [camId]);\r\n\r\n    // 3.5 AUTO-START ON FIRST SEGMENT\r\n    useEffect(() => {\r\n        if (playbackCoreRef.current && timelineSegments.length > 0 && serverDayStart) {\r\n            if (playheadMs === null) {\r\n                const firstSeg = timelineSegments[0];\r\n                const startTs = Number(firstSeg.start_ts);\r\n                console.log(\"[AutoStart] Starting at first segment:\", new Date(startTs).toLocaleTimeString());\r\n                playbackCoreRef.current.start(startTs);\r\n                setPlayheadMs(startTs - serverDayStart);\r\n            }\r\n        }\r\n    }, [timelineSegments, serverDayStart]);\r\n\r\n    // 3.6 LOADING STATE HANDLERS\r\n    useEffect(() => {\r\n        const v = videoRef.current;\r\n        if (!v) return;\r\n\r\n        const onWaiting = () => setIsLoading(true);\r\n        const onPlaying = () => setIsLoading(false);\r\n        const onCanPlay = () => setIsLoading(false);\r\n\r\n        v.addEventListener('waiting', onWaiting);\r\n        v.addEventListener('playing', onPlaying);\r\n        v.addEventListener('canplay', onCanPlay);\r\n\r\n        return () => {\r\n            v.removeEventListener('waiting', onWaiting);\r\n            v.removeEventListener('playing', onPlaying);\r\n            v.removeEventListener('canplay', onCanPlay);\r\n        }\r\n    }, []);\r\n\r\n    // 4. SYNC PLAYHEAD (CLOCK)\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            if (!playbackCoreRef.current || !serverDayStart) return;\r\n\r\n            const currentEpoch = playbackCoreRef.current.getCurrentEpochMs();\r\n            if (currentEpoch && currentEpoch > 0) {\r\n                const relative = currentEpoch - serverDayStart;\r\n                setPlayheadMs(relative);\r\n            }\r\n        }, 100);\r\n\r\n        return () => clearInterval(interval);\r\n    }, [serverDayStart]);\r\n\r\n\r\n    const timeToX = (ms, width) => {\r\n        const visibleMs = DAY_MS / zoom;\r\n        return ((ms - offsetMs) / visibleMs) * width;\r\n    };\r\n\r\n    const xToTime = (x, width) => {\r\n        const visibleMs = DAY_MS / zoom;\r\n        return offsetMs + (x / width) * visibleMs;\r\n    };\r\n\r\n    const draw = useCallback(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas || !serverDayStart) return;\r\n\r\n        const ctx = canvas.getContext('2d');\r\n        const width = canvas.width;\r\n        const height = canvas.height;\r\n        const visibleMs = DAY_MS / zoom;\r\n\r\n        ctx.fillStyle = '#111';\r\n        ctx.fillRect(0, 0, width, height);\r\n\r\n        let step;\r\n        if (visibleMs > 12 * HOUR_MS) step = HOUR_MS;\r\n        else if (visibleMs > 3 * HOUR_MS) step = 30 * MIN_MS;\r\n        else if (visibleMs > 1 * HOUR_MS) step = 10 * MIN_MS;\r\n        else step = 1 * MIN_MS;\r\n\r\n        ctx.lineWidth = 1;\r\n        for (let t = Math.floor(offsetMs / step) * step; t < offsetMs + visibleMs; t += step) {\r\n            const x = timeToX(t, width);\r\n            if (x < 0 || x > width) continue;\r\n\r\n            ctx.strokeStyle = '#333';\r\n            ctx.beginPath();\r\n            ctx.moveTo(x, 0);\r\n            ctx.lineTo(x, height);\r\n            ctx.stroke();\r\n\r\n            if (t % HOUR_MS === 0 || visibleMs < 4 * HOUR_MS) {\r\n                ctx.fillStyle = '#888';\r\n                ctx.font = '10px Arial';\r\n                const h = Math.floor(t / HOUR_MS);\r\n                const m = Math.floor((t % HOUR_MS) / MIN_MS);\r\n                if (t >= 0 && t <= DAY_MS) {\r\n                    ctx.fillText(`${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}`, x + 2, 12);\r\n                }\r\n            }\r\n        }\r\n\r\n        ctx.fillStyle = '#2ecc71';\r\n        timelineSegments.forEach(s => {\r\n            const sStart = Number(s.start_ts) - serverDayStart;\r\n            const sEnd = (s.end_ts === 0 ? Date.now() : Number(s.end_ts)) - serverDayStart;\r\n            const x1 = timeToX(sStart, width);\r\n            const x2 = timeToX(sEnd, width);\r\n            const w = Math.max(x2 - x1, 1);\r\n            if (x1 + w < 0 || x1 > width) return;\r\n            ctx.fillRect(x1, 25, w, 25);\r\n        });\r\n\r\n        if (playheadMs !== null) {\r\n            const px = timeToX(playheadMs, width);\r\n            if (px >= 0 && px <= width) {\r\n                ctx.strokeStyle = 'red';\r\n                ctx.lineWidth = 2;\r\n                ctx.beginPath();\r\n                ctx.moveTo(px, 0);\r\n                ctx.lineTo(px, height);\r\n                ctx.stroke();\r\n                ctx.fillStyle = 'red';\r\n                ctx.beginPath();\r\n                ctx.moveTo(px - 5, 0);\r\n                ctx.lineTo(px + 5, 0);\r\n                ctx.lineTo(px, 8);\r\n                ctx.fill();\r\n            }\r\n        }\r\n    }, [timelineSegments, serverDayStart, zoom, offsetMs, playheadMs]);\r\n\r\n    useEffect(() => {\r\n        draw();\r\n    }, [draw]);\r\n\r\n    const handleWheel = (e) => {\r\n        e.preventDefault();\r\n        const canvas = canvasRef.current;\r\n        const rect = canvas.getBoundingClientRect();\r\n        const mouseX = e.clientX - rect.left;\r\n        const mouseTime = xToTime(mouseX, rect.width);\r\n        let newZoom = Math.min(600, Math.max(1, zoom * (e.deltaY > 0 ? 0.8 : 1.2)));\r\n        const newVisibleMs = DAY_MS / newZoom;\r\n        let newOffset = mouseTime - (mouseX / rect.width) * newVisibleMs;\r\n        newOffset = Math.max(-newVisibleMs * 0.1, Math.min(DAY_MS - newVisibleMs * 0.9, newOffset));\r\n        setZoom(newZoom);\r\n        setOffsetMs(newOffset);\r\n    };\r\n\r\n    const handleCanvasClick = (e) => {\r\n        if (!serverDayStart || !playbackCoreRef.current) return;\r\n        const canvas = canvasRef.current;\r\n        const rect = canvas.getBoundingClientRect();\r\n        const x = e.clientX - rect.left;\r\n        const clickedRelativeMs = xToTime(x, rect.width);\r\n        const absoluteTs = Math.floor(serverDayStart + clickedRelativeMs);\r\n\r\n        console.log(`[UI] Seek at x=${Math.floor(x)} -> time=${new Date(absoluteTs).toLocaleTimeString()}`);\r\n        playbackCoreRef.current.seekTo(absoluteTs);\r\n        setPlayheadMs(clickedRelativeMs);\r\n    };\r\n\r\n    return (\r\n        <div className=\"playback-page\" style={{ height: 'calc(100vh - 64px)', display: 'flex', flexDirection: 'column', background: '#1a1a1a', color: '#eee', padding: '10px 20px', boxSizing: 'border-box', overflow: 'hidden' }}>\r\n            <div style={{ marginBottom: 10, display: 'flex', gap: 15, alignItems: 'center', flexWrap: 'wrap', flexShrink: 0 }}>\r\n                <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n                    <label style={{ fontSize: 11, color: '#888', marginBottom: 2 }}>Camera</label>\r\n                    <select value={camId} onChange={e => setCamId(e.target.value)} style={{ padding: '4px 8px', background: '#333', color: '#fff', border: '1px solid #555', borderRadius: 4, outline: 'none' }}>\r\n                        {cameras.map(c => <option key={c.id} value={c.id}>{c.name || c.ip}</option>)}\r\n                    </select>\r\n                </div>\r\n                <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n                    <label style={{ fontSize: 11, color: '#888', marginBottom: 2 }}>Date</label>\r\n                    <input type=\"date\" value={selectedDate} onChange={e => setSelectedDate(e.target.value)} style={{ padding: '3px 8px', background: '#333', color: '#fff', border: '1px solid #555', borderRadius: 4, outline: 'none' }} />\r\n                </div>\r\n                <div style={{ flex: 1 }}></div>\r\n                {stats.first && (<div style={{ fontSize: 11, color: '#2ecc71', textAlign: 'right' }}><div>Rec: {new Date(stats.first).toLocaleDateString()} - {new Date(stats.last).toLocaleDateString()}</div></div>)}\r\n            </div>\r\n            <div className=\"video-container\" style={{ position: 'relative', background: '#000', borderRadius: 8, overflow: 'hidden', width: '100%', flex: 1, minHeight: 0, marginBottom: 10, display: 'flex', alignItems: 'center', justifyContent: 'center', boxShadow: '0 4px 12px rgba(0,0,0,0.3)' }}>\r\n                <video ref={videoRef} id=\"player\" controls autoPlay playsInline muted style={{ maxHeight: '100%', maxWidth: '100%', outline: 'none' }} />\r\n                {isLoading && (\r\n                    <div style={{\r\n                        position: 'absolute', top: '50%', left: '50%', transform: 'translate(-50%, -50%)',\r\n                        color: 'white', background: 'rgba(0,0,0,0.7)', padding: '10px 20px', borderRadius: '4px', pointerEvents: 'none'\r\n                    }}>\r\n                        Buffering...\r\n                    </div>\r\n                )}\r\n            </div>\r\n            <div className=\"timeline-container\" style={{ width: '100%', height: 80, flexShrink: 0, position: 'relative', border: '1px solid #333', borderRadius: 4, overflow: 'hidden', background: '#222' }}>\r\n                <canvas ref={canvasRef} id=\"timeline\" width={2000} height={80} style={{ width: '100%', height: '100%', cursor: 'crosshair', display: 'block' }} onClick={handleCanvasClick} onWheel={handleWheel} />\r\n            </div>\r\n            <div style={{ marginTop: 5, display: 'flex', justifyContent: 'space-between', color: '#666', fontSize: 10, flexShrink: 0 }}>\r\n                <div>Review Mode: Click on timeline to seek. Wheel to Zoom.</div><div>Zoom: {zoom.toFixed(1)}x</div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nexport default Playback;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}