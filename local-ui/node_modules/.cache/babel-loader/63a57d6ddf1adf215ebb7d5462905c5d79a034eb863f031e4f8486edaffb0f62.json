{"ast":null,"code":"import React,{useEffect,useState,useRef}from\"react\";import{useSearchParams}from\"react-router-dom\";import API from\"../api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const styles=\"\\n* { box-sizing: border-box; margin: 0; padding: 0; }\\n\\nbody { background: #cfd2d6; }\\n\\n.playback-page {\\n  height: 100vh;\\n  display: flex;\\n  flex-direction: column;\\n  background: #cfd2d6;\\n  font-family: Arial, sans-serif;\\n}\\n\\n.playback-header {\\n  height: 40px;\\n  background: #d9d9d9;\\n  display: flex;\\n  align-items: center;\\n  padding: 0 10px;\\n  gap: 8px;\\n  border-bottom: 1px solid #999;\\n  flex-shrink: 0;\\n}\\n\\n.video-viewport {\\n  height: calc(100vh - 140px);\\n  background: #000;\\n  overflow: hidden;\\n  position: relative;\\n  cursor: grab;\\n}\\n\\n.video-viewport:active {\\n  cursor: grabbing;\\n}\\n\\nvideo {\\n  width: 100%;\\n  height: 100%;\\n  object-fit: contain;\\n  transform-origin: center;\\n  transition: transform 0.1s;\\n}\\n\\n.controls {\\n  height: 60px;\\n  background: #d9d9d9;\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n  padding: 0 8px;\\n  border-bottom: 1px solid #999;\\n  flex-shrink: 0;\\n}\\n\\n.timeline-area {\\n  height: 80px;\\n  background: #e6e6e6;\\n  border-top: 1px solid #999;\\n  position: relative;\\n  user-select: none;\\n  flex-shrink: 0;\\n}\\n\\n.segments-container {\\n  position: absolute;\\n  top: 34px;\\n  height: 12px;\\n  left: 0;\\n  right: 0;\\n  transform-origin: left center;\\n  transition: transform 0.1s;\\n}\\n\\n.segment {\\n  position: absolute;\\n  height: 100%;\\n  background: #2ecc71;\\n}\\n\\n.cursor {\\n  position: absolute;\\n  top: 0;\\n  width: 2px;\\n  height: 100%;\\n  background: red;\\n  z-index: 10;\\n}\\n\\nbutton {\\n  padding: 4px 10px;\\n  border: 1px solid #555;\\n  background: #f0f0f0;\\n  cursor: pointer;\\n  font-size: 13px;\\n}\\n\\nbutton:hover {\\n  background: #fff;\\n}\\n\\nbutton:active {\\n  background: #ddd;\\n}\\n\\n.time-display {\\n  margin-left: auto;\\n  font-weight: bold;\\n  font-size: 14px;\\n  color: #000;\\n}\\n\\n.info {\\n  font-size: 11px;\\n  color: #555;\\n}\\n\";export default function Playback(){const[params]=useSearchParams();const camId=params.get(\"camId\");const[segments,setSegments]=useState([]);const[isPlaying,setIsPlaying]=useState(false);const[currentTime,setCurrentTime]=useState(\"00:00:00\");const[videoZoom,setVideoZoom]=useState(1);const[timelineZoom,setTimelineZoom]=useState(1);const videoRef=useRef(null);const pcRef=useRef(null);const cursorRef=useRef(null);const timelineRef=useRef(null);const segmentsRef=useRef(null);// 24h range\nconst[timeRange]=useState(()=>{const now=new Date();const start=new Date(now.getFullYear(),now.getMonth(),now.getDate(),0,0,0,0);return{from:start.getTime(),to:start.getTime()+24*60*60*1000};});// Load timeline\nuseEffect(()=>{if(!camId)return;API.get(\"/playback/timeline/\".concat(camId,\"?from=\").concat(timeRange.from,\"&to=\").concat(timeRange.to)).then(res=>setSegments(res.data.segments||[])).catch(e=>console.error(\"Timeline error:\",e));},[camId]);// Video zoom (wheel on viewport)\nconst handleVideoWheel=e=>{e.preventDefault();const delta=e.deltaY<0?0.1:-0.1;const newZoom=Math.max(1,Math.min(5,videoZoom+delta));setVideoZoom(newZoom);};// Timeline zoom (wheel on timeline)\nconst handleTimelineWheel=e=>{e.preventDefault();const delta=e.deltaY<0?0.2:-0.2;const newZoom=Math.max(1,Math.min(10,timelineZoom+delta));setTimelineZoom(newZoom);};// Start playback\nconst startPlayback=async()=>{if(segments.length===0){alert(\"Nicio înregistrare\");return;}try{const res=await API.post('/playback/start',{camId,from:segments[0].start_ts,to:segments[segments.length-1].end_ts||Date.now(),speed:1});const pc=new RTCPeerConnection({iceServers:[{urls:'stun:stun.l.google.com:19302'}]});pcRef.current=pc;pc.ontrack=e=>{if(videoRef.current){videoRef.current.srcObject=e.streams[0];}};const offer=await pc.createOffer({offerToReceiveVideo:true,offerToReceiveAudio:false});await pc.setLocalDescription(offer);const response=await fetch(res.data.webrtcUrl,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(offer)});const answer=await response.json();await pc.setRemoteDescription(answer);setIsPlaying(true);}catch(e){var _e$response,_e$response$data;console.error(\"Playback error:\",e);alert(\"Eroare: \"+(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.error)||e.message));}};const pausePlayback=()=>{if(videoRef.current){videoRef.current.pause();}};const stopPlayback=async()=>{try{await API.post('/playback/stop',{camId});if(pcRef.current){pcRef.current.close();pcRef.current=null;}if(videoRef.current){videoRef.current.srcObject=null;}setIsPlaying(false);}catch(e){console.error(e);}};const setSpeed=speed=>{if(videoRef.current){videoRef.current.playbackRate=speed;}};// Timeline seek\nconst handleTimelineClick=e=>{const rect=timelineRef.current.getBoundingClientRect();const p=(e.clientX-rect.left)/rect.width;if(cursorRef.current){cursorRef.current.style.left=p*100+\"%\";}const seekTs=timeRange.from+p*(timeRange.to-timeRange.from);// TODO: GOP-aware seek - restart playback from seekTs\nconsole.log(\"Seek to: \".concat(new Date(seekTs).toLocaleTimeString()));};// Update time display\nuseEffect(()=>{const interval=setInterval(()=>{if(videoRef.current){const t=Math.floor(videoRef.current.currentTime);const h=String(Math.floor(t/3600)).padStart(2,'0');const m=String(Math.floor(t%3600/60)).padStart(2,'0');const s=String(t%60).padStart(2,'0');setCurrentTime(\"\".concat(h,\":\").concat(m,\":\").concat(s));}},500);return()=>clearInterval(interval);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"playback-page\",children:[/*#__PURE__*/_jsx(\"style\",{children:styles}),/*#__PURE__*/_jsxs(\"div\",{className:\"playback-header\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href='/',children:\"\\u2190 \\xCEnapoi\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:600},children:camId}),/*#__PURE__*/_jsxs(\"span\",{className:\"info\",children:[\"Segmente: \",segments.length]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"video-viewport\",onWheel:handleVideoWheel,children:/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,muted:true,playsInline:true,style:{transform:\"scale(\".concat(videoZoom,\")\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:startPlayback,children:\"\\u25B6\"}),/*#__PURE__*/_jsx(\"button\",{onClick:pausePlayback,children:\"\\u23F8\"}),/*#__PURE__*/_jsx(\"button\",{onClick:stopPlayback,children:\"\\u25A0\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSpeed(0.5),children:\"0.5\\xD7\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSpeed(1),children:\"1\\xD7\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSpeed(2),children:\"2\\xD7\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSpeed(4),children:\"4\\xD7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"time-display\",children:currentTime})]}),/*#__PURE__*/_jsxs(\"div\",{ref:timelineRef,className:\"timeline-area\",onClick:handleTimelineClick,onWheel:handleTimelineWheel,children:[/*#__PURE__*/_jsx(\"div\",{ref:segmentsRef,className:\"segments-container\",style:{transform:\"scaleX(\".concat(timelineZoom,\")\")},children:segments.map((seg,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"segment\",style:{left:\"\".concat(seg.s*100,\"%\"),width:\"\".concat(Math.max((seg.e-seg.s)*100,0.3),\"%\")}},i))}),/*#__PURE__*/_jsx(\"div\",{ref:cursorRef,className:\"cursor\"})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","useSearchParams","API","jsx","_jsx","jsxs","_jsxs","styles","Playback","params","camId","get","segments","setSegments","isPlaying","setIsPlaying","currentTime","setCurrentTime","videoZoom","setVideoZoom","timelineZoom","setTimelineZoom","videoRef","pcRef","cursorRef","timelineRef","segmentsRef","timeRange","now","Date","start","getFullYear","getMonth","getDate","from","getTime","to","concat","then","res","data","catch","e","console","error","handleVideoWheel","preventDefault","delta","deltaY","newZoom","Math","max","min","handleTimelineWheel","startPlayback","length","alert","post","start_ts","end_ts","speed","pc","RTCPeerConnection","iceServers","urls","current","ontrack","srcObject","streams","offer","createOffer","offerToReceiveVideo","offerToReceiveAudio","setLocalDescription","response","fetch","webrtcUrl","method","headers","body","JSON","stringify","answer","json","setRemoteDescription","_e$response","_e$response$data","message","pausePlayback","pause","stopPlayback","close","setSpeed","playbackRate","handleTimelineClick","rect","getBoundingClientRect","p","clientX","left","width","style","seekTs","log","toLocaleTimeString","interval","setInterval","t","floor","h","String","padStart","m","s","clearInterval","className","children","onClick","window","location","href","fontWeight","onWheel","ref","autoPlay","muted","playsInline","transform","map","seg","i"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/pages/Playback.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport API from \"../api\";\r\n\r\nconst styles = `\r\n* { box-sizing: border-box; margin: 0; padding: 0; }\r\n\r\nbody { background: #cfd2d6; }\r\n\r\n.playback-page {\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #cfd2d6;\r\n  font-family: Arial, sans-serif;\r\n}\r\n\r\n.playback-header {\r\n  height: 40px;\r\n  background: #d9d9d9;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0 10px;\r\n  gap: 8px;\r\n  border-bottom: 1px solid #999;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.video-viewport {\r\n  height: calc(100vh - 140px);\r\n  background: #000;\r\n  overflow: hidden;\r\n  position: relative;\r\n  cursor: grab;\r\n}\r\n\r\n.video-viewport:active {\r\n  cursor: grabbing;\r\n}\r\n\r\nvideo {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: contain;\r\n  transform-origin: center;\r\n  transition: transform 0.1s;\r\n}\r\n\r\n.controls {\r\n  height: 60px;\r\n  background: #d9d9d9;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  padding: 0 8px;\r\n  border-bottom: 1px solid #999;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.timeline-area {\r\n  height: 80px;\r\n  background: #e6e6e6;\r\n  border-top: 1px solid #999;\r\n  position: relative;\r\n  user-select: none;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.segments-container {\r\n  position: absolute;\r\n  top: 34px;\r\n  height: 12px;\r\n  left: 0;\r\n  right: 0;\r\n  transform-origin: left center;\r\n  transition: transform 0.1s;\r\n}\r\n\r\n.segment {\r\n  position: absolute;\r\n  height: 100%;\r\n  background: #2ecc71;\r\n}\r\n\r\n.cursor {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 2px;\r\n  height: 100%;\r\n  background: red;\r\n  z-index: 10;\r\n}\r\n\r\nbutton {\r\n  padding: 4px 10px;\r\n  border: 1px solid #555;\r\n  background: #f0f0f0;\r\n  cursor: pointer;\r\n  font-size: 13px;\r\n}\r\n\r\nbutton:hover {\r\n  background: #fff;\r\n}\r\n\r\nbutton:active {\r\n  background: #ddd;\r\n}\r\n\r\n.time-display {\r\n  margin-left: auto;\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n  color: #000;\r\n}\r\n\r\n.info {\r\n  font-size: 11px;\r\n  color: #555;\r\n}\r\n`;\r\n\r\nexport default function Playback() {\r\n    const [params] = useSearchParams();\r\n    const camId = params.get(\"camId\");\r\n\r\n    const [segments, setSegments] = useState([]);\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [currentTime, setCurrentTime] = useState(\"00:00:00\");\r\n    const [videoZoom, setVideoZoom] = useState(1);\r\n    const [timelineZoom, setTimelineZoom] = useState(1);\r\n\r\n    const videoRef = useRef(null);\r\n    const pcRef = useRef(null);\r\n    const cursorRef = useRef(null);\r\n    const timelineRef = useRef(null);\r\n    const segmentsRef = useRef(null);\r\n\r\n    // 24h range\r\n    const [timeRange] = useState(() => {\r\n        const now = new Date();\r\n        const start = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 0, 0, 0, 0);\r\n        return {\r\n            from: start.getTime(),\r\n            to: start.getTime() + 24 * 60 * 60 * 1000\r\n        };\r\n    });\r\n\r\n    // Load timeline\r\n    useEffect(() => {\r\n        if (!camId) return;\r\n\r\n        API.get(`/playback/timeline/${camId}?from=${timeRange.from}&to=${timeRange.to}`)\r\n            .then(res => setSegments(res.data.segments || []))\r\n            .catch(e => console.error(\"Timeline error:\", e));\r\n    }, [camId]);\r\n\r\n    // Video zoom (wheel on viewport)\r\n    const handleVideoWheel = (e) => {\r\n        e.preventDefault();\r\n        const delta = e.deltaY < 0 ? 0.1 : -0.1;\r\n        const newZoom = Math.max(1, Math.min(5, videoZoom + delta));\r\n        setVideoZoom(newZoom);\r\n    };\r\n\r\n    // Timeline zoom (wheel on timeline)\r\n    const handleTimelineWheel = (e) => {\r\n        e.preventDefault();\r\n        const delta = e.deltaY < 0 ? 0.2 : -0.2;\r\n        const newZoom = Math.max(1, Math.min(10, timelineZoom + delta));\r\n        setTimelineZoom(newZoom);\r\n    };\r\n\r\n    // Start playback\r\n    const startPlayback = async () => {\r\n        if (segments.length === 0) {\r\n            alert(\"Nicio înregistrare\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const res = await API.post('/playback/start', {\r\n                camId,\r\n                from: segments[0].start_ts,\r\n                to: segments[segments.length - 1].end_ts || Date.now(),\r\n                speed: 1\r\n            });\r\n\r\n            const pc = new RTCPeerConnection({\r\n                iceServers: [{ urls: 'stun:stun.l.google.com:19302' }]\r\n            });\r\n\r\n            pcRef.current = pc;\r\n\r\n            pc.ontrack = (e) => {\r\n                if (videoRef.current) {\r\n                    videoRef.current.srcObject = e.streams[0];\r\n                }\r\n            };\r\n\r\n            const offer = await pc.createOffer({\r\n                offerToReceiveVideo: true,\r\n                offerToReceiveAudio: false\r\n            });\r\n\r\n            await pc.setLocalDescription(offer);\r\n\r\n            const response = await fetch(res.data.webrtcUrl, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(offer)\r\n            });\r\n\r\n            const answer = await response.json();\r\n            await pc.setRemoteDescription(answer);\r\n\r\n            setIsPlaying(true);\r\n        } catch (e) {\r\n            console.error(\"Playback error:\", e);\r\n            alert(\"Eroare: \" + (e.response?.data?.error || e.message));\r\n        }\r\n    };\r\n\r\n    const pausePlayback = () => {\r\n        if (videoRef.current) {\r\n            videoRef.current.pause();\r\n        }\r\n    };\r\n\r\n    const stopPlayback = async () => {\r\n        try {\r\n            await API.post('/playback/stop', { camId });\r\n\r\n            if (pcRef.current) {\r\n                pcRef.current.close();\r\n                pcRef.current = null;\r\n            }\r\n\r\n            if (videoRef.current) {\r\n                videoRef.current.srcObject = null;\r\n            }\r\n\r\n            setIsPlaying(false);\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n    };\r\n\r\n    const setSpeed = (speed) => {\r\n        if (videoRef.current) {\r\n            videoRef.current.playbackRate = speed;\r\n        }\r\n    };\r\n\r\n    // Timeline seek\r\n    const handleTimelineClick = (e) => {\r\n        const rect = timelineRef.current.getBoundingClientRect();\r\n        const p = (e.clientX - rect.left) / rect.width;\r\n\r\n        if (cursorRef.current) {\r\n            cursorRef.current.style.left = (p * 100) + \"%\";\r\n        }\r\n\r\n        const seekTs = timeRange.from + p * (timeRange.to - timeRange.from);\r\n\r\n        // TODO: GOP-aware seek - restart playback from seekTs\r\n        console.log(`Seek to: ${new Date(seekTs).toLocaleTimeString()}`);\r\n    };\r\n\r\n    // Update time display\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            if (videoRef.current) {\r\n                const t = Math.floor(videoRef.current.currentTime);\r\n                const h = String(Math.floor(t / 3600)).padStart(2, '0');\r\n                const m = String(Math.floor((t % 3600) / 60)).padStart(2, '0');\r\n                const s = String(t % 60).padStart(2, '0');\r\n                setCurrentTime(`${h}:${m}:${s}`);\r\n            }\r\n        }, 500);\r\n\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"playback-page\">\r\n            <style>{styles}</style>\r\n\r\n            {/* Header */}\r\n            <div className=\"playback-header\">\r\n                <button onClick={() => window.location.href = '/'}>← Înapoi</button>\r\n                <span style={{ fontWeight: 600 }}>{camId}</span>\r\n                <span className=\"info\">Segmente: {segments.length}</span>\r\n            </div>\r\n\r\n            {/* Video viewport with ZOOM */}\r\n            <div\r\n                className=\"video-viewport\"\r\n                onWheel={handleVideoWheel}\r\n            >\r\n                <video\r\n                    ref={videoRef}\r\n                    autoPlay\r\n                    muted\r\n                    playsInline\r\n                    style={{ transform: `scale(${videoZoom})` }}\r\n                />\r\n            </div>\r\n\r\n            {/* Controls */}\r\n            <div className=\"controls\">\r\n                <button onClick={startPlayback}>▶</button>\r\n                <button onClick={pausePlayback}>⏸</button>\r\n                <button onClick={stopPlayback}>■</button>\r\n                <button onClick={() => setSpeed(0.5)}>0.5×</button>\r\n                <button onClick={() => setSpeed(1)}>1×</button>\r\n                <button onClick={() => setSpeed(2)}>2×</button>\r\n                <button onClick={() => setSpeed(4)}>4×</button>\r\n                <div className=\"time-display\">{currentTime}</div>\r\n            </div>\r\n\r\n            {/* Timeline with ZOOM */}\r\n            <div\r\n                ref={timelineRef}\r\n                className=\"timeline-area\"\r\n                onClick={handleTimelineClick}\r\n                onWheel={handleTimelineWheel}\r\n            >\r\n                <div\r\n                    ref={segmentsRef}\r\n                    className=\"segments-container\"\r\n                    style={{ transform: `scaleX(${timelineZoom})` }}\r\n                >\r\n                    {segments.map((seg, i) => (\r\n                        <div\r\n                            key={i}\r\n                            className=\"segment\"\r\n                            style={{\r\n                                left: `${seg.s * 100}%`,\r\n                                width: `${Math.max((seg.e - seg.s) * 100, 0.3)}%`\r\n                            }}\r\n                        />\r\n                    ))}\r\n                </div>\r\n                <div ref={cursorRef} className=\"cursor\" />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}