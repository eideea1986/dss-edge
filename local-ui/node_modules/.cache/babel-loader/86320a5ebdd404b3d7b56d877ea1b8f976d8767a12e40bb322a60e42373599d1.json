{"ast":null,"code":"var _jsxFileName = \"I:\\\\dispecerat\\\\github_release\\\\dss-edge\\\\local-ui\\\\src\\\\components\\\\MSEPlayer.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MSEPlayer({\n  camId,\n  streamType = 'hd',\n  style,\n  onClick,\n  onDoubleClick,\n  isHidden\n}) {\n  _s();\n  const videoRef = useRef(null);\n  const wsRef = useRef(null);\n  const [status, setStatus] = useState(\"init\");\n  const [errorMsg, setErrorMsg] = useState(null);\n  const suffix = streamType === 'low' ? 'sub' : streamType === 'hd' ? 'hd' : streamType;\n  const streamName = `${camId}_${suffix}`;\n  useEffect(() => {\n    if (isHidden) return;\n    let isMounted = true;\n    setStatus(\"analyzing\");\n    setErrorMsg(null);\n    const video = videoRef.current;\n    if (!video) return;\n    const cleanup = () => {\n      isMounted = false;\n      if (wsRef.current) {\n        wsRef.current.close();\n        wsRef.current = null;\n      }\n      if (video.src) {\n        URL.revokeObjectURL(video.src);\n        video.src = '';\n      }\n    };\n    const startMse = async () => {\n      try {\n        // 1. Detect Codec via Go2RTC API\n        const infoRes = await fetch(`/rtc/api/streams?src=${streamName}`);\n        if (!infoRes.ok) throw new Error(\"Stream info fetch failed\");\n        const infoData = await infoRes.json();\n\n        // Parse codec from Go2RTC response\n        // Structure: { \"streams\": { \"streamName\": { \"producers\": [ { \"medias\": [ \"video, recvonly, H264...\" ] } ] } } }\n        // OR simplified json depending on version. Let's look for known patterns.\n\n        let detectedCodec = 'avc1.64001E'; // Default H264 High\n        let codecType = 'h264';\n\n        // Robust Search in JSON\n        const jsonStr = JSON.stringify(infoData);\n        if (jsonStr.includes(\"H265\") || jsonStr.includes(\"HEVC\")) {\n          detectedCodec = 'hvc1.1.6.L93.B0'; // Generic H265\n          codecType = 'h265';\n        } else if (jsonStr.includes(\"H264\")) {\n          detectedCodec = 'avc1.64001E';\n          codecType = 'h264';\n        }\n        console.log(`[MSE] Detected Codec for ${streamName}: ${codecType} (${detectedCodec})`);\n        const mime = `video/mp4; codecs=\"${detectedCodec}\"`;\n        if (!MediaSource.isTypeSupported(mime)) {\n          throw new Error(`Browser does not support ${codecType} (${detectedCodec})`);\n        }\n\n        // 2. Initialize MSE\n        const mse = new MediaSource();\n        video.src = URL.createObjectURL(mse);\n        mse.addEventListener('sourceopen', () => {\n          if (!isMounted) return;\n          const proto = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n          const wsUrl = `${proto}//${window.location.host}/rtc/api/ws?src=${streamName}`;\n          const ws = new WebSocket(wsUrl);\n          ws.binaryType = 'arraybuffer';\n          wsRef.current = ws;\n          ws.onopen = () => setStatus(\"playing\");\n          ws.onclose = () => {\n            if (isMounted) setStatus(\"disconnected\");\n          };\n          ws.onerror = e => console.error(\"[MSE] WS Error\", e);\n          let sb = null;\n          const queue = [];\n          const processQueue = () => {\n            if (sb && !sb.updating && queue.length > 0) {\n              try {\n                sb.appendBuffer(queue.shift());\n              } catch (e) {\n                console.error(\"[MSE] Append Error\", e);\n              }\n            }\n          };\n          ws.onmessage = event => {\n            const data = event.data;\n            if (!sb && mse.readyState === 'open') {\n              try {\n                sb = mse.addSourceBuffer(mime);\n                sb.mode = 'segments';\n                sb.addEventListener('updateend', processQueue);\n              } catch (e) {\n                console.error(\"[MSE] SourceBuffer Error\", e);\n                ws.close();\n              }\n            }\n            if (sb) {\n              queue.push(data);\n              processQueue();\n            }\n          };\n        });\n      } catch (e) {\n        console.error(\"[MSE] Init Error:\", e);\n        if (isMounted) {\n          setStatus(\"error\");\n          setErrorMsg(e.message);\n        }\n      }\n    };\n    startMse();\n\n    // Auto-play watchdog\n    const interval = setInterval(() => {\n      if (video.paused && status === 'playing') video.play().catch(() => {});\n    }, 2000);\n    return () => {\n      clearInterval(interval);\n      cleanup();\n    };\n  }, [camId, suffix, isHidden, streamName]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mse-player\",\n    style: {\n      ...style,\n      position: \"relative\",\n      background: \"#000\",\n      width: \"100%\",\n      height: \"100%\",\n      overflow: \"hidden\"\n    },\n    onClick: onClick,\n    onDoubleClick: onDoubleClick,\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      style: {\n        width: \"100%\",\n        height: \"100%\",\n        objectFit: \"fill\",\n        display: \"block\"\n      },\n      playsInline: true,\n      muted: true,\n      autoPlay: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }, this), (status !== 'playing' || errorMsg) && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        inset: 0,\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        background: \"rgba(0,0,0,0.6)\",\n        color: \"#fff\",\n        zIndex: 10\n      },\n      children: [status === 'analyzing' && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 12\n        },\n        children: \"Analyzing Stream...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 48\n      }, this), status === 'connecting' && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 12\n        },\n        children: \"Connecting TCP...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 49\n      }, this), status === 'error' && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: \"center\",\n          padding: 20\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: \"#ff4444\",\n            fontWeight: \"bold\",\n            marginBottom: 5\n          },\n          children: \"Playback Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 11,\n            color: \"#ccc\"\n          },\n          children: errorMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 29\n        }, this), errorMsg && errorMsg.includes(\"H265\") && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 10,\n            marginTop: 10,\n            fontStyle: \"italic\",\n            color: \"#aaa\"\n          },\n          children: \"Try native app or switch camera to H.264\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 9\n  }, this);\n}\n_s(MSEPlayer, \"AwS2NA6KDwUn9mOZFBpv9wh3HLo=\");\n_c = MSEPlayer;\nexport default _c2 = /*#__PURE__*/React.memo(MSEPlayer);\nvar _c, _c2;\n$RefreshReg$(_c, \"MSEPlayer\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","MSEPlayer","camId","streamType","style","onClick","onDoubleClick","isHidden","_s","videoRef","wsRef","status","setStatus","errorMsg","setErrorMsg","suffix","streamName","isMounted","video","current","cleanup","close","src","URL","revokeObjectURL","startMse","infoRes","fetch","ok","Error","infoData","json","detectedCodec","codecType","jsonStr","JSON","stringify","includes","console","log","mime","MediaSource","isTypeSupported","mse","createObjectURL","addEventListener","proto","window","location","protocol","wsUrl","host","ws","WebSocket","binaryType","onopen","onclose","onerror","e","error","sb","queue","processQueue","updating","length","appendBuffer","shift","onmessage","event","data","readyState","addSourceBuffer","mode","push","message","interval","setInterval","paused","play","catch","clearInterval","className","position","background","width","height","overflow","children","ref","objectFit","display","playsInline","muted","autoPlay","fileName","_jsxFileName","lineNumber","columnNumber","inset","flexDirection","alignItems","justifyContent","color","zIndex","fontSize","textAlign","padding","fontWeight","marginBottom","marginTop","fontStyle","_c","_c2","memo","$RefreshReg$"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/components/MSEPlayer.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\n\r\nfunction MSEPlayer({ camId, streamType = 'hd', style, onClick, onDoubleClick, isHidden }) {\r\n    const videoRef = useRef(null);\r\n    const wsRef = useRef(null);\r\n    const [status, setStatus] = useState(\"init\");\r\n    const [errorMsg, setErrorMsg] = useState(null);\r\n\r\n    const suffix = streamType === 'low' ? 'sub' : streamType === 'hd' ? 'hd' : streamType;\r\n    const streamName = `${camId}_${suffix}`;\r\n\r\n    useEffect(() => {\r\n        if (isHidden) return;\r\n\r\n        let isMounted = true;\r\n        setStatus(\"analyzing\");\r\n        setErrorMsg(null);\r\n\r\n        const video = videoRef.current;\r\n        if (!video) return;\r\n\r\n        const cleanup = () => {\r\n            isMounted = false;\r\n            if (wsRef.current) {\r\n                wsRef.current.close();\r\n                wsRef.current = null;\r\n            }\r\n            if (video.src) {\r\n                URL.revokeObjectURL(video.src);\r\n                video.src = '';\r\n            }\r\n        };\r\n\r\n        const startMse = async () => {\r\n            try {\r\n                // 1. Detect Codec via Go2RTC API\r\n                const infoRes = await fetch(`/rtc/api/streams?src=${streamName}`);\r\n                if (!infoRes.ok) throw new Error(\"Stream info fetch failed\");\r\n                const infoData = await infoRes.json();\r\n\r\n                // Parse codec from Go2RTC response\r\n                // Structure: { \"streams\": { \"streamName\": { \"producers\": [ { \"medias\": [ \"video, recvonly, H264...\" ] } ] } } }\r\n                // OR simplified json depending on version. Let's look for known patterns.\r\n\r\n                let detectedCodec = 'avc1.64001E'; // Default H264 High\r\n                let codecType = 'h264';\r\n\r\n                // Robust Search in JSON\r\n                const jsonStr = JSON.stringify(infoData);\r\n                if (jsonStr.includes(\"H265\") || jsonStr.includes(\"HEVC\")) {\r\n                    detectedCodec = 'hvc1.1.6.L93.B0'; // Generic H265\r\n                    codecType = 'h265';\r\n                } else if (jsonStr.includes(\"H264\")) {\r\n                    detectedCodec = 'avc1.64001E';\r\n                    codecType = 'h264';\r\n                }\r\n\r\n                console.log(`[MSE] Detected Codec for ${streamName}: ${codecType} (${detectedCodec})`);\r\n\r\n                const mime = `video/mp4; codecs=\"${detectedCodec}\"`;\r\n                if (!MediaSource.isTypeSupported(mime)) {\r\n                    throw new Error(`Browser does not support ${codecType} (${detectedCodec})`);\r\n                }\r\n\r\n                // 2. Initialize MSE\r\n                const mse = new MediaSource();\r\n                video.src = URL.createObjectURL(mse);\r\n\r\n                mse.addEventListener('sourceopen', () => {\r\n                    if (!isMounted) return;\r\n\r\n                    const proto = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\r\n                    const wsUrl = `${proto}//${window.location.host}/rtc/api/ws?src=${streamName}`;\r\n\r\n                    const ws = new WebSocket(wsUrl);\r\n                    ws.binaryType = 'arraybuffer';\r\n                    wsRef.current = ws;\r\n\r\n                    ws.onopen = () => setStatus(\"playing\");\r\n                    ws.onclose = () => {\r\n                        if (isMounted) setStatus(\"disconnected\");\r\n                    };\r\n                    ws.onerror = (e) => console.error(\"[MSE] WS Error\", e);\r\n\r\n                    let sb = null;\r\n                    const queue = [];\r\n\r\n                    const processQueue = () => {\r\n                        if (sb && !sb.updating && queue.length > 0) {\r\n                            try {\r\n                                sb.appendBuffer(queue.shift());\r\n                            } catch (e) {\r\n                                console.error(\"[MSE] Append Error\", e);\r\n                            }\r\n                        }\r\n                    };\r\n\r\n                    ws.onmessage = (event) => {\r\n                        const data = event.data;\r\n                        if (!sb && mse.readyState === 'open') {\r\n                            try {\r\n                                sb = mse.addSourceBuffer(mime);\r\n                                sb.mode = 'segments';\r\n                                sb.addEventListener('updateend', processQueue);\r\n                            } catch (e) {\r\n                                console.error(\"[MSE] SourceBuffer Error\", e);\r\n                                ws.close();\r\n                            }\r\n                        }\r\n                        if (sb) {\r\n                            queue.push(data);\r\n                            processQueue();\r\n                        }\r\n                    };\r\n                });\r\n\r\n            } catch (e) {\r\n                console.error(\"[MSE] Init Error:\", e);\r\n                if (isMounted) {\r\n                    setStatus(\"error\");\r\n                    setErrorMsg(e.message);\r\n                }\r\n            }\r\n        };\r\n\r\n        startMse();\r\n\r\n        // Auto-play watchdog\r\n        const interval = setInterval(() => {\r\n            if (video.paused && status === 'playing') video.play().catch(() => { });\r\n        }, 2000);\r\n\r\n        return () => {\r\n            clearInterval(interval);\r\n            cleanup();\r\n        };\r\n    }, [camId, suffix, isHidden, streamName]);\r\n\r\n    return (\r\n        <div className=\"mse-player\" style={{ ...style, position: \"relative\", background: \"#000\", width: \"100%\", height: \"100%\", overflow: \"hidden\" }}\r\n            onClick={onClick} onDoubleClick={onDoubleClick}>\r\n            <video\r\n                ref={videoRef}\r\n                style={{ width: \"100%\", height: \"100%\", objectFit: \"fill\", display: \"block\" }}\r\n                playsInline muted autoPlay\r\n            />\r\n\r\n            {/* STATUS OVERLAY */}\r\n            {(status !== 'playing' || errorMsg) && (\r\n                <div style={{\r\n                    position: \"absolute\", inset: 0,\r\n                    display: \"flex\", flexDirection: \"column\", alignItems: \"center\", justifyContent: \"center\",\r\n                    background: \"rgba(0,0,0,0.6)\", color: \"#fff\", zIndex: 10\r\n                }}>\r\n                    {status === 'analyzing' && <div style={{ fontSize: 12 }}>Analyzing Stream...</div>}\r\n                    {status === 'connecting' && <div style={{ fontSize: 12 }}>Connecting TCP...</div>}\r\n                    {status === 'error' && (\r\n                        <div style={{ textAlign: \"center\", padding: 20 }}>\r\n                            <div style={{ color: \"#ff4444\", fontWeight: \"bold\", marginBottom: 5 }}>Playback Error</div>\r\n                            <div style={{ fontSize: 11, color: \"#ccc\" }}>{errorMsg}</div>\r\n                            {errorMsg && errorMsg.includes(\"H265\") && (\r\n                                <div style={{ fontSize: 10, marginTop: 10, fontStyle: \"italic\", color: \"#aaa\" }}>\r\n                                    Try native app or switch camera to H.264\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default React.memo(MSEPlayer);\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3D,SAASC,SAASA,CAAC;EAAEC,KAAK;EAAEC,UAAU,GAAG,IAAI;EAAEC,KAAK;EAAEC,OAAO;EAAEC,aAAa;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACtF,MAAMC,QAAQ,GAAGZ,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMa,KAAK,GAAGb,MAAM,CAAC,IAAI,CAAC;EAC1B,MAAM,CAACc,MAAM,EAAEC,SAAS,CAAC,GAAGd,QAAQ,CAAC,MAAM,CAAC;EAC5C,MAAM,CAACe,QAAQ,EAAEC,WAAW,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EAE9C,MAAMiB,MAAM,GAAGZ,UAAU,KAAK,KAAK,GAAG,KAAK,GAAGA,UAAU,KAAK,IAAI,GAAG,IAAI,GAAGA,UAAU;EACrF,MAAMa,UAAU,GAAG,GAAGd,KAAK,IAAIa,MAAM,EAAE;EAEvCnB,SAAS,CAAC,MAAM;IACZ,IAAIW,QAAQ,EAAE;IAEd,IAAIU,SAAS,GAAG,IAAI;IACpBL,SAAS,CAAC,WAAW,CAAC;IACtBE,WAAW,CAAC,IAAI,CAAC;IAEjB,MAAMI,KAAK,GAAGT,QAAQ,CAACU,OAAO;IAC9B,IAAI,CAACD,KAAK,EAAE;IAEZ,MAAME,OAAO,GAAGA,CAAA,KAAM;MAClBH,SAAS,GAAG,KAAK;MACjB,IAAIP,KAAK,CAACS,OAAO,EAAE;QACfT,KAAK,CAACS,OAAO,CAACE,KAAK,CAAC,CAAC;QACrBX,KAAK,CAACS,OAAO,GAAG,IAAI;MACxB;MACA,IAAID,KAAK,CAACI,GAAG,EAAE;QACXC,GAAG,CAACC,eAAe,CAACN,KAAK,CAACI,GAAG,CAAC;QAC9BJ,KAAK,CAACI,GAAG,GAAG,EAAE;MAClB;IACJ,CAAC;IAED,MAAMG,QAAQ,GAAG,MAAAA,CAAA,KAAY;MACzB,IAAI;QACA;QACA,MAAMC,OAAO,GAAG,MAAMC,KAAK,CAAC,wBAAwBX,UAAU,EAAE,CAAC;QACjE,IAAI,CAACU,OAAO,CAACE,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,0BAA0B,CAAC;QAC5D,MAAMC,QAAQ,GAAG,MAAMJ,OAAO,CAACK,IAAI,CAAC,CAAC;;QAErC;QACA;QACA;;QAEA,IAAIC,aAAa,GAAG,aAAa,CAAC,CAAC;QACnC,IAAIC,SAAS,GAAG,MAAM;;QAEtB;QACA,MAAMC,OAAO,GAAGC,IAAI,CAACC,SAAS,CAACN,QAAQ,CAAC;QACxC,IAAII,OAAO,CAACG,QAAQ,CAAC,MAAM,CAAC,IAAIH,OAAO,CAACG,QAAQ,CAAC,MAAM,CAAC,EAAE;UACtDL,aAAa,GAAG,iBAAiB,CAAC,CAAC;UACnCC,SAAS,GAAG,MAAM;QACtB,CAAC,MAAM,IAAIC,OAAO,CAACG,QAAQ,CAAC,MAAM,CAAC,EAAE;UACjCL,aAAa,GAAG,aAAa;UAC7BC,SAAS,GAAG,MAAM;QACtB;QAEAK,OAAO,CAACC,GAAG,CAAC,4BAA4BvB,UAAU,KAAKiB,SAAS,KAAKD,aAAa,GAAG,CAAC;QAEtF,MAAMQ,IAAI,GAAG,sBAAsBR,aAAa,GAAG;QACnD,IAAI,CAACS,WAAW,CAACC,eAAe,CAACF,IAAI,CAAC,EAAE;UACpC,MAAM,IAAIX,KAAK,CAAC,4BAA4BI,SAAS,KAAKD,aAAa,GAAG,CAAC;QAC/E;;QAEA;QACA,MAAMW,GAAG,GAAG,IAAIF,WAAW,CAAC,CAAC;QAC7BvB,KAAK,CAACI,GAAG,GAAGC,GAAG,CAACqB,eAAe,CAACD,GAAG,CAAC;QAEpCA,GAAG,CAACE,gBAAgB,CAAC,YAAY,EAAE,MAAM;UACrC,IAAI,CAAC5B,SAAS,EAAE;UAEhB,MAAM6B,KAAK,GAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,QAAQ,GAAG,MAAM,GAAG,KAAK;UACpE,MAAMC,KAAK,GAAG,GAAGJ,KAAK,KAAKC,MAAM,CAACC,QAAQ,CAACG,IAAI,mBAAmBnC,UAAU,EAAE;UAE9E,MAAMoC,EAAE,GAAG,IAAIC,SAAS,CAACH,KAAK,CAAC;UAC/BE,EAAE,CAACE,UAAU,GAAG,aAAa;UAC7B5C,KAAK,CAACS,OAAO,GAAGiC,EAAE;UAElBA,EAAE,CAACG,MAAM,GAAG,MAAM3C,SAAS,CAAC,SAAS,CAAC;UACtCwC,EAAE,CAACI,OAAO,GAAG,MAAM;YACf,IAAIvC,SAAS,EAAEL,SAAS,CAAC,cAAc,CAAC;UAC5C,CAAC;UACDwC,EAAE,CAACK,OAAO,GAAIC,CAAC,IAAKpB,OAAO,CAACqB,KAAK,CAAC,gBAAgB,EAAED,CAAC,CAAC;UAEtD,IAAIE,EAAE,GAAG,IAAI;UACb,MAAMC,KAAK,GAAG,EAAE;UAEhB,MAAMC,YAAY,GAAGA,CAAA,KAAM;YACvB,IAAIF,EAAE,IAAI,CAACA,EAAE,CAACG,QAAQ,IAAIF,KAAK,CAACG,MAAM,GAAG,CAAC,EAAE;cACxC,IAAI;gBACAJ,EAAE,CAACK,YAAY,CAACJ,KAAK,CAACK,KAAK,CAAC,CAAC,CAAC;cAClC,CAAC,CAAC,OAAOR,CAAC,EAAE;gBACRpB,OAAO,CAACqB,KAAK,CAAC,oBAAoB,EAAED,CAAC,CAAC;cAC1C;YACJ;UACJ,CAAC;UAEDN,EAAE,CAACe,SAAS,GAAIC,KAAK,IAAK;YACtB,MAAMC,IAAI,GAAGD,KAAK,CAACC,IAAI;YACvB,IAAI,CAACT,EAAE,IAAIjB,GAAG,CAAC2B,UAAU,KAAK,MAAM,EAAE;cAClC,IAAI;gBACAV,EAAE,GAAGjB,GAAG,CAAC4B,eAAe,CAAC/B,IAAI,CAAC;gBAC9BoB,EAAE,CAACY,IAAI,GAAG,UAAU;gBACpBZ,EAAE,CAACf,gBAAgB,CAAC,WAAW,EAAEiB,YAAY,CAAC;cAClD,CAAC,CAAC,OAAOJ,CAAC,EAAE;gBACRpB,OAAO,CAACqB,KAAK,CAAC,0BAA0B,EAAED,CAAC,CAAC;gBAC5CN,EAAE,CAAC/B,KAAK,CAAC,CAAC;cACd;YACJ;YACA,IAAIuC,EAAE,EAAE;cACJC,KAAK,CAACY,IAAI,CAACJ,IAAI,CAAC;cAChBP,YAAY,CAAC,CAAC;YAClB;UACJ,CAAC;QACL,CAAC,CAAC;MAEN,CAAC,CAAC,OAAOJ,CAAC,EAAE;QACRpB,OAAO,CAACqB,KAAK,CAAC,mBAAmB,EAAED,CAAC,CAAC;QACrC,IAAIzC,SAAS,EAAE;UACXL,SAAS,CAAC,OAAO,CAAC;UAClBE,WAAW,CAAC4C,CAAC,CAACgB,OAAO,CAAC;QAC1B;MACJ;IACJ,CAAC;IAEDjD,QAAQ,CAAC,CAAC;;IAEV;IACA,MAAMkD,QAAQ,GAAGC,WAAW,CAAC,MAAM;MAC/B,IAAI1D,KAAK,CAAC2D,MAAM,IAAIlE,MAAM,KAAK,SAAS,EAAEO,KAAK,CAAC4D,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,CAAE,CAAC,CAAC;IAC3E,CAAC,EAAE,IAAI,CAAC;IAER,OAAO,MAAM;MACTC,aAAa,CAACL,QAAQ,CAAC;MACvBvD,OAAO,CAAC,CAAC;IACb,CAAC;EACL,CAAC,EAAE,CAAClB,KAAK,EAAEa,MAAM,EAAER,QAAQ,EAAES,UAAU,CAAC,CAAC;EAEzC,oBACIhB,OAAA;IAAKiF,SAAS,EAAC,YAAY;IAAC7E,KAAK,EAAE;MAAE,GAAGA,KAAK;MAAE8E,QAAQ,EAAE,UAAU;MAAEC,UAAU,EAAE,MAAM;MAAEC,KAAK,EAAE,MAAM;MAAEC,MAAM,EAAE,MAAM;MAAEC,QAAQ,EAAE;IAAS,CAAE;IACzIjF,OAAO,EAAEA,OAAQ;IAACC,aAAa,EAAEA,aAAc;IAAAiF,QAAA,gBAC/CvF,OAAA;MACIwF,GAAG,EAAE/E,QAAS;MACdL,KAAK,EAAE;QAAEgF,KAAK,EAAE,MAAM;QAAEC,MAAM,EAAE,MAAM;QAAEI,SAAS,EAAE,MAAM;QAAEC,OAAO,EAAE;MAAQ,CAAE;MAC9EC,WAAW;MAACC,KAAK;MAACC,QAAQ;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7B,CAAC,EAGD,CAACtF,MAAM,KAAK,SAAS,IAAIE,QAAQ,kBAC9Bb,OAAA;MAAKI,KAAK,EAAE;QACR8E,QAAQ,EAAE,UAAU;QAAEgB,KAAK,EAAE,CAAC;QAC9BR,OAAO,EAAE,MAAM;QAAES,aAAa,EAAE,QAAQ;QAAEC,UAAU,EAAE,QAAQ;QAAEC,cAAc,EAAE,QAAQ;QACxFlB,UAAU,EAAE,iBAAiB;QAAEmB,KAAK,EAAE,MAAM;QAAEC,MAAM,EAAE;MAC1D,CAAE;MAAAhB,QAAA,GACG5E,MAAM,KAAK,WAAW,iBAAIX,OAAA;QAAKI,KAAK,EAAE;UAAEoG,QAAQ,EAAE;QAAG,CAAE;QAAAjB,QAAA,EAAC;MAAmB;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,EACjFtF,MAAM,KAAK,YAAY,iBAAIX,OAAA;QAAKI,KAAK,EAAE;UAAEoG,QAAQ,EAAE;QAAG,CAAE;QAAAjB,QAAA,EAAC;MAAiB;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,EAChFtF,MAAM,KAAK,OAAO,iBACfX,OAAA;QAAKI,KAAK,EAAE;UAAEqG,SAAS,EAAE,QAAQ;UAAEC,OAAO,EAAE;QAAG,CAAE;QAAAnB,QAAA,gBAC7CvF,OAAA;UAAKI,KAAK,EAAE;YAAEkG,KAAK,EAAE,SAAS;YAAEK,UAAU,EAAE,MAAM;YAAEC,YAAY,EAAE;UAAE,CAAE;UAAArB,QAAA,EAAC;QAAc;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eAC3FjG,OAAA;UAAKI,KAAK,EAAE;YAAEoG,QAAQ,EAAE,EAAE;YAAEF,KAAK,EAAE;UAAO,CAAE;UAAAf,QAAA,EAAE1E;QAAQ;UAAAiF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,EAC5DpF,QAAQ,IAAIA,QAAQ,CAACwB,QAAQ,CAAC,MAAM,CAAC,iBAClCrC,OAAA;UAAKI,KAAK,EAAE;YAAEoG,QAAQ,EAAE,EAAE;YAAEK,SAAS,EAAE,EAAE;YAAEC,SAAS,EAAE,QAAQ;YAAER,KAAK,EAAE;UAAO,CAAE;UAAAf,QAAA,EAAC;QAEjF;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CACR;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CACR;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CACR;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd;AAACzF,EAAA,CAzKQP,SAAS;AAAA8G,EAAA,GAAT9G,SAAS;AA2KlB,eAAA+G,GAAA,gBAAerH,KAAK,CAACsH,IAAI,CAAChH,SAAS,CAAC;AAAC,IAAA8G,EAAA,EAAAC,GAAA;AAAAE,YAAA,CAAAH,EAAA;AAAAG,YAAA,CAAAF,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}