{"ast":null,"code":"var _jsxFileName = \"I:\\\\dispecerat\\\\github_release\\\\dss-edge\\\\local-ui\\\\src\\\\pages\\\\PlaybackModern.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef, useLayoutEffect } from \"react\";\nimport { useSearchParams, useNavigate } from \"react-router-dom\";\nimport API from \"../api\";\nimport PlaybackController, { PlayerStates } from \"../services/PlaybackController\";\nimport { ArrowLeft, Play, Pause, ChevronLeft, ChevronRight, ZoomIn, ZoomOut, Calendar, Monitor, Maximize } from \"../components/Icons\";\n\n// --- AZIGUARD THEME REPLICA ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst THEME = {\n  bg: \"#f0f2f5\",\n  // Light grey background\n  header: \"#ffffff\",\n  headerBorder: \"#e1e4e8\",\n  accent: \"#0056b3\",\n  // Professional Blue\n  accentHover: \"#004494\",\n  text: \"#333333\",\n  textLight: \"#666666\",\n  timelineTrack: \"#ffffff\",\n  timelineRuler: \"#e0e0e0\",\n  segment: \"#d32f2f\",\n  // Red recording blocks\n  segmentBorder: \"#b71c1c\",\n  playhead: \"#2196f3\",\n  // Blue playhead\n  panelBorder: \"#dce1e6\"\n};\nexport default function PlaybackModern() {\n  _s();\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const camId = searchParams.get(\"camId\");\n\n  // --- STATE ---\n  const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);\n  const [playerState, setPlayerState] = useState(PlayerStates.IDLE);\n  const [serverTimezone, setServerTimezone] = useState(null);\n\n  // Timeline State\n  const [currentTimeMs, setCurrentTimeMs] = useState(Date.now());\n  const [viewStartMs, setViewStartMs] = useState(new Date().setHours(0, 0, 0, 0));\n  const [zoomPxPerSec, setZoomPxPerSec] = useState(0.01);\n  const [containerWidth, setContainerWidth] = useState(1000);\n  const [segments, setSegments] = useState([]);\n  const [isLoadingData, setIsLoadingData] = useState(false);\n  const videoRef = useRef(null);\n  const playerRef = useRef(null);\n  const timelineRef = useRef(null);\n  const dragRef = useRef({\n    isDragging: false,\n    startX: 0,\n    startViewTime: 0\n  });\n\n  // --- DATA LOADING & SETUP ---\n  useEffect(() => {\n    API.get('/system/time').then(res => {\n      var _res$data, _res$data$raw;\n      if ((_res$data = res.data) !== null && _res$data !== void 0 && (_res$data$raw = _res$data.raw) !== null && _res$data$raw !== void 0 && _res$data$raw['Time zone']) setServerTimezone(res.data.raw['Time zone'].split(' ')[0]);\n    }).catch(() => {});\n  }, []);\n  useEffect(() => {\n    if (selectedDate) setViewStartMs(new Date(selectedDate).setHours(0, 0, 0, 0));\n  }, [selectedDate]);\n\n  // --- CONTROLLER INIT ---\n  useEffect(() => {\n    if (videoRef.current && camId) {\n      playerRef.current = new PlaybackController(videoRef.current, camId, s => setPlayerState(s));\n      return () => {\n        var _playerRef$current;\n        return (_playerRef$current = playerRef.current) === null || _playerRef$current === void 0 ? void 0 : _playerRef$current.destroy();\n      };\n    }\n  }, [camId]);\n\n  // --- RESIZE HANDLER ---\n  useLayoutEffect(() => {\n    const updateWidth = () => {\n      if (timelineRef.current) setContainerWidth(timelineRef.current.clientWidth);\n    };\n    window.addEventListener('resize', updateWidth);\n    updateWidth();\n    return () => window.removeEventListener('resize', updateWidth);\n  }, []);\n\n  // --- LOAD SEGMENTS ---\n  useEffect(() => {\n    if (!camId || !selectedDate) return;\n    const fetchData = async () => {\n      setIsLoadingData(true);\n      try {\n        const res = await API.get(`/api/playback/timeline-day/${camId}/${selectedDate}`);\n        const data = res.data;\n        const segs = (data.segments || []).map(s => ({\n          start: Number(s.start_ts || s.startTs),\n          end: Number(s.end_ts || s.endTs),\n          file: s.file\n        })).sort((a, b) => a.start - b.start);\n        setSegments(segs);\n        if (playerRef.current) playerRef.current.loadSegments(segs);\n\n        // Fit Day\n        if (containerWidth > 0) {\n          setViewStartMs(new Date(selectedDate).setHours(0, 0, 0, 0));\n          setZoomPxPerSec(containerWidth / 86400);\n        }\n      } catch (e) {\n        console.error(e);\n      } finally {\n        setIsLoadingData(false);\n      }\n    };\n    fetchData();\n  }, [camId, selectedDate]);\n\n  // --- SYNC LOOP ---\n  useEffect(() => {\n    const i = setInterval(() => {\n      if (playerState === PlayerStates.PLAYING && playerRef.current) {\n        const now = playerRef.current.getCurrentTime();\n        if (Math.abs(now - currentTimeMs) > 200) setCurrentTimeMs(now);\n      }\n    }, 100);\n    return () => clearInterval(i);\n  }, [playerState, currentTimeMs]);\n\n  // --- ACTIONS ---\n  const fitDay = () => {\n    setViewStartMs(new Date(selectedDate).setHours(0, 0, 0, 0));\n    setZoomPxPerSec(containerWidth / 86400);\n  };\n  const zoomIn = () => {\n    const newZoom = Math.min(200, zoomPxPerSec * 2);\n    const center = viewStartMs + containerWidth / 2 / zoomPxPerSec * 1000;\n    setZoomPxPerSec(newZoom);\n    setViewStartMs(center - containerWidth / 2 / newZoom * 1000);\n  };\n  const zoomOut = () => {\n    const newZoom = Math.max(containerWidth / 86400, zoomPxPerSec / 2);\n    const center = viewStartMs + containerWidth / 2 / zoomPxPerSec * 1000;\n    setZoomPxPerSec(newZoom);\n    setViewStartMs(center - containerWidth / 2 / newZoom * 1000);\n  };\n  const performSeek = ts => {\n    var _playerRef$current2;\n    setCurrentTimeMs(ts);\n    (_playerRef$current2 = playerRef.current) === null || _playerRef$current2 === void 0 ? void 0 : _playerRef$current2.seekTo(ts);\n  };\n\n  // --- EVENTS ---\n  const handleMouseDown = e => {\n    dragRef.current = {\n      isDragging: true,\n      startX: e.clientX,\n      startView: viewStartMs\n    };\n    document.body.style.cursor = 'grabbing';\n  };\n  const handleMouseMove = e => {\n    if (!dragRef.current.isDragging) return;\n    const dt = (dragRef.current.startX - e.clientX) / zoomPxPerSec * 1000;\n    setViewStartMs(dragRef.current.startView + dt);\n  };\n  const handleMouseUp = e => {\n    if (dragRef.current.isDragging) {\n      dragRef.current.isDragging = false;\n      document.body.style.cursor = 'default';\n      if (Math.abs(e.clientX - dragRef.current.startX) < 5) {\n        const rect = timelineRef.current.getBoundingClientRect();\n        const ts = viewStartMs + (e.clientX - rect.left) / zoomPxPerSec * 1000;\n        performSeek(ts);\n      }\n    }\n  };\n  const handleWheel = e => {\n    if (e.target.closest('.timeline-area')) {\n      e.preventDefault();\n      const rect = timelineRef.current.getBoundingClientRect();\n      const mouseX = e.clientX - rect.left;\n      const mouseTime = viewStartMs + mouseX / zoomPxPerSec * 1000;\n      const factor = e.deltaY > 0 ? 0.9 : 1.1;\n      const newZoom = Math.max(containerWidth / 86400, Math.min(200, zoomPxPerSec * factor));\n      setZoomPxPerSec(newZoom);\n      setViewStartMs(mouseTime - mouseX / newZoom * 1000);\n    }\n  };\n\n  // --- RENDER HELPERS ---\n  const timeToPx = t => (t - viewStartMs) / 1000 * zoomPxPerSec;\n  const renderTicks = () => {\n    const ticks = [];\n    const pxPerMin = zoomPxPerSec * 60;\n    let stepMin = 60 * 24;\n    if (pxPerMin > 1000) stepMin = 1;else if (pxPerMin > 200) stepMin = 5;else if (pxPerMin > 50) stepMin = 15;else if (pxPerMin > 10) stepMin = 60;else stepMin = 240;\n    const stepMs = stepMin * 60 * 1000;\n    if (stepMs <= 0) return [];\n    const start = Math.floor(viewStartMs / stepMs) * stepMs;\n    const end = viewStartMs + containerWidth / zoomPxPerSec * 1000;\n    for (let t = start; t < end; t += stepMs) {\n      const x = timeToPx(t);\n      const date = new Date(t);\n      const isHour = date.getMinutes() === 0;\n      ticks.push(/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          left: x,\n          height: '100%',\n          borderLeft: `1px solid ${isHour ? '#999' : '#ddd'}`,\n          pointerEvents: 'none'\n        },\n        children: isHour && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: 4,\n            left: 4,\n            fontSize: 11,\n            fontWeight: 600,\n            color: '#333'\n          },\n          children: date.toLocaleTimeString([], {\n            hour: '2-digit',\n            minute: '2-digit'\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 32\n        }, this)\n      }, t, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }, this));\n    }\n    return ticks;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100vh',\n      background: THEME.bg,\n      color: THEME.text,\n      fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      style: {\n        height: 48,\n        background: '#fff',\n        borderBottom: `1px solid ${THEME.panelBorder}`,\n        display: 'flex',\n        alignItems: 'center',\n        padding: '0 8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontWeight: 800,\n          fontSize: 18,\n          color: '#0277bd',\n          marginRight: 20\n        },\n        children: \"AZIGUARD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 4\n        },\n        children: ['Live', 'Playback', 'Settings', 'AI Events'].map(tab => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '6px 12px',\n            borderRadius: 4,\n            cursor: 'pointer',\n            fontSize: 13,\n            fontWeight: 500,\n            background: tab === 'Playback' ? '#e3f2fd' : 'transparent',\n            color: tab === 'Playback' ? '#0277bd' : '#666'\n          },\n          onClick: () => tab === 'Live' && navigate('/'),\n          children: tab\n        }, tab, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 10,\n          fontSize: 13,\n          color: '#555'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: serverTimezone\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: selectedDate,\n          onChange: e => setSelectedDate(e.target.value),\n          style: {\n            border: `1px solid ${THEME.panelBorder}`,\n            padding: '4px 8px',\n            borderRadius: 4,\n            color: '#333'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: 32,\n        background: '#f8f9fa',\n        borderBottom: `1px solid ${THEME.panelBorder}`,\n        display: 'flex',\n        alignItems: 'center',\n        padding: '0 8px',\n        overflowX: 'auto'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 12,\n          fontWeight: 600,\n          color: '#444',\n          marginRight: 10\n        },\n        children: \"CAMERAS:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '2px 8px',\n          background: '#fff',\n          border: '1px solid #ccc',\n          borderRadius: 3,\n          fontSize: 11,\n          color: '#333'\n        },\n        children: camId || 'Standard Camera'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        background: '#e0e0e0',\n        position: 'relative',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          maxWidth: '95%',\n          maxHeight: '95%',\n          width: '100%',\n          height: '100%',\n          display: 'flex',\n          justifyContent: 'center',\n          boxShadow: '0 4px 12px rgba(0,0,0,0.1)'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"video\", {\n          ref: videoRef,\n          style: {\n            width: '100%',\n            height: '100%',\n            background: '#000'\n          },\n          onClick: () => {\n            var _playerRef$current3;\n            return (_playerRef$current3 = playerRef.current) === null || _playerRef$current3 === void 0 ? void 0 : _playerRef$current3.play();\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 17\n      }, this), isLoadingData && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: overlayStyle,\n        children: \"Loading Timeline...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 35\n      }, this), playerState === PlayerStates.BUFFERING && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: overlayStyle,\n        children: \"Buffering...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 60\n      }, this), !isLoadingData && segments.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...overlayStyle,\n          top: '40%'\n        },\n        children: \"No Recordings Found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 61\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#fff',\n        borderTop: `1px solid ${THEME.panelBorder}`,\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: 40,\n          borderBottom: `1px solid ${THEME.panelBorder}`,\n          display: 'flex',\n          alignItems: 'center',\n          padding: '0 16px',\n          gap: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            var _playerRef$current4;\n            return (_playerRef$current4 = playerRef.current) === null || _playerRef$current4 === void 0 ? void 0 : _playerRef$current4.seekTo(currentTimeMs - 10000);\n          },\n          style: ctrlBtn,\n          children: \"\\u23EA 10s\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            var _playerRef$current5, _playerRef$current6;\n            return playerState === PlayerStates.PLAYING ? (_playerRef$current5 = playerRef.current) === null || _playerRef$current5 === void 0 ? void 0 : _playerRef$current5.pause() : (_playerRef$current6 = playerRef.current) === null || _playerRef$current6 === void 0 ? void 0 : _playerRef$current6.play();\n          },\n          style: {\n            ...ctrlBtn,\n            color: THEME.accent,\n            fontWeight: 'bold'\n          },\n          children: playerState === PlayerStates.PLAYING ? \"PAUSE\" : \"PLAY\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            var _playerRef$current7;\n            return (_playerRef$current7 = playerRef.current) === null || _playerRef$current7 === void 0 ? void 0 : _playerRef$current7.seekTo(currentTimeMs + 10000);\n          },\n          style: ctrlBtn,\n          children: \"10s \\u23E9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: 1,\n            height: 20,\n            background: '#ddd'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: zoomOut,\n          style: ctrlBtn,\n          children: \"-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: fitDay,\n          style: ctrlBtn,\n          children: \"FIT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: zoomIn,\n          style: ctrlBtn,\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontFamily: 'monospace',\n            fontSize: 16,\n            fontWeight: 600,\n            color: '#333'\n          },\n          children: new Date(currentTimeMs).toLocaleTimeString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timeline-area\",\n        ref: timelineRef,\n        style: {\n          height: 80,\n          background: THEME.timelineTrack,\n          position: 'relative',\n          overflow: 'hidden',\n          cursor: dragRef.current.isDragging ? 'grabbing' : 'grab'\n        },\n        onMouseUp: handleMouseUp,\n        onMouseLeave: handleMouseUp,\n        onMouseMove: handleMouseMove,\n        onMouseDown: handleMouseDown,\n        onWheel: handleWheel,\n        children: [renderTicks(), segments.map((s, i) => {\n          const x = timeToPx(s.start);\n          const w = Math.max(1, (s.end - s.start) / 1000 * zoomPxPerSec);\n          if (x + w < 0 || x > containerWidth) return null;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              left: x,\n              width: w,\n              top: 40,\n              height: 20,\n              background: THEME.segment,\n              borderRadius: 1\n            }\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 29\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            left: timeToPx(currentTimeMs),\n            top: 0,\n            bottom: 0,\n            width: 2,\n            background: THEME.playhead,\n            zIndex: 10,\n            pointerEvents: 'none'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              top: 0,\n              left: -6,\n              borderLeft: '7px solid transparent',\n              borderRight: '7px solid transparent',\n              borderTop: `8px solid ${THEME.playhead}`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 9\n  }, this);\n}\n_s(PlaybackModern, \"EteuDmnKWXEany4RzwYhD6QTRKo=\", false, function () {\n  return [useSearchParams, useNavigate];\n});\n_c = PlaybackModern;\nconst ctrlBtn = {\n  border: '1px solid #ddd',\n  background: '#f9f9f9',\n  borderRadius: 4,\n  padding: '4px 12px',\n  cursor: 'pointer',\n  color: '#444',\n  fontSize: 12,\n  fontWeight: 500\n};\nconst overlayStyle = {\n  position: 'absolute',\n  background: 'rgba(255,255,255,0.9)',\n  color: '#333',\n  padding: '10px 20px',\n  borderRadius: 8,\n  fontSize: 14,\n  fontWeight: 'bold',\n  boxShadow: '0 2px 10px rgba(0,0,0,0.2)'\n};\nvar _c;\n$RefreshReg$(_c, \"PlaybackModern\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useLayoutEffect","useSearchParams","useNavigate","API","PlaybackController","PlayerStates","ArrowLeft","Play","Pause","ChevronLeft","ChevronRight","ZoomIn","ZoomOut","Calendar","Monitor","Maximize","jsxDEV","_jsxDEV","THEME","bg","header","headerBorder","accent","accentHover","text","textLight","timelineTrack","timelineRuler","segment","segmentBorder","playhead","panelBorder","PlaybackModern","_s","searchParams","navigate","camId","get","selectedDate","setSelectedDate","Date","toISOString","split","playerState","setPlayerState","IDLE","serverTimezone","setServerTimezone","currentTimeMs","setCurrentTimeMs","now","viewStartMs","setViewStartMs","setHours","zoomPxPerSec","setZoomPxPerSec","containerWidth","setContainerWidth","segments","setSegments","isLoadingData","setIsLoadingData","videoRef","playerRef","timelineRef","dragRef","isDragging","startX","startViewTime","then","res","_res$data","_res$data$raw","data","raw","catch","current","s","_playerRef$current","destroy","updateWidth","clientWidth","window","addEventListener","removeEventListener","fetchData","segs","map","start","Number","start_ts","startTs","end","end_ts","endTs","file","sort","a","b","loadSegments","e","console","error","i","setInterval","PLAYING","getCurrentTime","Math","abs","clearInterval","fitDay","zoomIn","newZoom","min","center","zoomOut","max","performSeek","ts","_playerRef$current2","seekTo","handleMouseDown","clientX","startView","document","body","style","cursor","handleMouseMove","dt","handleMouseUp","rect","getBoundingClientRect","left","handleWheel","target","closest","preventDefault","mouseX","mouseTime","factor","deltaY","timeToPx","t","renderTicks","ticks","pxPerMin","stepMin","stepMs","floor","x","date","isHour","getMinutes","push","position","height","borderLeft","pointerEvents","children","top","fontSize","fontWeight","color","toLocaleTimeString","hour","minute","fileName","_jsxFileName","lineNumber","columnNumber","display","flexDirection","background","fontFamily","borderBottom","alignItems","padding","marginRight","gap","tab","borderRadius","onClick","flex","type","value","onChange","border","overflowX","justifyContent","maxWidth","maxHeight","width","boxShadow","ref","_playerRef$current3","play","overlayStyle","BUFFERING","length","borderTop","_playerRef$current4","ctrlBtn","_playerRef$current5","_playerRef$current6","pause","_playerRef$current7","className","overflow","onMouseUp","onMouseLeave","onMouseMove","onMouseDown","onWheel","w","bottom","zIndex","borderRight","_c","$RefreshReg$"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/pages/PlaybackModern.js"],"sourcesContent":["import React, { useEffect, useState, useRef, useLayoutEffect } from \"react\";\r\nimport { useSearchParams, useNavigate } from \"react-router-dom\";\r\nimport API from \"../api\";\r\nimport PlaybackController, { PlayerStates } from \"../services/PlaybackController\";\r\nimport { ArrowLeft, Play, Pause, ChevronLeft, ChevronRight, ZoomIn, ZoomOut, Calendar, Monitor, Maximize } from \"../components/Icons\";\r\n\r\n// --- AZIGUARD THEME REPLICA ---\r\nconst THEME = {\r\n    bg: \"#f0f2f5\", // Light grey background\r\n    header: \"#ffffff\",\r\n    headerBorder: \"#e1e4e8\",\r\n    accent: \"#0056b3\", // Professional Blue\r\n    accentHover: \"#004494\",\r\n    text: \"#333333\",\r\n    textLight: \"#666666\",\r\n    timelineTrack: \"#ffffff\",\r\n    timelineRuler: \"#e0e0e0\",\r\n    segment: \"#d32f2f\", // Red recording blocks\r\n    segmentBorder: \"#b71c1c\",\r\n    playhead: \"#2196f3\", // Blue playhead\r\n    panelBorder: \"#dce1e6\"\r\n};\r\n\r\nexport default function PlaybackModern() {\r\n    const [searchParams] = useSearchParams();\r\n    const navigate = useNavigate();\r\n    const camId = searchParams.get(\"camId\");\r\n\r\n    // --- STATE ---\r\n    const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);\r\n    const [playerState, setPlayerState] = useState(PlayerStates.IDLE);\r\n    const [serverTimezone, setServerTimezone] = useState(null);\r\n\r\n    // Timeline State\r\n    const [currentTimeMs, setCurrentTimeMs] = useState(Date.now());\r\n    const [viewStartMs, setViewStartMs] = useState(new Date().setHours(0, 0, 0, 0));\r\n    const [zoomPxPerSec, setZoomPxPerSec] = useState(0.01);\r\n    const [containerWidth, setContainerWidth] = useState(1000);\r\n    const [segments, setSegments] = useState([]);\r\n    const [isLoadingData, setIsLoadingData] = useState(false);\r\n\r\n    const videoRef = useRef(null);\r\n    const playerRef = useRef(null);\r\n    const timelineRef = useRef(null);\r\n    const dragRef = useRef({ isDragging: false, startX: 0, startViewTime: 0 });\r\n\r\n    // --- DATA LOADING & SETUP ---\r\n    useEffect(() => {\r\n        API.get('/system/time').then(res => {\r\n            if (res.data?.raw?.['Time zone']) setServerTimezone(res.data.raw['Time zone'].split(' ')[0]);\r\n        }).catch(() => { });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (selectedDate) setViewStartMs(new Date(selectedDate).setHours(0, 0, 0, 0));\r\n    }, [selectedDate]);\r\n\r\n    // --- CONTROLLER INIT ---\r\n    useEffect(() => {\r\n        if (videoRef.current && camId) {\r\n            playerRef.current = new PlaybackController(videoRef.current, camId, (s) => setPlayerState(s));\r\n            return () => playerRef.current?.destroy();\r\n        }\r\n    }, [camId]);\r\n\r\n    // --- RESIZE HANDLER ---\r\n    useLayoutEffect(() => {\r\n        const updateWidth = () => { if (timelineRef.current) setContainerWidth(timelineRef.current.clientWidth); };\r\n        window.addEventListener('resize', updateWidth);\r\n        updateWidth();\r\n        return () => window.removeEventListener('resize', updateWidth);\r\n    }, []);\r\n\r\n    // --- LOAD SEGMENTS ---\r\n    useEffect(() => {\r\n        if (!camId || !selectedDate) return;\r\n        const fetchData = async () => {\r\n            setIsLoadingData(true);\r\n            try {\r\n                const res = await API.get(`/api/playback/timeline-day/${camId}/${selectedDate}`);\r\n                const data = res.data;\r\n                const segs = (data.segments || []).map(s => ({\r\n                    start: Number(s.start_ts || s.startTs),\r\n                    end: Number(s.end_ts || s.endTs),\r\n                    file: s.file\r\n                })).sort((a, b) => a.start - b.start);\r\n                setSegments(segs);\r\n                if (playerRef.current) playerRef.current.loadSegments(segs);\r\n\r\n                // Fit Day\r\n                if (containerWidth > 0) {\r\n                    setViewStartMs(new Date(selectedDate).setHours(0, 0, 0, 0));\r\n                    setZoomPxPerSec(containerWidth / 86400);\r\n                }\r\n            } catch (e) { console.error(e); } finally { setIsLoadingData(false); }\r\n        };\r\n        fetchData();\r\n    }, [camId, selectedDate]);\r\n\r\n    // --- SYNC LOOP ---\r\n    useEffect(() => {\r\n        const i = setInterval(() => {\r\n            if (playerState === PlayerStates.PLAYING && playerRef.current) {\r\n                const now = playerRef.current.getCurrentTime();\r\n                if (Math.abs(now - currentTimeMs) > 200) setCurrentTimeMs(now);\r\n            }\r\n        }, 100);\r\n        return () => clearInterval(i);\r\n    }, [playerState, currentTimeMs]);\r\n\r\n    // --- ACTIONS ---\r\n    const fitDay = () => {\r\n        setViewStartMs(new Date(selectedDate).setHours(0, 0, 0, 0));\r\n        setZoomPxPerSec(containerWidth / 86400);\r\n    };\r\n    const zoomIn = () => {\r\n        const newZoom = Math.min(200, zoomPxPerSec * 2);\r\n        const center = viewStartMs + ((containerWidth / 2) / zoomPxPerSec) * 1000;\r\n        setZoomPxPerSec(newZoom);\r\n        setViewStartMs(center - ((containerWidth / 2) / newZoom) * 1000);\r\n    };\r\n    const zoomOut = () => {\r\n        const newZoom = Math.max(containerWidth / 86400, zoomPxPerSec / 2);\r\n        const center = viewStartMs + ((containerWidth / 2) / zoomPxPerSec) * 1000;\r\n        setZoomPxPerSec(newZoom);\r\n        setViewStartMs(center - ((containerWidth / 2) / newZoom) * 1000);\r\n    };\r\n    const performSeek = (ts) => {\r\n        setCurrentTimeMs(ts);\r\n        playerRef.current?.seekTo(ts);\r\n    };\r\n\r\n    // --- EVENTS ---\r\n    const handleMouseDown = (e) => {\r\n        dragRef.current = { isDragging: true, startX: e.clientX, startView: viewStartMs };\r\n        document.body.style.cursor = 'grabbing';\r\n    };\r\n    const handleMouseMove = (e) => {\r\n        if (!dragRef.current.isDragging) return;\r\n        const dt = ((dragRef.current.startX - e.clientX) / zoomPxPerSec) * 1000;\r\n        setViewStartMs(dragRef.current.startView + dt);\r\n    };\r\n    const handleMouseUp = (e) => {\r\n        if (dragRef.current.isDragging) {\r\n            dragRef.current.isDragging = false;\r\n            document.body.style.cursor = 'default';\r\n            if (Math.abs(e.clientX - dragRef.current.startX) < 5) {\r\n                const rect = timelineRef.current.getBoundingClientRect();\r\n                const ts = viewStartMs + ((e.clientX - rect.left) / zoomPxPerSec) * 1000;\r\n                performSeek(ts);\r\n            }\r\n        }\r\n    };\r\n    const handleWheel = (e) => {\r\n        if (e.target.closest('.timeline-area')) {\r\n            e.preventDefault();\r\n            const rect = timelineRef.current.getBoundingClientRect();\r\n            const mouseX = e.clientX - rect.left;\r\n            const mouseTime = viewStartMs + (mouseX / zoomPxPerSec) * 1000;\r\n            const factor = e.deltaY > 0 ? 0.9 : 1.1;\r\n            const newZoom = Math.max(containerWidth / 86400, Math.min(200, zoomPxPerSec * factor));\r\n            setZoomPxPerSec(newZoom);\r\n            setViewStartMs(mouseTime - (mouseX / newZoom) * 1000);\r\n        }\r\n    };\r\n\r\n    // --- RENDER HELPERS ---\r\n    const timeToPx = (t) => (t - viewStartMs) / 1000 * zoomPxPerSec;\r\n\r\n    const renderTicks = () => {\r\n        const ticks = [];\r\n        const pxPerMin = zoomPxPerSec * 60;\r\n        let stepMin = 60 * 24;\r\n        if (pxPerMin > 1000) stepMin = 1; else if (pxPerMin > 200) stepMin = 5; else if (pxPerMin > 50) stepMin = 15; else if (pxPerMin > 10) stepMin = 60; else stepMin = 240;\r\n\r\n        const stepMs = stepMin * 60 * 1000;\r\n        if (stepMs <= 0) return [];\r\n        const start = Math.floor(viewStartMs / stepMs) * stepMs;\r\n        const end = viewStartMs + (containerWidth / zoomPxPerSec * 1000);\r\n\r\n        for (let t = start; t < end; t += stepMs) {\r\n            const x = timeToPx(t);\r\n            const date = new Date(t);\r\n            const isHour = date.getMinutes() === 0;\r\n            ticks.push(\r\n                <div key={t} style={{ position: 'absolute', left: x, height: '100%', borderLeft: `1px solid ${isHour ? '#999' : '#ddd'}`, pointerEvents: 'none' }}>\r\n                    {isHour && <div style={{ position: 'absolute', top: 4, left: 4, fontSize: 11, fontWeight: 600, color: '#333' }}>\r\n                        {date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                    </div>}\r\n                </div>\r\n            );\r\n        }\r\n        return ticks;\r\n    };\r\n\r\n    return (\r\n        <div style={{ display: 'flex', flexDirection: 'column', height: '100vh', background: THEME.bg, color: THEME.text, fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif' }}>\r\n\r\n            {/* 1. TOP NAVIGATION BAR */}\r\n            <header style={{ height: 48, background: '#fff', borderBottom: `1px solid ${THEME.panelBorder}`, display: 'flex', alignItems: 'center', padding: '0 8px' }}>\r\n                <div style={{ fontWeight: 800, fontSize: 18, color: '#0277bd', marginRight: 20 }}>AZIGUARD</div>\r\n\r\n                <div style={{ display: 'flex', gap: 4 }}>\r\n                    {['Live', 'Playback', 'Settings', 'AI Events'].map(tab => (\r\n                        <div key={tab} style={{\r\n                            padding: '6px 12px',\r\n                            borderRadius: 4,\r\n                            cursor: 'pointer',\r\n                            fontSize: 13,\r\n                            fontWeight: 500,\r\n                            background: tab === 'Playback' ? '#e3f2fd' : 'transparent',\r\n                            color: tab === 'Playback' ? '#0277bd' : '#666'\r\n                        }} onClick={() => tab === 'Live' && navigate('/')}>\r\n                            {tab}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                <div style={{ flex: 1 }} />\r\n\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 10, fontSize: 13, color: '#555' }}>\r\n                    <span>{serverTimezone}</span>\r\n                    <input type=\"date\" value={selectedDate} onChange={e => setSelectedDate(e.target.value)}\r\n                        style={{ border: `1px solid ${THEME.panelBorder}`, padding: '4px 8px', borderRadius: 4, color: '#333' }} />\r\n                </div>\r\n            </header>\r\n\r\n            {/* 2. SUB-BAR (Cameras) */}\r\n            <div style={{ height: 32, background: '#f8f9fa', borderBottom: `1px solid ${THEME.panelBorder}`, display: 'flex', alignItems: 'center', padding: '0 8px', overflowX: 'auto' }}>\r\n                <div style={{ fontSize: 12, fontWeight: 600, color: '#444', marginRight: 10 }}>CAMERAS:</div>\r\n                <div style={{ padding: '2px 8px', background: '#fff', border: '1px solid #ccc', borderRadius: 3, fontSize: 11, color: '#333' }}>{camId || 'Standard Camera'}</div>\r\n            </div>\r\n\r\n            {/* 3. MAIN VIDEO AREA */}\r\n            <div style={{ flex: 1, background: '#e0e0e0', position: 'relative', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                <div style={{ maxWidth: '95%', maxHeight: '95%', width: '100%', height: '100%', display: 'flex', justifyContent: 'center', boxShadow: '0 4px 12px rgba(0,0,0,0.1)' }}>\r\n                    <video ref={videoRef} style={{ width: '100%', height: '100%', background: '#000' }} onClick={() => playerRef.current?.play()} />\r\n                </div>\r\n\r\n                {isLoadingData && <div style={overlayStyle}>Loading Timeline...</div>}\r\n                {playerState === PlayerStates.BUFFERING && <div style={overlayStyle}>Buffering...</div>}\r\n                {!isLoadingData && segments.length === 0 && <div style={{ ...overlayStyle, top: '40%' }}>No Recordings Found</div>}\r\n            </div>\r\n\r\n            {/* 4. FOOTER CONTROLS & TIMELINE */}\r\n            <div style={{ background: '#fff', borderTop: `1px solid ${THEME.panelBorder}`, display: 'flex', flexDirection: 'column' }}>\r\n\r\n                {/* TOOLBAR */}\r\n                <div style={{ height: 40, borderBottom: `1px solid ${THEME.panelBorder}`, display: 'flex', alignItems: 'center', padding: '0 16px', gap: 16 }}>\r\n                    <button onClick={() => playerRef.current?.seekTo(currentTimeMs - 10000)} style={ctrlBtn}>⏪ 10s</button>\r\n                    <button onClick={() => playerState === PlayerStates.PLAYING ? playerRef.current?.pause() : playerRef.current?.play()}\r\n                        style={{ ...ctrlBtn, color: THEME.accent, fontWeight: 'bold' }}>\r\n                        {playerState === PlayerStates.PLAYING ? \"PAUSE\" : \"PLAY\"}\r\n                    </button>\r\n                    <button onClick={() => playerRef.current?.seekTo(currentTimeMs + 10000)} style={ctrlBtn}>10s ⏩</button>\r\n\r\n                    <div style={{ width: 1, height: 20, background: '#ddd' }} />\r\n\r\n                    <button onClick={zoomOut} style={ctrlBtn}>-</button>\r\n                    <button onClick={fitDay} style={ctrlBtn}>FIT</button>\r\n                    <button onClick={zoomIn} style={ctrlBtn}>+</button>\r\n\r\n                    <div style={{ flex: 1 }} />\r\n                    <div style={{ fontFamily: 'monospace', fontSize: 16, fontWeight: 600, color: '#333' }}>\r\n                        {new Date(currentTimeMs).toLocaleTimeString()}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* TIMELINE TRACK */}\r\n                <div className=\"timeline-area\"\r\n                    ref={timelineRef}\r\n                    style={{ height: 80, background: THEME.timelineTrack, position: 'relative', overflow: 'hidden', cursor: dragRef.current.isDragging ? 'grabbing' : 'grab' }}\r\n                    onMouseUp={handleMouseUp} onMouseLeave={handleMouseUp} onMouseMove={handleMouseMove} onMouseDown={handleMouseDown} onWheel={handleWheel}\r\n                >\r\n                    {renderTicks()}\r\n                    {segments.map((s, i) => {\r\n                        const x = timeToPx(s.start);\r\n                        const w = Math.max(1, (s.end - s.start) / 1000 * zoomPxPerSec);\r\n                        if (x + w < 0 || x > containerWidth) return null;\r\n                        return (\r\n                            <div key={i} style={{\r\n                                position: 'absolute', left: x, width: w, top: 40, height: 20,\r\n                                background: THEME.segment, borderRadius: 1\r\n                            }} />\r\n                        );\r\n                    })}\r\n\r\n                    {/* PLAYHEAD */}\r\n                    <div style={{ position: 'absolute', left: timeToPx(currentTimeMs), top: 0, bottom: 0, width: 2, background: THEME.playhead, zIndex: 10, pointerEvents: 'none' }}>\r\n                        <div style={{ position: 'absolute', top: 0, left: -6, borderLeft: '7px solid transparent', borderRight: '7px solid transparent', borderTop: `8px solid ${THEME.playhead}` }} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst ctrlBtn = { border: '1px solid #ddd', background: '#f9f9f9', borderRadius: 4, padding: '4px 12px', cursor: 'pointer', color: '#444', fontSize: 12, fontWeight: 500 };\r\nconst overlayStyle = { position: 'absolute', background: 'rgba(255,255,255,0.9)', color: '#333', padding: '10px 20px', borderRadius: 8, fontSize: 14, fontWeight: 'bold', boxShadow: '0 2px 10px rgba(0,0,0,0.2)' };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}