{"ast":null,"code":"/* Standard DSS Time Utilities using Luxon */\nimport { DateTime } from 'luxon';\n\n/**\r\n * Returns the UTC Timestamp (ms) for a given Date (\"YYYY-MM-DD\") and Time (\"HH:MM\")\r\n * in the NVR's Timezone.\r\n * Usage: UI Click -> Backend Request.\r\n * timeStr format: \"HH:mm\" or \"HH:mm:ss\"\r\n */\nexport function localToUtcTs(dateStr, timeStr, timezone) {\n  if (!timezone) {\n    // Fallback safely if TZ not loaded yet\n    return DateTime.fromISO(`${dateStr}T${timeStr}`).toMillis();\n  }\n  return DateTime.fromISO(`${dateStr}T${timeStr}`, {\n    zone: timezone\n  }).toMillis();\n}\n\n/**\r\n * Returns the Epoch (ms) corresponding to 00:00:00 in the Target Timezone.\r\n * Usage: Setting the Timeline anchor (x=0).\r\n */\nexport function getLocalDayStart(dateStr, timezone) {\n  if (!timezone) return DateTime.fromISO(dateStr).startOf('day').toMillis();\n  return DateTime.fromISO(dateStr, {\n    zone: timezone\n  }).startOf('day').toMillis();\n}\n\n/**\r\n * Formats a UTC Timestamp into \"HH:mm:ss\" in the Target Timezone.\r\n * Usage: Displaying Playhead time, Debug info.\r\n */\nexport function formatLocalTime(ts, timezone) {\n  if (!ts) return \"--:--:--\";\n  const opts = timezone ? {\n    zone: timezone\n  } : {};\n  return DateTime.fromMillis(ts, opts).toFormat('HH:mm:ss');\n}\n\n/**\r\n * Formats a UTC Timestamp into \"yyyy-MM-dd\" in the Target Timezone.\r\n */\nexport function formatLocalDate(ts, timezone) {\n  if (!ts) return \"\";\n  const opts = timezone ? {\n    zone: timezone\n  } : {};\n  return DateTime.fromMillis(ts, opts).toFormat('yyyy-MM-dd');\n}","map":{"version":3,"names":["DateTime","localToUtcTs","dateStr","timeStr","timezone","fromISO","toMillis","zone","getLocalDayStart","startOf","formatLocalTime","ts","opts","fromMillis","toFormat","formatLocalDate"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/utils/time.js"],"sourcesContent":["/* Standard DSS Time Utilities using Luxon */\r\nimport { DateTime } from 'luxon';\r\n\r\n/**\r\n * Returns the UTC Timestamp (ms) for a given Date (\"YYYY-MM-DD\") and Time (\"HH:MM\")\r\n * in the NVR's Timezone.\r\n * Usage: UI Click -> Backend Request.\r\n * timeStr format: \"HH:mm\" or \"HH:mm:ss\"\r\n */\r\nexport function localToUtcTs(dateStr, timeStr, timezone) {\r\n    if (!timezone) {\r\n        // Fallback safely if TZ not loaded yet\r\n        return DateTime.fromISO(`${dateStr}T${timeStr}`).toMillis();\r\n    }\r\n    return DateTime.fromISO(`${dateStr}T${timeStr}`, { zone: timezone }).toMillis();\r\n}\r\n\r\n/**\r\n * Returns the Epoch (ms) corresponding to 00:00:00 in the Target Timezone.\r\n * Usage: Setting the Timeline anchor (x=0).\r\n */\r\nexport function getLocalDayStart(dateStr, timezone) {\r\n    if (!timezone) return DateTime.fromISO(dateStr).startOf('day').toMillis();\r\n    return DateTime.fromISO(dateStr, { zone: timezone }).startOf('day').toMillis();\r\n}\r\n\r\n/**\r\n * Formats a UTC Timestamp into \"HH:mm:ss\" in the Target Timezone.\r\n * Usage: Displaying Playhead time, Debug info.\r\n */\r\nexport function formatLocalTime(ts, timezone) {\r\n    if (!ts) return \"--:--:--\";\r\n    const opts = timezone ? { zone: timezone } : {};\r\n    return DateTime.fromMillis(ts, opts).toFormat('HH:mm:ss');\r\n}\r\n\r\n/**\r\n * Formats a UTC Timestamp into \"yyyy-MM-dd\" in the Target Timezone.\r\n */\r\nexport function formatLocalDate(ts, timezone) {\r\n    if (!ts) return \"\";\r\n    const opts = timezone ? { zone: timezone } : {};\r\n    return DateTime.fromMillis(ts, opts).toFormat('yyyy-MM-dd');\r\n}\r\n"],"mappings":"AAAA;AACA,SAASA,QAAQ,QAAQ,OAAO;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,YAAYA,CAACC,OAAO,EAAEC,OAAO,EAAEC,QAAQ,EAAE;EACrD,IAAI,CAACA,QAAQ,EAAE;IACX;IACA,OAAOJ,QAAQ,CAACK,OAAO,CAAC,GAAGH,OAAO,IAAIC,OAAO,EAAE,CAAC,CAACG,QAAQ,CAAC,CAAC;EAC/D;EACA,OAAON,QAAQ,CAACK,OAAO,CAAC,GAAGH,OAAO,IAAIC,OAAO,EAAE,EAAE;IAAEI,IAAI,EAAEH;EAAS,CAAC,CAAC,CAACE,QAAQ,CAAC,CAAC;AACnF;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASE,gBAAgBA,CAACN,OAAO,EAAEE,QAAQ,EAAE;EAChD,IAAI,CAACA,QAAQ,EAAE,OAAOJ,QAAQ,CAACK,OAAO,CAACH,OAAO,CAAC,CAACO,OAAO,CAAC,KAAK,CAAC,CAACH,QAAQ,CAAC,CAAC;EACzE,OAAON,QAAQ,CAACK,OAAO,CAACH,OAAO,EAAE;IAAEK,IAAI,EAAEH;EAAS,CAAC,CAAC,CAACK,OAAO,CAAC,KAAK,CAAC,CAACH,QAAQ,CAAC,CAAC;AAClF;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASI,eAAeA,CAACC,EAAE,EAAEP,QAAQ,EAAE;EAC1C,IAAI,CAACO,EAAE,EAAE,OAAO,UAAU;EAC1B,MAAMC,IAAI,GAAGR,QAAQ,GAAG;IAAEG,IAAI,EAAEH;EAAS,CAAC,GAAG,CAAC,CAAC;EAC/C,OAAOJ,QAAQ,CAACa,UAAU,CAACF,EAAE,EAAEC,IAAI,CAAC,CAACE,QAAQ,CAAC,UAAU,CAAC;AAC7D;;AAEA;AACA;AACA;AACA,OAAO,SAASC,eAAeA,CAACJ,EAAE,EAAEP,QAAQ,EAAE;EAC1C,IAAI,CAACO,EAAE,EAAE,OAAO,EAAE;EAClB,MAAMC,IAAI,GAAGR,QAAQ,GAAG;IAAEG,IAAI,EAAEH;EAAS,CAAC,GAAG,CAAC,CAAC;EAC/C,OAAOJ,QAAQ,CAACa,UAAU,CAACF,EAAE,EAAEC,IAAI,CAAC,CAACE,QAAQ,CAAC,YAAY,CAAC;AAC/D","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}