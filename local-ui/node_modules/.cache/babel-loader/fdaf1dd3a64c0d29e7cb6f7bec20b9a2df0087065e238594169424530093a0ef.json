{"ast":null,"code":"import _objectSpread from\"I:/dispecerat/github_release/dss-edge/local-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useRef,useState,useCallback}from'react';import API from'../api';import PlaybackCoreV2 from'../services/PlaybackCoreV2';import{getLocalDayStart,formatLocalTime,formatLocalDate}from'../utils/time';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const DAY_MS=86400000;const HOUR_MS=3600000;const MIN_MS=60000;const Playback=()=>{const urlParams=new URLSearchParams(window.location.hash.split('?')[1]);const initCam=urlParams.get('camId');const[cameras,setCameras]=useState([]);const[camId,setCamId]=useState(initCam||'');const[timelineSegments,setTimelineSegments]=useState([]);const[serverDayStart,setServerDayStart]=useState(0);const[selectedDate,setSelectedDate]=useState(new Date().toISOString().split('T')[0]);const[stats,setStats]=useState({first:null,last:null});const[isLoading,setIsLoading]=useState(false);const[isPlaying,setIsPlaying]=useState(false);const[playbackSpeed,setPlaybackSpeed]=useState(1);const[firstRecTime,setFirstRecTime]=useState(null);const[lastRecTime,setLastRecTime]=useState(null);const[serverTimezone,setServerTimezone]=useState(null);const[zoom,setZoom]=useState(1);const[offsetMs,setOffsetMs]=useState(0);const[playheadMs,setPlayheadMs]=useState(null);// DEBUG & SYNC STATES\nconst[debugSnapshot,setDebugSnapshot]=useState(null);const[isSeeking,setIsSeeking]=useState(false);// Lock updates during seek bounce\nconst[liveDebug,setLiveDebug]=useState({});const videoRef=useRef(null);const canvasRef=useRef(null);const playbackCoreRef=useRef(null);// --- HELPERS ---\nconst formatTimeDisplay=ms=>formatLocalTime(ms,serverTimezone);const formatDateDisplay=ms=>formatLocalDate(ms,serverTimezone);const timeToX=(ms,width)=>{const visibleMs=DAY_MS/zoom;return(ms-offsetMs)/visibleMs*width;};const xToTime=(x,width)=>{const visibleMs=DAY_MS/zoom;return offsetMs+x/width*visibleMs;};// --- EFFECTS ---\nuseEffect(()=>{API.get('/cameras').then(res=>{setCameras(res.data);if(!camId&&res.data.length>0)setCamId(res.data[0].id);}).catch(err=>console.error(\"Cameras load error\",err));},[camId]);useEffect(()=>{API.get('/system/time').then(res=>{if(res.data&&res.data.raw&&res.data.raw['Time zone']){const tzStr=res.data.raw['Time zone'];const cleanTz=tzStr.split(' ')[0];// Handle \"Europe/Bucharest (EET, +0200)\"\nsetServerTimezone(cleanTz);console.log(\"DSS Timezone Standard:\",cleanTz);}}).catch(e=>console.warn(\"Time Sync skipped\",e));},[]);// Calculate Anchor (serverDayStart) when Date or TZ changes\n// This is the CORE of the Local View / UTC Engine architecture.\nuseEffect(()=>{const start=getLocalDayStart(selectedDate,serverTimezone);setServerDayStart(start);},[selectedDate,serverTimezone]);useEffect(()=>{if(!camId)return;API.get(\"/playback/stats/\".concat(camId,\"?_t=\").concat(Date.now())).then(res=>setStats(res.data)).catch(console.error);},[camId]);useEffect(()=>{if(!camId)return;API.get(\"/playback/timeline-day/\".concat(camId,\"/\").concat(selectedDate,\"?_ts=\").concat(Date.now())).then(res=>{const{segments}=res.data;// segments are UTC.\n// serverDayStart is UTC anchor for 00:00 Local.\nsetTimelineSegments(segments||[]);if(segments&&segments.length>0){setFirstRecTime(segments[0].start_ts);setLastRecTime(segments[segments.length-1].end_ts);}else{setFirstRecTime(null);setLastRecTime(null);}setOffsetMs(0);setZoom(1);}).catch(err=>console.error(\"Timeline error\",err));},[camId,selectedDate]);useEffect(()=>{if(!camId||!videoRef.current)return;if(playbackCoreRef.current)playbackCoreRef.current.destroy();let baseURL=API.defaults.baseURL||'/api';if(baseURL.endsWith('/'))baseURL=baseURL.slice(0,-1);const core=new PlaybackCoreV2(videoRef.current,camId,baseURL);playbackCoreRef.current=core;return()=>core.destroy();},[camId]);// Initial Start\nuseEffect(()=>{if(playbackCoreRef.current&&timelineSegments.length>0&&serverDayStart&&playheadMs===null){const firstSeg=timelineSegments[0];const startTs=Number(firstSeg.start_ts);playbackCoreRef.current.start(startTs);setPlayheadMs(startTs-serverDayStart);setIsPlaying(true);}},[timelineSegments,serverDayStart,playheadMs]);// Video Listeners\nuseEffect(()=>{const v=videoRef.current;if(!v)return;const onWaiting=()=>setIsLoading(true);const onPlaying=()=>{setIsLoading(false);setIsPlaying(true);setTimeout(()=>{setIsSeeking(false);},800);};const onPause=()=>setIsPlaying(false);const onCanPlay=()=>setIsLoading(false);v.addEventListener('waiting',onWaiting);v.addEventListener('playing',onPlaying);v.addEventListener('pause',onPause);v.addEventListener('canplay',onCanPlay);return()=>{v.removeEventListener('waiting',onWaiting);v.removeEventListener('playing',onPlaying);v.removeEventListener('pause',onPause);v.removeEventListener('canplay',onCanPlay);};},[]);// Main Loop & Debug\nuseEffect(()=>{const interval=setInterval(()=>{if(!playbackCoreRef.current||!serverDayStart)return;const currentEpoch=playbackCoreRef.current.getCurrentEpochMs();// Live Debug Data\nsetLiveDebug({BrowserClock:new Date().toLocaleTimeString(),LoopEpoch:currentEpoch,LoopLocal:formatTimeDisplay(currentEpoch),PlayheadMs:playheadMs,IsSeeking:isSeeking,VideoTime:videoRef.current?videoRef.current.currentTime.toFixed(2):0});if(currentEpoch&&currentEpoch>0&&!isSeeking){// playheadMs is offset from serverDayStart\nsetPlayheadMs(currentEpoch-serverDayStart);}},100);return()=>clearInterval(interval);},[serverDayStart,isSeeking,playheadMs,serverTimezone]);// Add serverTimezone to dep\n// --- DRAW ---\nconst draw=useCallback(()=>{const canvas=canvasRef.current;if(!canvas||!serverDayStart)return;const ctx=canvas.getContext('2d');const width=canvas.width;const height=canvas.height;ctx.fillStyle='#111';ctx.fillRect(0,0,width,height);ctx.strokeStyle='#333';ctx.fillStyle='#eee';ctx.font='11px monospace';// Calculate visuals\nconst hourWidth=timeToX(HOUR_MS,width)-timeToX(0,width);for(let h=0;h<24;h++){const hMs=h*HOUR_MS;const x=timeToX(hMs,width);// Draw Hour (Local Display)\nif(x>=0&&x<=width){ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,height);ctx.strokeStyle='#444';ctx.stroke();ctx.fillText(\"\".concat(h,\":00\"),x+3,12);}// Draw Minutes if zoomed enough\nif(hourWidth>60){// 30 min mark\nconst m30=hMs+30*MIN_MS;const x30=timeToX(m30,width);if(x30>=0&&x30<=width){ctx.beginPath();ctx.moveTo(x30,height-10);ctx.lineTo(x30,height);ctx.strokeStyle='#333';ctx.stroke();}}if(hourWidth>120){// 15, 45 min marks\n[15,45].forEach(min=>{const m=hMs+min*MIN_MS;const mx=timeToX(m,width);if(mx>=0&&mx<=width){ctx.beginPath();ctx.moveTo(mx,height-6);ctx.lineTo(mx,height);ctx.strokeStyle='#333';ctx.stroke();}});}}ctx.fillStyle='#2ecc71';timelineSegments.forEach(seg=>{// Draw relative to Local Midnight Anchor\nconst startRel=seg.start_ts-serverDayStart;const endRel=seg.end_ts-serverDayStart;const x1=timeToX(startRel,width);const x2=timeToX(endRel,width);if(x2>=0&&x1<=width){const drawX1=Math.max(0,x1);const drawX2=Math.min(width,x2);const drawWidth=drawX2-drawX1;if(drawWidth>0)ctx.fillRect(drawX1,height-20,drawWidth,20);}});if(playheadMs!==null){const px=timeToX(playheadMs,width);if(px>=0&&px<=width){ctx.strokeStyle='red';ctx.lineWidth=2;ctx.beginPath();ctx.moveTo(px,0);ctx.lineTo(px,height);ctx.stroke();// Arrow\nctx.fillStyle='red';ctx.beginPath();ctx.moveTo(px-5,0);ctx.lineTo(px+5,0);ctx.lineTo(px,8);ctx.fill();}}},[timelineSegments,serverDayStart,zoom,offsetMs,playheadMs]);useEffect(()=>{draw();},[draw]);// --- HANDLERS ---\nconst handleWheel=e=>{e.preventDefault();const canvas=canvasRef.current;const rect=canvas.getBoundingClientRect();const mouseX=e.clientX-rect.left;const mouseTime=xToTime(mouseX,rect.width);let newZoom=Math.min(600,Math.max(1,zoom*(e.deltaY>0?0.8:1.2)));const newVisibleMs=DAY_MS/newZoom;let newOffset=mouseTime-mouseX/rect.width*newVisibleMs;newOffset=Math.max(0,Math.min(DAY_MS-newVisibleMs,newOffset));setZoom(newZoom);setOffsetMs(newOffset);};const handleCanvasClick=e=>{if(!serverDayStart||!playbackCoreRef.current)return;if(timelineSegments.length===0)return;const canvas=canvasRef.current;const rect=canvas.getBoundingClientRect();const x=e.clientX-rect.left;const clickedRelativeMs=xToTime(x,rect.width);// Offset 0-24h\nconst clampedMs=Math.max(0,Math.min(DAY_MS,clickedRelativeMs));// CORE LOGIC: Anchor + Offset = UTC Epoch\nconst clickedAbsoluteTs=serverDayStart+clampedMs;let nearestSegment=timelineSegments[0];let minDistance=Math.abs(nearestSegment.start_ts-clickedAbsoluteTs);let clickInside=false;for(const seg of timelineSegments){if(clickedAbsoluteTs>=seg.start_ts&&clickedAbsoluteTs<=seg.end_ts){nearestSegment=seg;minDistance=0;clickInside=true;break;}const distToStart=Math.abs(seg.start_ts-clickedAbsoluteTs);if(distToStart<minDistance){minDistance=distToStart;nearestSegment=seg;}}// Decide Seek Target\nlet seekTs;let decisionType=\"\";if(clickInside){seekTs=clickedAbsoluteTs;decisionType=\"EXACT_IN_SEGMENT\";}else{seekTs=nearestSegment.start_ts;decisionType=\"SNAP_TO_NEAREST\";}// LOG DEBUG SNAPSHOT\nsetDebugSnapshot({clickLocal:formatTimeDisplay(clickedAbsoluteTs),clickEpoch:clickedAbsoluteTs,clickType:clickInside?\"GREEN (DATA)\":\"BLACK (NO DATA)\",decision:decisionType,targetLocal:formatTimeDisplay(seekTs),targetEpoch:seekTs,offsetInfo:\"Anchor=\".concat(serverDayStart,\", Offset=\").concat(clampedMs)});// Trigger Seek with Grace Period\nsetIsSeeking(true);playbackCoreRef.current.seekTo(seekTs);setPlayheadMs(seekTs-serverDayStart);};const handlePlay=()=>{if(videoRef.current){videoRef.current.play();setIsPlaying(true);}};const handlePause=()=>{if(videoRef.current){videoRef.current.pause();setIsPlaying(false);}};const handleStop=()=>{if(videoRef.current){videoRef.current.pause();videoRef.current.currentTime=0;setIsPlaying(false);}};const handleSkip=seconds=>{if(!playbackCoreRef.current||!serverDayStart)return;const currentEpoch=playbackCoreRef.current.getCurrentEpochMs();if(currentEpoch){const newTs=currentEpoch+seconds*1000;playbackCoreRef.current.seekTo(newTs);setPlayheadMs(newTs-serverDayStart);}};const handleSpeedChange=speed=>{if(videoRef.current){videoRef.current.playbackRate=speed;setPlaybackSpeed(speed);}};// --- STYLES ---\nconst btnStyle={padding:'8px 16px',background:'#333',color:'#fff',border:'1px solid #555',borderRadius:4,cursor:'pointer',fontSize:13,fontWeight:500,transition:'all 0.2s'};const activeBtnStyle=_objectSpread(_objectSpread({},btnStyle),{},{background:'#2ecc71',borderColor:'#27ae60'});return/*#__PURE__*/_jsxs(\"div\",{className:\"playback-page\",style:{height:'calc(100vh - 64px)',display:'flex',flexDirection:'column',background:'#1a1a1a',color:'#eee',padding:'10px 20px',boxSizing:'border-box',overflow:'hidden',position:'relative'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:60,right:10,background:'rgba(0,0,0,0.7)',color:'#00ff00',padding:'8px',fontSize:'10px',fontFamily:'Consolas, monospace',pointerEvents:'none',zIndex:9999,border:'1px solid #00ff00',display:'grid',gridTemplateColumns:'auto auto',gap:'15px',borderRadius:4,backdropFilter:'blur(4px)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{gridColumn:'1 / span 2',borderBottom:'1px solid #0f0',fontWeight:'bold'},children:\"DEBUG 1550 (LUXON CORE)\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'yellow'},children:\"LAST CLICK EVENT\"}),debugSnapshot?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Local: \",debugSnapshot.clickLocal]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Type: \",debugSnapshot.clickType]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Action: \",debugSnapshot.decision]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Target: \",debugSnapshot.targetLocal]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:9,color:'#888'},children:debugSnapshot.offsetInfo})]}):/*#__PURE__*/_jsx(\"div\",{children:\"No click yet\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'cyan'},children:\"LIVE SYSTEM\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Browser: \",liveDebug.BrowserClock]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"LoopTime: \",liveDebug.LoopLocal]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"SeekingLocked: \",liveDebug.IsSeeking?\"YES\":\"NO\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"ServerTZ: \",serverTimezone]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:10,display:'flex',gap:15,alignItems:'center',flexWrap:'wrap',flexShrink:0},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:11,color:'#888',marginBottom:2},children:\"Camera\"}),/*#__PURE__*/_jsx(\"select\",{value:camId,onChange:e=>{const newId=e.target.value;window.location.href=\"#/playback?camId=\".concat(newId);window.location.reload();},style:{padding:'4px 8px',background:'#333',color:'#fff',border:'1px solid #555',borderRadius:4,outline:'none'},children:cameras.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c.id,children:c.name||c.ip},c.id))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:11,color:'#888',marginBottom:2},children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:selectedDate,onChange:e=>setSelectedDate(e.target.value),style:{padding:'3px 8px',background:'#333',color:'#fff',border:'1px solid #555',borderRadius:4,outline:'none'}})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),firstRecTime&&lastRecTime&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:12,background:'#222',padding:'6px 12px',borderRadius:4,border:'1px solid #333'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:6},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:8,height:8,borderRadius:'50%',background:'#e74c3c',animation:'pulse 1.5s infinite'}}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:11,fontWeight:600,color:'#e74c3c'},children:\"REC\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:11,color:'#2ecc71'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[formatDateDisplay(firstRecTime),\" \",formatTimeDisplay(firstRecTime)]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',marginTop:2},children:[\"\\u2192 \",formatTimeDisplay(lastRecTime)]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"video-container\",style:{position:'relative',background:'#000',borderRadius:8,overflow:'hidden',width:'100%',flex:1,minHeight:0,marginBottom:10,display:'flex',alignItems:'center',justifyContent:'center',boxShadow:'0 4px 12px rgba(0,0,0,0.3)'},children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,id:\"player\",autoPlay:true,playsInline:true,muted:true,style:{maxHeight:'100%',maxWidth:'100%',outline:'none'}}),isLoading&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'50%',left:'50%',transform:'translate(-50%, -50%)',color:'white',background:'rgba(0,0,0,0.7)',padding:'10px 20px',borderRadius:'4px',pointerEvents:'none'},children:\"Buffering...\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"timeline-container\",style:{width:'100%',height:60,flexShrink:0,position:'relative',border:'1px solid #333',borderRadius:4,overflow:'hidden',background:'#222',marginBottom:10},children:/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,id:\"timeline\",width:2000,height:60,style:{width:'100%',height:'100%',cursor:'crosshair',display:'block'},onClick:handleCanvasClick,onWheel:handleWheel})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:10,alignItems:'center',flexShrink:0,padding:'10px 0',borderTop:'1px solid #333'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSkip(-10),style:btnStyle,title:\"Rewind 10s\",children:\"\\u23EA -10s\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleStop,style:btnStyle,title:\"Stop\",children:\"\\u23F9\"}),/*#__PURE__*/_jsx(\"button\",{onClick:isPlaying?handlePause:handlePlay,style:isPlaying?activeBtnStyle:btnStyle,title:isPlaying?\"Pause\":\"Play\",children:isPlaying?'⏸':'▶'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSkip(10),style:btnStyle,title:\"Forward 10s\",children:\"\\u23E9 +10s\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:1,height:30,background:'#444',margin:'0 10px'}}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,color:'#888'},children:\"Speed:\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSpeedChange(0.5),style:playbackSpeed===0.5?activeBtnStyle:btnStyle,children:\"0.5x\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSpeedChange(1),style:playbackSpeed===1?activeBtnStyle:btnStyle,children:\"1x\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSpeedChange(2),style:playbackSpeed===2?activeBtnStyle:btnStyle,children:\"2x\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSpeedChange(4),style:playbackSpeed===4?activeBtnStyle:btnStyle,children:\"4x\"}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:11,color:'#666'},children:[\"Zoom: \",zoom.toFixed(1),\"x\"]})]}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n                @keyframes pulse {\\n                    0% { opacity: 1; transform: scale(1); }\\n                    50% { opacity: 0.5; transform: scale(1.2); }\\n                    100% { opacity: 1; transform: scale(1); }\\n                }\\n            \"})]});};export default Playback;","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","API","PlaybackCoreV2","getLocalDayStart","formatLocalTime","formatLocalDate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DAY_MS","HOUR_MS","MIN_MS","Playback","urlParams","URLSearchParams","window","location","hash","split","initCam","get","cameras","setCameras","camId","setCamId","timelineSegments","setTimelineSegments","serverDayStart","setServerDayStart","selectedDate","setSelectedDate","Date","toISOString","stats","setStats","first","last","isLoading","setIsLoading","isPlaying","setIsPlaying","playbackSpeed","setPlaybackSpeed","firstRecTime","setFirstRecTime","lastRecTime","setLastRecTime","serverTimezone","setServerTimezone","zoom","setZoom","offsetMs","setOffsetMs","playheadMs","setPlayheadMs","debugSnapshot","setDebugSnapshot","isSeeking","setIsSeeking","liveDebug","setLiveDebug","videoRef","canvasRef","playbackCoreRef","formatTimeDisplay","ms","formatDateDisplay","timeToX","width","visibleMs","xToTime","x","then","res","data","length","id","catch","err","console","error","raw","tzStr","cleanTz","log","e","warn","start","concat","now","segments","start_ts","end_ts","current","destroy","baseURL","defaults","endsWith","slice","core","firstSeg","startTs","Number","v","onWaiting","onPlaying","setTimeout","onPause","onCanPlay","addEventListener","removeEventListener","interval","setInterval","currentEpoch","getCurrentEpochMs","BrowserClock","toLocaleTimeString","LoopEpoch","LoopLocal","PlayheadMs","IsSeeking","VideoTime","currentTime","toFixed","clearInterval","draw","canvas","ctx","getContext","height","fillStyle","fillRect","strokeStyle","font","hourWidth","h","hMs","beginPath","moveTo","lineTo","stroke","fillText","m30","x30","forEach","min","m","mx","seg","startRel","endRel","x1","x2","drawX1","Math","max","drawX2","drawWidth","px","lineWidth","fill","handleWheel","preventDefault","rect","getBoundingClientRect","mouseX","clientX","left","mouseTime","newZoom","deltaY","newVisibleMs","newOffset","handleCanvasClick","clickedRelativeMs","clampedMs","clickedAbsoluteTs","nearestSegment","minDistance","abs","clickInside","distToStart","seekTs","decisionType","clickLocal","clickEpoch","clickType","decision","targetLocal","targetEpoch","offsetInfo","seekTo","handlePlay","play","handlePause","pause","handleStop","handleSkip","seconds","newTs","handleSpeedChange","speed","playbackRate","btnStyle","padding","background","color","border","borderRadius","cursor","fontSize","fontWeight","transition","activeBtnStyle","_objectSpread","borderColor","className","style","display","flexDirection","boxSizing","overflow","position","children","top","right","fontFamily","pointerEvents","zIndex","gridTemplateColumns","gap","backdropFilter","gridColumn","borderBottom","marginBottom","alignItems","flexWrap","flexShrink","value","onChange","newId","target","href","reload","outline","map","c","name","ip","type","flex","animation","marginTop","minHeight","justifyContent","boxShadow","ref","autoPlay","playsInline","muted","maxHeight","maxWidth","transform","onClick","onWheel","borderTop","title","margin"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/pages/Playback.js"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\r\nimport API from '../api';\r\nimport PlaybackCoreV2 from '../services/PlaybackCoreV2';\r\nimport { getLocalDayStart, formatLocalTime, formatLocalDate } from '../utils/time';\r\n\r\nconst DAY_MS = 86400000;\r\nconst HOUR_MS = 3600000;\r\nconst MIN_MS = 60000;\r\n\r\nconst Playback = () => {\r\n    const urlParams = new URLSearchParams(window.location.hash.split('?')[1]);\r\n    const initCam = urlParams.get('camId');\r\n\r\n    const [cameras, setCameras] = useState([]);\r\n    const [camId, setCamId] = useState(initCam || '');\r\n    const [timelineSegments, setTimelineSegments] = useState([]);\r\n    const [serverDayStart, setServerDayStart] = useState(0);\r\n    const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);\r\n    const [stats, setStats] = useState({ first: null, last: null });\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [playbackSpeed, setPlaybackSpeed] = useState(1);\r\n    const [firstRecTime, setFirstRecTime] = useState(null);\r\n    const [lastRecTime, setLastRecTime] = useState(null);\r\n    const [serverTimezone, setServerTimezone] = useState(null);\r\n\r\n    const [zoom, setZoom] = useState(1);\r\n    const [offsetMs, setOffsetMs] = useState(0);\r\n    const [playheadMs, setPlayheadMs] = useState(null);\r\n\r\n    // DEBUG & SYNC STATES\r\n    const [debugSnapshot, setDebugSnapshot] = useState(null);\r\n    const [isSeeking, setIsSeeking] = useState(false); // Lock updates during seek bounce\r\n    const [liveDebug, setLiveDebug] = useState({});\r\n\r\n    const videoRef = useRef(null);\r\n    const canvasRef = useRef(null);\r\n    const playbackCoreRef = useRef(null);\r\n\r\n    // --- HELPERS ---\r\n    const formatTimeDisplay = (ms) => formatLocalTime(ms, serverTimezone);\r\n    const formatDateDisplay = (ms) => formatLocalDate(ms, serverTimezone);\r\n\r\n    const timeToX = (ms, width) => {\r\n        const visibleMs = DAY_MS / zoom;\r\n        return ((ms - offsetMs) / visibleMs) * width;\r\n    };\r\n\r\n    const xToTime = (x, width) => {\r\n        const visibleMs = DAY_MS / zoom;\r\n        return offsetMs + (x / width) * visibleMs;\r\n    };\r\n\r\n    // --- EFFECTS ---\r\n    useEffect(() => {\r\n        API.get('/cameras').then(res => {\r\n            setCameras(res.data);\r\n            if (!camId && res.data.length > 0) setCamId(res.data[0].id);\r\n        }).catch(err => console.error(\"Cameras load error\", err));\r\n    }, [camId]);\r\n\r\n    useEffect(() => {\r\n        API.get('/system/time').then(res => {\r\n            if (res.data && res.data.raw && res.data.raw['Time zone']) {\r\n                const tzStr = res.data.raw['Time zone'];\r\n                const cleanTz = tzStr.split(' ')[0]; // Handle \"Europe/Bucharest (EET, +0200)\"\r\n                setServerTimezone(cleanTz);\r\n                console.log(\"DSS Timezone Standard:\", cleanTz);\r\n            }\r\n        }).catch(e => console.warn(\"Time Sync skipped\", e));\r\n    }, []);\r\n\r\n    // Calculate Anchor (serverDayStart) when Date or TZ changes\r\n    // This is the CORE of the Local View / UTC Engine architecture.\r\n    useEffect(() => {\r\n        const start = getLocalDayStart(selectedDate, serverTimezone);\r\n        setServerDayStart(start);\r\n    }, [selectedDate, serverTimezone]);\r\n\r\n    useEffect(() => {\r\n        if (!camId) return;\r\n        API.get(`/playback/stats/${camId}?_t=${Date.now()}`).then(res => setStats(res.data)).catch(console.error);\r\n    }, [camId]);\r\n\r\n    useEffect(() => {\r\n        if (!camId) return;\r\n        API.get(`/playback/timeline-day/${camId}/${selectedDate}?_ts=${Date.now()}`)\r\n            .then(res => {\r\n                const { segments } = res.data;\r\n                // segments are UTC.\r\n                // serverDayStart is UTC anchor for 00:00 Local.\r\n                setTimelineSegments(segments || []);\r\n\r\n                if (segments && segments.length > 0) {\r\n                    setFirstRecTime(segments[0].start_ts);\r\n                    setLastRecTime(segments[segments.length - 1].end_ts);\r\n                } else {\r\n                    setFirstRecTime(null);\r\n                    setLastRecTime(null);\r\n                }\r\n                setOffsetMs(0);\r\n                setZoom(1);\r\n            })\r\n            .catch(err => console.error(\"Timeline error\", err));\r\n    }, [camId, selectedDate]);\r\n\r\n    useEffect(() => {\r\n        if (!camId || !videoRef.current) return;\r\n        if (playbackCoreRef.current) playbackCoreRef.current.destroy();\r\n        let baseURL = API.defaults.baseURL || '/api';\r\n        if (baseURL.endsWith('/')) baseURL = baseURL.slice(0, -1);\r\n        const core = new PlaybackCoreV2(videoRef.current, camId, baseURL);\r\n        playbackCoreRef.current = core;\r\n        return () => core.destroy();\r\n    }, [camId]);\r\n\r\n    // Initial Start\r\n    useEffect(() => {\r\n        if (playbackCoreRef.current && timelineSegments.length > 0 && serverDayStart && playheadMs === null) {\r\n            const firstSeg = timelineSegments[0];\r\n            const startTs = Number(firstSeg.start_ts);\r\n            playbackCoreRef.current.start(startTs);\r\n            setPlayheadMs(startTs - serverDayStart);\r\n            setIsPlaying(true);\r\n        }\r\n    }, [timelineSegments, serverDayStart, playheadMs]);\r\n\r\n    // Video Listeners\r\n    useEffect(() => {\r\n        const v = videoRef.current;\r\n        if (!v) return;\r\n        const onWaiting = () => setIsLoading(true);\r\n        const onPlaying = () => {\r\n            setIsLoading(false);\r\n            setIsPlaying(true);\r\n            setTimeout(() => { setIsSeeking(false); }, 800);\r\n        };\r\n        const onPause = () => setIsPlaying(false);\r\n        const onCanPlay = () => setIsLoading(false);\r\n        v.addEventListener('waiting', onWaiting);\r\n        v.addEventListener('playing', onPlaying);\r\n        v.addEventListener('pause', onPause);\r\n        v.addEventListener('canplay', onCanPlay);\r\n        return () => {\r\n            v.removeEventListener('waiting', onWaiting);\r\n            v.removeEventListener('playing', onPlaying);\r\n            v.removeEventListener('pause', onPause);\r\n            v.removeEventListener('canplay', onCanPlay);\r\n        }\r\n    }, []);\r\n\r\n    // Main Loop & Debug\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            if (!playbackCoreRef.current || !serverDayStart) return;\r\n            const currentEpoch = playbackCoreRef.current.getCurrentEpochMs();\r\n\r\n            // Live Debug Data\r\n            setLiveDebug({\r\n                BrowserClock: new Date().toLocaleTimeString(),\r\n                LoopEpoch: currentEpoch,\r\n                LoopLocal: formatTimeDisplay(currentEpoch),\r\n                PlayheadMs: playheadMs,\r\n                IsSeeking: isSeeking,\r\n                VideoTime: videoRef.current ? videoRef.current.currentTime.toFixed(2) : 0\r\n            });\r\n\r\n            if (currentEpoch && currentEpoch > 0 && !isSeeking) {\r\n                // playheadMs is offset from serverDayStart\r\n                setPlayheadMs(currentEpoch - serverDayStart);\r\n            }\r\n        }, 100);\r\n        return () => clearInterval(interval);\r\n    }, [serverDayStart, isSeeking, playheadMs, serverTimezone]); // Add serverTimezone to dep\r\n\r\n    // --- DRAW ---\r\n    const draw = useCallback(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas || !serverDayStart) return;\r\n\r\n        const ctx = canvas.getContext('2d');\r\n        const width = canvas.width;\r\n        const height = canvas.height;\r\n\r\n        ctx.fillStyle = '#111';\r\n        ctx.fillRect(0, 0, width, height);\r\n\r\n        ctx.strokeStyle = '#333';\r\n        ctx.fillStyle = '#eee';\r\n        ctx.font = '11px monospace';\r\n\r\n        // Calculate visuals\r\n        const hourWidth = timeToX(HOUR_MS, width) - timeToX(0, width);\r\n\r\n        for (let h = 0; h < 24; h++) {\r\n            const hMs = h * HOUR_MS;\r\n            const x = timeToX(hMs, width);\r\n\r\n            // Draw Hour (Local Display)\r\n            if (x >= 0 && x <= width) {\r\n                ctx.beginPath();\r\n                ctx.moveTo(x, 0);\r\n                ctx.lineTo(x, height);\r\n                ctx.strokeStyle = '#444';\r\n                ctx.stroke();\r\n                ctx.fillText(`${h}:00`, x + 3, 12);\r\n            }\r\n\r\n            // Draw Minutes if zoomed enough\r\n            if (hourWidth > 60) {\r\n                // 30 min mark\r\n                const m30 = hMs + 30 * MIN_MS;\r\n                const x30 = timeToX(m30, width);\r\n                if (x30 >= 0 && x30 <= width) {\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(x30, height - 10);\r\n                    ctx.lineTo(x30, height);\r\n                    ctx.strokeStyle = '#333';\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n\r\n            if (hourWidth > 120) {\r\n                // 15, 45 min marks\r\n                [15, 45].forEach(min => {\r\n                    const m = hMs + min * MIN_MS;\r\n                    const mx = timeToX(m, width);\r\n                    if (mx >= 0 && mx <= width) {\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(mx, height - 6);\r\n                        ctx.lineTo(mx, height);\r\n                        ctx.strokeStyle = '#333';\r\n                        ctx.stroke();\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        ctx.fillStyle = '#2ecc71';\r\n        timelineSegments.forEach(seg => {\r\n            // Draw relative to Local Midnight Anchor\r\n            const startRel = seg.start_ts - serverDayStart;\r\n            const endRel = seg.end_ts - serverDayStart;\r\n            const x1 = timeToX(startRel, width);\r\n            const x2 = timeToX(endRel, width);\r\n\r\n            if (x2 >= 0 && x1 <= width) {\r\n                const drawX1 = Math.max(0, x1);\r\n                const drawX2 = Math.min(width, x2);\r\n                const drawWidth = drawX2 - drawX1;\r\n                if (drawWidth > 0) ctx.fillRect(drawX1, height - 20, drawWidth, 20);\r\n            }\r\n        });\r\n\r\n        if (playheadMs !== null) {\r\n            const px = timeToX(playheadMs, width);\r\n            if (px >= 0 && px <= width) {\r\n                ctx.strokeStyle = 'red';\r\n                ctx.lineWidth = 2;\r\n                ctx.beginPath();\r\n                ctx.moveTo(px, 0);\r\n                ctx.lineTo(px, height);\r\n                ctx.stroke();\r\n                // Arrow\r\n                ctx.fillStyle = 'red';\r\n                ctx.beginPath();\r\n                ctx.moveTo(px - 5, 0);\r\n                ctx.lineTo(px + 5, 0);\r\n                ctx.lineTo(px, 8);\r\n                ctx.fill();\r\n            }\r\n        }\r\n    }, [timelineSegments, serverDayStart, zoom, offsetMs, playheadMs]);\r\n\r\n    useEffect(() => { draw(); }, [draw]);\r\n\r\n    // --- HANDLERS ---\r\n    const handleWheel = (e) => {\r\n        e.preventDefault();\r\n        const canvas = canvasRef.current;\r\n        const rect = canvas.getBoundingClientRect();\r\n        const mouseX = e.clientX - rect.left;\r\n        const mouseTime = xToTime(mouseX, rect.width);\r\n        let newZoom = Math.min(600, Math.max(1, zoom * (e.deltaY > 0 ? 0.8 : 1.2)));\r\n        const newVisibleMs = DAY_MS / newZoom;\r\n        let newOffset = mouseTime - (mouseX / rect.width) * newVisibleMs;\r\n        newOffset = Math.max(0, Math.min(DAY_MS - newVisibleMs, newOffset));\r\n        setZoom(newZoom);\r\n        setOffsetMs(newOffset);\r\n    };\r\n\r\n    const handleCanvasClick = (e) => {\r\n        if (!serverDayStart || !playbackCoreRef.current) return;\r\n        if (timelineSegments.length === 0) return;\r\n\r\n        const canvas = canvasRef.current;\r\n        const rect = canvas.getBoundingClientRect();\r\n        const x = e.clientX - rect.left;\r\n        const clickedRelativeMs = xToTime(x, rect.width); // Offset 0-24h\r\n        const clampedMs = Math.max(0, Math.min(DAY_MS, clickedRelativeMs));\r\n\r\n        // CORE LOGIC: Anchor + Offset = UTC Epoch\r\n        const clickedAbsoluteTs = serverDayStart + clampedMs;\r\n\r\n        let nearestSegment = timelineSegments[0];\r\n        let minDistance = Math.abs(nearestSegment.start_ts - clickedAbsoluteTs);\r\n        let clickInside = false;\r\n\r\n        for (const seg of timelineSegments) {\r\n            if (clickedAbsoluteTs >= seg.start_ts && clickedAbsoluteTs <= seg.end_ts) {\r\n                nearestSegment = seg;\r\n                minDistance = 0;\r\n                clickInside = true;\r\n                break;\r\n            }\r\n            const distToStart = Math.abs(seg.start_ts - clickedAbsoluteTs);\r\n            if (distToStart < minDistance) {\r\n                minDistance = distToStart;\r\n                nearestSegment = seg;\r\n            }\r\n        }\r\n\r\n        // Decide Seek Target\r\n        let seekTs;\r\n        let decisionType = \"\";\r\n\r\n        if (clickInside) {\r\n            seekTs = clickedAbsoluteTs;\r\n            decisionType = \"EXACT_IN_SEGMENT\";\r\n        } else {\r\n            seekTs = nearestSegment.start_ts;\r\n            decisionType = \"SNAP_TO_NEAREST\";\r\n        }\r\n\r\n        // LOG DEBUG SNAPSHOT\r\n        setDebugSnapshot({\r\n            clickLocal: formatTimeDisplay(clickedAbsoluteTs),\r\n            clickEpoch: clickedAbsoluteTs,\r\n            clickType: clickInside ? \"GREEN (DATA)\" : \"BLACK (NO DATA)\",\r\n            decision: decisionType,\r\n            targetLocal: formatTimeDisplay(seekTs),\r\n            targetEpoch: seekTs,\r\n            offsetInfo: `Anchor=${serverDayStart}, Offset=${clampedMs}`\r\n        });\r\n\r\n        // Trigger Seek with Grace Period\r\n        setIsSeeking(true);\r\n        playbackCoreRef.current.seekTo(seekTs);\r\n        setPlayheadMs(seekTs - serverDayStart);\r\n    };\r\n\r\n    const handlePlay = () => { if (videoRef.current) { videoRef.current.play(); setIsPlaying(true); } };\r\n    const handlePause = () => { if (videoRef.current) { videoRef.current.pause(); setIsPlaying(false); } };\r\n    const handleStop = () => { if (videoRef.current) { videoRef.current.pause(); videoRef.current.currentTime = 0; setIsPlaying(false); } };\r\n    const handleSkip = (seconds) => {\r\n        if (!playbackCoreRef.current || !serverDayStart) return;\r\n        const currentEpoch = playbackCoreRef.current.getCurrentEpochMs();\r\n        if (currentEpoch) {\r\n            const newTs = currentEpoch + (seconds * 1000);\r\n            playbackCoreRef.current.seekTo(newTs);\r\n            setPlayheadMs(newTs - serverDayStart);\r\n        }\r\n    };\r\n    const handleSpeedChange = (speed) => {\r\n        if (videoRef.current) {\r\n            videoRef.current.playbackRate = speed;\r\n            setPlaybackSpeed(speed);\r\n        }\r\n    };\r\n\r\n    // --- STYLES ---\r\n    const btnStyle = { padding: '8px 16px', background: '#333', color: '#fff', border: '1px solid #555', borderRadius: 4, cursor: 'pointer', fontSize: 13, fontWeight: 500, transition: 'all 0.2s' };\r\n    const activeBtnStyle = { ...btnStyle, background: '#2ecc71', borderColor: '#27ae60' };\r\n\r\n    return (\r\n        <div className=\"playback-page\" style={{ height: 'calc(100vh - 64px)', display: 'flex', flexDirection: 'column', background: '#1a1a1a', color: '#eee', padding: '10px 20px', boxSizing: 'border-box', overflow: 'hidden', position: 'relative' }}>\r\n\r\n            {/* ADVANCED DEBUG OVERLAY */}\r\n            <div style={{\r\n                position: 'fixed', top: 60, right: 10,\r\n                background: 'rgba(0,0,0,0.7)', color: '#00ff00',\r\n                padding: '8px', fontSize: '10px', fontFamily: 'Consolas, monospace',\r\n                pointerEvents: 'none', zIndex: 9999, border: '1px solid #00ff00',\r\n                display: 'grid', gridTemplateColumns: 'auto auto', gap: '15px',\r\n                borderRadius: 4, backdropFilter: 'blur(4px)'\r\n            }}>\r\n                <div style={{ gridColumn: '1 / span 2', borderBottom: '1px solid #0f0', fontWeight: 'bold' }}>DEBUG 1550 (LUXON CORE)</div>\r\n\r\n                <div>\r\n                    <div style={{ color: 'yellow' }}>LAST CLICK EVENT</div>\r\n                    {debugSnapshot ? (\r\n                        <>\r\n                            <div>Local: {debugSnapshot.clickLocal}</div>\r\n                            <div>Type: {debugSnapshot.clickType}</div>\r\n                            <div>Action: {debugSnapshot.decision}</div>\r\n                            <div>Target: {debugSnapshot.targetLocal}</div>\r\n                            <div style={{ fontSize: 9, color: '#888' }}>{debugSnapshot.offsetInfo}</div>\r\n                        </>\r\n                    ) : <div>No click yet</div>}\r\n                </div>\r\n\r\n                <div>\r\n                    <div style={{ color: 'cyan' }}>LIVE SYSTEM</div>\r\n                    <div>Browser: {liveDebug.BrowserClock}</div>\r\n                    <div>LoopTime: {liveDebug.LoopLocal}</div>\r\n                    <div>SeekingLocked: {liveDebug.IsSeeking ? \"YES\" : \"NO\"}</div>\r\n                    <div>ServerTZ: {serverTimezone}</div>\r\n                </div>\r\n            </div>\r\n\r\n            <div style={{ marginBottom: 10, display: 'flex', gap: 15, alignItems: 'center', flexWrap: 'wrap', flexShrink: 0 }}>\r\n                {/* Cameras Select */}\r\n                <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n                    <label style={{ fontSize: 11, color: '#888', marginBottom: 2 }}>Camera</label>\r\n                    <select\r\n                        value={camId}\r\n                        onChange={e => {\r\n                            const newId = e.target.value;\r\n                            window.location.href = `#/playback?camId=${newId}`;\r\n                            window.location.reload();\r\n                        }}\r\n                        style={{ padding: '4px 8px', background: '#333', color: '#fff', border: '1px solid #555', borderRadius: 4, outline: 'none' }}\r\n                    >\r\n                        {cameras.map(c => <option key={c.id} value={c.id}>{c.name || c.ip}</option>)}\r\n                    </select>\r\n                </div>\r\n                {/* Date Select */}\r\n                <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n                    <label style={{ fontSize: 11, color: '#888', marginBottom: 2 }}>Date</label>\r\n                    <input type=\"date\" value={selectedDate} onChange={e => setSelectedDate(e.target.value)} style={{ padding: '3px 8px', background: '#333', color: '#fff', border: '1px solid #555', borderRadius: 4, outline: 'none' }} />\r\n                </div>\r\n                <div style={{ flex: 1 }}></div>\r\n                {/* Range Info */}\r\n                {firstRecTime && lastRecTime && (\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: 12, background: '#222', padding: '6px 12px', borderRadius: 4, border: '1px solid #333' }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: 6 }}>\r\n                            <div style={{ width: 8, height: 8, borderRadius: '50%', background: '#e74c3c', animation: 'pulse 1.5s infinite' }}></div>\r\n                            <span style={{ fontSize: 11, fontWeight: 600, color: '#e74c3c' }}>REC</span>\r\n                        </div>\r\n                        <div style={{ fontSize: 11, color: '#2ecc71' }}>\r\n                            <div>{formatDateDisplay(firstRecTime)} {formatTimeDisplay(firstRecTime)}</div>\r\n                            <div style={{ color: '#888', marginTop: 2 }}>→ {formatTimeDisplay(lastRecTime)}</div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Video Player */}\r\n            <div className=\"video-container\" style={{ position: 'relative', background: '#000', borderRadius: 8, overflow: 'hidden', width: '100%', flex: 1, minHeight: 0, marginBottom: 10, display: 'flex', alignItems: 'center', justifyContent: 'center', boxShadow: '0 4px 12px rgba(0,0,0,0.3)' }}>\r\n                <video ref={videoRef} id=\"player\" autoPlay playsInline muted style={{ maxHeight: '100%', maxWidth: '100%', outline: 'none' }} />\r\n                {isLoading && (\r\n                    <div style={{\r\n                        position: 'absolute', top: '50%', left: '50%', transform: 'translate(-50%, -50%)',\r\n                        color: 'white', background: 'rgba(0,0,0,0.7)', padding: '10px 20px', borderRadius: '4px', pointerEvents: 'none'\r\n                    }}>\r\n                        Buffering...\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Timeline */}\r\n            <div className=\"timeline-container\" style={{ width: '100%', height: 60, flexShrink: 0, position: 'relative', border: '1px solid #333', borderRadius: 4, overflow: 'hidden', background: '#222', marginBottom: 10 }}>\r\n                <canvas ref={canvasRef} id=\"timeline\" width={2000} height={60} style={{ width: '100%', height: '100%', cursor: 'crosshair', display: 'block' }} onClick={handleCanvasClick} onWheel={handleWheel} />\r\n            </div>\r\n\r\n            {/* Controls */}\r\n            <div style={{ display: 'flex', gap: 10, alignItems: 'center', flexShrink: 0, padding: '10px 0', borderTop: '1px solid #333' }}>\r\n                <button onClick={() => handleSkip(-10)} style={btnStyle} title=\"Rewind 10s\">⏪ -10s</button>\r\n                <button onClick={handleStop} style={btnStyle} title=\"Stop\">⏹</button>\r\n                <button onClick={isPlaying ? handlePause : handlePlay} style={isPlaying ? activeBtnStyle : btnStyle} title={isPlaying ? \"Pause\" : \"Play\"}>\r\n                    {isPlaying ? '⏸' : '▶'}\r\n                </button>\r\n                <button onClick={() => handleSkip(10)} style={btnStyle} title=\"Forward 10s\">⏩ +10s</button>\r\n\r\n                <div style={{ width: 1, height: 30, background: '#444', margin: '0 10px' }}></div>\r\n\r\n                <span style={{ fontSize: 12, color: '#888' }}>Speed:</span>\r\n                <button onClick={() => handleSpeedChange(0.5)} style={playbackSpeed === 0.5 ? activeBtnStyle : btnStyle}>0.5x</button>\r\n                <button onClick={() => handleSpeedChange(1)} style={playbackSpeed === 1 ? activeBtnStyle : btnStyle}>1x</button>\r\n                <button onClick={() => handleSpeedChange(2)} style={playbackSpeed === 2 ? activeBtnStyle : btnStyle}>2x</button>\r\n                <button onClick={() => handleSpeedChange(4)} style={playbackSpeed === 4 ? activeBtnStyle : btnStyle}>4x</button>\r\n\r\n                <div style={{ flex: 1 }}></div>\r\n                <div style={{ fontSize: 11, color: '#666' }}>Zoom: {zoom.toFixed(1)}x</div>\r\n            </div>\r\n\r\n            <style>{`\r\n                @keyframes pulse {\r\n                    0% { opacity: 1; transform: scale(1); }\r\n                    50% { opacity: 0.5; transform: scale(1.2); }\r\n                    100% { opacity: 1; transform: scale(1); }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Playback;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}