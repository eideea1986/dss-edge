{"ast":null,"code":"import _objectSpread from\"I:/dispecerat/github_release/dss-edge/local-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useRef,useState}from\"react\";/**\r\n * SMART DUAL STREAM MANAGER - Trassir-like with Smart Warm Standby\r\n * \r\n * ARCHITECTURE:\r\n * - Grid: substream only (low CPU)\r\n * - Hover: pre-connect main stream (warm standby)\r\n * - Fullscreen: instant switch (main already connected)\r\n * \r\n * CPU OPTIMIZATION:\r\n * - Only 1 main stream in warm standby at a time\r\n * - Grid idle: minimal overhead (25 substreams only)\r\n * - Switch: <200ms (connection already established)\r\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GO2RTC_API=\"\".concat(window.location.origin,\"/rtc\");const streamPool=new Map();/**\r\n * Acquire WebRTC stream (reuses existing connections)\r\n */async function acquireStream(camId){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"sub\";const key=\"\".concat(camId,\"_\").concat(type);if(streamPool.has(key)){const entry=streamPool.get(key);entry.refs++;console.log(\"[SmartDual] Reusing \".concat(key,\", refs: \").concat(entry.refs));return entry;}console.log(\"[SmartDual] Creating WebRTC for \".concat(key));const pc=new RTCPeerConnection({iceServers:[]});const media=new MediaStream();pc.ontrack=e=>{console.log(\"[SmartDual] Track received for \".concat(key));media.addTrack(e.track);};pc.addTransceiver(\"video\",{direction:\"recvonly\"});try{const offer=await pc.createOffer();await pc.setLocalDescription(offer);const res=await fetch(\"\".concat(GO2RTC_API,\"/api/webrtc?src=\").concat(key),{method:\"POST\",headers:{\"Content-Type\":\"application/sdp\"},body:offer.sdp});if(!res.ok){throw new Error(\"WebRTC failed: \".concat(res.status));}const answer=await res.text();await pc.setRemoteDescription({type:\"answer\",sdp:answer});const entry={pc,media,refs:1};streamPool.set(key,entry);return entry;}catch(err){pc.close();throw err;}}/**\r\n * Release stream (with grace period)\r\n */function releaseStream(camId){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"sub\";const key=\"\".concat(camId,\"_\").concat(type);const entry=streamPool.get(key);if(!entry)return;entry.refs--;console.log(\"[SmartDual] Released \".concat(key,\", refs: \").concat(entry.refs));if(entry.refs<=0){setTimeout(()=>{const currentEntry=streamPool.get(key);if(currentEntry&&currentEntry.refs<=0){console.log(\"[SmartDual] Closing idle \".concat(key));currentEntry.pc.close();streamPool.delete(key);}},5000);// 5s grace period (shorter for faster cleanup)\n}}/**\r\n * SMART DUAL STREAM PLAYER\r\n */export default function SmartDualStreamPlayer(_ref){let{camId,isFullscreen,isHidden,isHovered,posterUrl,style}=_ref;const videoRef=useRef(null);const[subStream,setSubStream]=useState(null);const[mainStream,setMainStream]=useState(null);const[currentStream,setCurrentStream]=useState(\"sub\");const[posterVisible,setPosterVisible]=useState(true);// Reset poster visibility when switching modes or cameras\nuseEffect(()=>{setPosterVisible(true);},[camId,isFullscreen]);// Handle video play event to hide poster\nconst handleCanPlay=()=>{// Delay slighty to ensure frame is rendered\n// setTimeout(() => setPosterVisible(false), 100);\nsetPosterVisible(false);};// Always acquire substream\nuseEffect(()=>{if(isHidden||!camId)return;let active=true;let subEntry;acquireStream(camId,\"sub\").then(sub=>{if(!active){releaseStream(camId,\"sub\");return;}subEntry=sub;setSubStream(sub);// Attach substream to video if not fullscreen\nif(videoRef.current&&!isFullscreen){videoRef.current.srcObject=sub.media;videoRef.current.play().catch(()=>{});}}).catch(err=>{console.error(\"[SmartDual] Error for sub \".concat(camId,\":\"),err);});return()=>{active=false;if(subEntry)releaseStream(camId,\"sub\");};},[camId,isHidden,isFullscreen]);// SMART WARM STANDBY with DEBOUNCE: Pre-connect main stream on sustained HOVER or FULLSCREEN\nuseEffect(()=>{let debounceTimer;let mainEntry;const cleanup=()=>{if(debounceTimer)clearTimeout(debounceTimer);if(mainEntry)releaseStream(camId,\"hd\");};// Immediate connection for fullscreen\nif(isFullscreen&&!isHidden&&camId){acquireStream(camId,\"hd\").then(main=>{mainEntry=main;setMainStream(main);if(videoRef.current){videoRef.current.srcObject=main.media;videoRef.current.play().catch(()=>{});setCurrentStream(\"main\");}}).catch(err=>console.error(\"[SmartDual] Error for main \".concat(camId,\":\"),err));}// Debounced connection for hover (800ms delay)\nelse if(isHovered&&!isHidden&&camId&&!isFullscreen){debounceTimer=setTimeout(()=>{console.log(\"[SmartDual] Hover sustained - pre-connecting main for \".concat(camId));acquireStream(camId,\"hd\").then(main=>{mainEntry=main;setMainStream(main);// Don't attach - warm standby only\n}).catch(err=>console.error(\"[SmartDual] Error for main \".concat(camId,\":\"),err));},800);}// Release main stream when not needed\nelse if(mainStream&&!isFullscreen&&!isHovered){releaseStream(camId,\"hd\");setMainStream(null);}return cleanup;},[isHovered,isFullscreen,camId,isHidden]);// INSTANT SWITCH when fullscreen changes\nuseEffect(()=>{if(!videoRef.current)return;// Show poster briefly on switch\nsetPosterVisible(true);if(isFullscreen&&mainStream){// Switch to main\nconsole.log(\"[SmartDual] Switching to MAIN for \".concat(camId));videoRef.current.srcObject=mainStream.media;videoRef.current.play().catch(()=>{});setCurrentStream(\"main\");}else if(!isFullscreen&&subStream){// Switch back to sub\nconsole.log(\"[SmartDual] Switching to SUB for \".concat(camId));videoRef.current.srcObject=subStream.media;videoRef.current.play().catch(()=>{});setCurrentStream(\"sub\");}},[isFullscreen,subStream,mainStream,camId]);return/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},style),{},{position:\"relative\",background:\"#000\",width:\"100%\",height:\"100%\",overflow:\"hidden\"}),children:[posterUrl&&/*#__PURE__*/_jsx(\"img\",{src:posterUrl,loading:\"eager\",style:{position:\"absolute\",top:0,left:0,width:\"100%\",height:\"100%\",objectFit:\"fill\",zIndex:10,opacity:posterVisible?1:0,transition:\"opacity 150ms ease-out\",pointerEvents:\"none\"},onError:e=>e.target.style.display='none',alt:\"\"}),/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,muted:true,playsInline:true,onPlaying:handleCanPlay,style:{width:\"100%\",height:\"100%\",objectFit:\"fill\",position:\"absolute\",top:0,left:0}}),process.env.NODE_ENV==='development'&&/*#__PURE__*/_jsxs(\"div\",{style:{position:\"absolute\",top:4,right:4,background:\"rgba(0,0,0,0.7)\",color:mainStream?\"#0f0\":\"#ff0\",padding:\"2px 6px\",fontSize:10,fontFamily:\"monospace\",zIndex:20},children:[currentStream.toUpperCase(),\" \",mainStream&&!isFullscreen?\"(STANDBY)\":\"\"]})]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","jsx","_jsx","jsxs","_jsxs","GO2RTC_API","concat","window","location","origin","streamPool","Map","acquireStream","camId","type","arguments","length","undefined","key","has","entry","get","refs","console","log","pc","RTCPeerConnection","iceServers","media","MediaStream","ontrack","e","addTrack","track","addTransceiver","direction","offer","createOffer","setLocalDescription","res","fetch","method","headers","body","sdp","ok","Error","status","answer","text","setRemoteDescription","set","err","close","releaseStream","setTimeout","currentEntry","delete","SmartDualStreamPlayer","_ref","isFullscreen","isHidden","isHovered","posterUrl","style","videoRef","subStream","setSubStream","mainStream","setMainStream","currentStream","setCurrentStream","posterVisible","setPosterVisible","handleCanPlay","active","subEntry","then","sub","current","srcObject","play","catch","error","debounceTimer","mainEntry","cleanup","clearTimeout","main","_objectSpread","position","background","width","height","overflow","children","src","loading","top","left","objectFit","zIndex","opacity","transition","pointerEvents","onError","target","display","alt","ref","autoPlay","muted","playsInline","onPlaying","process","env","NODE_ENV","right","color","padding","fontSize","fontFamily","toUpperCase"],"sources":["I:/dispecerat/github_release/dss-edge/local-ui/src/components/DualStreamPlayer.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\n\r\n/**\r\n * SMART DUAL STREAM MANAGER - Trassir-like with Smart Warm Standby\r\n * \r\n * ARCHITECTURE:\r\n * - Grid: substream only (low CPU)\r\n * - Hover: pre-connect main stream (warm standby)\r\n * - Fullscreen: instant switch (main already connected)\r\n * \r\n * CPU OPTIMIZATION:\r\n * - Only 1 main stream in warm standby at a time\r\n * - Grid idle: minimal overhead (25 substreams only)\r\n * - Switch: <200ms (connection already established)\r\n */\r\n\r\nconst GO2RTC_API = `${window.location.origin}/rtc`;\r\nconst streamPool = new Map();\r\n\r\n/**\r\n * Acquire WebRTC stream (reuses existing connections)\r\n */\r\nasync function acquireStream(camId, type = \"sub\") {\r\n    const key = `${camId}_${type}`;\r\n\r\n    if (streamPool.has(key)) {\r\n        const entry = streamPool.get(key);\r\n        entry.refs++;\r\n        console.log(`[SmartDual] Reusing ${key}, refs: ${entry.refs}`);\r\n        return entry;\r\n    }\r\n\r\n    console.log(`[SmartDual] Creating WebRTC for ${key}`);\r\n    const pc = new RTCPeerConnection({ iceServers: [] });\r\n    const media = new MediaStream();\r\n\r\n    pc.ontrack = (e) => {\r\n        console.log(`[SmartDual] Track received for ${key}`);\r\n        media.addTrack(e.track);\r\n    };\r\n\r\n    pc.addTransceiver(\"video\", { direction: \"recvonly\" });\r\n\r\n    try {\r\n        const offer = await pc.createOffer();\r\n        await pc.setLocalDescription(offer);\r\n\r\n        const res = await fetch(`${GO2RTC_API}/api/webrtc?src=${key}`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/sdp\" },\r\n            body: offer.sdp\r\n        });\r\n\r\n        if (!res.ok) {\r\n            throw new Error(`WebRTC failed: ${res.status}`);\r\n        }\r\n\r\n        const answer = await res.text();\r\n        await pc.setRemoteDescription({ type: \"answer\", sdp: answer });\r\n\r\n        const entry = { pc, media, refs: 1 };\r\n        streamPool.set(key, entry);\r\n        return entry;\r\n    } catch (err) {\r\n        pc.close();\r\n        throw err;\r\n    }\r\n}\r\n\r\n/**\r\n * Release stream (with grace period)\r\n */\r\nfunction releaseStream(camId, type = \"sub\") {\r\n    const key = `${camId}_${type}`;\r\n    const entry = streamPool.get(key);\r\n    if (!entry) return;\r\n\r\n    entry.refs--;\r\n    console.log(`[SmartDual] Released ${key}, refs: ${entry.refs}`);\r\n\r\n    if (entry.refs <= 0) {\r\n        setTimeout(() => {\r\n            const currentEntry = streamPool.get(key);\r\n            if (currentEntry && currentEntry.refs <= 0) {\r\n                console.log(`[SmartDual] Closing idle ${key}`);\r\n                currentEntry.pc.close();\r\n                streamPool.delete(key);\r\n            }\r\n        }, 5000); // 5s grace period (shorter for faster cleanup)\r\n    }\r\n}\r\n\r\n/**\r\n * SMART DUAL STREAM PLAYER\r\n */\r\nexport default function SmartDualStreamPlayer({ camId, isFullscreen, isHidden, isHovered, posterUrl, style }) {\r\n    const videoRef = useRef(null);\r\n    const [subStream, setSubStream] = useState(null);\r\n    const [mainStream, setMainStream] = useState(null);\r\n    const [currentStream, setCurrentStream] = useState(\"sub\");\r\n    const [posterVisible, setPosterVisible] = useState(true);\r\n\r\n    // Reset poster visibility when switching modes or cameras\r\n    useEffect(() => {\r\n        setPosterVisible(true);\r\n    }, [camId, isFullscreen]);\r\n\r\n    // Handle video play event to hide poster\r\n    const handleCanPlay = () => {\r\n        // Delay slighty to ensure frame is rendered\r\n        // setTimeout(() => setPosterVisible(false), 100);\r\n        setPosterVisible(false);\r\n    };\r\n\r\n    // Always acquire substream\r\n    useEffect(() => {\r\n        if (isHidden || !camId) return;\r\n\r\n        let active = true;\r\n        let subEntry;\r\n\r\n        acquireStream(camId, \"sub\")\r\n            .then((sub) => {\r\n                if (!active) {\r\n                    releaseStream(camId, \"sub\");\r\n                    return;\r\n                }\r\n                subEntry = sub;\r\n                setSubStream(sub);\r\n\r\n                // Attach substream to video if not fullscreen\r\n                if (videoRef.current && !isFullscreen) {\r\n                    videoRef.current.srcObject = sub.media;\r\n                    videoRef.current.play().catch(() => { });\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.error(`[SmartDual] Error for sub ${camId}:`, err);\r\n            });\r\n\r\n        return () => {\r\n            active = false;\r\n            if (subEntry) releaseStream(camId, \"sub\");\r\n        };\r\n    }, [camId, isHidden, isFullscreen]);\r\n\r\n    // SMART WARM STANDBY with DEBOUNCE: Pre-connect main stream on sustained HOVER or FULLSCREEN\r\n    useEffect(() => {\r\n        let debounceTimer;\r\n        let mainEntry;\r\n\r\n        const cleanup = () => {\r\n            if (debounceTimer) clearTimeout(debounceTimer);\r\n            if (mainEntry) releaseStream(camId, \"hd\");\r\n        };\r\n\r\n        // Immediate connection for fullscreen\r\n        if (isFullscreen && !isHidden && camId) {\r\n            acquireStream(camId, \"hd\")\r\n                .then((main) => {\r\n                    mainEntry = main;\r\n                    setMainStream(main);\r\n                    if (videoRef.current) {\r\n                        videoRef.current.srcObject = main.media;\r\n                        videoRef.current.play().catch(() => { });\r\n                        setCurrentStream(\"main\");\r\n                    }\r\n                })\r\n                .catch((err) => console.error(`[SmartDual] Error for main ${camId}:`, err));\r\n        }\r\n        // Debounced connection for hover (800ms delay)\r\n        else if (isHovered && !isHidden && camId && !isFullscreen) {\r\n            debounceTimer = setTimeout(() => {\r\n                console.log(`[SmartDual] Hover sustained - pre-connecting main for ${camId}`);\r\n                acquireStream(camId, \"hd\")\r\n                    .then((main) => {\r\n                        mainEntry = main;\r\n                        setMainStream(main);\r\n                        // Don't attach - warm standby only\r\n                    })\r\n                    .catch((err) => console.error(`[SmartDual] Error for main ${camId}:`, err));\r\n            }, 800);\r\n        }\r\n        // Release main stream when not needed\r\n        else if (mainStream && !isFullscreen && !isHovered) {\r\n            releaseStream(camId, \"hd\");\r\n            setMainStream(null);\r\n        }\r\n\r\n        return cleanup;\r\n    }, [isHovered, isFullscreen, camId, isHidden]);\r\n\r\n    // INSTANT SWITCH when fullscreen changes\r\n    useEffect(() => {\r\n        if (!videoRef.current) return;\r\n\r\n        // Show poster briefly on switch\r\n        setPosterVisible(true);\r\n\r\n        if (isFullscreen && mainStream) {\r\n            // Switch to main\r\n            console.log(`[SmartDual] Switching to MAIN for ${camId}`);\r\n            videoRef.current.srcObject = mainStream.media;\r\n            videoRef.current.play().catch(() => { });\r\n            setCurrentStream(\"main\");\r\n        } else if (!isFullscreen && subStream) {\r\n            // Switch back to sub\r\n            console.log(`[SmartDual] Switching to SUB for ${camId}`);\r\n            videoRef.current.srcObject = subStream.media;\r\n            videoRef.current.play().catch(() => { });\r\n            setCurrentStream(\"sub\");\r\n        }\r\n    }, [isFullscreen, subStream, mainStream, camId]);\r\n\r\n    return (\r\n        <div style={{ ...style, position: \"relative\", background: \"#000\", width: \"100%\", height: \"100%\", overflow: \"hidden\" }}>\r\n            {/* STATIC POSTER (Zero Latency UX) */}\r\n            {posterUrl && (\r\n                <img\r\n                    src={posterUrl}\r\n                    loading=\"eager\"\r\n                    style={{\r\n                        position: \"absolute\",\r\n                        top: 0,\r\n                        left: 0,\r\n                        width: \"100%\",\r\n                        height: \"100%\",\r\n                        objectFit: \"fill\",\r\n                        zIndex: 10,\r\n                        opacity: posterVisible ? 1 : 0,\r\n                        transition: \"opacity 150ms ease-out\",\r\n                        pointerEvents: \"none\"\r\n                    }}\r\n                    onError={(e) => e.target.style.display = 'none'}\r\n                    alt=\"\"\r\n                />\r\n            )}\r\n\r\n            <video\r\n                ref={videoRef}\r\n                autoPlay\r\n                muted\r\n                playsInline\r\n                onPlaying={handleCanPlay}\r\n                style={{\r\n                    width: \"100%\",\r\n                    height: \"100%\",\r\n                    objectFit: \"fill\",\r\n                    position: \"absolute\",\r\n                    top: 0,\r\n                    left: 0\r\n                }}\r\n            />\r\n            {/* Debug indicator */}\r\n            {process.env.NODE_ENV === 'development' && (\r\n                <div style={{\r\n                    position: \"absolute\",\r\n                    top: 4,\r\n                    right: 4,\r\n                    background: \"rgba(0,0,0,0.7)\",\r\n                    color: mainStream ? \"#0f0\" : \"#ff0\",\r\n                    padding: \"2px 6px\",\r\n                    fontSize: 10,\r\n                    fontFamily: \"monospace\",\r\n                    zIndex: 20\r\n                }}>\r\n                    {currentStream.toUpperCase()} {mainStream && !isFullscreen ? \"(STANDBY)\" : \"\"}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}